var J_=t=>{throw TypeError(t)};var qg=(t,e,n)=>e.has(t)||J_("Cannot "+n);var J=(t,e,n)=>(qg(t,e,"read from private field"),n?n.call(t):e.get(t)),st=(t,e,n)=>e.has(t)?J_("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Fe=(t,e,n,r)=>(qg(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),_n=(t,e,n)=>(qg(t,e,"access private method"),n);var $h=(t,e,n,r)=>({set _(s){Fe(t,e,s,n)},get _(){return J(t,e,r)}});function PO(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function IT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var TT={exports:{}},gp={},NT={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ud=Symbol.for("react.element"),RO=Symbol.for("react.portal"),jO=Symbol.for("react.fragment"),kO=Symbol.for("react.strict_mode"),DO=Symbol.for("react.profiler"),MO=Symbol.for("react.provider"),OO=Symbol.for("react.context"),LO=Symbol.for("react.forward_ref"),VO=Symbol.for("react.suspense"),FO=Symbol.for("react.memo"),$O=Symbol.for("react.lazy"),Z_=Symbol.iterator;function UO(t){return t===null||typeof t!="object"?null:(t=Z_&&t[Z_]||t["@@iterator"],typeof t=="function"?t:null)}var CT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},AT=Object.assign,PT={};function wc(t,e,n){this.props=t,this.context=e,this.refs=PT,this.updater=n||CT}wc.prototype.isReactComponent={};wc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};wc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function RT(){}RT.prototype=wc.prototype;function Z0(t,e,n){this.props=t,this.context=e,this.refs=PT,this.updater=n||CT}var ex=Z0.prototype=new RT;ex.constructor=Z0;AT(ex,wc.prototype);ex.isPureReactComponent=!0;var eE=Array.isArray,jT=Object.prototype.hasOwnProperty,tx={current:null},kT={key:!0,ref:!0,__self:!0,__source:!0};function DT(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)jT.call(e,r)&&!kT.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Ud,type:t,key:i,ref:o,props:s,_owner:tx.current}}function BO(t,e){return{$$typeof:Ud,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function nx(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ud}function zO(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var tE=/\/+/g;function Wg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?zO(""+t.key):e.toString(36)}function Ef(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ud:case RO:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Wg(o,0):r,eE(s)?(n="",t!=null&&(n=t.replace(tE,"$&/")+"/"),Ef(s,e,n,"",function(u){return u})):s!=null&&(nx(s)&&(s=BO(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(tE,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",eE(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Wg(i,l);o+=Ef(i,e,n,c,s)}else if(c=UO(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Wg(i,l++),o+=Ef(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Uh(t,e,n){if(t==null)return t;var r=[],s=0;return Ef(t,r,"","",function(i){return e.call(n,i,s++)}),r}function qO(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var zn={current:null},Sf={transition:null},WO={ReactCurrentDispatcher:zn,ReactCurrentBatchConfig:Sf,ReactCurrentOwner:tx};function MT(){throw Error("act(...) is not supported in production builds of React.")}ze.Children={map:Uh,forEach:function(t,e,n){Uh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Uh(t,function(){e++}),e},toArray:function(t){return Uh(t,function(e){return e})||[]},only:function(t){if(!nx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ze.Component=wc;ze.Fragment=jO;ze.Profiler=DO;ze.PureComponent=Z0;ze.StrictMode=kO;ze.Suspense=VO;ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WO;ze.act=MT;ze.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=AT({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=tx.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)jT.call(e,c)&&!kT.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Ud,type:t.type,key:s,ref:i,props:r,_owner:o}};ze.createContext=function(t){return t={$$typeof:OO,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:MO,_context:t},t.Consumer=t};ze.createElement=DT;ze.createFactory=function(t){var e=DT.bind(null,t);return e.type=t,e};ze.createRef=function(){return{current:null}};ze.forwardRef=function(t){return{$$typeof:LO,render:t}};ze.isValidElement=nx;ze.lazy=function(t){return{$$typeof:$O,_payload:{_status:-1,_result:t},_init:qO}};ze.memo=function(t,e){return{$$typeof:FO,type:t,compare:e===void 0?null:e}};ze.startTransition=function(t){var e=Sf.transition;Sf.transition={};try{t()}finally{Sf.transition=e}};ze.unstable_act=MT;ze.useCallback=function(t,e){return zn.current.useCallback(t,e)};ze.useContext=function(t){return zn.current.useContext(t)};ze.useDebugValue=function(){};ze.useDeferredValue=function(t){return zn.current.useDeferredValue(t)};ze.useEffect=function(t,e){return zn.current.useEffect(t,e)};ze.useId=function(){return zn.current.useId()};ze.useImperativeHandle=function(t,e,n){return zn.current.useImperativeHandle(t,e,n)};ze.useInsertionEffect=function(t,e){return zn.current.useInsertionEffect(t,e)};ze.useLayoutEffect=function(t,e){return zn.current.useLayoutEffect(t,e)};ze.useMemo=function(t,e){return zn.current.useMemo(t,e)};ze.useReducer=function(t,e,n){return zn.current.useReducer(t,e,n)};ze.useRef=function(t){return zn.current.useRef(t)};ze.useState=function(t){return zn.current.useState(t)};ze.useSyncExternalStore=function(t,e,n){return zn.current.useSyncExternalStore(t,e,n)};ze.useTransition=function(){return zn.current.useTransition()};ze.version="18.3.1";NT.exports=ze;var p=NT.exports;const re=IT(p),OT=PO({__proto__:null,default:re},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HO=p,KO=Symbol.for("react.element"),GO=Symbol.for("react.fragment"),QO=Object.prototype.hasOwnProperty,YO=HO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,XO={key:!0,ref:!0,__self:!0,__source:!0};function LT(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)QO.call(e,r)&&!XO.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:KO,type:t,key:i,ref:o,props:s,_owner:YO.current}}gp.Fragment=GO;gp.jsx=LT;gp.jsxs=LT;TT.exports=gp;var a=TT.exports,VT={exports:{}},br={},FT={exports:{}},$T={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,L){var X=O.length;O.push(L);e:for(;0<X;){var Q=X-1>>>1,te=O[Q];if(0<s(te,L))O[Q]=L,O[X]=te,X=Q;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var L=O[0],X=O.pop();if(X!==L){O[0]=X;e:for(var Q=0,te=O.length,Z=te>>>1;Q<Z;){var xe=2*(Q+1)-1,Oe=O[xe],V=xe+1,B=O[V];if(0>s(Oe,X))V<te&&0>s(B,Oe)?(O[Q]=B,O[V]=X,Q=V):(O[Q]=Oe,O[xe]=X,Q=xe);else if(V<te&&0>s(B,X))O[Q]=B,O[V]=X,Q=V;else break e}}return L}function s(O,L){var X=O.sortIndex-L.sortIndex;return X!==0?X:O.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,f=null,m=3,g=!1,v=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(O){for(var L=n(u);L!==null;){if(L.callback===null)r(u);else if(L.startTime<=O)r(u),L.sortIndex=L.expirationTime,e(c,L);else break;L=n(u)}}function N(O){if(y=!1,S(O),!v)if(n(c)!==null)v=!0,q(j);else{var L=n(u);L!==null&&G(N,L.startTime-O)}}function j(O,L){v=!1,y&&(y=!1,_(I),I=-1),g=!0;var X=m;try{for(S(L),f=n(c);f!==null&&(!(f.expirationTime>L)||O&&!M());){var Q=f.callback;if(typeof Q=="function"){f.callback=null,m=f.priorityLevel;var te=Q(f.expirationTime<=L);L=t.unstable_now(),typeof te=="function"?f.callback=te:f===n(c)&&r(c),S(L)}else r(c);f=n(c)}if(f!==null)var Z=!0;else{var xe=n(u);xe!==null&&G(N,xe.startTime-L),Z=!1}return Z}finally{f=null,m=X,g=!1}}var D=!1,T=null,I=-1,C=5,R=-1;function M(){return!(t.unstable_now()-R<C)}function P(){if(T!==null){var O=t.unstable_now();R=O;var L=!0;try{L=T(!0,O)}finally{L?A():(D=!1,T=null)}}else D=!1}var A;if(typeof w=="function")A=function(){w(P)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,Y=F.port2;F.port1.onmessage=P,A=function(){Y.postMessage(null)}}else A=function(){b(P,0)};function q(O){T=O,D||(D=!0,A())}function G(O,L){I=b(function(){O(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,q(j))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(O){switch(m){case 1:case 2:case 3:var L=3;break;default:L=m}var X=m;m=L;try{return O()}finally{m=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,L){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var X=m;m=O;try{return L()}finally{m=X}},t.unstable_scheduleCallback=function(O,L,X){var Q=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Q+X:Q):X=Q,O){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=X+te,O={id:h++,callback:L,priorityLevel:O,startTime:X,expirationTime:te,sortIndex:-1},X>Q?(O.sortIndex=X,e(u,O),n(c)===null&&O===n(u)&&(y?(_(I),I=-1):y=!0,G(N,X-Q))):(O.sortIndex=te,e(c,O),v||g||(v=!0,q(j))),O},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(O){var L=m;return function(){var X=m;m=L;try{return O.apply(this,arguments)}finally{m=X}}}})($T);FT.exports=$T;var JO=FT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZO=p,xr=JO;function ie(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var UT=new Set,Yu={};function Pa(t,e){Kl(t,e),Kl(t+"Capture",e)}function Kl(t,e){for(Yu[t]=e,t=0;t<e.length;t++)UT.add(e[t])}var Gs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xy=Object.prototype.hasOwnProperty,eL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nE={},rE={};function tL(t){return Xy.call(rE,t)?!0:Xy.call(nE,t)?!1:eL.test(t)?rE[t]=!0:(nE[t]=!0,!1)}function nL(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function rL(t,e,n,r){if(e===null||typeof e>"u"||nL(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var pn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pn[t]=new qn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pn[e]=new qn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pn[t]=new qn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pn[t]=new qn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pn[t]=new qn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pn[t]=new qn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pn[t]=new qn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pn[t]=new qn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pn[t]=new qn(t,5,!1,t.toLowerCase(),null,!1,!1)});var rx=/[\-:]([a-z])/g;function sx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(rx,sx);pn[e]=new qn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(rx,sx);pn[e]=new qn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(rx,sx);pn[e]=new qn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pn[t]=new qn(t,1,!1,t.toLowerCase(),null,!1,!1)});pn.xlinkHref=new qn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pn[t]=new qn(t,1,!1,t.toLowerCase(),null,!0,!0)});function ix(t,e,n,r){var s=pn.hasOwnProperty(e)?pn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(rL(e,n,s,r)&&(n=null),r||s===null?tL(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ii=ZO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bh=Symbol.for("react.element"),ul=Symbol.for("react.portal"),dl=Symbol.for("react.fragment"),ox=Symbol.for("react.strict_mode"),Jy=Symbol.for("react.profiler"),BT=Symbol.for("react.provider"),zT=Symbol.for("react.context"),ax=Symbol.for("react.forward_ref"),Zy=Symbol.for("react.suspense"),ev=Symbol.for("react.suspense_list"),lx=Symbol.for("react.memo"),Ni=Symbol.for("react.lazy"),qT=Symbol.for("react.offscreen"),sE=Symbol.iterator;function Jc(t){return t===null||typeof t!="object"?null:(t=sE&&t[sE]||t["@@iterator"],typeof t=="function"?t:null)}var Dt=Object.assign,Hg;function vu(t){if(Hg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Hg=e&&e[1]||""}return`
`+Hg+t}var Kg=!1;function Gg(t,e){if(!t||Kg)return"";Kg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Kg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?vu(t):""}function sL(t){switch(t.tag){case 5:return vu(t.type);case 16:return vu("Lazy");case 13:return vu("Suspense");case 19:return vu("SuspenseList");case 0:case 2:case 15:return t=Gg(t.type,!1),t;case 11:return t=Gg(t.type.render,!1),t;case 1:return t=Gg(t.type,!0),t;default:return""}}function tv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case dl:return"Fragment";case ul:return"Portal";case Jy:return"Profiler";case ox:return"StrictMode";case Zy:return"Suspense";case ev:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zT:return(t.displayName||"Context")+".Consumer";case BT:return(t._context.displayName||"Context")+".Provider";case ax:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case lx:return e=t.displayName||null,e!==null?e:tv(t.type)||"Memo";case Ni:e=t._payload,t=t._init;try{return tv(t(e))}catch{}}return null}function iL(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tv(e);case 8:return e===ox?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function io(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function WT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function oL(t){var e=WT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function zh(t){t._valueTracker||(t._valueTracker=oL(t))}function HT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=WT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function tm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function nv(t,e){var n=e.checked;return Dt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function iE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=io(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function KT(t,e){e=e.checked,e!=null&&ix(t,"checked",e,!1)}function rv(t,e){KT(t,e);var n=io(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?sv(t,e.type,n):e.hasOwnProperty("defaultValue")&&sv(t,e.type,io(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function oE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function sv(t,e,n){(e!=="number"||tm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var xu=Array.isArray;function El(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+io(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function iv(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ie(91));return Dt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function aE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ie(92));if(xu(n)){if(1<n.length)throw Error(ie(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:io(n)}}function GT(t,e){var n=io(e.value),r=io(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function lE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function QT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ov(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?QT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var qh,YT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(qh=qh||document.createElement("div"),qh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Xu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ju={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aL=["Webkit","ms","Moz","O"];Object.keys(ju).forEach(function(t){aL.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ju[e]=ju[t]})});function XT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ju.hasOwnProperty(t)&&ju[t]?(""+e).trim():e+"px"}function JT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=XT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var lL=Dt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function av(t,e){if(e){if(lL[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ie(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ie(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ie(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ie(62))}}function lv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cv=null;function cx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var uv=null,Sl=null,Il=null;function cE(t){if(t=qd(t)){if(typeof uv!="function")throw Error(ie(280));var e=t.stateNode;e&&(e=bp(e),uv(t.stateNode,t.type,e))}}function ZT(t){Sl?Il?Il.push(t):Il=[t]:Sl=t}function eN(){if(Sl){var t=Sl,e=Il;if(Il=Sl=null,cE(t),e)for(t=0;t<e.length;t++)cE(e[t])}}function tN(t,e){return t(e)}function nN(){}var Qg=!1;function rN(t,e,n){if(Qg)return t(e,n);Qg=!0;try{return tN(t,e,n)}finally{Qg=!1,(Sl!==null||Il!==null)&&(nN(),eN())}}function Ju(t,e){var n=t.stateNode;if(n===null)return null;var r=bp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ie(231,e,typeof n));return n}var dv=!1;if(Gs)try{var Zc={};Object.defineProperty(Zc,"passive",{get:function(){dv=!0}}),window.addEventListener("test",Zc,Zc),window.removeEventListener("test",Zc,Zc)}catch{dv=!1}function cL(t,e,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var ku=!1,nm=null,rm=!1,hv=null,uL={onError:function(t){ku=!0,nm=t}};function dL(t,e,n,r,s,i,o,l,c){ku=!1,nm=null,cL.apply(uL,arguments)}function hL(t,e,n,r,s,i,o,l,c){if(dL.apply(this,arguments),ku){if(ku){var u=nm;ku=!1,nm=null}else throw Error(ie(198));rm||(rm=!0,hv=u)}}function Ra(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function sN(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function uE(t){if(Ra(t)!==t)throw Error(ie(188))}function fL(t){var e=t.alternate;if(!e){if(e=Ra(t),e===null)throw Error(ie(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return uE(s),t;if(i===r)return uE(s),e;i=i.sibling}throw Error(ie(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(ie(189))}}if(n.alternate!==r)throw Error(ie(190))}if(n.tag!==3)throw Error(ie(188));return n.stateNode.current===n?t:e}function iN(t){return t=fL(t),t!==null?oN(t):null}function oN(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=oN(t);if(e!==null)return e;t=t.sibling}return null}var aN=xr.unstable_scheduleCallback,dE=xr.unstable_cancelCallback,mL=xr.unstable_shouldYield,pL=xr.unstable_requestPaint,$t=xr.unstable_now,gL=xr.unstable_getCurrentPriorityLevel,ux=xr.unstable_ImmediatePriority,lN=xr.unstable_UserBlockingPriority,sm=xr.unstable_NormalPriority,yL=xr.unstable_LowPriority,cN=xr.unstable_IdlePriority,yp=null,xs=null;function vL(t){if(xs&&typeof xs.onCommitFiberRoot=="function")try{xs.onCommitFiberRoot(yp,t,void 0,(t.current.flags&128)===128)}catch{}}var Xr=Math.clz32?Math.clz32:bL,xL=Math.log,wL=Math.LN2;function bL(t){return t>>>=0,t===0?32:31-(xL(t)/wL|0)|0}var Wh=64,Hh=4194304;function wu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function im(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=wu(l):(i&=o,i!==0&&(r=wu(i)))}else o=n&~s,o!==0?r=wu(o):i!==0&&(r=wu(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Xr(e),s=1<<n,r|=t[n],e&=~s;return r}function _L(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function EL(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Xr(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=_L(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function fv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function uN(){var t=Wh;return Wh<<=1,!(Wh&4194240)&&(Wh=64),t}function Yg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Bd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Xr(e),t[e]=n}function SL(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Xr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function dx(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Xr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ut=0;function dN(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var hN,hx,fN,mN,pN,mv=!1,Kh=[],qi=null,Wi=null,Hi=null,Zu=new Map,ed=new Map,Ai=[],IL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hE(t,e){switch(t){case"focusin":case"focusout":qi=null;break;case"dragenter":case"dragleave":Wi=null;break;case"mouseover":case"mouseout":Hi=null;break;case"pointerover":case"pointerout":Zu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ed.delete(e.pointerId)}}function eu(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=qd(e),e!==null&&hx(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function TL(t,e,n,r,s){switch(e){case"focusin":return qi=eu(qi,t,e,n,r,s),!0;case"dragenter":return Wi=eu(Wi,t,e,n,r,s),!0;case"mouseover":return Hi=eu(Hi,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Zu.set(i,eu(Zu.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ed.set(i,eu(ed.get(i)||null,t,e,n,r,s)),!0}return!1}function gN(t){var e=Ho(t.target);if(e!==null){var n=Ra(e);if(n!==null){if(e=n.tag,e===13){if(e=sN(n),e!==null){t.blockedOn=e,pN(t.priority,function(){fN(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function If(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=pv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);cv=r,n.target.dispatchEvent(r),cv=null}else return e=qd(n),e!==null&&hx(e),t.blockedOn=n,!1;e.shift()}return!0}function fE(t,e,n){If(t)&&n.delete(e)}function NL(){mv=!1,qi!==null&&If(qi)&&(qi=null),Wi!==null&&If(Wi)&&(Wi=null),Hi!==null&&If(Hi)&&(Hi=null),Zu.forEach(fE),ed.forEach(fE)}function tu(t,e){t.blockedOn===e&&(t.blockedOn=null,mv||(mv=!0,xr.unstable_scheduleCallback(xr.unstable_NormalPriority,NL)))}function td(t){function e(s){return tu(s,t)}if(0<Kh.length){tu(Kh[0],t);for(var n=1;n<Kh.length;n++){var r=Kh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(qi!==null&&tu(qi,t),Wi!==null&&tu(Wi,t),Hi!==null&&tu(Hi,t),Zu.forEach(e),ed.forEach(e),n=0;n<Ai.length;n++)r=Ai[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ai.length&&(n=Ai[0],n.blockedOn===null);)gN(n),n.blockedOn===null&&Ai.shift()}var Tl=ii.ReactCurrentBatchConfig,om=!0;function CL(t,e,n,r){var s=ut,i=Tl.transition;Tl.transition=null;try{ut=1,fx(t,e,n,r)}finally{ut=s,Tl.transition=i}}function AL(t,e,n,r){var s=ut,i=Tl.transition;Tl.transition=null;try{ut=4,fx(t,e,n,r)}finally{ut=s,Tl.transition=i}}function fx(t,e,n,r){if(om){var s=pv(t,e,n,r);if(s===null)oy(t,e,r,am,n),hE(t,r);else if(TL(s,t,e,n,r))r.stopPropagation();else if(hE(t,r),e&4&&-1<IL.indexOf(t)){for(;s!==null;){var i=qd(s);if(i!==null&&hN(i),i=pv(t,e,n,r),i===null&&oy(t,e,r,am,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else oy(t,e,r,null,n)}}var am=null;function pv(t,e,n,r){if(am=null,t=cx(r),t=Ho(t),t!==null)if(e=Ra(t),e===null)t=null;else if(n=e.tag,n===13){if(t=sN(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return am=t,null}function yN(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gL()){case ux:return 1;case lN:return 4;case sm:case yL:return 16;case cN:return 536870912;default:return 16}default:return 16}}var Fi=null,mx=null,Tf=null;function vN(){if(Tf)return Tf;var t,e=mx,n=e.length,r,s="value"in Fi?Fi.value:Fi.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Tf=s.slice(t,1<r?1-r:void 0)}function Nf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Gh(){return!0}function mE(){return!1}function _r(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Gh:mE,this.isPropagationStopped=mE,this}return Dt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Gh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Gh)},persist:function(){},isPersistent:Gh}),e}var bc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},px=_r(bc),zd=Dt({},bc,{view:0,detail:0}),PL=_r(zd),Xg,Jg,nu,vp=Dt({},zd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==nu&&(nu&&t.type==="mousemove"?(Xg=t.screenX-nu.screenX,Jg=t.screenY-nu.screenY):Jg=Xg=0,nu=t),Xg)},movementY:function(t){return"movementY"in t?t.movementY:Jg}}),pE=_r(vp),RL=Dt({},vp,{dataTransfer:0}),jL=_r(RL),kL=Dt({},zd,{relatedTarget:0}),Zg=_r(kL),DL=Dt({},bc,{animationName:0,elapsedTime:0,pseudoElement:0}),ML=_r(DL),OL=Dt({},bc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),LL=_r(OL),VL=Dt({},bc,{data:0}),gE=_r(VL),FL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$L={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BL(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=UL[t])?!!e[t]:!1}function gx(){return BL}var zL=Dt({},zd,{key:function(t){if(t.key){var e=FL[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Nf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$L[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gx,charCode:function(t){return t.type==="keypress"?Nf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Nf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qL=_r(zL),WL=Dt({},vp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yE=_r(WL),HL=Dt({},zd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gx}),KL=_r(HL),GL=Dt({},bc,{propertyName:0,elapsedTime:0,pseudoElement:0}),QL=_r(GL),YL=Dt({},vp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),XL=_r(YL),JL=[9,13,27,32],yx=Gs&&"CompositionEvent"in window,Du=null;Gs&&"documentMode"in document&&(Du=document.documentMode);var ZL=Gs&&"TextEvent"in window&&!Du,xN=Gs&&(!yx||Du&&8<Du&&11>=Du),vE=" ",xE=!1;function wN(t,e){switch(t){case"keyup":return JL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bN(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hl=!1;function eV(t,e){switch(t){case"compositionend":return bN(e);case"keypress":return e.which!==32?null:(xE=!0,vE);case"textInput":return t=e.data,t===vE&&xE?null:t;default:return null}}function tV(t,e){if(hl)return t==="compositionend"||!yx&&wN(t,e)?(t=vN(),Tf=mx=Fi=null,hl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return xN&&e.locale!=="ko"?null:e.data;default:return null}}var nV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!nV[t.type]:e==="textarea"}function _N(t,e,n,r){ZT(r),e=lm(e,"onChange"),0<e.length&&(n=new px("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Mu=null,nd=null;function rV(t){kN(t,0)}function xp(t){var e=pl(t);if(HT(e))return t}function sV(t,e){if(t==="change")return e}var EN=!1;if(Gs){var ey;if(Gs){var ty="oninput"in document;if(!ty){var bE=document.createElement("div");bE.setAttribute("oninput","return;"),ty=typeof bE.oninput=="function"}ey=ty}else ey=!1;EN=ey&&(!document.documentMode||9<document.documentMode)}function _E(){Mu&&(Mu.detachEvent("onpropertychange",SN),nd=Mu=null)}function SN(t){if(t.propertyName==="value"&&xp(nd)){var e=[];_N(e,nd,t,cx(t)),rN(rV,e)}}function iV(t,e,n){t==="focusin"?(_E(),Mu=e,nd=n,Mu.attachEvent("onpropertychange",SN)):t==="focusout"&&_E()}function oV(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xp(nd)}function aV(t,e){if(t==="click")return xp(e)}function lV(t,e){if(t==="input"||t==="change")return xp(e)}function cV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ts=typeof Object.is=="function"?Object.is:cV;function rd(t,e){if(ts(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Xy.call(e,s)||!ts(t[s],e[s]))return!1}return!0}function EE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function SE(t,e){var n=EE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=EE(n)}}function IN(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?IN(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function TN(){for(var t=window,e=tm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=tm(t.document)}return e}function vx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function uV(t){var e=TN(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&IN(n.ownerDocument.documentElement,n)){if(r!==null&&vx(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=SE(n,i);var o=SE(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var dV=Gs&&"documentMode"in document&&11>=document.documentMode,fl=null,gv=null,Ou=null,yv=!1;function IE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;yv||fl==null||fl!==tm(r)||(r=fl,"selectionStart"in r&&vx(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ou&&rd(Ou,r)||(Ou=r,r=lm(gv,"onSelect"),0<r.length&&(e=new px("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=fl)))}function Qh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ml={animationend:Qh("Animation","AnimationEnd"),animationiteration:Qh("Animation","AnimationIteration"),animationstart:Qh("Animation","AnimationStart"),transitionend:Qh("Transition","TransitionEnd")},ny={},NN={};Gs&&(NN=document.createElement("div").style,"AnimationEvent"in window||(delete ml.animationend.animation,delete ml.animationiteration.animation,delete ml.animationstart.animation),"TransitionEvent"in window||delete ml.transitionend.transition);function wp(t){if(ny[t])return ny[t];if(!ml[t])return t;var e=ml[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in NN)return ny[t]=e[n];return t}var CN=wp("animationend"),AN=wp("animationiteration"),PN=wp("animationstart"),RN=wp("transitionend"),jN=new Map,TE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xo(t,e){jN.set(t,e),Pa(e,[t])}for(var ry=0;ry<TE.length;ry++){var sy=TE[ry],hV=sy.toLowerCase(),fV=sy[0].toUpperCase()+sy.slice(1);xo(hV,"on"+fV)}xo(CN,"onAnimationEnd");xo(AN,"onAnimationIteration");xo(PN,"onAnimationStart");xo("dblclick","onDoubleClick");xo("focusin","onFocus");xo("focusout","onBlur");xo(RN,"onTransitionEnd");Kl("onMouseEnter",["mouseout","mouseover"]);Kl("onMouseLeave",["mouseout","mouseover"]);Kl("onPointerEnter",["pointerout","pointerover"]);Kl("onPointerLeave",["pointerout","pointerover"]);Pa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mV=new Set("cancel close invalid load scroll toggle".split(" ").concat(bu));function NE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,hL(r,e,void 0,t),t.currentTarget=null}function kN(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;NE(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;NE(s,l,u),i=c}}}if(rm)throw t=hv,rm=!1,hv=null,t}function St(t,e){var n=e[_v];n===void 0&&(n=e[_v]=new Set);var r=t+"__bubble";n.has(r)||(DN(e,t,2,!1),n.add(r))}function iy(t,e,n){var r=0;e&&(r|=4),DN(n,t,r,e)}var Yh="_reactListening"+Math.random().toString(36).slice(2);function sd(t){if(!t[Yh]){t[Yh]=!0,UT.forEach(function(n){n!=="selectionchange"&&(mV.has(n)||iy(n,!1,t),iy(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Yh]||(e[Yh]=!0,iy("selectionchange",!1,e))}}function DN(t,e,n,r){switch(yN(e)){case 1:var s=CL;break;case 4:s=AL;break;default:s=fx}n=s.bind(null,e,n,t),s=void 0,!dv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function oy(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Ho(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}rN(function(){var u=i,h=cx(n),f=[];e:{var m=jN.get(t);if(m!==void 0){var g=px,v=t;switch(t){case"keypress":if(Nf(n)===0)break e;case"keydown":case"keyup":g=qL;break;case"focusin":v="focus",g=Zg;break;case"focusout":v="blur",g=Zg;break;case"beforeblur":case"afterblur":g=Zg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=pE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=jL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=KL;break;case CN:case AN:case PN:g=ML;break;case RN:g=QL;break;case"scroll":g=PL;break;case"wheel":g=XL;break;case"copy":case"cut":case"paste":g=LL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=yE}var y=(e&4)!==0,b=!y&&t==="scroll",_=y?m!==null?m+"Capture":null:m;y=[];for(var w=u,S;w!==null;){S=w;var N=S.stateNode;if(S.tag===5&&N!==null&&(S=N,_!==null&&(N=Ju(w,_),N!=null&&y.push(id(w,N,S)))),b)break;w=w.return}0<y.length&&(m=new g(m,v,null,n,h),f.push({event:m,listeners:y}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==cv&&(v=n.relatedTarget||n.fromElement)&&(Ho(v)||v[Qs]))break e;if((g||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?Ho(v):null,v!==null&&(b=Ra(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(y=pE,N="onMouseLeave",_="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(y=yE,N="onPointerLeave",_="onPointerEnter",w="pointer"),b=g==null?m:pl(g),S=v==null?m:pl(v),m=new y(N,w+"leave",g,n,h),m.target=b,m.relatedTarget=S,N=null,Ho(h)===u&&(y=new y(_,w+"enter",v,n,h),y.target=S,y.relatedTarget=b,N=y),b=N,g&&v)t:{for(y=g,_=v,w=0,S=y;S;S=za(S))w++;for(S=0,N=_;N;N=za(N))S++;for(;0<w-S;)y=za(y),w--;for(;0<S-w;)_=za(_),S--;for(;w--;){if(y===_||_!==null&&y===_.alternate)break t;y=za(y),_=za(_)}y=null}else y=null;g!==null&&CE(f,m,g,y,!1),v!==null&&b!==null&&CE(f,b,v,y,!0)}}e:{if(m=u?pl(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var j=sV;else if(wE(m))if(EN)j=lV;else{j=oV;var D=iV}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=aV);if(j&&(j=j(t,u))){_N(f,j,n,h);break e}D&&D(t,m,u),t==="focusout"&&(D=m._wrapperState)&&D.controlled&&m.type==="number"&&sv(m,"number",m.value)}switch(D=u?pl(u):window,t){case"focusin":(wE(D)||D.contentEditable==="true")&&(fl=D,gv=u,Ou=null);break;case"focusout":Ou=gv=fl=null;break;case"mousedown":yv=!0;break;case"contextmenu":case"mouseup":case"dragend":yv=!1,IE(f,n,h);break;case"selectionchange":if(dV)break;case"keydown":case"keyup":IE(f,n,h)}var T;if(yx)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else hl?wN(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(xN&&n.locale!=="ko"&&(hl||I!=="onCompositionStart"?I==="onCompositionEnd"&&hl&&(T=vN()):(Fi=h,mx="value"in Fi?Fi.value:Fi.textContent,hl=!0)),D=lm(u,I),0<D.length&&(I=new gE(I,t,null,n,h),f.push({event:I,listeners:D}),T?I.data=T:(T=bN(n),T!==null&&(I.data=T)))),(T=ZL?eV(t,n):tV(t,n))&&(u=lm(u,"onBeforeInput"),0<u.length&&(h=new gE("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=T))}kN(f,e)})}function id(t,e,n){return{instance:t,listener:e,currentTarget:n}}function lm(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ju(t,n),i!=null&&r.unshift(id(t,i,s)),i=Ju(t,e),i!=null&&r.push(id(t,i,s))),t=t.return}return r}function za(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function CE(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Ju(n,i),c!=null&&o.unshift(id(n,c,l))):s||(c=Ju(n,i),c!=null&&o.push(id(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var pV=/\r\n?/g,gV=/\u0000|\uFFFD/g;function AE(t){return(typeof t=="string"?t:""+t).replace(pV,`
`).replace(gV,"")}function Xh(t,e,n){if(e=AE(e),AE(t)!==e&&n)throw Error(ie(425))}function cm(){}var vv=null,xv=null;function wv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bv=typeof setTimeout=="function"?setTimeout:void 0,yV=typeof clearTimeout=="function"?clearTimeout:void 0,PE=typeof Promise=="function"?Promise:void 0,vV=typeof queueMicrotask=="function"?queueMicrotask:typeof PE<"u"?function(t){return PE.resolve(null).then(t).catch(xV)}:bv;function xV(t){setTimeout(function(){throw t})}function ay(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),td(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);td(e)}function Ki(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function RE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var _c=Math.random().toString(36).slice(2),ms="__reactFiber$"+_c,od="__reactProps$"+_c,Qs="__reactContainer$"+_c,_v="__reactEvents$"+_c,wV="__reactListeners$"+_c,bV="__reactHandles$"+_c;function Ho(t){var e=t[ms];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Qs]||n[ms]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=RE(t);t!==null;){if(n=t[ms])return n;t=RE(t)}return e}t=n,n=t.parentNode}return null}function qd(t){return t=t[ms]||t[Qs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function pl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ie(33))}function bp(t){return t[od]||null}var Ev=[],gl=-1;function wo(t){return{current:t}}function It(t){0>gl||(t.current=Ev[gl],Ev[gl]=null,gl--)}function wt(t,e){gl++,Ev[gl]=t.current,t.current=e}var oo={},jn=wo(oo),Jn=wo(!1),oa=oo;function Gl(t,e){var n=t.type.contextTypes;if(!n)return oo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Zn(t){return t=t.childContextTypes,t!=null}function um(){It(Jn),It(jn)}function jE(t,e,n){if(jn.current!==oo)throw Error(ie(168));wt(jn,e),wt(Jn,n)}function MN(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ie(108,iL(t)||"Unknown",s));return Dt({},n,r)}function dm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||oo,oa=jn.current,wt(jn,t),wt(Jn,Jn.current),!0}function kE(t,e,n){var r=t.stateNode;if(!r)throw Error(ie(169));n?(t=MN(t,e,oa),r.__reactInternalMemoizedMergedChildContext=t,It(Jn),It(jn),wt(jn,t)):It(Jn),wt(Jn,n)}var Ms=null,_p=!1,ly=!1;function ON(t){Ms===null?Ms=[t]:Ms.push(t)}function _V(t){_p=!0,ON(t)}function bo(){if(!ly&&Ms!==null){ly=!0;var t=0,e=ut;try{var n=Ms;for(ut=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ms=null,_p=!1}catch(s){throw Ms!==null&&(Ms=Ms.slice(t+1)),aN(ux,bo),s}finally{ut=e,ly=!1}}return null}var yl=[],vl=0,hm=null,fm=0,Ir=[],Tr=0,aa=null,Fs=1,$s="";function Oo(t,e){yl[vl++]=fm,yl[vl++]=hm,hm=t,fm=e}function LN(t,e,n){Ir[Tr++]=Fs,Ir[Tr++]=$s,Ir[Tr++]=aa,aa=t;var r=Fs;t=$s;var s=32-Xr(r)-1;r&=~(1<<s),n+=1;var i=32-Xr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Fs=1<<32-Xr(e)+s|n<<s|r,$s=i+t}else Fs=1<<i|n<<s|r,$s=t}function xx(t){t.return!==null&&(Oo(t,1),LN(t,1,0))}function wx(t){for(;t===hm;)hm=yl[--vl],yl[vl]=null,fm=yl[--vl],yl[vl]=null;for(;t===aa;)aa=Ir[--Tr],Ir[Tr]=null,$s=Ir[--Tr],Ir[Tr]=null,Fs=Ir[--Tr],Ir[Tr]=null}var pr=null,fr=null,At=!1,Yr=null;function VN(t,e){var n=Rr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function DE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,pr=t,fr=Ki(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,pr=t,fr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=aa!==null?{id:Fs,overflow:$s}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Rr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,pr=t,fr=null,!0):!1;default:return!1}}function Sv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Iv(t){if(At){var e=fr;if(e){var n=e;if(!DE(t,e)){if(Sv(t))throw Error(ie(418));e=Ki(n.nextSibling);var r=pr;e&&DE(t,e)?VN(r,n):(t.flags=t.flags&-4097|2,At=!1,pr=t)}}else{if(Sv(t))throw Error(ie(418));t.flags=t.flags&-4097|2,At=!1,pr=t}}}function ME(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;pr=t}function Jh(t){if(t!==pr)return!1;if(!At)return ME(t),At=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!wv(t.type,t.memoizedProps)),e&&(e=fr)){if(Sv(t))throw FN(),Error(ie(418));for(;e;)VN(t,e),e=Ki(e.nextSibling)}if(ME(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ie(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){fr=Ki(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}fr=null}}else fr=pr?Ki(t.stateNode.nextSibling):null;return!0}function FN(){for(var t=fr;t;)t=Ki(t.nextSibling)}function Ql(){fr=pr=null,At=!1}function bx(t){Yr===null?Yr=[t]:Yr.push(t)}var EV=ii.ReactCurrentBatchConfig;function ru(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ie(309));var r=n.stateNode}if(!r)throw Error(ie(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ie(284));if(!n._owner)throw Error(ie(290,t))}return t}function Zh(t,e){throw t=Object.prototype.toString.call(e),Error(ie(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function OE(t){var e=t._init;return e(t._payload)}function $N(t){function e(_,w){if(t){var S=_.deletions;S===null?(_.deletions=[w],_.flags|=16):S.push(w)}}function n(_,w){if(!t)return null;for(;w!==null;)e(_,w),w=w.sibling;return null}function r(_,w){for(_=new Map;w!==null;)w.key!==null?_.set(w.key,w):_.set(w.index,w),w=w.sibling;return _}function s(_,w){return _=Xi(_,w),_.index=0,_.sibling=null,_}function i(_,w,S){return _.index=S,t?(S=_.alternate,S!==null?(S=S.index,S<w?(_.flags|=2,w):S):(_.flags|=2,w)):(_.flags|=1048576,w)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function l(_,w,S,N){return w===null||w.tag!==6?(w=py(S,_.mode,N),w.return=_,w):(w=s(w,S),w.return=_,w)}function c(_,w,S,N){var j=S.type;return j===dl?h(_,w,S.props.children,N,S.key):w!==null&&(w.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ni&&OE(j)===w.type)?(N=s(w,S.props),N.ref=ru(_,w,S),N.return=_,N):(N=Df(S.type,S.key,S.props,null,_.mode,N),N.ref=ru(_,w,S),N.return=_,N)}function u(_,w,S,N){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=gy(S,_.mode,N),w.return=_,w):(w=s(w,S.children||[]),w.return=_,w)}function h(_,w,S,N,j){return w===null||w.tag!==7?(w=na(S,_.mode,N,j),w.return=_,w):(w=s(w,S),w.return=_,w)}function f(_,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=py(""+w,_.mode,S),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Bh:return S=Df(w.type,w.key,w.props,null,_.mode,S),S.ref=ru(_,null,w),S.return=_,S;case ul:return w=gy(w,_.mode,S),w.return=_,w;case Ni:var N=w._init;return f(_,N(w._payload),S)}if(xu(w)||Jc(w))return w=na(w,_.mode,S,null),w.return=_,w;Zh(_,w)}return null}function m(_,w,S,N){var j=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return j!==null?null:l(_,w,""+S,N);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Bh:return S.key===j?c(_,w,S,N):null;case ul:return S.key===j?u(_,w,S,N):null;case Ni:return j=S._init,m(_,w,j(S._payload),N)}if(xu(S)||Jc(S))return j!==null?null:h(_,w,S,N,null);Zh(_,S)}return null}function g(_,w,S,N,j){if(typeof N=="string"&&N!==""||typeof N=="number")return _=_.get(S)||null,l(w,_,""+N,j);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Bh:return _=_.get(N.key===null?S:N.key)||null,c(w,_,N,j);case ul:return _=_.get(N.key===null?S:N.key)||null,u(w,_,N,j);case Ni:var D=N._init;return g(_,w,S,D(N._payload),j)}if(xu(N)||Jc(N))return _=_.get(S)||null,h(w,_,N,j,null);Zh(w,N)}return null}function v(_,w,S,N){for(var j=null,D=null,T=w,I=w=0,C=null;T!==null&&I<S.length;I++){T.index>I?(C=T,T=null):C=T.sibling;var R=m(_,T,S[I],N);if(R===null){T===null&&(T=C);break}t&&T&&R.alternate===null&&e(_,T),w=i(R,w,I),D===null?j=R:D.sibling=R,D=R,T=C}if(I===S.length)return n(_,T),At&&Oo(_,I),j;if(T===null){for(;I<S.length;I++)T=f(_,S[I],N),T!==null&&(w=i(T,w,I),D===null?j=T:D.sibling=T,D=T);return At&&Oo(_,I),j}for(T=r(_,T);I<S.length;I++)C=g(T,_,I,S[I],N),C!==null&&(t&&C.alternate!==null&&T.delete(C.key===null?I:C.key),w=i(C,w,I),D===null?j=C:D.sibling=C,D=C);return t&&T.forEach(function(M){return e(_,M)}),At&&Oo(_,I),j}function y(_,w,S,N){var j=Jc(S);if(typeof j!="function")throw Error(ie(150));if(S=j.call(S),S==null)throw Error(ie(151));for(var D=j=null,T=w,I=w=0,C=null,R=S.next();T!==null&&!R.done;I++,R=S.next()){T.index>I?(C=T,T=null):C=T.sibling;var M=m(_,T,R.value,N);if(M===null){T===null&&(T=C);break}t&&T&&M.alternate===null&&e(_,T),w=i(M,w,I),D===null?j=M:D.sibling=M,D=M,T=C}if(R.done)return n(_,T),At&&Oo(_,I),j;if(T===null){for(;!R.done;I++,R=S.next())R=f(_,R.value,N),R!==null&&(w=i(R,w,I),D===null?j=R:D.sibling=R,D=R);return At&&Oo(_,I),j}for(T=r(_,T);!R.done;I++,R=S.next())R=g(T,_,I,R.value,N),R!==null&&(t&&R.alternate!==null&&T.delete(R.key===null?I:R.key),w=i(R,w,I),D===null?j=R:D.sibling=R,D=R);return t&&T.forEach(function(P){return e(_,P)}),At&&Oo(_,I),j}function b(_,w,S,N){if(typeof S=="object"&&S!==null&&S.type===dl&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Bh:e:{for(var j=S.key,D=w;D!==null;){if(D.key===j){if(j=S.type,j===dl){if(D.tag===7){n(_,D.sibling),w=s(D,S.props.children),w.return=_,_=w;break e}}else if(D.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ni&&OE(j)===D.type){n(_,D.sibling),w=s(D,S.props),w.ref=ru(_,D,S),w.return=_,_=w;break e}n(_,D);break}else e(_,D);D=D.sibling}S.type===dl?(w=na(S.props.children,_.mode,N,S.key),w.return=_,_=w):(N=Df(S.type,S.key,S.props,null,_.mode,N),N.ref=ru(_,w,S),N.return=_,_=N)}return o(_);case ul:e:{for(D=S.key;w!==null;){if(w.key===D)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){n(_,w.sibling),w=s(w,S.children||[]),w.return=_,_=w;break e}else{n(_,w);break}else e(_,w);w=w.sibling}w=gy(S,_.mode,N),w.return=_,_=w}return o(_);case Ni:return D=S._init,b(_,w,D(S._payload),N)}if(xu(S))return v(_,w,S,N);if(Jc(S))return y(_,w,S,N);Zh(_,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(n(_,w.sibling),w=s(w,S),w.return=_,_=w):(n(_,w),w=py(S,_.mode,N),w.return=_,_=w),o(_)):n(_,w)}return b}var Yl=$N(!0),UN=$N(!1),mm=wo(null),pm=null,xl=null,_x=null;function Ex(){_x=xl=pm=null}function Sx(t){var e=mm.current;It(mm),t._currentValue=e}function Tv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Nl(t,e){pm=t,_x=xl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Yn=!0),t.firstContext=null)}function Lr(t){var e=t._currentValue;if(_x!==t)if(t={context:t,memoizedValue:e,next:null},xl===null){if(pm===null)throw Error(ie(308));xl=t,pm.dependencies={lanes:0,firstContext:t}}else xl=xl.next=t;return e}var Ko=null;function Ix(t){Ko===null?Ko=[t]:Ko.push(t)}function BN(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Ix(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ys(t,r)}function Ys(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ci=!1;function Tx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zN(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Hs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Je&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ys(t,n)}return s=r.interleaved,s===null?(e.next=e,Ix(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ys(t,n)}function Cf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,dx(t,n)}}function LE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function gm(t,e,n,r){var s=t.updateQueue;Ci=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,h=u=c=null,l=i;do{var m=l.lane,g=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,y=l;switch(m=e,g=n,y.tag){case 1:if(v=y.payload,typeof v=="function"){f=v.call(g,f,m);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,m=typeof v=="function"?v.call(g,f,m):v,m==null)break e;f=Dt({},f,m);break e;case 2:Ci=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else g={eventTime:g,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=g,c=f):h=h.next=g,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ca|=o,t.lanes=o,t.memoizedState=f}}function VE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ie(191,s));s.call(r)}}}var Wd={},ws=wo(Wd),ad=wo(Wd),ld=wo(Wd);function Go(t){if(t===Wd)throw Error(ie(174));return t}function Nx(t,e){switch(wt(ld,e),wt(ad,t),wt(ws,Wd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ov(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ov(e,t)}It(ws),wt(ws,e)}function Xl(){It(ws),It(ad),It(ld)}function qN(t){Go(ld.current);var e=Go(ws.current),n=ov(e,t.type);e!==n&&(wt(ad,t),wt(ws,n))}function Cx(t){ad.current===t&&(It(ws),It(ad))}var Rt=wo(0);function ym(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cy=[];function Ax(){for(var t=0;t<cy.length;t++)cy[t]._workInProgressVersionPrimary=null;cy.length=0}var Af=ii.ReactCurrentDispatcher,uy=ii.ReactCurrentBatchConfig,la=0,kt=null,Yt=null,rn=null,vm=!1,Lu=!1,cd=0,SV=0;function En(){throw Error(ie(321))}function Px(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ts(t[n],e[n]))return!1;return!0}function Rx(t,e,n,r,s,i){if(la=i,kt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Af.current=t===null||t.memoizedState===null?CV:AV,t=n(r,s),Lu){i=0;do{if(Lu=!1,cd=0,25<=i)throw Error(ie(301));i+=1,rn=Yt=null,e.updateQueue=null,Af.current=PV,t=n(r,s)}while(Lu)}if(Af.current=xm,e=Yt!==null&&Yt.next!==null,la=0,rn=Yt=kt=null,vm=!1,e)throw Error(ie(300));return t}function jx(){var t=cd!==0;return cd=0,t}function cs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?kt.memoizedState=rn=t:rn=rn.next=t,rn}function Vr(){if(Yt===null){var t=kt.alternate;t=t!==null?t.memoizedState:null}else t=Yt.next;var e=rn===null?kt.memoizedState:rn.next;if(e!==null)rn=e,Yt=t;else{if(t===null)throw Error(ie(310));Yt=t,t={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},rn===null?kt.memoizedState=rn=t:rn=rn.next=t}return rn}function ud(t,e){return typeof e=="function"?e(t):e}function dy(t){var e=Vr(),n=e.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=t;var r=Yt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var h=u.lane;if((la&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=r):c=c.next=f,kt.lanes|=h,ca|=h}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,ts(r,e.memoizedState)||(Yn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,kt.lanes|=i,ca|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function hy(t){var e=Vr(),n=e.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);ts(i,e.memoizedState)||(Yn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function WN(){}function HN(t,e){var n=kt,r=Vr(),s=e(),i=!ts(r.memoizedState,s);if(i&&(r.memoizedState=s,Yn=!0),r=r.queue,kx(QN.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||rn!==null&&rn.memoizedState.tag&1){if(n.flags|=2048,dd(9,GN.bind(null,n,r,s,e),void 0,null),an===null)throw Error(ie(349));la&30||KN(n,e,s)}return s}function KN(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=kt.updateQueue,e===null?(e={lastEffect:null,stores:null},kt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function GN(t,e,n,r){e.value=n,e.getSnapshot=r,YN(e)&&XN(t)}function QN(t,e,n){return n(function(){YN(e)&&XN(t)})}function YN(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ts(t,n)}catch{return!0}}function XN(t){var e=Ys(t,1);e!==null&&Jr(e,t,1,-1)}function FE(t){var e=cs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ud,lastRenderedState:t},e.queue=t,t=t.dispatch=NV.bind(null,kt,t),[e.memoizedState,t]}function dd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=kt.updateQueue,e===null?(e={lastEffect:null,stores:null},kt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function JN(){return Vr().memoizedState}function Pf(t,e,n,r){var s=cs();kt.flags|=t,s.memoizedState=dd(1|e,n,void 0,r===void 0?null:r)}function Ep(t,e,n,r){var s=Vr();r=r===void 0?null:r;var i=void 0;if(Yt!==null){var o=Yt.memoizedState;if(i=o.destroy,r!==null&&Px(r,o.deps)){s.memoizedState=dd(e,n,i,r);return}}kt.flags|=t,s.memoizedState=dd(1|e,n,i,r)}function $E(t,e){return Pf(8390656,8,t,e)}function kx(t,e){return Ep(2048,8,t,e)}function ZN(t,e){return Ep(4,2,t,e)}function eC(t,e){return Ep(4,4,t,e)}function tC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function nC(t,e,n){return n=n!=null?n.concat([t]):null,Ep(4,4,tC.bind(null,e,t),n)}function Dx(){}function rC(t,e){var n=Vr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Px(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function sC(t,e){var n=Vr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Px(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function iC(t,e,n){return la&21?(ts(n,e)||(n=uN(),kt.lanes|=n,ca|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Yn=!0),t.memoizedState=n)}function IV(t,e){var n=ut;ut=n!==0&&4>n?n:4,t(!0);var r=uy.transition;uy.transition={};try{t(!1),e()}finally{ut=n,uy.transition=r}}function oC(){return Vr().memoizedState}function TV(t,e,n){var r=Yi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},aC(t))lC(e,n);else if(n=BN(t,e,n,r),n!==null){var s=$n();Jr(n,t,r,s),cC(n,e,r)}}function NV(t,e,n){var r=Yi(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(aC(t))lC(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,ts(l,o)){var c=e.interleaved;c===null?(s.next=s,Ix(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=BN(t,e,s,r),n!==null&&(s=$n(),Jr(n,t,r,s),cC(n,e,r))}}function aC(t){var e=t.alternate;return t===kt||e!==null&&e===kt}function lC(t,e){Lu=vm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function cC(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,dx(t,n)}}var xm={readContext:Lr,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useInsertionEffect:En,useLayoutEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useMutableSource:En,useSyncExternalStore:En,useId:En,unstable_isNewReconciler:!1},CV={readContext:Lr,useCallback:function(t,e){return cs().memoizedState=[t,e===void 0?null:e],t},useContext:Lr,useEffect:$E,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Pf(4194308,4,tC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Pf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Pf(4,2,t,e)},useMemo:function(t,e){var n=cs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=cs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=TV.bind(null,kt,t),[r.memoizedState,t]},useRef:function(t){var e=cs();return t={current:t},e.memoizedState=t},useState:FE,useDebugValue:Dx,useDeferredValue:function(t){return cs().memoizedState=t},useTransition:function(){var t=FE(!1),e=t[0];return t=IV.bind(null,t[1]),cs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=kt,s=cs();if(At){if(n===void 0)throw Error(ie(407));n=n()}else{if(n=e(),an===null)throw Error(ie(349));la&30||KN(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,$E(QN.bind(null,r,i,t),[t]),r.flags|=2048,dd(9,GN.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=cs(),e=an.identifierPrefix;if(At){var n=$s,r=Fs;n=(r&~(1<<32-Xr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=cd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=SV++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},AV={readContext:Lr,useCallback:rC,useContext:Lr,useEffect:kx,useImperativeHandle:nC,useInsertionEffect:ZN,useLayoutEffect:eC,useMemo:sC,useReducer:dy,useRef:JN,useState:function(){return dy(ud)},useDebugValue:Dx,useDeferredValue:function(t){var e=Vr();return iC(e,Yt.memoizedState,t)},useTransition:function(){var t=dy(ud)[0],e=Vr().memoizedState;return[t,e]},useMutableSource:WN,useSyncExternalStore:HN,useId:oC,unstable_isNewReconciler:!1},PV={readContext:Lr,useCallback:rC,useContext:Lr,useEffect:kx,useImperativeHandle:nC,useInsertionEffect:ZN,useLayoutEffect:eC,useMemo:sC,useReducer:hy,useRef:JN,useState:function(){return hy(ud)},useDebugValue:Dx,useDeferredValue:function(t){var e=Vr();return Yt===null?e.memoizedState=t:iC(e,Yt.memoizedState,t)},useTransition:function(){var t=hy(ud)[0],e=Vr().memoizedState;return[t,e]},useMutableSource:WN,useSyncExternalStore:HN,useId:oC,unstable_isNewReconciler:!1};function Wr(t,e){if(t&&t.defaultProps){e=Dt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Nv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Dt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Sp={isMounted:function(t){return(t=t._reactInternals)?Ra(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=$n(),s=Yi(t),i=Hs(r,s);i.payload=e,n!=null&&(i.callback=n),e=Gi(t,i,s),e!==null&&(Jr(e,t,s,r),Cf(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=$n(),s=Yi(t),i=Hs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Gi(t,i,s),e!==null&&(Jr(e,t,s,r),Cf(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$n(),r=Yi(t),s=Hs(n,r);s.tag=2,e!=null&&(s.callback=e),e=Gi(t,s,r),e!==null&&(Jr(e,t,r,n),Cf(e,t,r))}};function UE(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!rd(n,r)||!rd(s,i):!0}function uC(t,e,n){var r=!1,s=oo,i=e.contextType;return typeof i=="object"&&i!==null?i=Lr(i):(s=Zn(e)?oa:jn.current,r=e.contextTypes,i=(r=r!=null)?Gl(t,s):oo),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Sp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function BE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Sp.enqueueReplaceState(e,e.state,null)}function Cv(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Tx(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Lr(i):(i=Zn(e)?oa:jn.current,s.context=Gl(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Nv(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Sp.enqueueReplaceState(s,s.state,null),gm(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Jl(t,e){try{var n="",r=e;do n+=sL(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function fy(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Av(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var RV=typeof WeakMap=="function"?WeakMap:Map;function dC(t,e,n){n=Hs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){bm||(bm=!0,Fv=r),Av(t,e)},n}function hC(t,e,n){n=Hs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Av(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Av(t,e),typeof r!="function"&&(Qi===null?Qi=new Set([this]):Qi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function zE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new RV;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=WV.bind(null,t,e,n),e.then(t,t))}function qE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function WE(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Hs(-1,1),e.tag=2,Gi(n,e,1))),n.lanes|=1),t)}var jV=ii.ReactCurrentOwner,Yn=!1;function Ln(t,e,n,r){e.child=t===null?UN(e,null,n,r):Yl(e,t.child,n,r)}function HE(t,e,n,r,s){n=n.render;var i=e.ref;return Nl(e,s),r=Rx(t,e,n,r,i,s),n=jx(),t!==null&&!Yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Xs(t,e,s)):(At&&n&&xx(e),e.flags|=1,Ln(t,e,r,s),e.child)}function KE(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Bx(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,fC(t,e,i,r,s)):(t=Df(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:rd,n(o,r)&&t.ref===e.ref)return Xs(t,e,s)}return e.flags|=1,t=Xi(i,r),t.ref=e.ref,t.return=e,e.child=t}function fC(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(rd(i,r)&&t.ref===e.ref)if(Yn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Yn=!0);else return e.lanes=t.lanes,Xs(t,e,s)}return Pv(t,e,n,r,s)}function mC(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},wt(bl,ar),ar|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,wt(bl,ar),ar|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,wt(bl,ar),ar|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,wt(bl,ar),ar|=r;return Ln(t,e,s,n),e.child}function pC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Pv(t,e,n,r,s){var i=Zn(n)?oa:jn.current;return i=Gl(e,i),Nl(e,s),n=Rx(t,e,n,r,i,s),r=jx(),t!==null&&!Yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Xs(t,e,s)):(At&&r&&xx(e),e.flags|=1,Ln(t,e,n,s),e.child)}function GE(t,e,n,r,s){if(Zn(n)){var i=!0;dm(e)}else i=!1;if(Nl(e,s),e.stateNode===null)Rf(t,e),uC(e,n,r),Cv(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Lr(u):(u=Zn(n)?oa:jn.current,u=Gl(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&BE(e,o,r,u),Ci=!1;var m=e.memoizedState;o.state=m,gm(e,r,o,s),c=e.memoizedState,l!==r||m!==c||Jn.current||Ci?(typeof h=="function"&&(Nv(e,n,h,r),c=e.memoizedState),(l=Ci||UE(e,n,l,r,m,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,zN(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Wr(e.type,l),o.props=u,f=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Lr(c):(c=Zn(n)?oa:jn.current,c=Gl(e,c));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||m!==c)&&BE(e,o,r,c),Ci=!1,m=e.memoizedState,o.state=m,gm(e,r,o,s);var v=e.memoizedState;l!==f||m!==v||Jn.current||Ci?(typeof g=="function"&&(Nv(e,n,g,r),v=e.memoizedState),(u=Ci||UE(e,n,u,r,m,v,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Rv(t,e,n,r,i,s)}function Rv(t,e,n,r,s,i){pC(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&kE(e,n,!1),Xs(t,e,i);r=e.stateNode,jV.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Yl(e,t.child,null,i),e.child=Yl(e,null,l,i)):Ln(t,e,l,i),e.memoizedState=r.state,s&&kE(e,n,!0),e.child}function gC(t){var e=t.stateNode;e.pendingContext?jE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&jE(t,e.context,!1),Nx(t,e.containerInfo)}function QE(t,e,n,r,s){return Ql(),bx(s),e.flags|=256,Ln(t,e,n,r),e.child}var jv={dehydrated:null,treeContext:null,retryLane:0};function kv(t){return{baseLanes:t,cachePool:null,transitions:null}}function yC(t,e,n){var r=e.pendingProps,s=Rt.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),wt(Rt,s&1),t===null)return Iv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Np(o,r,0,null),t=na(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=kv(n),e.memoizedState=jv,t):Mx(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return kV(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Xi(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Xi(l,i):(i=na(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?kv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=jv,r}return i=t.child,t=i.sibling,r=Xi(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Mx(t,e){return e=Np({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ef(t,e,n,r){return r!==null&&bx(r),Yl(e,t.child,null,n),t=Mx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function kV(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=fy(Error(ie(422))),ef(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Np({mode:"visible",children:r.children},s,0,null),i=na(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Yl(e,t.child,null,o),e.child.memoizedState=kv(o),e.memoizedState=jv,i);if(!(e.mode&1))return ef(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(ie(419)),r=fy(i,r,void 0),ef(t,e,o,r)}if(l=(o&t.childLanes)!==0,Yn||l){if(r=an,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ys(t,s),Jr(r,t,s,-1))}return Ux(),r=fy(Error(ie(421))),ef(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=HV.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,fr=Ki(s.nextSibling),pr=e,At=!0,Yr=null,t!==null&&(Ir[Tr++]=Fs,Ir[Tr++]=$s,Ir[Tr++]=aa,Fs=t.id,$s=t.overflow,aa=e),e=Mx(e,r.children),e.flags|=4096,e)}function YE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Tv(t.return,e,n)}function my(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function vC(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ln(t,e,r.children,n),r=Rt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&YE(t,n,e);else if(t.tag===19)YE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(wt(Rt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ym(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),my(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ym(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}my(e,!0,n,null,i);break;case"together":my(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Rf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ca|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ie(153));if(e.child!==null){for(t=e.child,n=Xi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Xi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function DV(t,e,n){switch(e.tag){case 3:gC(e),Ql();break;case 5:qN(e);break;case 1:Zn(e.type)&&dm(e);break;case 4:Nx(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;wt(mm,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(wt(Rt,Rt.current&1),e.flags|=128,null):n&e.child.childLanes?yC(t,e,n):(wt(Rt,Rt.current&1),t=Xs(t,e,n),t!==null?t.sibling:null);wt(Rt,Rt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return vC(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),wt(Rt,Rt.current),r)break;return null;case 22:case 23:return e.lanes=0,mC(t,e,n)}return Xs(t,e,n)}var xC,Dv,wC,bC;xC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Dv=function(){};wC=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Go(ws.current);var i=null;switch(n){case"input":s=nv(t,s),r=nv(t,r),i=[];break;case"select":s=Dt({},s,{value:void 0}),r=Dt({},r,{value:void 0}),i=[];break;case"textarea":s=iv(t,s),r=iv(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=cm)}av(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Yu.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Yu.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&St("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};bC=function(t,e,n,r){n!==r&&(e.flags|=4)};function su(t,e){if(!At)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Sn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function MV(t,e,n){var r=e.pendingProps;switch(wx(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sn(e),null;case 1:return Zn(e.type)&&um(),Sn(e),null;case 3:return r=e.stateNode,Xl(),It(Jn),It(jn),Ax(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Jh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yr!==null&&(Bv(Yr),Yr=null))),Dv(t,e),Sn(e),null;case 5:Cx(e);var s=Go(ld.current);if(n=e.type,t!==null&&e.stateNode!=null)wC(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ie(166));return Sn(e),null}if(t=Go(ws.current),Jh(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[ms]=e,r[od]=i,t=(e.mode&1)!==0,n){case"dialog":St("cancel",r),St("close",r);break;case"iframe":case"object":case"embed":St("load",r);break;case"video":case"audio":for(s=0;s<bu.length;s++)St(bu[s],r);break;case"source":St("error",r);break;case"img":case"image":case"link":St("error",r),St("load",r);break;case"details":St("toggle",r);break;case"input":iE(r,i),St("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},St("invalid",r);break;case"textarea":aE(r,i),St("invalid",r)}av(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Xh(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Xh(r.textContent,l,t),s=["children",""+l]):Yu.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&St("scroll",r)}switch(n){case"input":zh(r),oE(r,i,!0);break;case"textarea":zh(r),lE(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=cm)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=QT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ms]=e,t[od]=r,xC(t,e,!1,!1),e.stateNode=t;e:{switch(o=lv(n,r),n){case"dialog":St("cancel",t),St("close",t),s=r;break;case"iframe":case"object":case"embed":St("load",t),s=r;break;case"video":case"audio":for(s=0;s<bu.length;s++)St(bu[s],t);s=r;break;case"source":St("error",t),s=r;break;case"img":case"image":case"link":St("error",t),St("load",t),s=r;break;case"details":St("toggle",t),s=r;break;case"input":iE(t,r),s=nv(t,r),St("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Dt({},r,{value:void 0}),St("invalid",t);break;case"textarea":aE(t,r),s=iv(t,r),St("invalid",t);break;default:s=r}av(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?JT(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&YT(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Xu(t,c):typeof c=="number"&&Xu(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Yu.hasOwnProperty(i)?c!=null&&i==="onScroll"&&St("scroll",t):c!=null&&ix(t,i,c,o))}switch(n){case"input":zh(t),oE(t,r,!1);break;case"textarea":zh(t),lE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+io(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?El(t,!!r.multiple,i,!1):r.defaultValue!=null&&El(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=cm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Sn(e),null;case 6:if(t&&e.stateNode!=null)bC(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ie(166));if(n=Go(ld.current),Go(ws.current),Jh(e)){if(r=e.stateNode,n=e.memoizedProps,r[ms]=e,(i=r.nodeValue!==n)&&(t=pr,t!==null))switch(t.tag){case 3:Xh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xh(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ms]=e,e.stateNode=r}return Sn(e),null;case 13:if(It(Rt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(At&&fr!==null&&e.mode&1&&!(e.flags&128))FN(),Ql(),e.flags|=98560,i=!1;else if(i=Jh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ie(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ie(317));i[ms]=e}else Ql(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Sn(e),i=!1}else Yr!==null&&(Bv(Yr),Yr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Rt.current&1?Xt===0&&(Xt=3):Ux())),e.updateQueue!==null&&(e.flags|=4),Sn(e),null);case 4:return Xl(),Dv(t,e),t===null&&sd(e.stateNode.containerInfo),Sn(e),null;case 10:return Sx(e.type._context),Sn(e),null;case 17:return Zn(e.type)&&um(),Sn(e),null;case 19:if(It(Rt),i=e.memoizedState,i===null)return Sn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)su(i,!1);else{if(Xt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ym(t),o!==null){for(e.flags|=128,su(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return wt(Rt,Rt.current&1|2),e.child}t=t.sibling}i.tail!==null&&$t()>Zl&&(e.flags|=128,r=!0,su(i,!1),e.lanes=4194304)}else{if(!r)if(t=ym(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),su(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!At)return Sn(e),null}else 2*$t()-i.renderingStartTime>Zl&&n!==1073741824&&(e.flags|=128,r=!0,su(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=$t(),e.sibling=null,n=Rt.current,wt(Rt,r?n&1|2:n&1),e):(Sn(e),null);case 22:case 23:return $x(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ar&1073741824&&(Sn(e),e.subtreeFlags&6&&(e.flags|=8192)):Sn(e),null;case 24:return null;case 25:return null}throw Error(ie(156,e.tag))}function OV(t,e){switch(wx(e),e.tag){case 1:return Zn(e.type)&&um(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xl(),It(Jn),It(jn),Ax(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Cx(e),null;case 13:if(It(Rt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ie(340));Ql()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return It(Rt),null;case 4:return Xl(),null;case 10:return Sx(e.type._context),null;case 22:case 23:return $x(),null;case 24:return null;default:return null}}var tf=!1,Cn=!1,LV=typeof WeakSet=="function"?WeakSet:Set,ve=null;function wl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Lt(t,e,r)}else n.current=null}function Mv(t,e,n){try{n()}catch(r){Lt(t,e,r)}}var XE=!1;function VV(t,e){if(vv=om,t=TN(),vx(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,f=t,m=null;t:for(;;){for(var g;f!==n||s!==0&&f.nodeType!==3||(l=o+s),f!==i||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)m=f,f=g;for(;;){if(f===t)break t;if(m===n&&++u===s&&(l=o),m===i&&++h===r&&(c=o),(g=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(xv={focusedElem:t,selectionRange:n},om=!1,ve=e;ve!==null;)if(e=ve,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ve=t;else for(;ve!==null;){e=ve;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,b=v.memoizedState,_=e.stateNode,w=_.getSnapshotBeforeUpdate(e.elementType===e.type?y:Wr(e.type,y),b);_.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ie(163))}}catch(N){Lt(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,ve=t;break}ve=e.return}return v=XE,XE=!1,v}function Vu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Mv(e,n,i)}s=s.next}while(s!==r)}}function Ip(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ov(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function _C(t){var e=t.alternate;e!==null&&(t.alternate=null,_C(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ms],delete e[od],delete e[_v],delete e[wV],delete e[bV])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function EC(t){return t.tag===5||t.tag===3||t.tag===4}function JE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||EC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Lv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=cm));else if(r!==4&&(t=t.child,t!==null))for(Lv(t,e,n),t=t.sibling;t!==null;)Lv(t,e,n),t=t.sibling}function Vv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Vv(t,e,n),t=t.sibling;t!==null;)Vv(t,e,n),t=t.sibling}var cn=null,Gr=!1;function yi(t,e,n){for(n=n.child;n!==null;)SC(t,e,n),n=n.sibling}function SC(t,e,n){if(xs&&typeof xs.onCommitFiberUnmount=="function")try{xs.onCommitFiberUnmount(yp,n)}catch{}switch(n.tag){case 5:Cn||wl(n,e);case 6:var r=cn,s=Gr;cn=null,yi(t,e,n),cn=r,Gr=s,cn!==null&&(Gr?(t=cn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):cn.removeChild(n.stateNode));break;case 18:cn!==null&&(Gr?(t=cn,n=n.stateNode,t.nodeType===8?ay(t.parentNode,n):t.nodeType===1&&ay(t,n),td(t)):ay(cn,n.stateNode));break;case 4:r=cn,s=Gr,cn=n.stateNode.containerInfo,Gr=!0,yi(t,e,n),cn=r,Gr=s;break;case 0:case 11:case 14:case 15:if(!Cn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Mv(n,e,o),s=s.next}while(s!==r)}yi(t,e,n);break;case 1:if(!Cn&&(wl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Lt(n,e,l)}yi(t,e,n);break;case 21:yi(t,e,n);break;case 22:n.mode&1?(Cn=(r=Cn)||n.memoizedState!==null,yi(t,e,n),Cn=r):yi(t,e,n);break;default:yi(t,e,n)}}function ZE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new LV),e.forEach(function(r){var s=KV.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function zr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:cn=l.stateNode,Gr=!1;break e;case 3:cn=l.stateNode.containerInfo,Gr=!0;break e;case 4:cn=l.stateNode.containerInfo,Gr=!0;break e}l=l.return}if(cn===null)throw Error(ie(160));SC(i,o,s),cn=null,Gr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Lt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)IC(e,t),e=e.sibling}function IC(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zr(e,t),ls(t),r&4){try{Vu(3,t,t.return),Ip(3,t)}catch(y){Lt(t,t.return,y)}try{Vu(5,t,t.return)}catch(y){Lt(t,t.return,y)}}break;case 1:zr(e,t),ls(t),r&512&&n!==null&&wl(n,n.return);break;case 5:if(zr(e,t),ls(t),r&512&&n!==null&&wl(n,n.return),t.flags&32){var s=t.stateNode;try{Xu(s,"")}catch(y){Lt(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&KT(s,i),lv(l,o);var u=lv(l,i);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?JT(s,f):h==="dangerouslySetInnerHTML"?YT(s,f):h==="children"?Xu(s,f):ix(s,h,f,u)}switch(l){case"input":rv(s,i);break;case"textarea":GT(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?El(s,!!i.multiple,g,!1):m!==!!i.multiple&&(i.defaultValue!=null?El(s,!!i.multiple,i.defaultValue,!0):El(s,!!i.multiple,i.multiple?[]:"",!1))}s[od]=i}catch(y){Lt(t,t.return,y)}}break;case 6:if(zr(e,t),ls(t),r&4){if(t.stateNode===null)throw Error(ie(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){Lt(t,t.return,y)}}break;case 3:if(zr(e,t),ls(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{td(e.containerInfo)}catch(y){Lt(t,t.return,y)}break;case 4:zr(e,t),ls(t);break;case 13:zr(e,t),ls(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Vx=$t())),r&4&&ZE(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Cn=(u=Cn)||h,zr(e,t),Cn=u):zr(e,t),ls(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(ve=t,h=t.child;h!==null;){for(f=ve=h;ve!==null;){switch(m=ve,g=m.child,m.tag){case 0:case 11:case 14:case 15:Vu(4,m,m.return);break;case 1:wl(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){Lt(r,n,y)}}break;case 5:wl(m,m.return);break;case 22:if(m.memoizedState!==null){t1(f);continue}}g!==null?(g.return=m,ve=g):t1(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=XT("display",o))}catch(y){Lt(t,t.return,y)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(y){Lt(t,t.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:zr(e,t),ls(t),r&4&&ZE(t);break;case 21:break;default:zr(e,t),ls(t)}}function ls(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(EC(n)){var r=n;break e}n=n.return}throw Error(ie(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Xu(s,""),r.flags&=-33);var i=JE(t);Vv(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=JE(t);Lv(t,l,o);break;default:throw Error(ie(161))}}catch(c){Lt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function FV(t,e,n){ve=t,TC(t)}function TC(t,e,n){for(var r=(t.mode&1)!==0;ve!==null;){var s=ve,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||tf;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Cn;l=tf;var u=Cn;if(tf=o,(Cn=c)&&!u)for(ve=s;ve!==null;)o=ve,c=o.child,o.tag===22&&o.memoizedState!==null?n1(s):c!==null?(c.return=o,ve=c):n1(s);for(;i!==null;)ve=i,TC(i),i=i.sibling;ve=s,tf=l,Cn=u}e1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ve=i):e1(t)}}function e1(t){for(;ve!==null;){var e=ve;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Cn||Ip(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Cn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Wr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&VE(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}VE(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&td(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ie(163))}Cn||e.flags&512&&Ov(e)}catch(m){Lt(e,e.return,m)}}if(e===t){ve=null;break}if(n=e.sibling,n!==null){n.return=e.return,ve=n;break}ve=e.return}}function t1(t){for(;ve!==null;){var e=ve;if(e===t){ve=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ve=n;break}ve=e.return}}function n1(t){for(;ve!==null;){var e=ve;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ip(4,e)}catch(c){Lt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Lt(e,s,c)}}var i=e.return;try{Ov(e)}catch(c){Lt(e,i,c)}break;case 5:var o=e.return;try{Ov(e)}catch(c){Lt(e,o,c)}}}catch(c){Lt(e,e.return,c)}if(e===t){ve=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ve=l;break}ve=e.return}}var $V=Math.ceil,wm=ii.ReactCurrentDispatcher,Ox=ii.ReactCurrentOwner,Dr=ii.ReactCurrentBatchConfig,Je=0,an=null,Ht=null,fn=0,ar=0,bl=wo(0),Xt=0,hd=null,ca=0,Tp=0,Lx=0,Fu=null,Qn=null,Vx=0,Zl=1/0,Ds=null,bm=!1,Fv=null,Qi=null,nf=!1,$i=null,_m=0,$u=0,$v=null,jf=-1,kf=0;function $n(){return Je&6?$t():jf!==-1?jf:jf=$t()}function Yi(t){return t.mode&1?Je&2&&fn!==0?fn&-fn:EV.transition!==null?(kf===0&&(kf=uN()),kf):(t=ut,t!==0||(t=window.event,t=t===void 0?16:yN(t.type)),t):1}function Jr(t,e,n,r){if(50<$u)throw $u=0,$v=null,Error(ie(185));Bd(t,n,r),(!(Je&2)||t!==an)&&(t===an&&(!(Je&2)&&(Tp|=n),Xt===4&&Pi(t,fn)),er(t,r),n===1&&Je===0&&!(e.mode&1)&&(Zl=$t()+500,_p&&bo()))}function er(t,e){var n=t.callbackNode;EL(t,e);var r=im(t,t===an?fn:0);if(r===0)n!==null&&dE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&dE(n),e===1)t.tag===0?_V(r1.bind(null,t)):ON(r1.bind(null,t)),vV(function(){!(Je&6)&&bo()}),n=null;else{switch(dN(r)){case 1:n=ux;break;case 4:n=lN;break;case 16:n=sm;break;case 536870912:n=cN;break;default:n=sm}n=DC(n,NC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function NC(t,e){if(jf=-1,kf=0,Je&6)throw Error(ie(327));var n=t.callbackNode;if(Cl()&&t.callbackNode!==n)return null;var r=im(t,t===an?fn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Em(t,r);else{e=r;var s=Je;Je|=2;var i=AC();(an!==t||fn!==e)&&(Ds=null,Zl=$t()+500,ta(t,e));do try{zV();break}catch(l){CC(t,l)}while(!0);Ex(),wm.current=i,Je=s,Ht!==null?e=0:(an=null,fn=0,e=Xt)}if(e!==0){if(e===2&&(s=fv(t),s!==0&&(r=s,e=Uv(t,s))),e===1)throw n=hd,ta(t,0),Pi(t,r),er(t,$t()),n;if(e===6)Pi(t,r);else{if(s=t.current.alternate,!(r&30)&&!UV(s)&&(e=Em(t,r),e===2&&(i=fv(t),i!==0&&(r=i,e=Uv(t,i))),e===1))throw n=hd,ta(t,0),Pi(t,r),er(t,$t()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ie(345));case 2:Lo(t,Qn,Ds);break;case 3:if(Pi(t,r),(r&130023424)===r&&(e=Vx+500-$t(),10<e)){if(im(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){$n(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=bv(Lo.bind(null,t,Qn,Ds),e);break}Lo(t,Qn,Ds);break;case 4:if(Pi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Xr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=$t()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$V(r/1960))-r,10<r){t.timeoutHandle=bv(Lo.bind(null,t,Qn,Ds),r);break}Lo(t,Qn,Ds);break;case 5:Lo(t,Qn,Ds);break;default:throw Error(ie(329))}}}return er(t,$t()),t.callbackNode===n?NC.bind(null,t):null}function Uv(t,e){var n=Fu;return t.current.memoizedState.isDehydrated&&(ta(t,e).flags|=256),t=Em(t,e),t!==2&&(e=Qn,Qn=n,e!==null&&Bv(e)),t}function Bv(t){Qn===null?Qn=t:Qn.push.apply(Qn,t)}function UV(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ts(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Pi(t,e){for(e&=~Lx,e&=~Tp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Xr(e),r=1<<n;t[n]=-1,e&=~r}}function r1(t){if(Je&6)throw Error(ie(327));Cl();var e=im(t,0);if(!(e&1))return er(t,$t()),null;var n=Em(t,e);if(t.tag!==0&&n===2){var r=fv(t);r!==0&&(e=r,n=Uv(t,r))}if(n===1)throw n=hd,ta(t,0),Pi(t,e),er(t,$t()),n;if(n===6)throw Error(ie(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Lo(t,Qn,Ds),er(t,$t()),null}function Fx(t,e){var n=Je;Je|=1;try{return t(e)}finally{Je=n,Je===0&&(Zl=$t()+500,_p&&bo())}}function ua(t){$i!==null&&$i.tag===0&&!(Je&6)&&Cl();var e=Je;Je|=1;var n=Dr.transition,r=ut;try{if(Dr.transition=null,ut=1,t)return t()}finally{ut=r,Dr.transition=n,Je=e,!(Je&6)&&bo()}}function $x(){ar=bl.current,It(bl)}function ta(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,yV(n)),Ht!==null)for(n=Ht.return;n!==null;){var r=n;switch(wx(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&um();break;case 3:Xl(),It(Jn),It(jn),Ax();break;case 5:Cx(r);break;case 4:Xl();break;case 13:It(Rt);break;case 19:It(Rt);break;case 10:Sx(r.type._context);break;case 22:case 23:$x()}n=n.return}if(an=t,Ht=t=Xi(t.current,null),fn=ar=e,Xt=0,hd=null,Lx=Tp=ca=0,Qn=Fu=null,Ko!==null){for(e=0;e<Ko.length;e++)if(n=Ko[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ko=null}return t}function CC(t,e){do{var n=Ht;try{if(Ex(),Af.current=xm,vm){for(var r=kt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}vm=!1}if(la=0,rn=Yt=kt=null,Lu=!1,cd=0,Ox.current=null,n===null||n.return===null){Xt=1,hd=e,Ht=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=fn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=qE(o);if(g!==null){g.flags&=-257,WE(g,o,l,i,e),g.mode&1&&zE(i,u,e),e=g,c=u;var v=e.updateQueue;if(v===null){var y=new Set;y.add(c),e.updateQueue=y}else v.add(c);break e}else{if(!(e&1)){zE(i,u,e),Ux();break e}c=Error(ie(426))}}else if(At&&l.mode&1){var b=qE(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),WE(b,o,l,i,e),bx(Jl(c,l));break e}}i=c=Jl(c,l),Xt!==4&&(Xt=2),Fu===null?Fu=[i]:Fu.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=dC(i,c,e);LE(i,_);break e;case 1:l=c;var w=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Qi===null||!Qi.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var N=hC(i,l,e);LE(i,N);break e}}i=i.return}while(i!==null)}RC(n)}catch(j){e=j,Ht===n&&n!==null&&(Ht=n=n.return);continue}break}while(!0)}function AC(){var t=wm.current;return wm.current=xm,t===null?xm:t}function Ux(){(Xt===0||Xt===3||Xt===2)&&(Xt=4),an===null||!(ca&268435455)&&!(Tp&268435455)||Pi(an,fn)}function Em(t,e){var n=Je;Je|=2;var r=AC();(an!==t||fn!==e)&&(Ds=null,ta(t,e));do try{BV();break}catch(s){CC(t,s)}while(!0);if(Ex(),Je=n,wm.current=r,Ht!==null)throw Error(ie(261));return an=null,fn=0,Xt}function BV(){for(;Ht!==null;)PC(Ht)}function zV(){for(;Ht!==null&&!mL();)PC(Ht)}function PC(t){var e=kC(t.alternate,t,ar);t.memoizedProps=t.pendingProps,e===null?RC(t):Ht=e,Ox.current=null}function RC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=OV(n,e),n!==null){n.flags&=32767,Ht=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Xt=6,Ht=null;return}}else if(n=MV(n,e,ar),n!==null){Ht=n;return}if(e=e.sibling,e!==null){Ht=e;return}Ht=e=t}while(e!==null);Xt===0&&(Xt=5)}function Lo(t,e,n){var r=ut,s=Dr.transition;try{Dr.transition=null,ut=1,qV(t,e,n,r)}finally{Dr.transition=s,ut=r}return null}function qV(t,e,n,r){do Cl();while($i!==null);if(Je&6)throw Error(ie(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ie(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(SL(t,i),t===an&&(Ht=an=null,fn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||nf||(nf=!0,DC(sm,function(){return Cl(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Dr.transition,Dr.transition=null;var o=ut;ut=1;var l=Je;Je|=4,Ox.current=null,VV(t,n),IC(n,t),uV(xv),om=!!vv,xv=vv=null,t.current=n,FV(n),pL(),Je=l,ut=o,Dr.transition=i}else t.current=n;if(nf&&(nf=!1,$i=t,_m=s),i=t.pendingLanes,i===0&&(Qi=null),vL(n.stateNode),er(t,$t()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(bm)throw bm=!1,t=Fv,Fv=null,t;return _m&1&&t.tag!==0&&Cl(),i=t.pendingLanes,i&1?t===$v?$u++:($u=0,$v=t):$u=0,bo(),null}function Cl(){if($i!==null){var t=dN(_m),e=Dr.transition,n=ut;try{if(Dr.transition=null,ut=16>t?16:t,$i===null)var r=!1;else{if(t=$i,$i=null,_m=0,Je&6)throw Error(ie(331));var s=Je;for(Je|=4,ve=t.current;ve!==null;){var i=ve,o=i.child;if(ve.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ve=u;ve!==null;){var h=ve;switch(h.tag){case 0:case 11:case 15:Vu(8,h,i)}var f=h.child;if(f!==null)f.return=h,ve=f;else for(;ve!==null;){h=ve;var m=h.sibling,g=h.return;if(_C(h),h===u){ve=null;break}if(m!==null){m.return=g,ve=m;break}ve=g}}}var v=i.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(y!==null)}}ve=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ve=o;else e:for(;ve!==null;){if(i=ve,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Vu(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,ve=_;break e}ve=i.return}}var w=t.current;for(ve=w;ve!==null;){o=ve;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,ve=S;else e:for(o=w;ve!==null;){if(l=ve,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ip(9,l)}}catch(j){Lt(l,l.return,j)}if(l===o){ve=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,ve=N;break e}ve=l.return}}if(Je=s,bo(),xs&&typeof xs.onPostCommitFiberRoot=="function")try{xs.onPostCommitFiberRoot(yp,t)}catch{}r=!0}return r}finally{ut=n,Dr.transition=e}}return!1}function s1(t,e,n){e=Jl(n,e),e=dC(t,e,1),t=Gi(t,e,1),e=$n(),t!==null&&(Bd(t,1,e),er(t,e))}function Lt(t,e,n){if(t.tag===3)s1(t,t,n);else for(;e!==null;){if(e.tag===3){s1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qi===null||!Qi.has(r))){t=Jl(n,t),t=hC(e,t,1),e=Gi(e,t,1),t=$n(),e!==null&&(Bd(e,1,t),er(e,t));break}}e=e.return}}function WV(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=$n(),t.pingedLanes|=t.suspendedLanes&n,an===t&&(fn&n)===n&&(Xt===4||Xt===3&&(fn&130023424)===fn&&500>$t()-Vx?ta(t,0):Lx|=n),er(t,e)}function jC(t,e){e===0&&(t.mode&1?(e=Hh,Hh<<=1,!(Hh&130023424)&&(Hh=4194304)):e=1);var n=$n();t=Ys(t,e),t!==null&&(Bd(t,e,n),er(t,n))}function HV(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),jC(t,n)}function KV(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ie(314))}r!==null&&r.delete(e),jC(t,n)}var kC;kC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Jn.current)Yn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Yn=!1,DV(t,e,n);Yn=!!(t.flags&131072)}else Yn=!1,At&&e.flags&1048576&&LN(e,fm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Rf(t,e),t=e.pendingProps;var s=Gl(e,jn.current);Nl(e,n),s=Rx(null,e,r,t,s,n);var i=jx();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zn(r)?(i=!0,dm(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Tx(e),s.updater=Sp,e.stateNode=s,s._reactInternals=e,Cv(e,r,t,n),e=Rv(null,e,r,!0,i,n)):(e.tag=0,At&&i&&xx(e),Ln(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Rf(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=QV(r),t=Wr(r,t),s){case 0:e=Pv(null,e,r,t,n);break e;case 1:e=GE(null,e,r,t,n);break e;case 11:e=HE(null,e,r,t,n);break e;case 14:e=KE(null,e,r,Wr(r.type,t),n);break e}throw Error(ie(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wr(r,s),Pv(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wr(r,s),GE(t,e,r,s,n);case 3:e:{if(gC(e),t===null)throw Error(ie(387));r=e.pendingProps,i=e.memoizedState,s=i.element,zN(t,e),gm(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Jl(Error(ie(423)),e),e=QE(t,e,r,n,s);break e}else if(r!==s){s=Jl(Error(ie(424)),e),e=QE(t,e,r,n,s);break e}else for(fr=Ki(e.stateNode.containerInfo.firstChild),pr=e,At=!0,Yr=null,n=UN(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ql(),r===s){e=Xs(t,e,n);break e}Ln(t,e,r,n)}e=e.child}return e;case 5:return qN(e),t===null&&Iv(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,wv(r,s)?o=null:i!==null&&wv(r,i)&&(e.flags|=32),pC(t,e),Ln(t,e,o,n),e.child;case 6:return t===null&&Iv(e),null;case 13:return yC(t,e,n);case 4:return Nx(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Yl(e,null,r,n):Ln(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wr(r,s),HE(t,e,r,s,n);case 7:return Ln(t,e,e.pendingProps,n),e.child;case 8:return Ln(t,e,e.pendingProps.children,n),e.child;case 12:return Ln(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,wt(mm,r._currentValue),r._currentValue=o,i!==null)if(ts(i.value,o)){if(i.children===s.children&&!Jn.current){e=Xs(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Hs(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Tv(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ie(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Tv(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ln(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Nl(e,n),s=Lr(s),r=r(s),e.flags|=1,Ln(t,e,r,n),e.child;case 14:return r=e.type,s=Wr(r,e.pendingProps),s=Wr(r.type,s),KE(t,e,r,s,n);case 15:return fC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wr(r,s),Rf(t,e),e.tag=1,Zn(r)?(t=!0,dm(e)):t=!1,Nl(e,n),uC(e,r,s),Cv(e,r,s,n),Rv(null,e,r,!0,t,n);case 19:return vC(t,e,n);case 22:return mC(t,e,n)}throw Error(ie(156,e.tag))};function DC(t,e){return aN(t,e)}function GV(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rr(t,e,n,r){return new GV(t,e,n,r)}function Bx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function QV(t){if(typeof t=="function")return Bx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ax)return 11;if(t===lx)return 14}return 2}function Xi(t,e){var n=t.alternate;return n===null?(n=Rr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Df(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Bx(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case dl:return na(n.children,s,i,e);case ox:o=8,s|=8;break;case Jy:return t=Rr(12,n,e,s|2),t.elementType=Jy,t.lanes=i,t;case Zy:return t=Rr(13,n,e,s),t.elementType=Zy,t.lanes=i,t;case ev:return t=Rr(19,n,e,s),t.elementType=ev,t.lanes=i,t;case qT:return Np(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case BT:o=10;break e;case zT:o=9;break e;case ax:o=11;break e;case lx:o=14;break e;case Ni:o=16,r=null;break e}throw Error(ie(130,t==null?t:typeof t,""))}return e=Rr(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function na(t,e,n,r){return t=Rr(7,t,r,e),t.lanes=n,t}function Np(t,e,n,r){return t=Rr(22,t,r,e),t.elementType=qT,t.lanes=n,t.stateNode={isHidden:!1},t}function py(t,e,n){return t=Rr(6,t,null,e),t.lanes=n,t}function gy(t,e,n){return e=Rr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function YV(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yg(0),this.expirationTimes=Yg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yg(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function zx(t,e,n,r,s,i,o,l,c){return t=new YV(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Rr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tx(i),t}function XV(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ul,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function MC(t){if(!t)return oo;t=t._reactInternals;e:{if(Ra(t)!==t||t.tag!==1)throw Error(ie(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ie(171))}if(t.tag===1){var n=t.type;if(Zn(n))return MN(t,n,e)}return e}function OC(t,e,n,r,s,i,o,l,c){return t=zx(n,r,!0,t,s,i,o,l,c),t.context=MC(null),n=t.current,r=$n(),s=Yi(n),i=Hs(r,s),i.callback=e??null,Gi(n,i,s),t.current.lanes=s,Bd(t,s,r),er(t,r),t}function Cp(t,e,n,r){var s=e.current,i=$n(),o=Yi(s);return n=MC(n),e.context===null?e.context=n:e.pendingContext=n,e=Hs(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Gi(s,e,o),t!==null&&(Jr(t,s,o,i),Cf(t,s,o)),o}function Sm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function i1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function qx(t,e){i1(t,e),(t=t.alternate)&&i1(t,e)}function JV(){return null}var LC=typeof reportError=="function"?reportError:function(t){console.error(t)};function Wx(t){this._internalRoot=t}Ap.prototype.render=Wx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ie(409));Cp(t,e,null,null)};Ap.prototype.unmount=Wx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ua(function(){Cp(null,t,null,null)}),e[Qs]=null}};function Ap(t){this._internalRoot=t}Ap.prototype.unstable_scheduleHydration=function(t){if(t){var e=mN();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ai.length&&e!==0&&e<Ai[n].priority;n++);Ai.splice(n,0,t),n===0&&gN(t)}};function Hx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function o1(){}function ZV(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Sm(o);i.call(u)}}var o=OC(e,r,t,0,null,!1,!1,"",o1);return t._reactRootContainer=o,t[Qs]=o.current,sd(t.nodeType===8?t.parentNode:t),ua(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Sm(c);l.call(u)}}var c=zx(t,0,!1,null,null,!1,!1,"",o1);return t._reactRootContainer=c,t[Qs]=c.current,sd(t.nodeType===8?t.parentNode:t),ua(function(){Cp(e,c,n,r)}),c}function Rp(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Sm(o);l.call(c)}}Cp(e,o,t,s)}else o=ZV(n,e,t,s,r);return Sm(o)}hN=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=wu(e.pendingLanes);n!==0&&(dx(e,n|1),er(e,$t()),!(Je&6)&&(Zl=$t()+500,bo()))}break;case 13:ua(function(){var r=Ys(t,1);if(r!==null){var s=$n();Jr(r,t,1,s)}}),qx(t,1)}};hx=function(t){if(t.tag===13){var e=Ys(t,134217728);if(e!==null){var n=$n();Jr(e,t,134217728,n)}qx(t,134217728)}};fN=function(t){if(t.tag===13){var e=Yi(t),n=Ys(t,e);if(n!==null){var r=$n();Jr(n,t,e,r)}qx(t,e)}};mN=function(){return ut};pN=function(t,e){var n=ut;try{return ut=t,e()}finally{ut=n}};uv=function(t,e,n){switch(e){case"input":if(rv(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=bp(r);if(!s)throw Error(ie(90));HT(r),rv(r,s)}}}break;case"textarea":GT(t,n);break;case"select":e=n.value,e!=null&&El(t,!!n.multiple,e,!1)}};tN=Fx;nN=ua;var e4={usingClientEntryPoint:!1,Events:[qd,pl,bp,ZT,eN,Fx]},iu={findFiberByHostInstance:Ho,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},t4={bundleType:iu.bundleType,version:iu.version,rendererPackageName:iu.rendererPackageName,rendererConfig:iu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ii.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=iN(t),t===null?null:t.stateNode},findFiberByHostInstance:iu.findFiberByHostInstance||JV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rf.isDisabled&&rf.supportsFiber)try{yp=rf.inject(t4),xs=rf}catch{}}br.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=e4;br.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hx(e))throw Error(ie(200));return XV(t,e,null,n)};br.createRoot=function(t,e){if(!Hx(t))throw Error(ie(299));var n=!1,r="",s=LC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=zx(t,1,!1,null,null,n,!1,r,s),t[Qs]=e.current,sd(t.nodeType===8?t.parentNode:t),new Wx(e)};br.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ie(188)):(t=Object.keys(t).join(","),Error(ie(268,t)));return t=iN(e),t=t===null?null:t.stateNode,t};br.flushSync=function(t){return ua(t)};br.hydrate=function(t,e,n){if(!Pp(e))throw Error(ie(200));return Rp(null,t,e,!0,n)};br.hydrateRoot=function(t,e,n){if(!Hx(t))throw Error(ie(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=LC;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=OC(e,null,t,1,n??null,s,!1,i,o),t[Qs]=e.current,sd(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ap(e)};br.render=function(t,e,n){if(!Pp(e))throw Error(ie(200));return Rp(null,t,e,!1,n)};br.unmountComponentAtNode=function(t){if(!Pp(t))throw Error(ie(40));return t._reactRootContainer?(ua(function(){Rp(null,null,t,!1,function(){t._reactRootContainer=null,t[Qs]=null})}),!0):!1};br.unstable_batchedUpdates=Fx;br.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Pp(n))throw Error(ie(200));if(t==null||t._reactInternals===void 0)throw Error(ie(38));return Rp(t,e,n,!1,r)};br.version="18.3.1-next-f1338f8080-20240426";function VC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(VC)}catch(t){console.error(t)}}VC(),VT.exports=br;var ja=VT.exports;const FC=IT(ja);var $C,a1=ja;$C=a1.createRoot,a1.hydrateRoot;const n4=1,r4=1e6;let yy=0;function s4(){return yy=(yy+1)%Number.MAX_SAFE_INTEGER,yy.toString()}const vy=new Map,l1=t=>{if(vy.has(t))return;const e=setTimeout(()=>{vy.delete(t),Uu({type:"REMOVE_TOAST",toastId:t})},r4);vy.set(t,e)},i4=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,n4)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?l1(n):t.toasts.forEach(r=>{l1(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Mf=[];let Of={toasts:[]};function Uu(t){Of=i4(Of,t),Mf.forEach(e=>{e(Of)})}function o4({...t}){const e=s4(),n=s=>Uu({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Uu({type:"DISMISS_TOAST",toastId:e});return Uu({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function yn(){const[t,e]=p.useState(Of);return p.useEffect(()=>(Mf.push(e),()=>{const n=Mf.indexOf(e);n>-1&&Mf.splice(n,1)}),[t]),{...t,toast:o4,dismiss:n=>Uu({type:"DISMISS_TOAST",toastId:n})}}function de(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function a4(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function jp(...t){return e=>t.forEach(n=>a4(n,e))}function Ze(...t){return p.useCallback(jp(...t),t)}function l4(t,e=[]){let n=[];function r(i,o){const l=p.createContext(o),c=n.length;n=[...n,o];function u(f){const{scope:m,children:g,...v}=f,y=(m==null?void 0:m[t][c])||l,b=p.useMemo(()=>v,Object.values(v));return a.jsx(y.Provider,{value:b,children:g})}function h(f,m){const g=(m==null?void 0:m[t][c])||l,v=p.useContext(g);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return u.displayName=i+"Provider",[u,h]}const s=()=>{const i=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,c4(s,...e)]}function c4(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var da=p.forwardRef((t,e)=>{const{children:n,...r}=t,s=p.Children.toArray(n),i=s.find(u4);if(i){const o=i.props.children,l=s.map(c=>c===i?p.Children.count(o)>1?p.Children.only(null):p.isValidElement(o)?o.props.children:null:c);return a.jsx(zv,{...r,ref:e,children:p.isValidElement(o)?p.cloneElement(o,void 0,l):null})}return a.jsx(zv,{...r,ref:e,children:n})});da.displayName="Slot";var zv=p.forwardRef((t,e)=>{const{children:n,...r}=t;if(p.isValidElement(n)){const s=h4(n);return p.cloneElement(n,{...d4(r,n.props),ref:e?jp(e,s):s})}return p.Children.count(n)>1?p.Children.only(null):null});zv.displayName="SlotClone";var UC=({children:t})=>a.jsx(a.Fragment,{children:t});function u4(t){return p.isValidElement(t)&&t.type===UC}function d4(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{i(...l),s(...l)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function h4(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Hd(t){const e=t+"CollectionProvider",[n,r]=l4(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:v,children:y}=g,b=re.useRef(null),_=re.useRef(new Map).current;return a.jsx(s,{scope:v,itemMap:_,collectionRef:b,children:y})};o.displayName=e;const l=t+"CollectionSlot",c=re.forwardRef((g,v)=>{const{scope:y,children:b}=g,_=i(l,y),w=Ze(v,_.collectionRef);return a.jsx(da,{ref:w,children:b})});c.displayName=l;const u=t+"CollectionItemSlot",h="data-radix-collection-item",f=re.forwardRef((g,v)=>{const{scope:y,children:b,..._}=g,w=re.useRef(null),S=Ze(v,w),N=i(u,y);return re.useEffect(()=>(N.itemMap.set(w,{ref:w,..._}),()=>void N.itemMap.delete(w))),a.jsx(da,{[h]:"",ref:S,children:b})});f.displayName=u;function m(g){const v=i(t+"CollectionConsumer",g);return re.useCallback(()=>{const b=v.collectionRef.current;if(!b)return[];const _=Array.from(b.querySelectorAll(`[${h}]`));return Array.from(v.itemMap.values()).sort((N,j)=>_.indexOf(N.ref.current)-_.indexOf(j.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:f},m,r]}function $r(t,e=[]){let n=[];function r(i,o){const l=p.createContext(o),c=n.length;n=[...n,o];const u=f=>{var _;const{scope:m,children:g,...v}=f,y=((_=m==null?void 0:m[t])==null?void 0:_[c])||l,b=p.useMemo(()=>v,Object.values(v));return a.jsx(y.Provider,{value:b,children:g})};u.displayName=i+"Provider";function h(f,m){var y;const g=((y=m==null?void 0:m[t])==null?void 0:y[c])||l,v=p.useContext(g);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,h]}const s=()=>{const i=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,f4(s,...e)]}function f4(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var m4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ce=m4.reduce((t,e)=>{const n=p.forwardRef((r,s)=>{const{asChild:i,...o}=r,l=i?da:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(l,{...o,ref:s})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function Kx(t,e){t&&ja.flushSync(()=>t.dispatchEvent(e))}function gn(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function p4(t,e=globalThis==null?void 0:globalThis.document){const n=gn(t);p.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var g4="DismissableLayer",qv="dismissableLayer.update",y4="dismissableLayer.pointerDownOutside",v4="dismissableLayer.focusOutside",c1,BC=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Kd=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=t,u=p.useContext(BC),[h,f]=p.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=p.useState({}),v=Ze(e,T=>f(T)),y=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),_=y.indexOf(b),w=h?y.indexOf(h):-1,S=u.layersWithOutsidePointerEventsDisabled.size>0,N=w>=_,j=w4(T=>{const I=T.target,C=[...u.branches].some(R=>R.contains(I));!N||C||(s==null||s(T),o==null||o(T),T.defaultPrevented||l==null||l())},m),D=b4(T=>{const I=T.target;[...u.branches].some(R=>R.contains(I))||(i==null||i(T),o==null||o(T),T.defaultPrevented||l==null||l())},m);return p4(T=>{w===u.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&l&&(T.preventDefault(),l()))},m),p.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(c1=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),u1(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=c1)}},[h,m,n,u]),p.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),u1())},[h,u]),p.useEffect(()=>{const T=()=>g({});return document.addEventListener(qv,T),()=>document.removeEventListener(qv,T)},[]),a.jsx(Ce.div,{...c,ref:v,style:{pointerEvents:S?N?"auto":"none":void 0,...t.style},onFocusCapture:de(t.onFocusCapture,D.onFocusCapture),onBlurCapture:de(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:de(t.onPointerDownCapture,j.onPointerDownCapture)})});Kd.displayName=g4;var x4="DismissableLayerBranch",zC=p.forwardRef((t,e)=>{const n=p.useContext(BC),r=p.useRef(null),s=Ze(e,r);return p.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),a.jsx(Ce.div,{...t,ref:s})});zC.displayName=x4;function w4(t,e=globalThis==null?void 0:globalThis.document){const n=gn(t),r=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){qC(y4,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function b4(t,e=globalThis==null?void 0:globalThis.document){const n=gn(t),r=p.useRef(!1);return p.useEffect(()=>{const s=i=>{i.target&&!r.current&&qC(v4,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function u1(){const t=new CustomEvent(qv);document.dispatchEvent(t)}function qC(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Kx(s,i):s.dispatchEvent(i)}var _4=Kd,E4=zC,Zt=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},S4="Portal",kp=p.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=p.useState(!1);Zt(()=>i(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?FC.createPortal(a.jsx(Ce.div,{...r,ref:e}),o):null});kp.displayName=S4;function I4(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var Ns=t=>{const{present:e,children:n}=t,r=T4(e),s=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),i=Ze(r.ref,N4(s));return typeof n=="function"||r.isPresent?p.cloneElement(s,{ref:i}):null};Ns.displayName="Presence";function T4(t){const[e,n]=p.useState(),r=p.useRef({}),s=p.useRef(t),i=p.useRef("none"),o=t?"mounted":"unmounted",[l,c]=I4(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=sf(r.current);i.current=l==="mounted"?u:"none"},[l]),Zt(()=>{const u=r.current,h=s.current;if(h!==t){const m=i.current,g=sf(u);t?c("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&m!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),Zt(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,f=g=>{const y=sf(r.current).includes(g.animationName);if(g.target===e&&y&&(c("ANIMATION_END"),!s.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},m=g=>{g.target===e&&(i.current=sf(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function sf(t){return(t==null?void 0:t.animationName)||"none"}function N4(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function ns({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=C4({defaultProp:e,onChange:n}),i=t!==void 0,o=i?t:r,l=gn(n),c=p.useCallback(u=>{if(i){const f=typeof u=="function"?u(t):u;f!==t&&l(f)}else s(u)},[i,t,s,l]);return[o,c]}function C4({defaultProp:t,onChange:e}){const n=p.useState(t),[r]=n,s=p.useRef(r),i=gn(e);return p.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var A4="VisuallyHidden",Gd=p.forwardRef((t,e)=>a.jsx(Ce.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Gd.displayName=A4;var P4=Gd,Gx="ToastProvider",[Qx,R4,j4]=Hd("Toast"),[WC,vX]=$r("Toast",[j4]),[k4,Dp]=WC(Gx),HC=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[l,c]=p.useState(null),[u,h]=p.useState(0),f=p.useRef(!1),m=p.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Gx}\`. Expected non-empty \`string\`.`),a.jsx(Qx.Provider,{scope:e,children:a.jsx(k4,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:p.useCallback(()=>h(g=>g+1),[]),onToastRemove:p.useCallback(()=>h(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:o})})};HC.displayName=Gx;var KC="ToastViewport",D4=["F8"],Wv="toast.viewportPause",Hv="toast.viewportResume",GC=p.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=D4,label:s="Notifications ({hotkey})",...i}=t,o=Dp(KC,n),l=R4(n),c=p.useRef(null),u=p.useRef(null),h=p.useRef(null),f=p.useRef(null),m=Ze(e,f,o.onViewportChange),g=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;p.useEffect(()=>{const b=_=>{var S;r.length!==0&&r.every(N=>_[N]||_.code===N)&&((S=f.current)==null||S.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),p.useEffect(()=>{const b=c.current,_=f.current;if(v&&b&&_){const w=()=>{if(!o.isClosePausedRef.current){const D=new CustomEvent(Wv);_.dispatchEvent(D),o.isClosePausedRef.current=!0}},S=()=>{if(o.isClosePausedRef.current){const D=new CustomEvent(Hv);_.dispatchEvent(D),o.isClosePausedRef.current=!1}},N=D=>{!b.contains(D.relatedTarget)&&S()},j=()=>{b.contains(document.activeElement)||S()};return b.addEventListener("focusin",w),b.addEventListener("focusout",N),b.addEventListener("pointermove",w),b.addEventListener("pointerleave",j),window.addEventListener("blur",w),window.addEventListener("focus",S),()=>{b.removeEventListener("focusin",w),b.removeEventListener("focusout",N),b.removeEventListener("pointermove",w),b.removeEventListener("pointerleave",j),window.removeEventListener("blur",w),window.removeEventListener("focus",S)}}},[v,o.isClosePausedRef]);const y=p.useCallback(({tabbingDirection:b})=>{const w=l().map(S=>{const N=S.ref.current,j=[N,...K4(N)];return b==="forwards"?j:j.reverse()});return(b==="forwards"?w.reverse():w).flat()},[l]);return p.useEffect(()=>{const b=f.current;if(b){const _=w=>{var j,D,T;const S=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!S){const I=document.activeElement,C=w.shiftKey;if(w.target===b&&C){(j=u.current)==null||j.focus();return}const P=y({tabbingDirection:C?"backwards":"forwards"}),A=P.findIndex(F=>F===I);xy(P.slice(A+1))?w.preventDefault():C?(D=u.current)==null||D.focus():(T=h.current)==null||T.focus()}};return b.addEventListener("keydown",_),()=>b.removeEventListener("keydown",_)}},[l,y]),a.jsxs(E4,{ref:c,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&a.jsx(Kv,{ref:u,onFocusFromOutsideViewport:()=>{const b=y({tabbingDirection:"forwards"});xy(b)}}),a.jsx(Qx.Slot,{scope:n,children:a.jsx(Ce.ol,{tabIndex:-1,...i,ref:m})}),v&&a.jsx(Kv,{ref:h,onFocusFromOutsideViewport:()=>{const b=y({tabbingDirection:"backwards"});xy(b)}})]})});GC.displayName=KC;var QC="ToastFocusProxy",Kv=p.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Dp(QC,n);return a.jsx(Gd,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&r()}})});Kv.displayName=QC;var Mp="Toast",M4="toast.swipeStart",O4="toast.swipeMove",L4="toast.swipeCancel",V4="toast.swipeEnd",YC=p.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[l=!0,c]=ns({prop:r,defaultProp:s,onChange:i});return a.jsx(Ns,{present:n||l,children:a.jsx(U4,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:gn(t.onPause),onResume:gn(t.onResume),onSwipeStart:de(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:de(t.onSwipeMove,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:de(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:de(t.onSwipeEnd,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});YC.displayName=Mp;var[F4,$4]=WC(Mp,{onClose(){}}),U4=p.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:g,...v}=t,y=Dp(Mp,n),[b,_]=p.useState(null),w=Ze(e,F=>_(F)),S=p.useRef(null),N=p.useRef(null),j=s||y.duration,D=p.useRef(0),T=p.useRef(j),I=p.useRef(0),{onToastAdd:C,onToastRemove:R}=y,M=gn(()=>{var Y;(b==null?void 0:b.contains(document.activeElement))&&((Y=y.viewport)==null||Y.focus()),o()}),P=p.useCallback(F=>{!F||F===1/0||(window.clearTimeout(I.current),D.current=new Date().getTime(),I.current=window.setTimeout(M,F))},[M]);p.useEffect(()=>{const F=y.viewport;if(F){const Y=()=>{P(T.current),u==null||u()},q=()=>{const G=new Date().getTime()-D.current;T.current=T.current-G,window.clearTimeout(I.current),c==null||c()};return F.addEventListener(Wv,q),F.addEventListener(Hv,Y),()=>{F.removeEventListener(Wv,q),F.removeEventListener(Hv,Y)}}},[y.viewport,j,c,u,P]),p.useEffect(()=>{i&&!y.isClosePausedRef.current&&P(j)},[i,j,y.isClosePausedRef,P]),p.useEffect(()=>(C(),()=>R()),[C,R]);const A=p.useMemo(()=>b?rA(b):null,[b]);return y.viewport?a.jsxs(a.Fragment,{children:[A&&a.jsx(B4,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:A}),a.jsx(F4,{scope:n,onClose:M,children:ja.createPortal(a.jsx(Qx.ItemSlot,{scope:n,children:a.jsx(_4,{asChild:!0,onEscapeKeyDown:de(l,()=>{y.isFocusedToastEscapeKeyDownRef.current||M(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(Ce.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":y.swipeDirection,...v,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:de(t.onKeyDown,F=>{F.key==="Escape"&&(l==null||l(F.nativeEvent),F.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,M()))}),onPointerDown:de(t.onPointerDown,F=>{F.button===0&&(S.current={x:F.clientX,y:F.clientY})}),onPointerMove:de(t.onPointerMove,F=>{if(!S.current)return;const Y=F.clientX-S.current.x,q=F.clientY-S.current.y,G=!!N.current,O=["left","right"].includes(y.swipeDirection),L=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,X=O?L(0,Y):0,Q=O?0:L(0,q),te=F.pointerType==="touch"?10:2,Z={x:X,y:Q},xe={originalEvent:F,delta:Z};G?(N.current=Z,of(O4,f,xe,{discrete:!1})):d1(Z,y.swipeDirection,te)?(N.current=Z,of(M4,h,xe,{discrete:!1}),F.target.setPointerCapture(F.pointerId)):(Math.abs(Y)>te||Math.abs(q)>te)&&(S.current=null)}),onPointerUp:de(t.onPointerUp,F=>{const Y=N.current,q=F.target;if(q.hasPointerCapture(F.pointerId)&&q.releasePointerCapture(F.pointerId),N.current=null,S.current=null,Y){const G=F.currentTarget,O={originalEvent:F,delta:Y};d1(Y,y.swipeDirection,y.swipeThreshold)?of(V4,g,O,{discrete:!0}):of(L4,m,O,{discrete:!0}),G.addEventListener("click",L=>L.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),B4=t=>{const{__scopeToast:e,children:n,...r}=t,s=Dp(Mp,e),[i,o]=p.useState(!1),[l,c]=p.useState(!1);return W4(()=>o(!0)),p.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:a.jsx(kp,{asChild:!0,children:a.jsx(Gd,{...r,children:i&&a.jsxs(a.Fragment,{children:[s.label," ",n]})})})},z4="ToastTitle",XC=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(Ce.div,{...r,ref:e})});XC.displayName=z4;var q4="ToastDescription",JC=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(Ce.div,{...r,ref:e})});JC.displayName=q4;var ZC="ToastAction",eA=p.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?a.jsx(nA,{altText:n,asChild:!0,children:a.jsx(Yx,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${ZC}\`. Expected non-empty \`string\`.`),null)});eA.displayName=ZC;var tA="ToastClose",Yx=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=$4(tA,n);return a.jsx(nA,{asChild:!0,children:a.jsx(Ce.button,{type:"button",...r,ref:e,onClick:de(t.onClick,s.onClose)})})});Yx.displayName=tA;var nA=p.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return a.jsx(Ce.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function rA(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),H4(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...rA(r))}}),e}function of(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Kx(s,i):s.dispatchEvent(i)}var d1=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function W4(t=()=>{}){const e=gn(t);Zt(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function H4(t){return t.nodeType===t.ELEMENT_NODE}function K4(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function xy(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var G4=HC,sA=GC,iA=YC,oA=XC,aA=JC,lA=eA,cA=Yx;function uA(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=uA(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function dA(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=uA(t))&&(r&&(r+=" "),r+=e);return r}const h1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,f1=dA,Qd=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return f1(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const h=n==null?void 0:n[u],f=i==null?void 0:i[u];if(h===null)return null;const m=h1(h)||h1(f);return s[u][m]}),l=n&&Object.entries(n).reduce((u,h)=>{let[f,m]=h;return m===void 0||(u[f]=m),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:f,className:m,...g}=h;return Object.entries(g).every(v=>{let[y,b]=v;return Array.isArray(b)?b.includes({...i,...l}[y]):{...i,...l}[y]===b})?[...u,f,m]:u},[]);return f1(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),hA=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Y4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=p.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},c)=>p.createElement("svg",{ref:c,...Y4,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:hA("lucide",s),...l},[...o.map(([u,h])=>p.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=(t,e)=>{const n=p.forwardRef(({className:r,...s},i)=>p.createElement(X4,{ref:i,iconNode:e,className:hA(`lucide-${Q4(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=Be("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=Be("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=Be("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=Be("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=Be("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=Be("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=Be("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=Be("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=Be("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=Be("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=Be("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=Be("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=Be("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=Be("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=Be("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=Be("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=Be("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=Be("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=Be("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=Be("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=Be("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=Be("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=Be("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=Be("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=Be("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=Be("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=Be("ServerCrash",[["path",{d:"M6 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2",key:"4b9dqc"}],["path",{d:"M6 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-2",key:"22nnkd"}],["path",{d:"M6 6h.01",key:"1utrut"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"m13 6-4 6h6l-4 6",key:"14hqih"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=Be("ShieldOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=Be("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=Be("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=Be("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uF=Be("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=Be("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=Be("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=Be("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=Be("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=Be("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=Be("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=Be("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Zx="-",mF=t=>{const e=gF(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(Zx);return l[0]===""&&l.length!==1&&l.shift(),wA(l,e)||pF(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},wA=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?wA(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Zx);return(o=e.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},g1=/^\[(.+)\]$/,pF=t=>{if(g1.test(t)){const e=g1.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},gF=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return vF(Object.entries(t.classGroups),n).forEach(([i,o])=>{Qv(o,r,i,e)}),r},Qv=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:y1(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(yF(s)){Qv(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Qv(o,y1(e,i),n,r)})})},y1=(t,e)=>{let n=t;return e.split(Zx).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},yF=t=>t.isThemeGetter,vF=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[e+o,l])):i);return[n,s]}):t,xF=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},bA="!",wF=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=l=>{const c=[];let u=0,h=0,f;for(let b=0;b<l.length;b++){let _=l[b];if(u===0){if(_===s&&(r||l.slice(b,b+i)===e)){c.push(l.slice(h,b)),h=b+i;continue}if(_==="/"){f=b;continue}}_==="["?u++:_==="]"&&u--}const m=c.length===0?l:l.substring(h),g=m.startsWith(bA),v=g?m.substring(1):m,y=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:y}};return n?l=>n({className:l,parseClassName:o}):o},bF=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},_F=t=>({cache:xF(t.cacheSize),parseClassName:wF(t),...mF(t)}),EF=/\s+/,SF=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(EF);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:h,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:g}=n(u);let v=!!g,y=r(v?m.substring(0,g):m);if(!y){if(!v){l=u+(l.length>0?" "+l:l);continue}if(y=r(m),!y){l=u+(l.length>0?" "+l:l);continue}v=!1}const b=bF(h).join(":"),_=f?b+bA:b,w=_+y;if(i.includes(w))continue;i.push(w);const S=s(y,v);for(let N=0;N<S.length;++N){const j=S[N];i.push(_+j)}l=u+(l.length>0?" "+l:l)}return l};function IF(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=_A(e))&&(r&&(r+=" "),r+=n);return r}const _A=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=_A(t[r]))&&(n&&(n+=" "),n+=e);return n};function TF(t,...e){let n,r,s,i=o;function o(c){const u=e.reduce((h,f)=>f(h),t());return n=_F(u),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const u=r(c);if(u)return u;const h=SF(c,n);return s(c,h),h}return function(){return i(IF.apply(null,arguments))}}const Et=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},EA=/^\[(?:([a-z-]+):)?(.+)\]$/i,NF=/^\d+\/\d+$/,CF=new Set(["px","full","screen"]),AF=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,PF=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,RF=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,jF=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,kF=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,js=t=>Pl(t)||CF.has(t)||NF.test(t),vi=t=>Sc(t,"length",UF),Pl=t=>!!t&&!Number.isNaN(Number(t)),by=t=>Sc(t,"number",Pl),ou=t=>!!t&&Number.isInteger(Number(t)),DF=t=>t.endsWith("%")&&Pl(t.slice(0,-1)),Ve=t=>EA.test(t),xi=t=>AF.test(t),MF=new Set(["length","size","percentage"]),OF=t=>Sc(t,MF,SA),LF=t=>Sc(t,"position",SA),VF=new Set(["image","url"]),FF=t=>Sc(t,VF,zF),$F=t=>Sc(t,"",BF),au=()=>!0,Sc=(t,e,n)=>{const r=EA.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},UF=t=>PF.test(t)&&!RF.test(t),SA=()=>!1,BF=t=>jF.test(t),zF=t=>kF.test(t),qF=()=>{const t=Et("colors"),e=Et("spacing"),n=Et("blur"),r=Et("brightness"),s=Et("borderColor"),i=Et("borderRadius"),o=Et("borderSpacing"),l=Et("borderWidth"),c=Et("contrast"),u=Et("grayscale"),h=Et("hueRotate"),f=Et("invert"),m=Et("gap"),g=Et("gradientColorStops"),v=Et("gradientColorStopPositions"),y=Et("inset"),b=Et("margin"),_=Et("opacity"),w=Et("padding"),S=Et("saturate"),N=Et("scale"),j=Et("sepia"),D=Et("skew"),T=Et("space"),I=Et("translate"),C=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto",Ve,e],P=()=>[Ve,e],A=()=>["",js,vi],F=()=>["auto",Pl,Ve],Y=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],q=()=>["solid","dashed","dotted","double","none"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],L=()=>["","0",Ve],X=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Q=()=>[Pl,Ve];return{cacheSize:500,separator:":",theme:{colors:[au],spacing:[js,vi],blur:["none","",xi,Ve],brightness:Q(),borderColor:[t],borderRadius:["none","","full",xi,Ve],borderSpacing:P(),borderWidth:A(),contrast:Q(),grayscale:L(),hueRotate:Q(),invert:L(),gap:P(),gradientColorStops:[t],gradientColorStopPositions:[DF,vi],inset:M(),margin:M(),opacity:Q(),padding:P(),saturate:Q(),scale:Q(),sepia:L(),skew:Q(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",Ve]}],container:["container"],columns:[{columns:[xi]}],"break-after":[{"break-after":X()}],"break-before":[{"break-before":X()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Y(),Ve]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ou,Ve]}],basis:[{basis:M()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ve]}],grow:[{grow:L()}],shrink:[{shrink:L()}],order:[{order:["first","last","none",ou,Ve]}],"grid-cols":[{"grid-cols":[au]}],"col-start-end":[{col:["auto",{span:["full",ou,Ve]},Ve]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[au]}],"row-start-end":[{row:["auto",{span:[ou,Ve]},Ve]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ve]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ve]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ve,e]}],"min-w":[{"min-w":[Ve,e,"min","max","fit"]}],"max-w":[{"max-w":[Ve,e,"none","full","min","max","fit","prose",{screen:[xi]},xi]}],h:[{h:[Ve,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ve,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ve,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ve,e,"auto","min","max","fit"]}],"font-size":[{text:["base",xi,vi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",by]}],"font-family":[{font:[au]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ve]}],"line-clamp":[{"line-clamp":["none",Pl,by]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",js,Ve]}],"list-image":[{"list-image":["none",Ve]}],"list-style-type":[{list:["none","disc","decimal",Ve]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",js,vi]}],"underline-offset":[{"underline-offset":["auto",js,Ve]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ve]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ve]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Y(),LF]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",OF]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},FF]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...q(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:q()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...q()]}],"outline-offset":[{"outline-offset":[js,Ve]}],"outline-w":[{outline:[js,vi]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:A()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[js,vi]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",xi,$F]}],"shadow-color":[{shadow:[au]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...G(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":G()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",xi,Ve]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[S]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ve]}],duration:[{duration:Q()}],ease:[{ease:["linear","in","out","in-out",Ve]}],delay:[{delay:Q()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ve]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[ou,Ve]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ve]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ve]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ve]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[js,vi,by]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},WF=TF(qF);function _e(...t){return WF(dA(t))}function IA(t){return new Date(t).toLocaleDateString("en-US",{weekday:"short",day:"numeric",month:"short",year:"numeric"})}function TA(t){return new Date(t).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}function Tm(t){return typeof t=="string"?`${IA(t)} at ${TA(t)}`:t.toLocaleDateString("en-US",{weekday:"short",day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}function NA(t){if(!t)return"?";const e=t.trim().split(/\s+/);return e.length===1?t.substring(0,2).toUpperCase():`${e[0].charAt(0)}${e[e.length-1].charAt(0)}`.toUpperCase()}function HF(t){switch(t.status){case"upcoming":return`${IA(t.date)} at ${TA(t.date)}`;case"live":return"LIVE";case"completed":return t.result||"Completed";default:return""}}function KF(t){const e=new Date,s=(new Date(t).getTime()-e.getTime())/(1e3*60*60);return s>0&&s<=24}function GF(t){return t.isPredictionEnabledByAdmin===!0&&t.status==="upcoming"?!0:t.status==="upcoming"&&KF(t.date)}const QF=G4,CA=p.forwardRef(({className:t,...e},n)=>a.jsx(sA,{ref:n,className:_e("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));CA.displayName=sA.displayName;const YF=Qd("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),AA=p.forwardRef(({className:t,variant:e,...n},r)=>a.jsx(iA,{ref:r,className:_e(YF({variant:e}),t),...n}));AA.displayName=iA.displayName;const XF=p.forwardRef(({className:t,...e},n)=>a.jsx(lA,{ref:n,className:_e("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));XF.displayName=lA.displayName;const PA=p.forwardRef(({className:t,...e},n)=>a.jsx(cA,{ref:n,className:_e("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:a.jsx(Jx,{className:"h-4 w-4"})}));PA.displayName=cA.displayName;const RA=p.forwardRef(({className:t,...e},n)=>a.jsx(oA,{ref:n,className:_e("text-sm font-semibold",t),...e}));RA.displayName=oA.displayName;const jA=p.forwardRef(({className:t,...e},n)=>a.jsx(aA,{ref:n,className:_e("text-sm opacity-90",t),...e}));jA.displayName=aA.displayName;function JF(){const{toasts:t}=yn();return a.jsxs(QF,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return a.jsxs(AA,{...i,children:[a.jsxs("div",{className:"grid gap-1",children:[n&&a.jsx(RA,{children:n}),r&&a.jsx(jA,{children:r})]}),s,a.jsx(PA,{})]},e)}),a.jsx(CA,{})]})}var v1=["light","dark"],ZF="(prefers-color-scheme: dark)",e5=p.createContext(void 0),t5={setTheme:t=>{},themes:[]},n5=()=>{var t;return(t=p.useContext(e5))!=null?t:t5};p.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let u=i==="system",h=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(v=>`'${v}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,f=s?v1.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(v,y=!1,b=!0)=>{let _=o?o[v]:v,w=y?v+"|| ''":`'${_}'`,S="";return s&&b&&!y&&v1.includes(v)&&(S+=`d.style.colorScheme = '${v}';`),n==="class"?y||_?S+=`c.add(${w})`:S+="null":_&&(S+=`d[s](n,${w})`),S},g=t?`!function(){${h}${m(t)}}()`:r?`!function(){try{${h}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${ZF}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${u?"":"else{"+m(i,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(i,!1,!1)};}${f}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:g}})});var r5=t=>{switch(t){case"success":return o5;case"info":return l5;case"warning":return a5;case"error":return c5;default:return null}},s5=Array(12).fill(0),i5=({visible:t})=>re.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},re.createElement("div",{className:"sonner-spinner"},s5.map((e,n)=>re.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),o5=re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},re.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),a5=re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},re.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),l5=re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),c5=re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),u5=()=>{let[t,e]=re.useState(document.hidden);return re.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},Yv=1,d5=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:Yv++,o=this.toasts.find(c=>c.id===i),l=e.dismissible===void 0?!0:e.dismissible;return o?this.toasts=this.toasts.map(c=>c.id===i?(this.publish({...c,...e,id:i,title:r}),{...c,...e,id:i,dismissible:l,title:r}):c):this.addToast({title:r,...s,dismissible:l,id:i}),i},this.dismiss=e=>(e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=e instanceof Promise?e:e(),i=r!==void 0;return s.then(async o=>{if(f5(o)&&!o.ok){i=!1;let l=typeof n.error=="function"?await n.error(`HTTP error! status: ${o.status}`):n.error,c=typeof n.description=="function"?await n.description(`HTTP error! status: ${o.status}`):n.description;this.create({id:r,type:"error",message:l,description:c})}else if(n.success!==void 0){i=!1;let l=typeof n.success=="function"?await n.success(o):n.success,c=typeof n.description=="function"?await n.description(o):n.description;this.create({id:r,type:"success",message:l,description:c})}}).catch(async o=>{if(n.error!==void 0){i=!1;let l=typeof n.error=="function"?await n.error(o):n.error,c=typeof n.description=="function"?await n.description(o):n.description;this.create({id:r,type:"error",message:l,description:c})}}).finally(()=>{var o;i&&(this.dismiss(r),r=void 0),(o=n.finally)==null||o.call(n)}),r},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||Yv++;return this.create({jsx:e(r),id:r,...n}),r},this.subscribers=[],this.toasts=[]}},or=new d5,h5=(t,e)=>{let n=(e==null?void 0:e.id)||Yv++;return or.addToast({title:t,...e,id:n}),n},f5=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",m5=h5,p5=()=>or.toasts;Object.assign(m5,{success:or.success,info:or.info,warning:or.warning,error:or.error,custom:or.custom,message:or.message,promise:or.promise,dismiss:or.dismiss,loading:or.loading},{getHistory:p5});function g5(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}g5(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function af(t){return t.label!==void 0}var y5=3,v5="32px",x5=4e3,w5=356,b5=14,_5=20,E5=200;function S5(...t){return t.filter(Boolean).join(" ")}var I5=t=>{var e,n,r,s,i,o,l,c,u,h;let{invert:f,toast:m,unstyled:g,interacting:v,setHeights:y,visibleToasts:b,heights:_,index:w,toasts:S,expanded:N,removeToast:j,defaultRichColors:D,closeButton:T,style:I,cancelButtonStyle:C,actionButtonStyle:R,className:M="",descriptionClassName:P="",duration:A,position:F,gap:Y,loadingIcon:q,expandByDefault:G,classNames:O,icons:L,closeButtonAriaLabel:X="Close toast",pauseWhenPageIsHidden:Q,cn:te}=t,[Z,xe]=re.useState(!1),[Oe,V]=re.useState(!1),[B,ne]=re.useState(!1),[ae,W]=re.useState(!1),[oe,fe]=re.useState(0),[ye,ue]=re.useState(0),ee=re.useRef(null),me=re.useRef(null),pe=w===0,Ae=w+1<=b,ge=m.type,vt=m.dismissible!==!1,Qe=m.className||"",Ye=m.descriptionClassName||"",Xe=re.useMemo(()=>_.findIndex(ke=>ke.toastId===m.id)||0,[_,m.id]),Hn=re.useMemo(()=>{var ke;return(ke=m.closeButton)!=null?ke:T},[m.closeButton,T]),Kn=re.useMemo(()=>m.duration||A||x5,[m.duration,A]),xt=re.useRef(0),je=re.useRef(0),Qt=re.useRef(0),vn=re.useRef(null),[Fc,Pg]=F.split("-"),hi=re.useMemo(()=>_.reduce((ke,ft,at)=>at>=Xe?ke:ke+ft.height,0),[_,Xe]),$c=u5(),Sh=m.invert||f,Ro=ge==="loading";je.current=re.useMemo(()=>Xe*Y+hi,[Xe,hi]),re.useEffect(()=>{xe(!0)},[]),re.useLayoutEffect(()=>{if(!Z)return;let ke=me.current,ft=ke.style.height;ke.style.height="auto";let at=ke.getBoundingClientRect().height;ke.style.height=ft,ue(at),y(xn=>xn.find(Gn=>Gn.toastId===m.id)?xn.map(Gn=>Gn.toastId===m.id?{...Gn,height:at}:Gn):[{toastId:m.id,height:at,position:m.position},...xn])},[Z,m.title,m.description,y,m.id]);let as=re.useCallback(()=>{V(!0),fe(je.current),y(ke=>ke.filter(ft=>ft.toastId!==m.id)),setTimeout(()=>{j(m)},E5)},[m,j,y,je]);re.useEffect(()=>{if(m.promise&&ge==="loading"||m.duration===1/0||m.type==="loading")return;let ke,ft=Kn;return N||v||Q&&$c?(()=>{if(Qt.current<xt.current){let at=new Date().getTime()-xt.current;ft=ft-at}Qt.current=new Date().getTime()})():ft!==1/0&&(xt.current=new Date().getTime(),ke=setTimeout(()=>{var at;(at=m.onAutoClose)==null||at.call(m,m),as()},ft)),()=>clearTimeout(ke)},[N,v,G,m,Kn,as,m.promise,ge,Q,$c]),re.useEffect(()=>{let ke=me.current;if(ke){let ft=ke.getBoundingClientRect().height;return ue(ft),y(at=>[{toastId:m.id,height:ft,position:m.position},...at]),()=>y(at=>at.filter(xn=>xn.toastId!==m.id))}},[y,m.id]),re.useEffect(()=>{m.delete&&as()},[as,m.delete]);function Rg(){return L!=null&&L.loading?re.createElement("div",{className:"sonner-loader","data-visible":ge==="loading"},L.loading):q?re.createElement("div",{className:"sonner-loader","data-visible":ge==="loading"},q):re.createElement(i5,{visible:ge==="loading"})}return re.createElement("li",{"aria-live":m.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:me,className:te(M,Qe,O==null?void 0:O.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,O==null?void 0:O.default,O==null?void 0:O[ge],(n=m==null?void 0:m.classNames)==null?void 0:n[ge]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:D,"data-styled":!(m.jsx||m.unstyled||g),"data-mounted":Z,"data-promise":!!m.promise,"data-removed":Oe,"data-visible":Ae,"data-y-position":Fc,"data-x-position":Pg,"data-index":w,"data-front":pe,"data-swiping":B,"data-dismissible":vt,"data-type":ge,"data-invert":Sh,"data-swipe-out":ae,"data-expanded":!!(N||G&&Z),style:{"--index":w,"--toasts-before":w,"--z-index":S.length-w,"--offset":`${Oe?oe:je.current}px`,"--initial-height":G?"auto":`${ye}px`,...I,...m.style},onPointerDown:ke=>{Ro||!vt||(ee.current=new Date,fe(je.current),ke.target.setPointerCapture(ke.pointerId),ke.target.tagName!=="BUTTON"&&(ne(!0),vn.current={x:ke.clientX,y:ke.clientY}))},onPointerUp:()=>{var ke,ft,at,xn;if(ae||!vt)return;vn.current=null;let Gn=Number(((ke=me.current)==null?void 0:ke.style.getPropertyValue("--swipe-amount").replace("px",""))||0),fi=new Date().getTime()-((ft=ee.current)==null?void 0:ft.getTime()),As=Math.abs(Gn)/fi;if(Math.abs(Gn)>=_5||As>.11){fe(je.current),(at=m.onDismiss)==null||at.call(m,m),as(),W(!0);return}(xn=me.current)==null||xn.style.setProperty("--swipe-amount","0px"),ne(!1)},onPointerMove:ke=>{var ft;if(!vn.current||!vt)return;let at=ke.clientY-vn.current.y,xn=ke.clientX-vn.current.x,Gn=(Fc==="top"?Math.min:Math.max)(0,at),fi=ke.pointerType==="touch"?10:2;Math.abs(Gn)>fi?(ft=me.current)==null||ft.style.setProperty("--swipe-amount",`${at}px`):Math.abs(xn)>fi&&(vn.current=null)}},Hn&&!m.jsx?re.createElement("button",{"aria-label":X,"data-disabled":Ro,"data-close-button":!0,onClick:Ro||!vt?()=>{}:()=>{var ke;as(),(ke=m.onDismiss)==null||ke.call(m,m)},className:te(O==null?void 0:O.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},re.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),re.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,m.jsx||re.isValidElement(m.title)?m.jsx||m.title:re.createElement(re.Fragment,null,ge||m.icon||m.promise?re.createElement("div",{"data-icon":"",className:te(O==null?void 0:O.icon,(i=m==null?void 0:m.classNames)==null?void 0:i.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Rg():null,m.type!=="loading"?m.icon||(L==null?void 0:L[ge])||r5(ge):null):null,re.createElement("div",{"data-content":"",className:te(O==null?void 0:O.content,(o=m==null?void 0:m.classNames)==null?void 0:o.content)},re.createElement("div",{"data-title":"",className:te(O==null?void 0:O.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},m.title),m.description?re.createElement("div",{"data-description":"",className:te(P,Ye,O==null?void 0:O.description,(c=m==null?void 0:m.classNames)==null?void 0:c.description)},m.description):null),re.isValidElement(m.cancel)?m.cancel:m.cancel&&af(m.cancel)?re.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||C,onClick:ke=>{var ft,at;af(m.cancel)&&vt&&((at=(ft=m.cancel).onClick)==null||at.call(ft,ke),as())},className:te(O==null?void 0:O.cancelButton,(u=m==null?void 0:m.classNames)==null?void 0:u.cancelButton)},m.cancel.label):null,re.isValidElement(m.action)?m.action:m.action&&af(m.action)?re.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||R,onClick:ke=>{var ft,at;af(m.action)&&(ke.defaultPrevented||((at=(ft=m.action).onClick)==null||at.call(ft,ke),as()))},className:te(O==null?void 0:O.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function x1(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}var T5=t=>{let{invert:e,position:n="bottom-right",hotkey:r=["altKey","KeyT"],expand:s,closeButton:i,className:o,offset:l,theme:c="light",richColors:u,duration:h,style:f,visibleToasts:m=y5,toastOptions:g,dir:v=x1(),gap:y=b5,loadingIcon:b,icons:_,containerAriaLabel:w="Notifications",pauseWhenPageIsHidden:S,cn:N=S5}=t,[j,D]=re.useState([]),T=re.useMemo(()=>Array.from(new Set([n].concat(j.filter(Q=>Q.position).map(Q=>Q.position)))),[j,n]),[I,C]=re.useState([]),[R,M]=re.useState(!1),[P,A]=re.useState(!1),[F,Y]=re.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),q=re.useRef(null),G=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),O=re.useRef(null),L=re.useRef(!1),X=re.useCallback(Q=>{var te;(te=j.find(Z=>Z.id===Q.id))!=null&&te.delete||or.dismiss(Q.id),D(Z=>Z.filter(({id:xe})=>xe!==Q.id))},[j]);return re.useEffect(()=>or.subscribe(Q=>{if(Q.dismiss){D(te=>te.map(Z=>Z.id===Q.id?{...Z,delete:!0}:Z));return}setTimeout(()=>{FC.flushSync(()=>{D(te=>{let Z=te.findIndex(xe=>xe.id===Q.id);return Z!==-1?[...te.slice(0,Z),{...te[Z],...Q},...te.slice(Z+1)]:[Q,...te]})})})}),[]),re.useEffect(()=>{if(c!=="system"){Y(c);return}c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Y("dark"):Y("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:Q})=>{Y(Q?"dark":"light")})},[c]),re.useEffect(()=>{j.length<=1&&M(!1)},[j]),re.useEffect(()=>{let Q=te=>{var Z,xe;r.every(Oe=>te[Oe]||te.code===Oe)&&(M(!0),(Z=q.current)==null||Z.focus()),te.code==="Escape"&&(document.activeElement===q.current||(xe=q.current)!=null&&xe.contains(document.activeElement))&&M(!1)};return document.addEventListener("keydown",Q),()=>document.removeEventListener("keydown",Q)},[r]),re.useEffect(()=>{if(q.current)return()=>{O.current&&(O.current.focus({preventScroll:!0}),O.current=null,L.current=!1)}},[q.current]),j.length?re.createElement("section",{"aria-label":`${w} ${G}`,tabIndex:-1},T.map((Q,te)=>{var Z;let[xe,Oe]=Q.split("-");return re.createElement("ol",{key:Q,dir:v==="auto"?x1():v,tabIndex:-1,ref:q,className:o,"data-sonner-toaster":!0,"data-theme":F,"data-y-position":xe,"data-x-position":Oe,style:{"--front-toast-height":`${((Z=I[0])==null?void 0:Z.height)||0}px`,"--offset":typeof l=="number"?`${l}px`:l||v5,"--width":`${w5}px`,"--gap":`${y}px`,...f},onBlur:V=>{L.current&&!V.currentTarget.contains(V.relatedTarget)&&(L.current=!1,O.current&&(O.current.focus({preventScroll:!0}),O.current=null))},onFocus:V=>{V.target instanceof HTMLElement&&V.target.dataset.dismissible==="false"||L.current||(L.current=!0,O.current=V.relatedTarget)},onMouseEnter:()=>M(!0),onMouseMove:()=>M(!0),onMouseLeave:()=>{P||M(!1)},onPointerDown:V=>{V.target instanceof HTMLElement&&V.target.dataset.dismissible==="false"||A(!0)},onPointerUp:()=>A(!1)},j.filter(V=>!V.position&&te===0||V.position===Q).map((V,B)=>{var ne,ae;return re.createElement(I5,{key:V.id,icons:_,index:B,toast:V,defaultRichColors:u,duration:(ne=g==null?void 0:g.duration)!=null?ne:h,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:e,visibleToasts:m,closeButton:(ae=g==null?void 0:g.closeButton)!=null?ae:i,interacting:P,position:Q,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:X,toasts:j.filter(W=>W.position==V.position),heights:I.filter(W=>W.position==V.position),setHeights:C,expandByDefault:s,gap:y,loadingIcon:b,expanded:R,pauseWhenPageIsHidden:S,cn:N})}))})):null};const N5=({...t})=>{const{theme:e="system"}=n5();return a.jsx(T5,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var C5=OT.useId||(()=>{}),A5=0;function Js(t){const[e,n]=p.useState(C5());return Zt(()=>{t||n(r=>r??String(A5++))},[t]),t||(e?`radix-${e}`:"")}const P5=["top","right","bottom","left"],ao=Math.min,cr=Math.max,Nm=Math.round,lf=Math.floor,lo=t=>({x:t,y:t}),R5={left:"right",right:"left",bottom:"top",top:"bottom"},j5={start:"end",end:"start"};function Xv(t,e,n){return cr(t,ao(e,n))}function Zs(t,e){return typeof t=="function"?t(e):t}function ei(t){return t.split("-")[0]}function Ic(t){return t.split("-")[1]}function ew(t){return t==="x"?"y":"x"}function tw(t){return t==="y"?"height":"width"}function co(t){return["top","bottom"].includes(ei(t))?"y":"x"}function nw(t){return ew(co(t))}function k5(t,e,n){n===void 0&&(n=!1);const r=Ic(t),s=nw(t),i=tw(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Cm(o)),[o,Cm(o)]}function D5(t){const e=Cm(t);return[Jv(t),e,Jv(e)]}function Jv(t){return t.replace(/start|end/g,e=>j5[e])}function M5(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function O5(t,e,n,r){const s=Ic(t);let i=M5(ei(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Jv)))),i}function Cm(t){return t.replace(/left|right|bottom|top/g,e=>R5[e])}function L5(t){return{top:0,right:0,bottom:0,left:0,...t}}function kA(t){return typeof t!="number"?L5(t):{top:t,right:t,bottom:t,left:t}}function Am(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function w1(t,e,n){let{reference:r,floating:s}=t;const i=co(e),o=nw(e),l=tw(o),c=ei(e),u=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,m=r[l]/2-s[l]/2;let g;switch(c){case"top":g={x:h,y:r.y-s.height};break;case"bottom":g={x:h,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:f};break;case"left":g={x:r.x-s.width,y:f};break;default:g={x:r.x,y:r.y}}switch(Ic(e)){case"start":g[o]-=m*(n&&u?-1:1);break;case"end":g[o]+=m*(n&&u?-1:1);break}return g}const V5=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=w1(u,r,c),m=r,g={},v=0;for(let y=0;y<l.length;y++){const{name:b,fn:_}=l[y],{x:w,y:S,data:N,reset:j}=await _({x:h,y:f,initialPlacement:r,placement:m,strategy:s,middlewareData:g,rects:u,platform:o,elements:{reference:t,floating:e}});h=w??h,f=S??f,g={...g,[b]:{...g[b],...N}},j&&v<=50&&(v++,typeof j=="object"&&(j.placement&&(m=j.placement),j.rects&&(u=j.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):j.rects),{x:h,y:f}=w1(u,m,c)),y=-1)}return{x:h,y:f,placement:m,strategy:s,middlewareData:g}};async function fd(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:m=!1,padding:g=0}=Zs(e,t),v=kA(g),b=l[m?f==="floating"?"reference":"floating":f],_=Am(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(b)))==null||n?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:h,strategy:c})),w=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),N=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},j=Am(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:S,strategy:c}):w);return{top:(_.top-j.top+v.top)/N.y,bottom:(j.bottom-_.bottom+v.bottom)/N.y,left:(_.left-j.left+v.left)/N.x,right:(j.right-_.right+v.right)/N.x}}const F5=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:h=0}=Zs(t,e)||{};if(u==null)return{};const f=kA(h),m={x:n,y:r},g=nw(s),v=tw(g),y=await o.getDimensions(u),b=g==="y",_=b?"top":"left",w=b?"bottom":"right",S=b?"clientHeight":"clientWidth",N=i.reference[v]+i.reference[g]-m[g]-i.floating[v],j=m[g]-i.reference[g],D=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let T=D?D[S]:0;(!T||!await(o.isElement==null?void 0:o.isElement(D)))&&(T=l.floating[S]||i.floating[v]);const I=N/2-j/2,C=T/2-y[v]/2-1,R=ao(f[_],C),M=ao(f[w],C),P=R,A=T-y[v]-M,F=T/2-y[v]/2+I,Y=Xv(P,F,A),q=!c.arrow&&Ic(s)!=null&&F!==Y&&i.reference[v]/2-(F<P?R:M)-y[v]/2<0,G=q?F<P?F-P:F-A:0;return{[g]:m[g]+G,data:{[g]:Y,centerOffset:F-Y-G,...q&&{alignmentOffset:G}},reset:q}}}),$5=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:y=!0,...b}=Zs(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const _=ei(s),w=co(l),S=ei(l)===l,N=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=m||(S||!y?[Cm(l)]:D5(l)),D=v!=="none";!m&&D&&j.push(...O5(l,y,v,N));const T=[l,...j],I=await fd(e,b),C=[];let R=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&C.push(I[_]),f){const F=k5(s,o,N);C.push(I[F[0]],I[F[1]])}if(R=[...R,{placement:s,overflows:C}],!C.every(F=>F<=0)){var M,P;const F=(((M=i.flip)==null?void 0:M.index)||0)+1,Y=T[F];if(Y)return{data:{index:F,overflows:R},reset:{placement:Y}};let q=(P=R.filter(G=>G.overflows[0]<=0).sort((G,O)=>G.overflows[1]-O.overflows[1])[0])==null?void 0:P.placement;if(!q)switch(g){case"bestFit":{var A;const G=(A=R.filter(O=>{if(D){const L=co(O.placement);return L===w||L==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(L=>L>0).reduce((L,X)=>L+X,0)]).sort((O,L)=>O[1]-L[1])[0])==null?void 0:A[0];G&&(q=G);break}case"initialPlacement":q=l;break}if(s!==q)return{reset:{placement:q}}}return{}}}};function b1(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function _1(t){return P5.some(e=>t[e]>=0)}const U5=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Zs(t,e);switch(r){case"referenceHidden":{const i=await fd(e,{...s,elementContext:"reference"}),o=b1(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:_1(o)}}}case"escaped":{const i=await fd(e,{...s,altBoundary:!0}),o=b1(i,n.floating);return{data:{escapedOffsets:o,escaped:_1(o)}}}default:return{}}}}};async function B5(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=ei(n),l=Ic(n),c=co(n)==="y",u=["left","top"].includes(o)?-1:1,h=i&&c?-1:1,f=Zs(e,t);let{mainAxis:m,crossAxis:g,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof v=="number"&&(g=l==="end"?v*-1:v),c?{x:g*h,y:m*u}:{x:m*u,y:g*h}}const z5=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:l}=e,c=await B5(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},q5=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:b=>{let{x:_,y:w}=b;return{x:_,y:w}}},...c}=Zs(t,e),u={x:n,y:r},h=await fd(e,c),f=co(ei(s)),m=ew(f);let g=u[m],v=u[f];if(i){const b=m==="y"?"top":"left",_=m==="y"?"bottom":"right",w=g+h[b],S=g-h[_];g=Xv(w,g,S)}if(o){const b=f==="y"?"top":"left",_=f==="y"?"bottom":"right",w=v+h[b],S=v-h[_];v=Xv(w,v,S)}const y=l.fn({...e,[m]:g,[f]:v});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[m]:i,[f]:o}}}}}},W5=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Zs(t,e),h={x:n,y:r},f=co(s),m=ew(f);let g=h[m],v=h[f];const y=Zs(l,e),b=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const S=m==="y"?"height":"width",N=i.reference[m]-i.floating[S]+b.mainAxis,j=i.reference[m]+i.reference[S]-b.mainAxis;g<N?g=N:g>j&&(g=j)}if(u){var _,w;const S=m==="y"?"width":"height",N=["top","left"].includes(ei(s)),j=i.reference[f]-i.floating[S]+(N&&((_=o.offset)==null?void 0:_[f])||0)+(N?0:b.crossAxis),D=i.reference[f]+i.reference[S]+(N?0:((w=o.offset)==null?void 0:w[f])||0)-(N?b.crossAxis:0);v<j?v=j:v>D&&(v=D)}return{[m]:g,[f]:v}}}},H5=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:l}=e,{apply:c=()=>{},...u}=Zs(t,e),h=await fd(e,u),f=ei(s),m=Ic(s),g=co(s)==="y",{width:v,height:y}=i.floating;let b,_;f==="top"||f==="bottom"?(b=f,_=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(_=f,b=m==="end"?"top":"bottom");const w=y-h.top-h.bottom,S=v-h.left-h.right,N=ao(y-h[b],w),j=ao(v-h[_],S),D=!e.middlewareData.shift;let T=N,I=j;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(I=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(T=w),D&&!m){const R=cr(h.left,0),M=cr(h.right,0),P=cr(h.top,0),A=cr(h.bottom,0);g?I=v-2*(R!==0||M!==0?R+M:cr(h.left,h.right)):T=y-2*(P!==0||A!==0?P+A:cr(h.top,h.bottom))}await c({...e,availableWidth:I,availableHeight:T});const C=await o.getDimensions(l.floating);return v!==C.width||y!==C.height?{reset:{rects:!0}}:{}}}};function Vp(){return typeof window<"u"}function Tc(t){return DA(t)?(t.nodeName||"").toLowerCase():"#document"}function gr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Cs(t){var e;return(e=(DA(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function DA(t){return Vp()?t instanceof Node||t instanceof gr(t).Node:!1}function ss(t){return Vp()?t instanceof Element||t instanceof gr(t).Element:!1}function Ss(t){return Vp()?t instanceof HTMLElement||t instanceof gr(t).HTMLElement:!1}function E1(t){return!Vp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof gr(t).ShadowRoot}function Yd(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=is(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function K5(t){return["table","td","th"].includes(Tc(t))}function Fp(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function rw(t){const e=sw(),n=ss(t)?is(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function G5(t){let e=uo(t);for(;Ss(e)&&!ec(e);){if(rw(e))return e;if(Fp(e))return null;e=uo(e)}return null}function sw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ec(t){return["html","body","#document"].includes(Tc(t))}function is(t){return gr(t).getComputedStyle(t)}function $p(t){return ss(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function uo(t){if(Tc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||E1(t)&&t.host||Cs(t);return E1(e)?e.host:e}function MA(t){const e=uo(t);return ec(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ss(e)&&Yd(e)?e:MA(e)}function md(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=MA(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=gr(s);if(i){const l=Zv(o);return e.concat(o,o.visualViewport||[],Yd(s)?s:[],l&&n?md(l):[])}return e.concat(s,md(s,[],n))}function Zv(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function OA(t){const e=is(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Ss(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,l=Nm(n)!==i||Nm(r)!==o;return l&&(n=i,r=o),{width:n,height:r,$:l}}function iw(t){return ss(t)?t:t.contextElement}function Rl(t){const e=iw(t);if(!Ss(e))return lo(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=OA(e);let o=(i?Nm(n.width):n.width)/r,l=(i?Nm(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Q5=lo(0);function LA(t){const e=gr(t);return!sw()||!e.visualViewport?Q5:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Y5(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==gr(t)?!1:e}function ma(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=iw(t);let o=lo(1);e&&(r?ss(r)&&(o=Rl(r)):o=Rl(t));const l=Y5(i,n,r)?LA(i):lo(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,h=s.width/o.x,f=s.height/o.y;if(i){const m=gr(i),g=r&&ss(r)?gr(r):r;let v=m,y=Zv(v);for(;y&&r&&g!==v;){const b=Rl(y),_=y.getBoundingClientRect(),w=is(y),S=_.left+(y.clientLeft+parseFloat(w.paddingLeft))*b.x,N=_.top+(y.clientTop+parseFloat(w.paddingTop))*b.y;c*=b.x,u*=b.y,h*=b.x,f*=b.y,c+=S,u+=N,v=gr(y),y=Zv(v)}}return Am({width:h,height:f,x:c,y:u})}function X5(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Cs(r),l=e?Fp(e.floating):!1;if(r===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=lo(1);const h=lo(0),f=Ss(r);if((f||!f&&!i)&&((Tc(r)!=="body"||Yd(o))&&(c=$p(r)),Ss(r))){const m=ma(r);u=Rl(r),h.x=m.x+r.clientLeft,h.y=m.y+r.clientTop}return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+h.x,y:n.y*u.y-c.scrollTop*u.y+h.y}}function J5(t){return Array.from(t.getClientRects())}function e0(t,e){const n=$p(t).scrollLeft;return e?e.left+n:ma(Cs(t)).left+n}function Z5(t){const e=Cs(t),n=$p(t),r=t.ownerDocument.body,s=cr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=cr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+e0(t);const l=-n.scrollTop;return is(r).direction==="rtl"&&(o+=cr(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:l}}function e3(t,e){const n=gr(t),r=Cs(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const u=sw();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l,y:c}}function t3(t,e){const n=ma(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Ss(t)?Rl(t):lo(1),o=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:l,x:c,y:u}}function S1(t,e,n){let r;if(e==="viewport")r=e3(t,n);else if(e==="document")r=Z5(Cs(t));else if(ss(e))r=t3(e,n);else{const s=LA(t);r={...e,x:e.x-s.x,y:e.y-s.y}}return Am(r)}function VA(t,e){const n=uo(t);return n===e||!ss(n)||ec(n)?!1:is(n).position==="fixed"||VA(n,e)}function n3(t,e){const n=e.get(t);if(n)return n;let r=md(t,[],!1).filter(l=>ss(l)&&Tc(l)!=="body"),s=null;const i=is(t).position==="fixed";let o=i?uo(t):t;for(;ss(o)&&!ec(o);){const l=is(o),c=rw(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Yd(o)&&!c&&VA(t,o))?r=r.filter(h=>h!==o):s=l,o=uo(o)}return e.set(t,r),r}function r3(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Fp(e)?[]:n3(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,h)=>{const f=S1(e,h,s);return u.top=cr(f.top,u.top),u.right=ao(f.right,u.right),u.bottom=ao(f.bottom,u.bottom),u.left=cr(f.left,u.left),u},S1(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function s3(t){const{width:e,height:n}=OA(t);return{width:e,height:n}}function i3(t,e,n){const r=Ss(e),s=Cs(e),i=n==="fixed",o=ma(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=lo(0);if(r||!r&&!i)if((Tc(e)!=="body"||Yd(s))&&(l=$p(e)),r){const g=ma(e,!0,i,e);c.x=g.x+e.clientLeft,c.y=g.y+e.clientTop}else s&&(c.x=e0(s));let u=0,h=0;if(s&&!r&&!i){const g=s.getBoundingClientRect();h=g.top+l.scrollTop,u=g.left+l.scrollLeft-e0(s,g)}const f=o.left+l.scrollLeft-c.x-u,m=o.top+l.scrollTop-c.y-h;return{x:f,y:m,width:o.width,height:o.height}}function _y(t){return is(t).position==="static"}function I1(t,e){if(!Ss(t)||is(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Cs(t)===n&&(n=n.ownerDocument.body),n}function FA(t,e){const n=gr(t);if(Fp(t))return n;if(!Ss(t)){let s=uo(t);for(;s&&!ec(s);){if(ss(s)&&!_y(s))return s;s=uo(s)}return n}let r=I1(t,e);for(;r&&K5(r)&&_y(r);)r=I1(r,e);return r&&ec(r)&&_y(r)&&!rw(r)?n:r||G5(t)||n}const o3=async function(t){const e=this.getOffsetParent||FA,n=this.getDimensions,r=await n(t.floating);return{reference:i3(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function a3(t){return is(t).direction==="rtl"}const l3={convertOffsetParentRelativeRectToViewportRelativeRect:X5,getDocumentElement:Cs,getClippingRect:r3,getOffsetParent:FA,getElementRects:o3,getClientRects:J5,getDimensions:s3,getScale:Rl,isElement:ss,isRTL:a3};function c3(t,e){let n=null,r;const s=Cs(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const{left:u,top:h,width:f,height:m}=t.getBoundingClientRect();if(l||e(),!f||!m)return;const g=lf(h),v=lf(s.clientWidth-(u+f)),y=lf(s.clientHeight-(h+m)),b=lf(u),w={rootMargin:-g+"px "+-v+"px "+-y+"px "+-b+"px",threshold:cr(0,ao(1,c))||1};let S=!0;function N(j){const D=j[0].intersectionRatio;if(D!==c){if(!S)return o();D?o(!1,D):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S=!1}try{n=new IntersectionObserver(N,{...w,root:s.ownerDocument})}catch{n=new IntersectionObserver(N,w)}n.observe(t)}return o(!0),i}function u3(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=iw(t),h=s||i?[...u?md(u):[],...md(e)]:[];h.forEach(_=>{s&&_.addEventListener("scroll",n,{passive:!0}),i&&_.addEventListener("resize",n)});const f=u&&l?c3(u,n):null;let m=-1,g=null;o&&(g=new ResizeObserver(_=>{let[w]=_;w&&w.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var S;(S=g)==null||S.observe(e)})),n()}),u&&!c&&g.observe(u),g.observe(e));let v,y=c?ma(t):null;c&&b();function b(){const _=ma(t);y&&(_.x!==y.x||_.y!==y.y||_.width!==y.width||_.height!==y.height)&&n(),y=_,v=requestAnimationFrame(b)}return n(),()=>{var _;h.forEach(w=>{s&&w.removeEventListener("scroll",n),i&&w.removeEventListener("resize",n)}),f==null||f(),(_=g)==null||_.disconnect(),g=null,c&&cancelAnimationFrame(v)}}const d3=z5,h3=q5,f3=$5,m3=H5,p3=U5,T1=F5,g3=W5,y3=(t,e,n)=>{const r=new Map,s={platform:l3,...n},i={...s.platform,_c:r};return V5(t,e,{...s,platform:i})};var Lf=typeof document<"u"?p.useLayoutEffect:p.useEffect;function Pm(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Pm(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Pm(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function $A(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function N1(t,e){const n=$A(t);return Math.round(e*n)/n}function Ey(t){const e=p.useRef(t);return Lf(()=>{e.current=t}),e}function v3(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[h,f]=p.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,g]=p.useState(r);Pm(m,r)||g(r);const[v,y]=p.useState(null),[b,_]=p.useState(null),w=p.useCallback(O=>{O!==D.current&&(D.current=O,y(O))},[]),S=p.useCallback(O=>{O!==T.current&&(T.current=O,_(O))},[]),N=i||v,j=o||b,D=p.useRef(null),T=p.useRef(null),I=p.useRef(h),C=c!=null,R=Ey(c),M=Ey(s),P=Ey(u),A=p.useCallback(()=>{if(!D.current||!T.current)return;const O={placement:e,strategy:n,middleware:m};M.current&&(O.platform=M.current),y3(D.current,T.current,O).then(L=>{const X={...L,isPositioned:P.current!==!1};F.current&&!Pm(I.current,X)&&(I.current=X,ja.flushSync(()=>{f(X)}))})},[m,e,n,M,P]);Lf(()=>{u===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,f(O=>({...O,isPositioned:!1})))},[u]);const F=p.useRef(!1);Lf(()=>(F.current=!0,()=>{F.current=!1}),[]),Lf(()=>{if(N&&(D.current=N),j&&(T.current=j),N&&j){if(R.current)return R.current(N,j,A);A()}},[N,j,A,R,C]);const Y=p.useMemo(()=>({reference:D,floating:T,setReference:w,setFloating:S}),[w,S]),q=p.useMemo(()=>({reference:N,floating:j}),[N,j]),G=p.useMemo(()=>{const O={position:n,left:0,top:0};if(!q.floating)return O;const L=N1(q.floating,h.x),X=N1(q.floating,h.y);return l?{...O,transform:"translate("+L+"px, "+X+"px)",...$A(q.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:L,top:X}},[n,l,q.floating,h.x,h.y]);return p.useMemo(()=>({...h,update:A,refs:Y,elements:q,floatingStyles:G}),[h,A,Y,q,G])}const x3=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?T1({element:r.current,padding:s}).fn(n):{}:r?T1({element:r,padding:s}).fn(n):{}}}},w3=(t,e)=>({...d3(t),options:[t,e]}),b3=(t,e)=>({...h3(t),options:[t,e]}),_3=(t,e)=>({...g3(t),options:[t,e]}),E3=(t,e)=>({...f3(t),options:[t,e]}),S3=(t,e)=>({...m3(t),options:[t,e]}),I3=(t,e)=>({...p3(t),options:[t,e]}),T3=(t,e)=>({...x3(t),options:[t,e]});var N3="Arrow",UA=p.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return a.jsx(Ce.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});UA.displayName=N3;var C3=UA;function A3(t,e=[]){let n=[];function r(i,o){const l=p.createContext(o),c=n.length;n=[...n,o];function u(f){const{scope:m,children:g,...v}=f,y=(m==null?void 0:m[t][c])||l,b=p.useMemo(()=>v,Object.values(v));return a.jsx(y.Provider,{value:b,children:g})}function h(f,m){const g=(m==null?void 0:m[t][c])||l,v=p.useContext(g);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return u.displayName=i+"Provider",[u,h]}const s=()=>{const i=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,P3(s,...e)]}function P3(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function ow(t){const[e,n]=p.useState(void 0);return Zt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var aw="Popper",[BA,Nc]=A3(aw),[R3,zA]=BA(aw),qA=t=>{const{__scopePopper:e,children:n}=t,[r,s]=p.useState(null);return a.jsx(R3,{scope:e,anchor:r,onAnchorChange:s,children:n})};qA.displayName=aw;var WA="PopperAnchor",HA=p.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=zA(WA,n),o=p.useRef(null),l=Ze(e,o);return p.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:a.jsx(Ce.div,{...s,ref:l})});HA.displayName=WA;var lw="PopperContent",[j3,k3]=BA(lw),KA=p.forwardRef((t,e)=>{var B,ne,ae,W,oe,fe;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:v,...y}=t,b=zA(lw,n),[_,w]=p.useState(null),S=Ze(e,ye=>w(ye)),[N,j]=p.useState(null),D=ow(N),T=(D==null?void 0:D.width)??0,I=(D==null?void 0:D.height)??0,C=r+(i!=="center"?"-"+i:""),R=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},M=Array.isArray(u)?u:[u],P=M.length>0,A={padding:R,boundary:M.filter(M3),altBoundary:P},{refs:F,floatingStyles:Y,placement:q,isPositioned:G,middlewareData:O}=v3({strategy:"fixed",placement:C,whileElementsMounted:(...ye)=>u3(...ye,{animationFrame:g==="always"}),elements:{reference:b.anchor},middleware:[w3({mainAxis:s+I,alignmentAxis:o}),c&&b3({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?_3():void 0,...A}),c&&E3({...A}),S3({...A,apply:({elements:ye,rects:ue,availableWidth:ee,availableHeight:me})=>{const{width:pe,height:Ae}=ue.reference,ge=ye.floating.style;ge.setProperty("--radix-popper-available-width",`${ee}px`),ge.setProperty("--radix-popper-available-height",`${me}px`),ge.setProperty("--radix-popper-anchor-width",`${pe}px`),ge.setProperty("--radix-popper-anchor-height",`${Ae}px`)}}),N&&T3({element:N,padding:l}),O3({arrowWidth:T,arrowHeight:I}),m&&I3({strategy:"referenceHidden",...A})]}),[L,X]=YA(q),Q=gn(v);Zt(()=>{G&&(Q==null||Q())},[G,Q]);const te=(B=O.arrow)==null?void 0:B.x,Z=(ne=O.arrow)==null?void 0:ne.y,xe=((ae=O.arrow)==null?void 0:ae.centerOffset)!==0,[Oe,V]=p.useState();return Zt(()=>{_&&V(window.getComputedStyle(_).zIndex)},[_]),a.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...Y,transform:G?Y.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Oe,"--radix-popper-transform-origin":[(W=O.transformOrigin)==null?void 0:W.x,(oe=O.transformOrigin)==null?void 0:oe.y].join(" "),...((fe=O.hide)==null?void 0:fe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:a.jsx(j3,{scope:n,placedSide:L,onArrowChange:j,arrowX:te,arrowY:Z,shouldHideArrow:xe,children:a.jsx(Ce.div,{"data-side":L,"data-align":X,...y,ref:S,style:{...y.style,animation:G?void 0:"none"}})})})});KA.displayName=lw;var GA="PopperArrow",D3={top:"bottom",right:"left",bottom:"top",left:"right"},QA=p.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=k3(GA,r),o=D3[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(C3,{...s,ref:n,style:{...s.style,display:"block"}})})});QA.displayName=GA;function M3(t){return t!==null}var O3=t=>({name:"transformOrigin",options:t,fn(e){var b,_,w;const{placement:n,rects:r,middlewareData:s}=e,o=((b=s.arrow)==null?void 0:b.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,h]=YA(n),f={start:"0%",center:"50%",end:"100%"}[h],m=(((_=s.arrow)==null?void 0:_.x)??0)+l/2,g=(((w=s.arrow)==null?void 0:w.y)??0)+c/2;let v="",y="";return u==="bottom"?(v=o?f:`${m}px`,y=`${-c}px`):u==="top"?(v=o?f:`${m}px`,y=`${r.floating.height+c}px`):u==="right"?(v=`${-c}px`,y=o?f:`${g}px`):u==="left"&&(v=`${r.floating.width+c}px`,y=o?f:`${g}px`),{data:{x:v,y}}}});function YA(t){const[e,n="center"]=t.split("-");return[e,n]}var XA=qA,cw=HA,uw=KA,dw=QA,[Up,wX]=$r("Tooltip",[Nc]),hw=Nc(),JA="TooltipProvider",L3=700,C1="tooltip.open",[V3,ZA]=Up(JA),eP=t=>{const{__scopeTooltip:e,delayDuration:n=L3,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,[o,l]=p.useState(!0),c=p.useRef(!1),u=p.useRef(0);return p.useEffect(()=>{const h=u.current;return()=>window.clearTimeout(h)},[]),a.jsx(V3,{scope:e,isOpenDelayed:o,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(u.current),l(!1)},[]),onClose:p.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>l(!0),r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:p.useCallback(h=>{c.current=h},[]),disableHoverableContent:s,children:i})};eP.displayName=JA;var tP="Tooltip",[bX,Bp]=Up(tP),t0="TooltipTrigger",F3=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Bp(t0,n),i=ZA(t0,n),o=hw(n),l=p.useRef(null),c=Ze(e,l,s.onTriggerChange),u=p.useRef(!1),h=p.useRef(!1),f=p.useCallback(()=>u.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),a.jsx(cw,{asChild:!0,...o,children:a.jsx(Ce.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:de(t.onPointerMove,m=>{m.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:de(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:de(t.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:de(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:de(t.onBlur,s.onClose),onClick:de(t.onClick,s.onClose)})})});F3.displayName=t0;var $3="TooltipPortal",[_X,U3]=Up($3,{forceMount:void 0}),tc="TooltipContent",nP=p.forwardRef((t,e)=>{const n=U3(tc,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=Bp(tc,t.__scopeTooltip);return a.jsx(Ns,{present:r||o.open,children:o.disableHoverableContent?a.jsx(rP,{side:s,...i,ref:e}):a.jsx(B3,{side:s,...i,ref:e})})}),B3=p.forwardRef((t,e)=>{const n=Bp(tc,t.__scopeTooltip),r=ZA(tc,t.__scopeTooltip),s=p.useRef(null),i=Ze(e,s),[o,l]=p.useState(null),{trigger:c,onClose:u}=n,h=s.current,{onPointerInTransitChange:f}=r,m=p.useCallback(()=>{l(null),f(!1)},[f]),g=p.useCallback((v,y)=>{const b=v.currentTarget,_={x:v.clientX,y:v.clientY},w=H3(_,b.getBoundingClientRect()),S=K3(_,w),N=G3(y.getBoundingClientRect()),j=Y3([...S,...N]);l(j),f(!0)},[f]);return p.useEffect(()=>()=>m(),[m]),p.useEffect(()=>{if(c&&h){const v=b=>g(b,h),y=b=>g(b,c);return c.addEventListener("pointerleave",v),h.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",v),h.removeEventListener("pointerleave",y)}}},[c,h,g,m]),p.useEffect(()=>{if(o){const v=y=>{const b=y.target,_={x:y.clientX,y:y.clientY},w=(c==null?void 0:c.contains(b))||(h==null?void 0:h.contains(b)),S=!Q3(_,o);w?m():S&&(m(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,h,o,u,m]),a.jsx(rP,{...t,ref:i})}),[z3,q3]=Up(tP,{isInside:!1}),rP=p.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=t,c=Bp(tc,n),u=hw(n),{onClose:h}=c;return p.useEffect(()=>(document.addEventListener(C1,h),()=>document.removeEventListener(C1,h)),[h]),p.useEffect(()=>{if(c.trigger){const f=m=>{const g=m.target;g!=null&&g.contains(c.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,h]),a.jsx(Kd,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:a.jsxs(uw,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(UC,{children:r}),a.jsx(z3,{scope:n,isInside:!0,children:a.jsx(P4,{id:c.contentId,role:"tooltip",children:s||r})})]})})});nP.displayName=tc;var sP="TooltipArrow",W3=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=hw(n);return q3(sP,n).isInside?null:a.jsx(dw,{...s,...r,ref:e})});W3.displayName=sP;function H3(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function K3(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function G3(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function Q3(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i].x,c=e[i].y,u=e[o].x,h=e[o].y;c>r!=h>r&&n<(u-l)*(r-c)/(h-c)+l&&(s=!s)}return s}function Y3(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),X3(e)}function X3(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var J3=eP,iP=nP;const Z3=J3,e$=p.forwardRef(({className:t,sideOffset:e=4,...n},r)=>a.jsx(iP,{ref:r,sideOffset:e,className:_e("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));e$.displayName=iP.displayName;var zp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},qp=typeof window>"u"||"Deno"in globalThis;function Hr(){}function t$(t,e){return typeof t=="function"?t(e):t}function n$(t){return typeof t=="number"&&t>=0&&t!==1/0}function r$(t,e){return Math.max(t+(e||0)-Date.now(),0)}function A1(t,e){return typeof t=="function"?t(e):t}function s$(t,e){return typeof t=="function"?t(e):t}function P1(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==fw(o,e.options))return!1}else if(!gd(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function R1(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(pd(e.options.mutationKey)!==pd(i))return!1}else if(!gd(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function fw(t,e){return((e==null?void 0:e.queryKeyHashFn)||pd)(t)}function pd(t){return JSON.stringify(t,(e,n)=>n0(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function gd(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!gd(t[n],e[n])):!1}function oP(t,e){if(t===e)return t;const n=j1(t)&&j1(e);if(n||n0(t)&&n0(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,l=n?[]:{};let c=0;for(let u=0;u<o;u++){const h=n?u:i[u];(!n&&r.includes(h)||n)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,c++):(l[h]=oP(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&c++)}return s===o&&c===s?t:l}return e}function j1(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function n0(t){if(!k1(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!k1(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function k1(t){return Object.prototype.toString.call(t)==="[object Object]"}function i$(t){return new Promise(e=>{setTimeout(e,t)})}function o$(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?oP(t,e):e}function a$(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function l$(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var mw=Symbol();function aP(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===mw?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Xo,Di,Vl,yT,c$=(yT=class extends zp{constructor(){super();st(this,Xo);st(this,Di);st(this,Vl);Fe(this,Vl,e=>{if(!qp&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){J(this,Di)||this.setEventListener(J(this,Vl))}onUnsubscribe(){var e;this.hasListeners()||((e=J(this,Di))==null||e.call(this),Fe(this,Di,void 0))}setEventListener(e){var n;Fe(this,Vl,e),(n=J(this,Di))==null||n.call(this),Fe(this,Di,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){J(this,Xo)!==e&&(Fe(this,Xo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof J(this,Xo)=="boolean"?J(this,Xo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Xo=new WeakMap,Di=new WeakMap,Vl=new WeakMap,yT),lP=new c$,Fl,Mi,$l,vT,u$=(vT=class extends zp{constructor(){super();st(this,Fl,!0);st(this,Mi);st(this,$l);Fe(this,$l,e=>{if(!qp&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){J(this,Mi)||this.setEventListener(J(this,$l))}onUnsubscribe(){var e;this.hasListeners()||((e=J(this,Mi))==null||e.call(this),Fe(this,Mi,void 0))}setEventListener(e){var n;Fe(this,$l,e),(n=J(this,Mi))==null||n.call(this),Fe(this,Mi,e(this.setOnline.bind(this)))}setOnline(e){J(this,Fl)!==e&&(Fe(this,Fl,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return J(this,Fl)}},Fl=new WeakMap,Mi=new WeakMap,$l=new WeakMap,vT),Rm=new u$;function d$(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function h$(t){return Math.min(1e3*2**t,3e4)}function cP(t){return(t??"online")==="online"?Rm.isOnline():!0}var uP=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Sy(t){return t instanceof uP}function dP(t){let e=!1,n=0,r=!1,s;const i=d$(),o=y=>{var b;r||(m(new uP(y)),(b=t.abort)==null||b.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>lP.isFocused()&&(t.networkMode==="always"||Rm.isOnline())&&t.canRun(),h=()=>cP(t.networkMode)&&t.canRun(),f=y=>{var b;r||(r=!0,(b=t.onSuccess)==null||b.call(t,y),s==null||s(),i.resolve(y))},m=y=>{var b;r||(r=!0,(b=t.onError)==null||b.call(t,y),s==null||s(),i.reject(y))},g=()=>new Promise(y=>{var b;s=_=>{(r||u())&&y(_)},(b=t.onPause)==null||b.call(t)}).then(()=>{var y;s=void 0,r||(y=t.onContinue)==null||y.call(t)}),v=()=>{if(r)return;let y;const b=n===0?t.initialPromise:void 0;try{y=b??t.fn()}catch(_){y=Promise.reject(_)}Promise.resolve(y).then(f).catch(_=>{var D;if(r)return;const w=t.retry??(qp?0:3),S=t.retryDelay??h$,N=typeof S=="function"?S(n,_):S,j=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,_);if(e||!j){m(_);return}n++,(D=t.onFail)==null||D.call(t,n,_),i$(N).then(()=>u()?void 0:g()).then(()=>{e?m(_):v()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?v():g().then(v),i)}}function f$(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=l=>setTimeout(l,0);const i=l=>{e?t.push(l):s(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Vn=f$(),Jo,xT,hP=(xT=class{constructor(){st(this,Jo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),n$(this.gcTime)&&Fe(this,Jo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(qp?1/0:5*60*1e3))}clearGcTimeout(){J(this,Jo)&&(clearTimeout(J(this,Jo)),Fe(this,Jo,void 0))}},Jo=new WeakMap,xT),Ul,Bl,Sr,Tn,Fd,Zo,Kr,ks,wT,m$=(wT=class extends hP{constructor(n){super();st(this,Kr);st(this,Ul);st(this,Bl);st(this,Sr);st(this,Tn);st(this,Fd);st(this,Zo);Fe(this,Zo,!1),Fe(this,Fd,n.defaultOptions),this.setOptions(n.options),this.observers=[],Fe(this,Sr,n.cache),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Fe(this,Ul,g$(this.options)),this.state=n.state??J(this,Ul),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=J(this,Tn))==null?void 0:n.promise}setOptions(n){this.options={...J(this,Fd),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&J(this,Sr).remove(this)}setData(n,r){const s=o$(this.state.data,n,this.options);return _n(this,Kr,ks).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){_n(this,Kr,ks).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=J(this,Tn))==null?void 0:s.promise;return(i=J(this,Tn))==null||i.cancel(n),r?r.then(Hr).catch(Hr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(J(this,Ul))}isActive(){return this.observers.some(n=>s$(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===mw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!r$(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=J(this,Tn))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=J(this,Tn))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),J(this,Sr).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(J(this,Tn)&&(J(this,Zo)?J(this,Tn).cancel({revert:!0}):J(this,Tn).cancelRetry()),this.scheduleGc()),J(this,Sr).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||_n(this,Kr,ks).call(this,{type:"invalidate"})}fetch(n,r){var u,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(J(this,Tn))return J(this,Tn).continueRetry(),J(this,Tn).promise}if(n&&this.setOptions(n),!this.options.queryFn){const m=this.observers.find(g=>g.options.queryFn);m&&this.setOptions(m.options)}const s=new AbortController,i=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(Fe(this,Zo,!0),s.signal)})},o=()=>{const m=aP(this.options,r),g={queryKey:this.queryKey,meta:this.meta};return i(g),Fe(this,Zo,!1),this.options.persister?this.options.persister(m,g,this):m(g)},l={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};i(l),(u=this.options.behavior)==null||u.onFetch(l,this),Fe(this,Bl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&_n(this,Kr,ks).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=m=>{var g,v,y,b;Sy(m)&&m.silent||_n(this,Kr,ks).call(this,{type:"error",error:m}),Sy(m)||((v=(g=J(this,Sr).config).onError)==null||v.call(g,m,this),(b=(y=J(this,Sr).config).onSettled)==null||b.call(y,this.state.data,m,this)),this.scheduleGc()};return Fe(this,Tn,dP({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:m=>{var g,v,y,b;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(_){c(_);return}(v=(g=J(this,Sr).config).onSuccess)==null||v.call(g,m,this),(b=(y=J(this,Sr).config).onSettled)==null||b.call(y,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,g)=>{_n(this,Kr,ks).call(this,{type:"failed",failureCount:m,error:g})},onPause:()=>{_n(this,Kr,ks).call(this,{type:"pause"})},onContinue:()=>{_n(this,Kr,ks).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),J(this,Tn).start()}},Ul=new WeakMap,Bl=new WeakMap,Sr=new WeakMap,Tn=new WeakMap,Fd=new WeakMap,Zo=new WeakMap,Kr=new WeakSet,ks=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...p$(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return Sy(i)&&i.revert&&J(this,Bl)?{...J(this,Bl),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),Vn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),J(this,Sr).notify({query:this,type:"updated",action:n})})},wT);function p$(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:cP(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function g$(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ds,bT,y$=(bT=class extends zp{constructor(e={}){super();st(this,ds);this.config=e,Fe(this,ds,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??fw(s,n);let o=this.get(i);return o||(o=new m$({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){J(this,ds).has(e.queryHash)||(J(this,ds).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=J(this,ds).get(e.queryHash);n&&(e.destroy(),n===e&&J(this,ds).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Vn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return J(this,ds).get(e)}getAll(){return[...J(this,ds).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>P1(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>P1(e,r)):n}notify(e){Vn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Vn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Vn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ds=new WeakMap,bT),hs,On,ea,fs,Ii,_T,v$=(_T=class extends hP{constructor(n){super();st(this,fs);st(this,hs);st(this,On);st(this,ea);this.mutationId=n.mutationId,Fe(this,On,n.mutationCache),Fe(this,hs,[]),this.state=n.state||x$(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){J(this,hs).includes(n)||(J(this,hs).push(n),this.clearGcTimeout(),J(this,On).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Fe(this,hs,J(this,hs).filter(r=>r!==n)),this.scheduleGc(),J(this,On).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){J(this,hs).length||(this.state.status==="pending"?this.scheduleGc():J(this,On).remove(this))}continue(){var n;return((n=J(this,ea))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var i,o,l,c,u,h,f,m,g,v,y,b,_,w,S,N,j,D,T,I;Fe(this,ea,dP({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(C,R)=>{_n(this,fs,Ii).call(this,{type:"failed",failureCount:C,error:R})},onPause:()=>{_n(this,fs,Ii).call(this,{type:"pause"})},onContinue:()=>{_n(this,fs,Ii).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>J(this,On).canRun(this)}));const r=this.state.status==="pending",s=!J(this,ea).canStart();try{if(!r){_n(this,fs,Ii).call(this,{type:"pending",variables:n,isPaused:s}),await((o=(i=J(this,On).config).onMutate)==null?void 0:o.call(i,n,this));const R=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,n));R!==this.state.context&&_n(this,fs,Ii).call(this,{type:"pending",context:R,variables:n,isPaused:s})}const C=await J(this,ea).start();return await((h=(u=J(this,On).config).onSuccess)==null?void 0:h.call(u,C,n,this.state.context,this)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,C,n,this.state.context)),await((v=(g=J(this,On).config).onSettled)==null?void 0:v.call(g,C,null,this.state.variables,this.state.context,this)),await((b=(y=this.options).onSettled)==null?void 0:b.call(y,C,null,n,this.state.context)),_n(this,fs,Ii).call(this,{type:"success",data:C}),C}catch(C){try{throw await((w=(_=J(this,On).config).onError)==null?void 0:w.call(_,C,n,this.state.context,this)),await((N=(S=this.options).onError)==null?void 0:N.call(S,C,n,this.state.context)),await((D=(j=J(this,On).config).onSettled)==null?void 0:D.call(j,void 0,C,this.state.variables,this.state.context,this)),await((I=(T=this.options).onSettled)==null?void 0:I.call(T,void 0,C,n,this.state.context)),C}finally{_n(this,fs,Ii).call(this,{type:"error",error:C})}}finally{J(this,On).runNext(this)}}},hs=new WeakMap,On=new WeakMap,ea=new WeakMap,fs=new WeakSet,Ii=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Vn.batch(()=>{J(this,hs).forEach(s=>{s.onMutationUpdate(n)}),J(this,On).notify({mutation:this,type:"updated",action:n})})},_T);function x$(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ir,$d,ET,w$=(ET=class extends zp{constructor(e={}){super();st(this,ir);st(this,$d);this.config=e,Fe(this,ir,new Map),Fe(this,$d,Date.now())}build(e,n,r){const s=new v$({mutationCache:this,mutationId:++$h(this,$d)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){const n=cf(e),r=J(this,ir).get(n)??[];r.push(e),J(this,ir).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=cf(e);if(J(this,ir).has(n)){const s=(r=J(this,ir).get(n))==null?void 0:r.filter(i=>i!==e);s&&(s.length===0?J(this,ir).delete(n):J(this,ir).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=J(this,ir).get(cf(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=J(this,ir).get(cf(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){Vn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...J(this,ir).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>R1(n,r))}findAll(e={}){return this.getAll().filter(n=>R1(e,n))}notify(e){Vn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Vn.batch(()=>Promise.all(e.map(n=>n.continue().catch(Hr))))}},ir=new WeakMap,$d=new WeakMap,ET);function cf(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function D1(t){return{onFetch:(e,n)=>{var h,f,m,g,v;const r=e.options,s=(m=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((g=e.state.data)==null?void 0:g.pages)||[],o=((v=e.state.data)==null?void 0:v.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let y=!1;const b=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},_=aP(e.options,e.fetchOptions),w=async(S,N,j)=>{if(y)return Promise.reject();if(N==null&&S.pages.length)return Promise.resolve(S);const D={queryKey:e.queryKey,pageParam:N,direction:j?"backward":"forward",meta:e.options.meta};b(D);const T=await _(D),{maxPages:I}=e.options,C=j?l$:a$;return{pages:C(S.pages,T,I),pageParams:C(S.pageParams,N,I)}};if(s&&i.length){const S=s==="backward",N=S?b$:M1,j={pages:i,pageParams:o},D=N(r,j);l=await w(j,D,S)}else{const S=t??i.length;do{const N=c===0?o[0]??r.initialPageParam:M1(r,l);if(c>0&&N==null)break;l=await w(l,N),c++}while(c<S)}return l};e.options.persister?e.fetchFn=()=>{var y,b;return(b=(y=e.options).persister)==null?void 0:b.call(y,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function M1(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function b$(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Ot,Oi,Li,zl,ql,Vi,Wl,Hl,ST,_$=(ST=class{constructor(t={}){st(this,Ot);st(this,Oi);st(this,Li);st(this,zl);st(this,ql);st(this,Vi);st(this,Wl);st(this,Hl);Fe(this,Ot,t.queryCache||new y$),Fe(this,Oi,t.mutationCache||new w$),Fe(this,Li,t.defaultOptions||{}),Fe(this,zl,new Map),Fe(this,ql,new Map),Fe(this,Vi,0)}mount(){$h(this,Vi)._++,J(this,Vi)===1&&(Fe(this,Wl,lP.subscribe(async t=>{t&&(await this.resumePausedMutations(),J(this,Ot).onFocus())})),Fe(this,Hl,Rm.subscribe(async t=>{t&&(await this.resumePausedMutations(),J(this,Ot).onOnline())})))}unmount(){var t,e;$h(this,Vi)._--,J(this,Vi)===0&&((t=J(this,Wl))==null||t.call(this),Fe(this,Wl,void 0),(e=J(this,Hl))==null||e.call(this),Fe(this,Hl,void 0))}isFetching(t){return J(this,Ot).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return J(this,Oi).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=J(this,Ot).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=J(this,Ot).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(A1(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return J(this,Ot).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=J(this,Ot).get(r.queryHash),i=s==null?void 0:s.state.data,o=t$(e,i);if(o!==void 0)return J(this,Ot).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Vn.batch(()=>J(this,Ot).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=J(this,Ot).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=J(this,Ot);Vn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=J(this,Ot),r={type:"active",...t};return Vn.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=Vn.batch(()=>J(this,Ot).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Hr).catch(Hr)}invalidateQueries(t={},e={}){return Vn.batch(()=>{if(J(this,Ot).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=Vn.batch(()=>J(this,Ot).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Hr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Hr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=J(this,Ot).build(this,e);return n.isStaleByTime(A1(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Hr).catch(Hr)}fetchInfiniteQuery(t){return t.behavior=D1(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Hr).catch(Hr)}ensureInfiniteQueryData(t){return t.behavior=D1(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Rm.isOnline()?J(this,Oi).resumePausedMutations():Promise.resolve()}getQueryCache(){return J(this,Ot)}getMutationCache(){return J(this,Oi)}getDefaultOptions(){return J(this,Li)}setDefaultOptions(t){Fe(this,Li,t)}setQueryDefaults(t,e){J(this,zl).set(pd(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...J(this,zl).values()];let n={};return e.forEach(r=>{gd(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){J(this,ql).set(pd(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...J(this,ql).values()];let n={};return e.forEach(r=>{gd(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...J(this,Li).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=fw(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===mw&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...J(this,Li).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){J(this,Ot).clear(),J(this,Oi).clear()}},Ot=new WeakMap,Oi=new WeakMap,Li=new WeakMap,zl=new WeakMap,ql=new WeakMap,Vi=new WeakMap,Wl=new WeakMap,Hl=new WeakMap,ST),E$=p.createContext(void 0),S$=({client:t,children:e})=>(p.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),a.jsx(E$.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yd(){return yd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yd.apply(this,arguments)}var Ui;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ui||(Ui={}));const O1="popstate";function I$(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return r0("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:jm(s)}return N$(e,n,null,t)}function Ut(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function fP(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function T$(){return Math.random().toString(36).substr(2,8)}function L1(t,e){return{usr:t.state,key:t.key,idx:e}}function r0(t,e,n,r){return n===void 0&&(n=null),yd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Cc(e):e,{state:n,key:e&&e.key||r||T$()})}function jm(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Cc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function N$(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=Ui.Pop,c=null,u=h();u==null&&(u=0,o.replaceState(yd({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function f(){l=Ui.Pop;let b=h(),_=b==null?null:b-u;u=b,c&&c({action:l,location:y.location,delta:_})}function m(b,_){l=Ui.Push;let w=r0(y.location,b,_);u=h()+1;let S=L1(w,u),N=y.createHref(w);try{o.pushState(S,"",N)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(N)}i&&c&&c({action:l,location:y.location,delta:1})}function g(b,_){l=Ui.Replace;let w=r0(y.location,b,_);u=h();let S=L1(w,u),N=y.createHref(w);o.replaceState(S,"",N),i&&c&&c({action:l,location:y.location,delta:0})}function v(b){let _=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof b=="string"?b:jm(b);return w=w.replace(/ $/,"%20"),Ut(_,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,_)}let y={get action(){return l},get location(){return t(s,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(O1,f),c=b,()=>{s.removeEventListener(O1,f),c=null}},createHref(b){return e(s,b)},createURL:v,encodeLocation(b){let _=v(b);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:m,replace:g,go(b){return o.go(b)}};return y}var V1;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(V1||(V1={}));function C$(t,e,n){return n===void 0&&(n="/"),A$(t,e,n,!1)}function A$(t,e,n,r){let s=typeof e=="string"?Cc(e):e,i=pw(s.pathname||"/",n);if(i==null)return null;let o=mP(t);P$(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=U$(i);l=F$(o[c],u,r)}return l}function mP(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Ut(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Ji([r,c.relativePath]),h=n.concat(c);i.children&&i.children.length>0&&(Ut(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),mP(i.children,e,h,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:L$(u,i.index),routesMeta:h})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of pP(i.path))s(i,o,c)}),e}function pP(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=pP(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function P$(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:V$(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const R$=/^:[\w-]+$/,j$=3,k$=2,D$=1,M$=10,O$=-2,F1=t=>t==="*";function L$(t,e){let n=t.split("/"),r=n.length;return n.some(F1)&&(r+=O$),e&&(r+=k$),n.filter(s=>!F1(s)).reduce((s,i)=>s+(R$.test(i)?j$:i===""?D$:M$),r)}function V$(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function F$(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=$1({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),m=c.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=$1({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Ji([i,f.pathname]),pathnameBase:W$(Ji([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Ji([i,f.pathnameBase]))}return o}function $1(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=$$(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,h,f)=>{let{paramName:m,isOptional:g}=h;if(m==="*"){let y=l[f]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const v=l[f];return g&&!v?u[m]=void 0:u[m]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function $$(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),fP(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function U$(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fP(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function pw(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function B$(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Cc(t):t;return{pathname:n?n.startsWith("/")?n:z$(n,e):e,search:H$(r),hash:K$(s)}}function z$(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Iy(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function q$(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function gw(t,e){let n=q$(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function yw(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Cc(t):(s=yd({},t),Ut(!s.pathname||!s.pathname.includes("?"),Iy("?","pathname","search",s)),Ut(!s.pathname||!s.pathname.includes("#"),Iy("#","pathname","hash",s)),Ut(!s.search||!s.search.includes("#"),Iy("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}l=f>=0?e[f]:"/"}let c=B$(s,l),u=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const Ji=t=>t.join("/").replace(/\/\/+/g,"/"),W$=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),H$=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,K$=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function G$(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const gP=["post","put","patch","delete"];new Set(gP);const Q$=["get",...gP];new Set(Q$);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vd(){return vd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vd.apply(this,arguments)}const vw=p.createContext(null),Y$=p.createContext(null),_o=p.createContext(null),Wp=p.createContext(null),oi=p.createContext({outlet:null,matches:[],isDataRoute:!1}),yP=p.createContext(null);function X$(t,e){let{relative:n}=e===void 0?{}:e;Ac()||Ut(!1);let{basename:r,navigator:s}=p.useContext(_o),{hash:i,pathname:o,search:l}=wP(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Ji([r,o])),s.createHref({pathname:c,search:l,hash:i})}function Ac(){return p.useContext(Wp)!=null}function ka(){return Ac()||Ut(!1),p.useContext(Wp).location}function vP(t){p.useContext(_o).static||p.useLayoutEffect(t)}function nr(){let{isDataRoute:t}=p.useContext(oi);return t?uU():J$()}function J$(){Ac()||Ut(!1);let t=p.useContext(vw),{basename:e,future:n,navigator:r}=p.useContext(_o),{matches:s}=p.useContext(oi),{pathname:i}=ka(),o=JSON.stringify(gw(s,n.v7_relativeSplatPath)),l=p.useRef(!1);return vP(()=>{l.current=!0}),p.useCallback(function(u,h){if(h===void 0&&(h={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let f=yw(u,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ji([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,i,t])}function xP(){let{matches:t}=p.useContext(oi),e=t[t.length-1];return e?e.params:{}}function wP(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=p.useContext(_o),{matches:s}=p.useContext(oi),{pathname:i}=ka(),o=JSON.stringify(gw(s,r.v7_relativeSplatPath));return p.useMemo(()=>yw(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function Z$(t,e){return eU(t,e)}function eU(t,e,n,r){Ac()||Ut(!1);let{navigator:s}=p.useContext(_o),{matches:i}=p.useContext(oi),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=ka(),h;if(e){var f;let b=typeof e=="string"?Cc(e):e;c==="/"||(f=b.pathname)!=null&&f.startsWith(c)||Ut(!1),h=b}else h=u;let m=h.pathname||"/",g=m;if(c!=="/"){let b=c.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(b.length).join("/")}let v=C$(t,{pathname:g}),y=iU(v&&v.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:Ji([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:Ji([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,n,r);return e&&y?p.createElement(Wp.Provider,{value:{location:vd({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ui.Pop}},y):y}function tU(){let t=cU(),e=G$(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},e),n?p.createElement("pre",{style:s},n):null,null)}const nU=p.createElement(tU,null);class rU extends p.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?p.createElement(oi.Provider,{value:this.props.routeContext},p.createElement(yP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function sU(t){let{routeContext:e,match:n,children:r}=t,s=p.useContext(vw);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),p.createElement(oi.Provider,{value:e},r)}function iU(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let h=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);h>=0||Ut(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:m,errors:g}=n,v=f.route.loader&&m[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||v){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,f,m)=>{let g,v=!1,y=null,b=null;n&&(g=l&&f.route.id?l[f.route.id]:void 0,y=f.route.errorElement||nU,c&&(u<0&&m===0?(v=!0,b=null):u===m&&(v=!0,b=f.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,m+1)),w=()=>{let S;return g?S=y:v?S=b:f.route.Component?S=p.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=h,p.createElement(sU,{match:f,routeContext:{outlet:h,matches:_,isDataRoute:n!=null},children:S})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?p.createElement(rU,{location:n.location,revalidation:n.revalidation,component:y,error:g,children:w(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):w()},null)}var bP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(bP||{}),km=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(km||{});function oU(t){let e=p.useContext(vw);return e||Ut(!1),e}function aU(t){let e=p.useContext(Y$);return e||Ut(!1),e}function lU(t){let e=p.useContext(oi);return e||Ut(!1),e}function _P(t){let e=lU(),n=e.matches[e.matches.length-1];return n.route.id||Ut(!1),n.route.id}function cU(){var t;let e=p.useContext(yP),n=aU(km.UseRouteError),r=_P(km.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function uU(){let{router:t}=oU(bP.UseNavigateStable),e=_P(km.UseNavigateStable),n=p.useRef(!1);return vP(()=>{n.current=!0}),p.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,vd({fromRouteId:e},i)))},[t,e])}function dU(t){let{to:e,replace:n,state:r,relative:s}=t;Ac()||Ut(!1);let{future:i,static:o}=p.useContext(_o),{matches:l}=p.useContext(oi),{pathname:c}=ka(),u=nr(),h=yw(e,gw(l,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(h);return p.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:s}),[u,f,s,n,r]),null}function Mn(t){Ut(!1)}function hU(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Ui.Pop,navigator:i,static:o=!1,future:l}=t;Ac()&&Ut(!1);let c=e.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:i,static:o,future:vd({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=Cc(r));let{pathname:h="/",search:f="",hash:m="",state:g=null,key:v="default"}=r,y=p.useMemo(()=>{let b=pw(h,c);return b==null?null:{location:{pathname:b,search:f,hash:m,state:g,key:v},navigationType:s}},[c,h,f,m,g,v,s]);return y==null?null:p.createElement(_o.Provider,{value:u},p.createElement(Wp.Provider,{children:n,value:y}))}function fU(t){let{children:e,location:n}=t;return Z$(s0(e),n)}new Promise(()=>{});function s0(t,e){e===void 0&&(e=[]);let n=[];return p.Children.forEach(t,(r,s)=>{if(!p.isValidElement(r))return;let i=[...e,s];if(r.type===p.Fragment){n.push.apply(n,s0(r.props.children,i));return}r.type!==Mn&&Ut(!1),!r.props.index||!r.props.children||Ut(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=s0(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function i0(){return i0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i0.apply(this,arguments)}function mU(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function pU(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function gU(t,e){return t.button===0&&(!e||e==="_self")&&!pU(t)}const yU=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],vU="6";try{window.__reactRouterVersion=vU}catch{}const xU="startTransition",U1=OT[xU];function wU(t){let{basename:e,children:n,future:r,window:s}=t,i=p.useRef();i.current==null&&(i.current=I$({window:s,v5Compat:!0}));let o=i.current,[l,c]=p.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=p.useCallback(f=>{u&&U1?U1(()=>c(f)):c(f)},[c,u]);return p.useLayoutEffect(()=>o.listen(h),[o,h]),p.createElement(hU,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const bU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_U=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,it=p.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:h,viewTransition:f}=e,m=mU(e,yU),{basename:g}=p.useContext(_o),v,y=!1;if(typeof u=="string"&&_U.test(u)&&(v=u,bU))try{let S=new URL(window.location.href),N=u.startsWith("//")?new URL(S.protocol+u):new URL(u),j=pw(N.pathname,g);N.origin===S.origin&&j!=null?u=j+N.search+N.hash:y=!0}catch{}let b=X$(u,{relative:s}),_=EU(u,{replace:o,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:f});function w(S){r&&r(S),S.defaultPrevented||_(S)}return p.createElement("a",i0({},m,{href:v||b,onClick:y||i?r:w,ref:n,target:c}))});var B1;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(B1||(B1={}));var z1;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(z1||(z1={}));function EU(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,c=nr(),u=ka(),h=wP(t,{relative:o});return p.useCallback(f=>{if(gU(f,n)){f.preventDefault();let m=r!==void 0?r:jm(u)===jm(h);c(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,h,r,s,n,t,i,o,l])}const SU=()=>{};var q1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},IU=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},SP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let m=(l&15)<<2|u>>6,g=u&63;c||(g=64,o||(m=64)),r.push(n[h],n[f],n[m],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(EP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):IU(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||f==null)throw new TU;const m=i<<2|l>>4;if(r.push(m),u!==64){const g=l<<4&240|u>>2;if(r.push(g),f!==64){const v=u<<6&192|f;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class TU extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NU=function(t){const e=EP(t);return SP.encodeByteArray(e,!0)},Dm=function(t){return NU(t).replace(/\./g,"")},IP=function(t){try{return SP.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AU=()=>CU().__FIREBASE_DEFAULTS__,PU=()=>{if(typeof process>"u"||typeof q1>"u")return;const t=q1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},RU=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&IP(t[1]);return e&&JSON.parse(e)},Hp=()=>{try{return SU()||AU()||PU()||RU()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},TP=t=>{var e,n;return(n=(e=Hp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},jU=t=>{const e=TP(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},NP=()=>{var t;return(t=Hp())===null||t===void 0?void 0:t.config},CP=t=>{var e;return(e=Hp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DU(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Dm(JSON.stringify(n)),Dm(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MU(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(en())}function OU(){var t;const e=(t=Hp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function LU(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function VU(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function FU(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $U(){const t=en();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function AP(){return!OU()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function PP(){try{return typeof indexedDB=="object"}catch{return!1}}function UU(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BU="FirebaseError";class ai extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=BU,Object.setPrototypeOf(this,ai.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xd.prototype.create)}}class Xd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?zU(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new ai(s,l,r)}}function zU(t,e){return t.replace(qU,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const qU=/\{\$([^}]+)}/g;function WU(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function pa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(W1(i)&&W1(o)){if(!pa(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function W1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function _u(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Eu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function HU(t,e){const n=new KU(t,e);return n.subscribe.bind(n)}class KU{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");GU(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Ty),s.error===void 0&&(s.error=Ty),s.complete===void 0&&(s.complete=Ty);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function GU(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ty(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(t){return t&&t._delegate?t._delegate:t}class ga{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new kU;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(XU(e))try{this.getOrInitializeService({instanceIdentifier:Vo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Vo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vo){return this.instances.has(e)}getOptions(e=Vo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:YU(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Vo){return this.component?this.component.multipleInstances?e:Vo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function YU(t){return t===Vo?void 0:t}function XU(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JU{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new QU(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(qe||(qe={}));const ZU={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},eB=qe.INFO,tB={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},nB=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=tB[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xw{constructor(e){this.name=e,this._logLevel=eB,this._logHandler=nB,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ZU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const rB=(t,e)=>e.some(n=>t instanceof n);let H1,K1;function sB(){return H1||(H1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iB(){return K1||(K1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const RP=new WeakMap,o0=new WeakMap,jP=new WeakMap,Ny=new WeakMap,ww=new WeakMap;function oB(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Zi(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&RP.set(n,t)}).catch(()=>{}),ww.set(e,t),e}function aB(t){if(o0.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});o0.set(t,e)}let a0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return o0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||jP.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lB(t){a0=t(a0)}function cB(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Cy(this),e,...n);return jP.set(r,e.sort?e.sort():[e]),Zi(r)}:iB().includes(t)?function(...e){return t.apply(Cy(this),e),Zi(RP.get(this))}:function(...e){return Zi(t.apply(Cy(this),e))}}function uB(t){return typeof t=="function"?cB(t):(t instanceof IDBTransaction&&aB(t),rB(t,sB())?new Proxy(t,a0):t)}function Zi(t){if(t instanceof IDBRequest)return oB(t);if(Ny.has(t))return Ny.get(t);const e=uB(t);return e!==t&&(Ny.set(t,e),ww.set(e,t)),e}const Cy=t=>ww.get(t);function dB(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Zi(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Zi(o.result),c.oldVersion,c.newVersion,Zi(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const hB=["get","getKey","getAll","getAllKeys","count"],fB=["put","add","delete","clear"],Ay=new Map;function G1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ay.get(e))return Ay.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=fB.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||hB.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return Ay.set(e,i),i}lB(t=>({...t,get:(e,n,r)=>G1(e,n)||t.get(e,n,r),has:(e,n)=>!!G1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mB{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pB(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function pB(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const l0="@firebase/app",Q1="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti=new xw("@firebase/app"),gB="@firebase/app-compat",yB="@firebase/analytics-compat",vB="@firebase/analytics",xB="@firebase/app-check-compat",wB="@firebase/app-check",bB="@firebase/auth",_B="@firebase/auth-compat",EB="@firebase/database",SB="@firebase/data-connect",IB="@firebase/database-compat",TB="@firebase/functions",NB="@firebase/functions-compat",CB="@firebase/installations",AB="@firebase/installations-compat",PB="@firebase/messaging",RB="@firebase/messaging-compat",jB="@firebase/performance",kB="@firebase/performance-compat",DB="@firebase/remote-config",MB="@firebase/remote-config-compat",OB="@firebase/storage",LB="@firebase/storage-compat",VB="@firebase/firestore",FB="@firebase/vertexai",$B="@firebase/firestore-compat",UB="firebase",BB="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0="[DEFAULT]",zB={[l0]:"fire-core",[gB]:"fire-core-compat",[vB]:"fire-analytics",[yB]:"fire-analytics-compat",[wB]:"fire-app-check",[xB]:"fire-app-check-compat",[bB]:"fire-auth",[_B]:"fire-auth-compat",[EB]:"fire-rtdb",[SB]:"fire-data-connect",[IB]:"fire-rtdb-compat",[TB]:"fire-fn",[NB]:"fire-fn-compat",[CB]:"fire-iid",[AB]:"fire-iid-compat",[PB]:"fire-fcm",[RB]:"fire-fcm-compat",[jB]:"fire-perf",[kB]:"fire-perf-compat",[DB]:"fire-rc",[MB]:"fire-rc-compat",[OB]:"fire-gcs",[LB]:"fire-gcs-compat",[VB]:"fire-fst",[$B]:"fire-fst-compat",[FB]:"fire-vertex","fire-js":"fire-js",[UB]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm=new Map,qB=new Map,u0=new Map;function Y1(t,e){try{t.container.addComponent(e)}catch(n){ti.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function nc(t){const e=t.name;if(u0.has(e))return ti.debug(`There were multiple attempts to register component ${e}.`),!1;u0.set(e,t);for(const n of Mm.values())Y1(n,t);for(const n of qB.values())Y1(n,t);return!0}function bw(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ur(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},eo=new Xd("app","Firebase",WB);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ga("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw eo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=BB;function kP(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:c0,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw eo.create("bad-app-name",{appName:String(s)});if(n||(n=NP()),!n)throw eo.create("no-options");const i=Mm.get(s);if(i){if(pa(n,i.options)&&pa(r,i.config))return i;throw eo.create("duplicate-app",{appName:s})}const o=new JU(s);for(const c of u0.values())o.addComponent(c);const l=new HB(n,r,o);return Mm.set(s,l),l}function DP(t=c0){const e=Mm.get(t);if(!e&&t===c0&&NP())return kP();if(!e)throw eo.create("no-app",{appName:t});return e}function to(t,e,n){var r;let s=(r=zB[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ti.warn(l.join(" "));return}nc(new ga(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KB="firebase-heartbeat-database",GB=1,xd="firebase-heartbeat-store";let Py=null;function MP(){return Py||(Py=dB(KB,GB,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xd)}catch(n){console.warn(n)}}}}).catch(t=>{throw eo.create("idb-open",{originalErrorMessage:t.message})})),Py}async function QB(t){try{const n=(await MP()).transaction(xd),r=await n.objectStore(xd).get(OP(t));return await n.done,r}catch(e){if(e instanceof ai)ti.warn(e.message);else{const n=eo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ti.warn(n.message)}}}async function X1(t,e){try{const r=(await MP()).transaction(xd,"readwrite");await r.objectStore(xd).put(e,OP(t)),await r.done}catch(n){if(n instanceof ai)ti.warn(n.message);else{const r=eo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ti.warn(r.message)}}}function OP(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YB=1024,XB=30;class JB{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new e6(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=J1();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>XB){const o=t6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ti.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=J1(),{heartbeatsToSend:r,unsentEntries:s}=ZB(this._heartbeatsCache.heartbeats),i=Dm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ti.warn(n),""}}}function J1(){return new Date().toISOString().substring(0,10)}function ZB(t,e=YB){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Z1(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Z1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class e6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return PP()?UU().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await QB(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return X1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return X1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Z1(t){return Dm(JSON.stringify({version:2,heartbeats:t})).length}function t6(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n6(t){nc(new ga("platform-logger",e=>new mB(e),"PRIVATE")),nc(new ga("heartbeat",e=>new JB(e),"PRIVATE")),to(l0,Q1,t),to(l0,Q1,"esm2017"),to("fire-js","")}n6("");var r6="firebase",s6="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */to(r6,s6,"app");var ps=function(){return ps=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ps.apply(this,arguments)};function Zd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function i6(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function LP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const o6=LP,VP=new Xd("auth","Firebase",LP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om=new xw("@firebase/auth");function a6(t,...e){Om.logLevel<=qe.WARN&&Om.warn(`Auth (${Pc}): ${t}`,...e)}function Vf(t,...e){Om.logLevel<=qe.ERROR&&Om.error(`Auth (${Pc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(t,...e){throw Ew(t,...e)}function Zr(t,...e){return Ew(t,...e)}function _w(t,e,n){const r=Object.assign(Object.assign({},o6()),{[e]:n});return new Xd("auth","Firebase",r).create(e,{appName:t.name})}function Ks(t){return _w(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function l6(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Fr(t,"argument-error"),_w(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ew(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return VP.create(t,...e)}function Pe(t,e,...n){if(!t)throw Ew(e,...n)}function Bs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Vf(e),new Error(e)}function ni(t,e){t||Bs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function c6(){return eS()==="http:"||eS()==="https:"}function eS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(c6()||VU()||"connection"in navigator)?navigator.onLine:!0}function d6(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,n){this.shortDelay=e,this.longDelay=n,ni(n>e,"Short delay should be less than long delay!"),this.isMobile=MU()||FU()}get(){return u6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(t,e){ni(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6=new eh(3e4,6e4);function Eo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function So(t,e,n,r,s={}){return $P(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Jd(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},i);return LU()||(u.referrerPolicy="no-referrer"),FP.fetch()(UP(t,t.config.apiHost,n,l),u)})}async function $P(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},h6),e);try{const s=new p6(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw uf(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw uf(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw uf(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw uf(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw _w(t,h,u);Fr(t,h)}}catch(s){if(s instanceof ai)throw s;Fr(t,"network-request-failed",{message:String(s)})}}async function th(t,e,n,r,s={}){const i=await So(t,e,n,r,s);return"mfaPendingCredential"in i&&Fr(t,"multi-factor-auth-required",{_serverResponse:i}),i}function UP(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Sw(t.config,s):`${t.config.apiScheme}://${s}`}function m6(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class p6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Zr(this.auth,"network-request-failed")),f6.get())})}}function uf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Zr(t,e,r);return s.customData._tokenResponse=n,s}function tS(t){return t!==void 0&&t.enterprise!==void 0}class g6{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return m6(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function y6(t,e){return So(t,"GET","/v2/recaptchaConfig",Eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v6(t,e){return So(t,"POST","/v1/accounts:delete",e)}async function BP(t,e){return So(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function x6(t,e=!1){const n=Bt(t),r=await n.getIdToken(e),s=Iw(r);Pe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Bu(Ry(s.auth_time)),issuedAtTime:Bu(Ry(s.iat)),expirationTime:Bu(Ry(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Ry(t){return Number(t)*1e3}function Iw(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Vf("JWT malformed, contained fewer than 3 sections"),null;try{const s=IP(n);return s?JSON.parse(s):(Vf("Failed to decode base64 JWT payload"),null)}catch(s){return Vf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function nS(t){const e=Iw(t);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ai&&w6(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function w6({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bu(this.lastLoginAt),this.creationTime=Bu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lm(t){var e;const n=t.auth,r=await t.getIdToken(),s=await wd(t,BP(n,{idToken:r}));Pe(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?zP(i.providerUserInfo):[],l=E6(t.providerData,o),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),h=c?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new h0(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function _6(t){const e=Bt(t);await Lm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function E6(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function zP(t){return t.map(e=>{var{providerId:n}=e,r=Zd(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S6(t,e){const n=await $P(t,{},async()=>{const r=Jd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=UP(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",FP.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function I6(t,e){return So(t,"POST","/v2/accounts:revokeToken",Eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const n=nS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await S6(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new jl;return r&&(Pe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Pe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Pe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new jl,this.toJSON())}_performRefresh(){return Bs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(t,e){Pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class zs{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Zd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new b6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new h0(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await wd(this,this.stsTokenManager.getToken(this.auth,e));return Pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return x6(this,e)}reload(){return _6(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new zs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Lm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ur(this.auth.app))return Promise.reject(Ks(this.auth));const e=await this.getIdToken();return await wd(this,v6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,c,u,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,g=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,y=(l=n.tenantId)!==null&&l!==void 0?l:void 0,b=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,_=(u=n.createdAt)!==null&&u!==void 0?u:void 0,w=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:S,emailVerified:N,isAnonymous:j,providerData:D,stsTokenManager:T}=n;Pe(S&&T,e,"internal-error");const I=jl.fromJSON(this.name,T);Pe(typeof S=="string",e,"internal-error"),wi(f,e.name),wi(m,e.name),Pe(typeof N=="boolean",e,"internal-error"),Pe(typeof j=="boolean",e,"internal-error"),wi(g,e.name),wi(v,e.name),wi(y,e.name),wi(b,e.name),wi(_,e.name),wi(w,e.name);const C=new zs({uid:S,auth:e,email:m,emailVerified:N,displayName:f,isAnonymous:j,photoURL:v,phoneNumber:g,tenantId:y,stsTokenManager:I,createdAt:_,lastLoginAt:w});return D&&Array.isArray(D)&&(C.providerData=D.map(R=>Object.assign({},R))),b&&(C._redirectEventId=b),C}static async _fromIdTokenResponse(e,n,r=!1){const s=new jl;s.updateFromServerResponse(n);const i=new zs({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Lm(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Pe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?zP(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new jl;l.updateFromIdToken(r);const c=new zs({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new h0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS=new Map;function qs(t){ni(t instanceof Function,"Expected a class definition");let e=rS.get(t);return e?(ni(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,rS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}qP.type="NONE";const sS=qP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(t,e,n){return`firebase:${t}:${e}:${n}`}class kl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ff(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ff("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?zs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new kl(qs(sS),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||qs(sS);const o=Ff(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=await u._get(o);if(h){const f=zs._fromJSON(e,h);u!==i&&(l=f),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new kl(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new kl(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(GP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(WP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(YP(e))return"Blackberry";if(XP(e))return"Webos";if(HP(e))return"Safari";if((e.includes("chrome/")||KP(e))&&!e.includes("edge/"))return"Chrome";if(QP(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function WP(t=en()){return/firefox\//i.test(t)}function HP(t=en()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function KP(t=en()){return/crios\//i.test(t)}function GP(t=en()){return/iemobile/i.test(t)}function QP(t=en()){return/android/i.test(t)}function YP(t=en()){return/blackberry/i.test(t)}function XP(t=en()){return/webos/i.test(t)}function Tw(t=en()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function T6(t=en()){var e;return Tw(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function N6(){return $U()&&document.documentMode===10}function JP(t=en()){return Tw(t)||QP(t)||XP(t)||YP(t)||/windows phone/i.test(t)||GP(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(t,e=[]){let n;switch(t){case"Browser":n=iS(en());break;case"Worker":n=`${iS(en())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Pc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A6(t,e={}){return So(t,"GET","/v2/passwordPolicy",Eo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6=6;class R6{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:P6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oS(this),this.idTokenSubscription=new oS(this),this.beforeStateQueue=new C6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=qs(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await kl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await BP(this,{idToken:e}),r=await zs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ur(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Lm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=d6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ur(this.app))return Promise.reject(Ks(this));const n=e?Bt(e):null;return n&&Pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ur(this.app)?Promise.reject(Ks(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ur(this.app)?Promise.reject(Ks(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await A6(this),n=new R6(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Xd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await I6(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&qs(e)||this._popupRedirectResolver;Pe(n,this,"argument-error"),this.redirectPersistenceManager=await kl.create(this,[qs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ZP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(ur(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&a6(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Io(t){return Bt(t)}class oS{constructor(e){this.auth=e,this.observer=null,this.addObserver=HU(n=>this.observer=n)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function k6(t){Kp=t}function eR(t){return Kp.loadJS(t)}function D6(){return Kp.recaptchaEnterpriseScript}function M6(){return Kp.gapiScript}function O6(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class L6{constructor(){this.enterprise=new V6}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class V6{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const F6="recaptcha-enterprise",tR="NO_RECAPTCHA";class $6{constructor(e){this.type=F6,this.auth=Io(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{y6(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new g6(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function s(i,o,l){const c=window.grecaptcha;tS(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(tR)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new L6().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&tS(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=D6();c.length!==0&&(c+=l),eR(c).then(()=>{s(l,i,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function aS(t,e,n,r=!1,s=!1){const i=new $6(t);let o;if(s)o=tR;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function f0(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await aS(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await aS(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U6(t,e){const n=bw(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(pa(i,e??{}))return s;Fr(s,"already-initialized")}return n.initialize({options:e})}function B6(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(qs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function z6(t,e,n){const r=Io(t);Pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=nR(e),{host:o,port:l}=q6(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Pe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Pe(pa(u,r.config.emulator)&&pa(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,W6()}function nR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function q6(t){const e=nR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:lS(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:lS(o)}}}function lS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function W6(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Bs("not implemented")}_getIdTokenResponse(e){return Bs("not implemented")}_linkToIdToken(e,n){return Bs("not implemented")}_getReauthenticationResolver(e){return Bs("not implemented")}}async function H6(t,e){return So(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K6(t,e){return th(t,"POST","/v1/accounts:signInWithPassword",Eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G6(t,e){return th(t,"POST","/v1/accounts:signInWithEmailLink",Eo(t,e))}async function Q6(t,e){return th(t,"POST","/v1/accounts:signInWithEmailLink",Eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd extends Nw{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new bd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new bd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return f0(e,n,"signInWithPassword",K6);case"emailLink":return G6(e,{email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return f0(e,r,"signUpPassword",H6);case"emailLink":return Q6(e,{idToken:n,email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dl(t,e){return th(t,"POST","/v1/accounts:signInWithIdp",Eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6="http://localhost";class ya extends Nw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ya(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Fr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Zd(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ya(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Dl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Dl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Dl(e,n)}buildRequest(){const e={requestUri:Y6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Jd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X6(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function J6(t){const e=_u(Eu(t)).link,n=e?_u(Eu(e)).deep_link_id:null,r=_u(Eu(t)).deep_link_id;return(r?_u(Eu(r)).link:null)||r||n||e||t}class Cw{constructor(e){var n,r,s,i,o,l;const c=_u(Eu(e)),u=(n=c.apiKey)!==null&&n!==void 0?n:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,f=X6((s=c.mode)!==null&&s!==void 0?s:null);Pe(u&&h&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=h,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=J6(e);try{return new Cw(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(){this.providerId=Rc.PROVIDER_ID}static credential(e,n){return bd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Cw.parseLink(n);return Pe(r,"argument-error"),bd._fromEmailAndCode(e,r.code,r.tenantId)}}Rc.PROVIDER_ID="password";Rc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Rc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh extends Aw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls extends nh{constructor(){super("facebook.com")}static credential(e){return ya._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ls.credentialFromTaggedObject(e)}static credentialFromError(e){return Ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ls.credential(e.oauthAccessToken)}catch{return null}}}Ls.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ls.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends nh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ya._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Vs.credential(n,r)}catch{return null}}}Vs.GOOGLE_SIGN_IN_METHOD="google.com";Vs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends nh{constructor(){super("github.com")}static credential(e){return ya._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ri.credential(e.oauthAccessToken)}catch{return null}}}Ri.GITHUB_SIGN_IN_METHOD="github.com";Ri.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends nh{constructor(){super("twitter.com")}static credential(e,n){return ya._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ji.credential(n,r)}catch{return null}}}ji.TWITTER_SIGN_IN_METHOD="twitter.com";ji.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z6(t,e){return th(t,"POST","/v1/accounts:signUp",Eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await zs._fromIdTokenResponse(e,r,s),o=cS(r);return new va({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=cS(r);return new va({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function cS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm extends ai{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Vm.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Vm(e,n,r,s)}}function rR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Vm._fromErrorAndOperation(t,i,e,r):i})}async function e9(t,e,n=!1){const r=await wd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return va._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t9(t,e,n=!1){const{auth:r}=t;if(ur(r.app))return Promise.reject(Ks(r));const s="reauthenticate";try{const i=await wd(t,rR(r,s,e,t),n);Pe(i.idToken,r,"internal-error");const o=Iw(i.idToken);Pe(o,r,"internal-error");const{sub:l}=o;return Pe(t.uid===l,r,"user-mismatch"),va._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Fr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sR(t,e,n=!1){if(ur(t.app))return Promise.reject(Ks(t));const r="signIn",s=await rR(t,r,e),i=await va._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function n9(t,e){return sR(Io(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iR(t){const e=Io(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function r9(t,e,n){if(ur(t.app))return Promise.reject(Ks(t));const r=Io(t),o=await f0(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Z6).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&iR(t),c}),l=await va._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function s9(t,e,n){return ur(t.app)?Promise.reject(Ks(t)):n9(Bt(t),Rc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&iR(t),r})}function i9(t,e,n,r){return Bt(t).onIdTokenChanged(e,n,r)}function o9(t,e,n){return Bt(t).beforeAuthStateChanged(e,n)}function oR(t,e,n,r){return Bt(t).onAuthStateChanged(e,n,r)}function a9(t){return Bt(t).signOut()}const Fm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Fm,"1"),this.storage.removeItem(Fm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l9=1e3,c9=10;class lR extends aR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=JP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);N6()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,c9):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},l9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}lR.type="LOCAL";const u9=lR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR extends aR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}cR.type="SESSION";const uR=cR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d9(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Gp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,i)),c=await d9(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=Pw("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(){return window}function f9(t){bs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(){return typeof bs().WorkerGlobalScope<"u"&&typeof bs().importScripts=="function"}async function m9(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function p9(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function g9(){return dR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="firebaseLocalStorageDb",y9=1,$m="firebaseLocalStorage",fR="fbase_key";class rh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Qp(t,e){return t.transaction([$m],e?"readwrite":"readonly").objectStore($m)}function v9(){const t=indexedDB.deleteDatabase(hR);return new rh(t).toPromise()}function m0(){const t=indexedDB.open(hR,y9);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore($m,{keyPath:fR})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains($m)?e(r):(r.close(),await v9(),e(await m0()))})})}async function uS(t,e,n){const r=Qp(t,!0).put({[fR]:e,value:n});return new rh(r).toPromise()}async function x9(t,e){const n=Qp(t,!1).get(e),r=await new rh(n).toPromise();return r===void 0?null:r.value}function dS(t,e){const n=Qp(t,!0).delete(e);return new rh(n).toPromise()}const w9=800,b9=3;class mR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await m0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>b9)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gp._getInstance(g9()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await m9(),!this.activeServiceWorker)return;this.sender=new h9(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||p9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await m0();return await uS(e,Fm,"1"),await dS(e,Fm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>uS(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>x9(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>dS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Qp(s,!1).getAll();return new rh(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),w9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mR.type="LOCAL";const _9=mR;new eh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(t,e){return e?qs(e):(Pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw extends Nw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Dl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Dl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Dl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function E9(t){return sR(t.auth,new Rw(t),t.bypassAuthState)}function S9(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),t9(n,new Rw(t),t.bypassAuthState)}async function I9(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),e9(n,new Rw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return E9;case"linkViaPopup":case"linkViaRedirect":return I9;case"reauthViaPopup":case"reauthViaRedirect":return S9;default:Fr(this.auth,"internal-error")}}resolve(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T9=new eh(2e3,1e4);async function hS(t,e,n){if(ur(t.app))return Promise.reject(Zr(t,"operation-not-supported-in-this-environment"));const r=Io(t);l6(t,e,Aw);const s=pR(r,n);return new Qo(r,"signInViaPopup",e,s).executeNotNull()}class Qo extends gR{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Qo.currentPopupAction&&Qo.currentPopupAction.cancel(),Qo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){ni(this.filter.length===1,"Popup operations only handle one event");const e=Pw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Zr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Zr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,T9.get())};e()}}Qo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N9="pendingRedirect",$f=new Map;class C9 extends gR{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=$f.get(this.auth._key());if(!e){try{const r=await A9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}$f.set(this.auth._key(),e)}return this.bypassAuthState||$f.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function A9(t,e){const n=j9(e),r=R9(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function P9(t,e){$f.set(t._key(),e)}function R9(t){return qs(t._redirectPersistence)}function j9(t){return Ff(N9,t.config.apiKey,t.name)}async function k9(t,e,n=!1){if(ur(t.app))return Promise.reject(Ks(t));const r=Io(t),s=pR(r,e),o=await new C9(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D9=10*60*1e3;class M9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!O9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!yR(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Zr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=D9&&this.cachedEventUids.clear(),this.cachedEventUids.has(fS(e))}saveEventToCache(e){this.cachedEventUids.add(fS(e)),this.lastProcessedEventTime=Date.now()}}function fS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function yR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function O9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L9(t,e={}){return So(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,F9=/^https?/;async function $9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await L9(t);for(const n of e)try{if(U9(n))return}catch{}Fr(t,"unauthorized-domain")}function U9(t){const e=d0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!F9.test(n))return!1;if(V9.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B9=new eh(3e4,6e4);function mS(){const t=bs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function z9(t){return new Promise((e,n)=>{var r,s,i;function o(){mS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mS(),n(Zr(t,"network-request-failed"))},timeout:B9.get()})}if(!((s=(r=bs().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=bs().gapi)===null||i===void 0)&&i.load)o();else{const l=O6("iframefcb");return bs()[l]=()=>{gapi.load?o():n(Zr(t,"network-request-failed"))},eR(`${M6()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Uf=null,e})}let Uf=null;function q9(t){return Uf=Uf||z9(t),Uf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9=new eh(5e3,15e3),H9="__/auth/iframe",K9="emulator/auth/iframe",G9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Q9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Y9(t){const e=t.config;Pe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Sw(e,K9):`https://${t.config.authDomain}/${H9}`,r={apiKey:e.apiKey,appName:t.name,v:Pc},s=Q9.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Jd(r).slice(1)}`}async function X9(t){const e=await q9(t),n=bs().gapi;return Pe(n,t,"internal-error"),e.open({where:document.body,url:Y9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:G9,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Zr(t,"network-request-failed"),l=bs().setTimeout(()=>{i(o)},W9.get());function c(){bs().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Z9=500,ez=600,tz="_blank",nz="http://localhost";class pS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rz(t,e,n,r=Z9,s=ez){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},J9),{width:r.toString(),height:s.toString(),top:i,left:o}),u=en().toLowerCase();n&&(l=KP(u)?tz:n),WP(u)&&(e=e||nz,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[g,v])=>`${m}${g}=${v},`,"");if(T6(u)&&l!=="_self")return sz(e||"",l),new pS(null);const f=window.open(e||"",l,h);Pe(f,t,"popup-blocked");try{f.focus()}catch{}return new pS(f)}function sz(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iz="__/auth/handler",oz="emulator/auth/handler",az=encodeURIComponent("fac");async function gS(t,e,n,r,s,i){Pe(t.config.authDomain,t,"auth-domain-config-required"),Pe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Pc,eventId:s};if(e instanceof Aw){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",WU(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof nh){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${az}=${encodeURIComponent(c)}`:"";return`${lz(t)}?${Jd(l).slice(1)}${u}`}function lz({config:t}){return t.emulator?Sw(t,oz):`https://${t.authDomain}/${iz}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="webStorageSupport";class cz{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uR,this._completeRedirectFn=k9,this._overrideRedirectResult=P9}async _openPopup(e,n,r,s){var i;ni((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await gS(e,n,r,d0(),s);return rz(e,o,Pw())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await gS(e,n,r,d0(),s);return f9(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ni(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await X9(e),r=new M9(e);return n.register("authEvent",s=>(Pe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(jy,{type:jy},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[jy];o!==void 0&&n(!!o),Fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=$9(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return JP()||HP()||Tw()}}const uz=cz;var yS="@firebase/auth",vS="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dz{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hz(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fz(t){nc(new ga("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;Pe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ZP(t)},u=new j6(r,s,i,c);return B6(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),nc(new ga("auth-internal",e=>{const n=Io(e.getProvider("auth").getImmediate());return(r=>new dz(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),to(yS,vS,hz(t)),to(yS,vS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mz=5*60,pz=CP("authIdTokenMaxAge")||mz;let xS=null;const gz=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>pz)return;const s=n==null?void 0:n.token;xS!==s&&(xS=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function yz(t=DP()){const e=bw(t,"auth");if(e.isInitialized())return e.getImmediate();const n=U6(t,{popupRedirectResolver:uz,persistence:[_9,u9,uR]}),r=CP("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=gz(i.toString());o9(n,o,()=>o(n.currentUser)),i9(n,l=>o(l))}}const s=TP("auth");return s&&z6(n,`http://${s}`),n}function vz(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}k6({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Zr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",vz().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fz("Browser");var wS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var no,vR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,I){function C(){}C.prototype=I.prototype,T.D=I.prototype,T.prototype=new C,T.prototype.constructor=T,T.C=function(R,M,P){for(var A=Array(arguments.length-2),F=2;F<arguments.length;F++)A[F-2]=arguments[F];return I.prototype[M].apply(R,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,I,C){C||(C=0);var R=Array(16);if(typeof I=="string")for(var M=0;16>M;++M)R[M]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(M=0;16>M;++M)R[M]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=T.g[0],C=T.g[1],M=T.g[2];var P=T.g[3],A=I+(P^C&(M^P))+R[0]+3614090360&4294967295;I=C+(A<<7&4294967295|A>>>25),A=P+(M^I&(C^M))+R[1]+3905402710&4294967295,P=I+(A<<12&4294967295|A>>>20),A=M+(C^P&(I^C))+R[2]+606105819&4294967295,M=P+(A<<17&4294967295|A>>>15),A=C+(I^M&(P^I))+R[3]+3250441966&4294967295,C=M+(A<<22&4294967295|A>>>10),A=I+(P^C&(M^P))+R[4]+4118548399&4294967295,I=C+(A<<7&4294967295|A>>>25),A=P+(M^I&(C^M))+R[5]+1200080426&4294967295,P=I+(A<<12&4294967295|A>>>20),A=M+(C^P&(I^C))+R[6]+2821735955&4294967295,M=P+(A<<17&4294967295|A>>>15),A=C+(I^M&(P^I))+R[7]+4249261313&4294967295,C=M+(A<<22&4294967295|A>>>10),A=I+(P^C&(M^P))+R[8]+1770035416&4294967295,I=C+(A<<7&4294967295|A>>>25),A=P+(M^I&(C^M))+R[9]+2336552879&4294967295,P=I+(A<<12&4294967295|A>>>20),A=M+(C^P&(I^C))+R[10]+4294925233&4294967295,M=P+(A<<17&4294967295|A>>>15),A=C+(I^M&(P^I))+R[11]+2304563134&4294967295,C=M+(A<<22&4294967295|A>>>10),A=I+(P^C&(M^P))+R[12]+1804603682&4294967295,I=C+(A<<7&4294967295|A>>>25),A=P+(M^I&(C^M))+R[13]+4254626195&4294967295,P=I+(A<<12&4294967295|A>>>20),A=M+(C^P&(I^C))+R[14]+2792965006&4294967295,M=P+(A<<17&4294967295|A>>>15),A=C+(I^M&(P^I))+R[15]+1236535329&4294967295,C=M+(A<<22&4294967295|A>>>10),A=I+(M^P&(C^M))+R[1]+4129170786&4294967295,I=C+(A<<5&4294967295|A>>>27),A=P+(C^M&(I^C))+R[6]+3225465664&4294967295,P=I+(A<<9&4294967295|A>>>23),A=M+(I^C&(P^I))+R[11]+643717713&4294967295,M=P+(A<<14&4294967295|A>>>18),A=C+(P^I&(M^P))+R[0]+3921069994&4294967295,C=M+(A<<20&4294967295|A>>>12),A=I+(M^P&(C^M))+R[5]+3593408605&4294967295,I=C+(A<<5&4294967295|A>>>27),A=P+(C^M&(I^C))+R[10]+38016083&4294967295,P=I+(A<<9&4294967295|A>>>23),A=M+(I^C&(P^I))+R[15]+3634488961&4294967295,M=P+(A<<14&4294967295|A>>>18),A=C+(P^I&(M^P))+R[4]+3889429448&4294967295,C=M+(A<<20&4294967295|A>>>12),A=I+(M^P&(C^M))+R[9]+568446438&4294967295,I=C+(A<<5&4294967295|A>>>27),A=P+(C^M&(I^C))+R[14]+3275163606&4294967295,P=I+(A<<9&4294967295|A>>>23),A=M+(I^C&(P^I))+R[3]+4107603335&4294967295,M=P+(A<<14&4294967295|A>>>18),A=C+(P^I&(M^P))+R[8]+1163531501&4294967295,C=M+(A<<20&4294967295|A>>>12),A=I+(M^P&(C^M))+R[13]+2850285829&4294967295,I=C+(A<<5&4294967295|A>>>27),A=P+(C^M&(I^C))+R[2]+4243563512&4294967295,P=I+(A<<9&4294967295|A>>>23),A=M+(I^C&(P^I))+R[7]+1735328473&4294967295,M=P+(A<<14&4294967295|A>>>18),A=C+(P^I&(M^P))+R[12]+2368359562&4294967295,C=M+(A<<20&4294967295|A>>>12),A=I+(C^M^P)+R[5]+4294588738&4294967295,I=C+(A<<4&4294967295|A>>>28),A=P+(I^C^M)+R[8]+2272392833&4294967295,P=I+(A<<11&4294967295|A>>>21),A=M+(P^I^C)+R[11]+1839030562&4294967295,M=P+(A<<16&4294967295|A>>>16),A=C+(M^P^I)+R[14]+4259657740&4294967295,C=M+(A<<23&4294967295|A>>>9),A=I+(C^M^P)+R[1]+2763975236&4294967295,I=C+(A<<4&4294967295|A>>>28),A=P+(I^C^M)+R[4]+1272893353&4294967295,P=I+(A<<11&4294967295|A>>>21),A=M+(P^I^C)+R[7]+4139469664&4294967295,M=P+(A<<16&4294967295|A>>>16),A=C+(M^P^I)+R[10]+3200236656&4294967295,C=M+(A<<23&4294967295|A>>>9),A=I+(C^M^P)+R[13]+681279174&4294967295,I=C+(A<<4&4294967295|A>>>28),A=P+(I^C^M)+R[0]+3936430074&4294967295,P=I+(A<<11&4294967295|A>>>21),A=M+(P^I^C)+R[3]+3572445317&4294967295,M=P+(A<<16&4294967295|A>>>16),A=C+(M^P^I)+R[6]+76029189&4294967295,C=M+(A<<23&4294967295|A>>>9),A=I+(C^M^P)+R[9]+3654602809&4294967295,I=C+(A<<4&4294967295|A>>>28),A=P+(I^C^M)+R[12]+3873151461&4294967295,P=I+(A<<11&4294967295|A>>>21),A=M+(P^I^C)+R[15]+530742520&4294967295,M=P+(A<<16&4294967295|A>>>16),A=C+(M^P^I)+R[2]+3299628645&4294967295,C=M+(A<<23&4294967295|A>>>9),A=I+(M^(C|~P))+R[0]+4096336452&4294967295,I=C+(A<<6&4294967295|A>>>26),A=P+(C^(I|~M))+R[7]+1126891415&4294967295,P=I+(A<<10&4294967295|A>>>22),A=M+(I^(P|~C))+R[14]+2878612391&4294967295,M=P+(A<<15&4294967295|A>>>17),A=C+(P^(M|~I))+R[5]+4237533241&4294967295,C=M+(A<<21&4294967295|A>>>11),A=I+(M^(C|~P))+R[12]+1700485571&4294967295,I=C+(A<<6&4294967295|A>>>26),A=P+(C^(I|~M))+R[3]+2399980690&4294967295,P=I+(A<<10&4294967295|A>>>22),A=M+(I^(P|~C))+R[10]+4293915773&4294967295,M=P+(A<<15&4294967295|A>>>17),A=C+(P^(M|~I))+R[1]+2240044497&4294967295,C=M+(A<<21&4294967295|A>>>11),A=I+(M^(C|~P))+R[8]+1873313359&4294967295,I=C+(A<<6&4294967295|A>>>26),A=P+(C^(I|~M))+R[15]+4264355552&4294967295,P=I+(A<<10&4294967295|A>>>22),A=M+(I^(P|~C))+R[6]+2734768916&4294967295,M=P+(A<<15&4294967295|A>>>17),A=C+(P^(M|~I))+R[13]+1309151649&4294967295,C=M+(A<<21&4294967295|A>>>11),A=I+(M^(C|~P))+R[4]+4149444226&4294967295,I=C+(A<<6&4294967295|A>>>26),A=P+(C^(I|~M))+R[11]+3174756917&4294967295,P=I+(A<<10&4294967295|A>>>22),A=M+(I^(P|~C))+R[2]+718787259&4294967295,M=P+(A<<15&4294967295|A>>>17),A=C+(P^(M|~I))+R[9]+3951481745&4294967295,T.g[0]=T.g[0]+I&4294967295,T.g[1]=T.g[1]+(M+(A<<21&4294967295|A>>>11))&4294967295,T.g[2]=T.g[2]+M&4294967295,T.g[3]=T.g[3]+P&4294967295}r.prototype.u=function(T,I){I===void 0&&(I=T.length);for(var C=I-this.blockSize,R=this.B,M=this.h,P=0;P<I;){if(M==0)for(;P<=C;)s(this,T,P),P+=this.blockSize;if(typeof T=="string"){for(;P<I;)if(R[M++]=T.charCodeAt(P++),M==this.blockSize){s(this,R),M=0;break}}else for(;P<I;)if(R[M++]=T[P++],M==this.blockSize){s(this,R),M=0;break}}this.h=M,this.o+=I},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var I=1;I<T.length-8;++I)T[I]=0;var C=8*this.o;for(I=T.length-8;I<T.length;++I)T[I]=C&255,C/=256;for(this.u(T),T=Array(16),I=C=0;4>I;++I)for(var R=0;32>R;R+=8)T[C++]=this.g[I]>>>R&255;return T};function i(T,I){var C=l;return Object.prototype.hasOwnProperty.call(C,T)?C[T]:C[T]=I(T)}function o(T,I){this.h=I;for(var C=[],R=!0,M=T.length-1;0<=M;M--){var P=T[M]|0;R&&P==I||(C[M]=P,R=!1)}this.g=C}var l={};function c(T){return-128<=T&&128>T?i(T,function(I){return new o([I|0],0>I?-1:0)}):new o([T|0],0>T?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return b(u(-T));for(var I=[],C=1,R=0;T>=C;R++)I[R]=T/C|0,C*=4294967296;return new o(I,0)}function h(T,I){if(T.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(T.charAt(0)=="-")return b(h(T.substring(1),I));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=u(Math.pow(I,8)),R=f,M=0;M<T.length;M+=8){var P=Math.min(8,T.length-M),A=parseInt(T.substring(M,M+P),I);8>P?(P=u(Math.pow(I,P)),R=R.j(P).add(u(A))):(R=R.j(C),R=R.add(u(A)))}return R}var f=c(0),m=c(1),g=c(16777216);t=o.prototype,t.m=function(){if(y(this))return-b(this).m();for(var T=0,I=1,C=0;C<this.g.length;C++){var R=this.i(C);T+=(0<=R?R:4294967296+R)*I,I*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(v(this))return"0";if(y(this))return"-"+b(this).toString(T);for(var I=u(Math.pow(T,6)),C=this,R="";;){var M=N(C,I).g;C=_(C,M.j(I));var P=((0<C.g.length?C.g[0]:C.h)>>>0).toString(T);if(C=M,v(C))return P+R;for(;6>P.length;)P="0"+P;R=P+R}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function v(T){if(T.h!=0)return!1;for(var I=0;I<T.g.length;I++)if(T.g[I]!=0)return!1;return!0}function y(T){return T.h==-1}t.l=function(T){return T=_(this,T),y(T)?-1:v(T)?0:1};function b(T){for(var I=T.g.length,C=[],R=0;R<I;R++)C[R]=~T.g[R];return new o(C,~T.h).add(m)}t.abs=function(){return y(this)?b(this):this},t.add=function(T){for(var I=Math.max(this.g.length,T.g.length),C=[],R=0,M=0;M<=I;M++){var P=R+(this.i(M)&65535)+(T.i(M)&65535),A=(P>>>16)+(this.i(M)>>>16)+(T.i(M)>>>16);R=A>>>16,P&=65535,A&=65535,C[M]=A<<16|P}return new o(C,C[C.length-1]&-2147483648?-1:0)};function _(T,I){return T.add(b(I))}t.j=function(T){if(v(this)||v(T))return f;if(y(this))return y(T)?b(this).j(b(T)):b(b(this).j(T));if(y(T))return b(this.j(b(T)));if(0>this.l(g)&&0>T.l(g))return u(this.m()*T.m());for(var I=this.g.length+T.g.length,C=[],R=0;R<2*I;R++)C[R]=0;for(R=0;R<this.g.length;R++)for(var M=0;M<T.g.length;M++){var P=this.i(R)>>>16,A=this.i(R)&65535,F=T.i(M)>>>16,Y=T.i(M)&65535;C[2*R+2*M]+=A*Y,w(C,2*R+2*M),C[2*R+2*M+1]+=P*Y,w(C,2*R+2*M+1),C[2*R+2*M+1]+=A*F,w(C,2*R+2*M+1),C[2*R+2*M+2]+=P*F,w(C,2*R+2*M+2)}for(R=0;R<I;R++)C[R]=C[2*R+1]<<16|C[2*R];for(R=I;R<2*I;R++)C[R]=0;return new o(C,0)};function w(T,I){for(;(T[I]&65535)!=T[I];)T[I+1]+=T[I]>>>16,T[I]&=65535,I++}function S(T,I){this.g=T,this.h=I}function N(T,I){if(v(I))throw Error("division by zero");if(v(T))return new S(f,f);if(y(T))return I=N(b(T),I),new S(b(I.g),b(I.h));if(y(I))return I=N(T,b(I)),new S(b(I.g),I.h);if(30<T.g.length){if(y(T)||y(I))throw Error("slowDivide_ only works with positive integers.");for(var C=m,R=I;0>=R.l(T);)C=j(C),R=j(R);var M=D(C,1),P=D(R,1);for(R=D(R,2),C=D(C,2);!v(R);){var A=P.add(R);0>=A.l(T)&&(M=M.add(C),P=A),R=D(R,1),C=D(C,1)}return I=_(T,M.j(I)),new S(M,I)}for(M=f;0<=T.l(I);){for(C=Math.max(1,Math.floor(T.m()/I.m())),R=Math.ceil(Math.log(C)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),P=u(C),A=P.j(I);y(A)||0<A.l(T);)C-=R,P=u(C),A=P.j(I);v(P)&&(P=m),M=M.add(P),T=_(T,A)}return new S(M,T)}t.A=function(T){return N(this,T).h},t.and=function(T){for(var I=Math.max(this.g.length,T.g.length),C=[],R=0;R<I;R++)C[R]=this.i(R)&T.i(R);return new o(C,this.h&T.h)},t.or=function(T){for(var I=Math.max(this.g.length,T.g.length),C=[],R=0;R<I;R++)C[R]=this.i(R)|T.i(R);return new o(C,this.h|T.h)},t.xor=function(T){for(var I=Math.max(this.g.length,T.g.length),C=[],R=0;R<I;R++)C[R]=this.i(R)^T.i(R);return new o(C,this.h^T.h)};function j(T){for(var I=T.g.length+1,C=[],R=0;R<I;R++)C[R]=T.i(R)<<1|T.i(R-1)>>>31;return new o(C,T.h)}function D(T,I){var C=I>>5;I%=32;for(var R=T.g.length-C,M=[],P=0;P<R;P++)M[P]=0<I?T.i(P+C)>>>I|T.i(P+C+1)<<32-I:T.i(P+C);return new o(M,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,vR=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,no=o}).apply(typeof wS<"u"?wS:typeof self<"u"?self:typeof window<"u"?window:{});var df=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xR,Su,wR,Bf,p0,bR,_R,ER;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,x,E){return d==Array.prototype||d==Object.prototype||(d[x]=E.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof df=="object"&&df];for(var x=0;x<d.length;++x){var E=d[x];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function s(d,x){if(x)e:{var E=r;d=d.split(".");for(var k=0;k<d.length-1;k++){var U=d[k];if(!(U in E))break e;E=E[U]}d=d[d.length-1],k=E[d],x=x(k),x!=k&&x!=null&&e(E,d,{configurable:!0,writable:!0,value:x})}}function i(d,x){d instanceof String&&(d+="");var E=0,k=!1,U={next:function(){if(!k&&E<d.length){var z=E++;return{value:x(z,d[z]),done:!1}}return k=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}s("Array.prototype.values",function(d){return d||function(){return i(this,function(x,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(d){var x=typeof d;return x=x!="object"?x:d?Array.isArray(d)?"array":x:"null",x=="array"||x=="object"&&typeof d.length=="number"}function u(d){var x=typeof d;return x=="object"&&d!=null||x=="function"}function h(d,x,E){return d.call.apply(d.bind,arguments)}function f(d,x,E){if(!d)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,k),d.apply(x,U)}}return function(){return d.apply(x,arguments)}}function m(d,x,E){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function g(d,x){var E=Array.prototype.slice.call(arguments,1);return function(){var k=E.slice();return k.push.apply(k,arguments),d.apply(this,k)}}function v(d,x){function E(){}E.prototype=x.prototype,d.aa=x.prototype,d.prototype=new E,d.prototype.constructor=d,d.Qb=function(k,U,z){for(var ce=Array(arguments.length-2),yt=2;yt<arguments.length;yt++)ce[yt-2]=arguments[yt];return x.prototype[U].apply(k,ce)}}function y(d){const x=d.length;if(0<x){const E=Array(x);for(let k=0;k<x;k++)E[k]=d[k];return E}return[]}function b(d,x){for(let E=1;E<arguments.length;E++){const k=arguments[E];if(c(k)){const U=d.length||0,z=k.length||0;d.length=U+z;for(let ce=0;ce<z;ce++)d[U+ce]=k[ce]}else d.push(k)}}class _{constructor(x,E){this.i=x,this.j=E,this.h=0,this.g=null}get(){let x;return 0<this.h?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function w(d){return/^[\s\xa0]*$/.test(d)}function S(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function N(d){return N[" "](d),d}N[" "]=function(){};var j=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function D(d,x,E){for(const k in d)x.call(E,d[k],k,d)}function T(d,x){for(const E in d)x.call(void 0,d[E],E,d)}function I(d){const x={};for(const E in d)x[E]=d[E];return x}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(d,x){let E,k;for(let U=1;U<arguments.length;U++){k=arguments[U];for(E in k)d[E]=k[E];for(let z=0;z<C.length;z++)E=C[z],Object.prototype.hasOwnProperty.call(k,E)&&(d[E]=k[E])}}function M(d){var x=1;d=d.split(":");const E=[];for(;0<x&&d.length;)E.push(d.shift()),x--;return d.length&&E.push(d.join(":")),E}function P(d){l.setTimeout(()=>{throw d},0)}function A(){var d=L;let x=null;return d.g&&(x=d.g,d.g=d.g.next,d.g||(d.h=null),x.next=null),x}class F{constructor(){this.h=this.g=null}add(x,E){const k=Y.get();k.set(x,E),this.h?this.h.next=k:this.g=k,this.h=k}}var Y=new _(()=>new q,d=>d.reset());class q{constructor(){this.next=this.g=this.h=null}set(x,E){this.h=x,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let G,O=!1,L=new F,X=()=>{const d=l.Promise.resolve(void 0);G=()=>{d.then(Q)}};var Q=()=>{for(var d;d=A();){try{d.h.call(d.g)}catch(E){P(E)}var x=Y;x.j(d),100>x.h&&(x.h++,d.next=x.g,x.g=d)}O=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Z(d,x){this.type=d,this.g=this.target=x,this.defaultPrevented=!1}Z.prototype.h=function(){this.defaultPrevented=!0};var xe=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,x=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};l.addEventListener("test",E,x),l.removeEventListener("test",E,x)}catch{}return d}();function Oe(d,x){if(Z.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var E=this.type=d.type,k=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=x,x=d.relatedTarget){if(j){e:{try{N(x.nodeName);var U=!0;break e}catch{}U=!1}U||(x=null)}}else E=="mouseover"?x=d.fromElement:E=="mouseout"&&(x=d.toElement);this.relatedTarget=x,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:V[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Oe.aa.h.call(this)}}v(Oe,Z);var V={2:"touch",3:"pen",4:"mouse"};Oe.prototype.h=function(){Oe.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var B="closure_listenable_"+(1e6*Math.random()|0),ne=0;function ae(d,x,E,k,U){this.listener=d,this.proxy=null,this.src=x,this.type=E,this.capture=!!k,this.ha=U,this.key=++ne,this.da=this.fa=!1}function W(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function oe(d){this.src=d,this.g={},this.h=0}oe.prototype.add=function(d,x,E,k,U){var z=d.toString();d=this.g[z],d||(d=this.g[z]=[],this.h++);var ce=ye(d,x,k,U);return-1<ce?(x=d[ce],E||(x.fa=!1)):(x=new ae(x,this.src,z,!!k,U),x.fa=E,d.push(x)),x};function fe(d,x){var E=x.type;if(E in d.g){var k=d.g[E],U=Array.prototype.indexOf.call(k,x,void 0),z;(z=0<=U)&&Array.prototype.splice.call(k,U,1),z&&(W(x),d.g[E].length==0&&(delete d.g[E],d.h--))}}function ye(d,x,E,k){for(var U=0;U<d.length;++U){var z=d[U];if(!z.da&&z.listener==x&&z.capture==!!E&&z.ha==k)return U}return-1}var ue="closure_lm_"+(1e6*Math.random()|0),ee={};function me(d,x,E,k,U){if(Array.isArray(x)){for(var z=0;z<x.length;z++)me(d,x[z],E,k,U);return null}return E=Kn(E),d&&d[B]?d.K(x,E,u(k)?!!k.capture:!!k,U):pe(d,x,E,!1,k,U)}function pe(d,x,E,k,U,z){if(!x)throw Error("Invalid event type");var ce=u(U)?!!U.capture:!!U,yt=Xe(d);if(yt||(d[ue]=yt=new oe(d)),E=yt.add(x,E,k,ce,z),E.proxy)return E;if(k=Ae(),E.proxy=k,k.src=d,k.listener=E,d.addEventListener)xe||(U=ce),U===void 0&&(U=!1),d.addEventListener(x.toString(),k,U);else if(d.attachEvent)d.attachEvent(Qe(x.toString()),k);else if(d.addListener&&d.removeListener)d.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Ae(){function d(E){return x.call(d.src,d.listener,E)}const x=Ye;return d}function ge(d,x,E,k,U){if(Array.isArray(x))for(var z=0;z<x.length;z++)ge(d,x[z],E,k,U);else k=u(k)?!!k.capture:!!k,E=Kn(E),d&&d[B]?(d=d.i,x=String(x).toString(),x in d.g&&(z=d.g[x],E=ye(z,E,k,U),-1<E&&(W(z[E]),Array.prototype.splice.call(z,E,1),z.length==0&&(delete d.g[x],d.h--)))):d&&(d=Xe(d))&&(x=d.g[x.toString()],d=-1,x&&(d=ye(x,E,k,U)),(E=-1<d?x[d]:null)&&vt(E))}function vt(d){if(typeof d!="number"&&d&&!d.da){var x=d.src;if(x&&x[B])fe(x.i,d);else{var E=d.type,k=d.proxy;x.removeEventListener?x.removeEventListener(E,k,d.capture):x.detachEvent?x.detachEvent(Qe(E),k):x.addListener&&x.removeListener&&x.removeListener(k),(E=Xe(x))?(fe(E,d),E.h==0&&(E.src=null,x[ue]=null)):W(d)}}}function Qe(d){return d in ee?ee[d]:ee[d]="on"+d}function Ye(d,x){if(d.da)d=!0;else{x=new Oe(x,this);var E=d.listener,k=d.ha||d.src;d.fa&&vt(d),d=E.call(k,x)}return d}function Xe(d){return d=d[ue],d instanceof oe?d:null}var Hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kn(d){return typeof d=="function"?d:(d[Hn]||(d[Hn]=function(x){return d.handleEvent(x)}),d[Hn])}function xt(){te.call(this),this.i=new oe(this),this.M=this,this.F=null}v(xt,te),xt.prototype[B]=!0,xt.prototype.removeEventListener=function(d,x,E,k){ge(this,d,x,E,k)};function je(d,x){var E,k=d.F;if(k)for(E=[];k;k=k.F)E.push(k);if(d=d.M,k=x.type||x,typeof x=="string")x=new Z(x,d);else if(x instanceof Z)x.target=x.target||d;else{var U=x;x=new Z(k,d),R(x,U)}if(U=!0,E)for(var z=E.length-1;0<=z;z--){var ce=x.g=E[z];U=Qt(ce,k,!0,x)&&U}if(ce=x.g=d,U=Qt(ce,k,!0,x)&&U,U=Qt(ce,k,!1,x)&&U,E)for(z=0;z<E.length;z++)ce=x.g=E[z],U=Qt(ce,k,!1,x)&&U}xt.prototype.N=function(){if(xt.aa.N.call(this),this.i){var d=this.i,x;for(x in d.g){for(var E=d.g[x],k=0;k<E.length;k++)W(E[k]);delete d.g[x],d.h--}}this.F=null},xt.prototype.K=function(d,x,E,k){return this.i.add(String(d),x,!1,E,k)},xt.prototype.L=function(d,x,E,k){return this.i.add(String(d),x,!0,E,k)};function Qt(d,x,E,k){if(x=d.i.g[String(x)],!x)return!0;x=x.concat();for(var U=!0,z=0;z<x.length;++z){var ce=x[z];if(ce&&!ce.da&&ce.capture==E){var yt=ce.listener,ln=ce.ha||ce.src;ce.fa&&fe(d.i,ce),U=yt.call(ln,k)!==!1&&U}}return U&&!k.defaultPrevented}function vn(d,x,E){if(typeof d=="function")E&&(d=m(d,E));else if(d&&typeof d.handleEvent=="function")d=m(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(x)?-1:l.setTimeout(d,x||0)}function Fc(d){d.g=vn(()=>{d.g=null,d.i&&(d.i=!1,Fc(d))},d.l);const x=d.h;d.h=null,d.m.apply(null,x)}class Pg extends te{constructor(x,E){super(),this.m=x,this.l=E,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:Fc(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hi(d){te.call(this),this.h=d,this.g={}}v(hi,te);var $c=[];function Sh(d){D(d.g,function(x,E){this.g.hasOwnProperty(E)&&vt(x)},d),d.g={}}hi.prototype.N=function(){hi.aa.N.call(this),Sh(this)},hi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ro=l.JSON.stringify,as=l.JSON.parse,Rg=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function ke(){}ke.prototype.h=null;function ft(d){return d.h||(d.h=d.i())}function at(){}var xn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gn(){Z.call(this,"d")}v(Gn,Z);function fi(){Z.call(this,"c")}v(fi,Z);var As={},c_=null;function Ih(){return c_=c_||new xt}As.La="serverreachability";function u_(d){Z.call(this,As.La,d)}v(u_,Z);function Uc(d){const x=Ih();je(x,new u_(x))}As.STAT_EVENT="statevent";function d_(d,x){Z.call(this,As.STAT_EVENT,d),this.stat=x}v(d_,Z);function Dn(d){const x=Ih();je(x,new d_(x,d))}As.Ma="timingevent";function h_(d,x){Z.call(this,As.Ma,d),this.size=x}v(h_,Z);function Bc(d,x){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},x)}function zc(){this.g=!0}zc.prototype.xa=function(){this.g=!1};function aO(d,x,E,k,U,z){d.info(function(){if(d.g)if(z)for(var ce="",yt=z.split("&"),ln=0;ln<yt.length;ln++){var et=yt[ln].split("=");if(1<et.length){var wn=et[0];et=et[1];var bn=wn.split("_");ce=2<=bn.length&&bn[1]=="type"?ce+(wn+"="+et+"&"):ce+(wn+"=redacted&")}}else ce=null;else ce=z;return"XMLHTTP REQ ("+k+") [attempt "+U+"]: "+x+`
`+E+`
`+ce})}function lO(d,x,E,k,U,z,ce){d.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+U+"]: "+x+`
`+E+`
`+z+" "+ce})}function Fa(d,x,E,k){d.info(function(){return"XMLHTTP TEXT ("+x+"): "+uO(d,E)+(k?" "+k:"")})}function cO(d,x){d.info(function(){return"TIMEOUT: "+x})}zc.prototype.info=function(){};function uO(d,x){if(!d.g)return x;if(!x)return null;try{var E=JSON.parse(x);if(E){for(d=0;d<E.length;d++)if(Array.isArray(E[d])){var k=E[d];if(!(2>k.length)){var U=k[1];if(Array.isArray(U)&&!(1>U.length)){var z=U[0];if(z!="noop"&&z!="stop"&&z!="close")for(var ce=1;ce<U.length;ce++)U[ce]=""}}}}return Ro(E)}catch{return x}}var Th={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},f_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},jg;function Nh(){}v(Nh,ke),Nh.prototype.g=function(){return new XMLHttpRequest},Nh.prototype.i=function(){return{}},jg=new Nh;function mi(d,x,E,k){this.j=d,this.i=x,this.l=E,this.R=k||1,this.U=new hi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new m_}function m_(){this.i=null,this.g="",this.h=!1}var p_={},kg={};function Dg(d,x,E){d.L=1,d.v=Rh(Ps(x)),d.m=E,d.P=!0,g_(d,null)}function g_(d,x){d.F=Date.now(),Ch(d),d.A=Ps(d.v);var E=d.A,k=d.R;Array.isArray(k)||(k=[String(k)]),P_(E.i,"t",k),d.C=0,E=d.j.J,d.h=new m_,d.g=G_(d.j,E?x:null,!d.m),0<d.O&&(d.M=new Pg(m(d.Y,d,d.g),d.O)),x=d.U,E=d.g,k=d.ca;var U="readystatechange";Array.isArray(U)||(U&&($c[0]=U.toString()),U=$c);for(var z=0;z<U.length;z++){var ce=me(E,U[z],k||x.handleEvent,!1,x.h||x);if(!ce)break;x.g[ce.key]=ce}x=d.H?I(d.H):{},d.m?(d.u||(d.u="POST"),x["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,x)):(d.u="GET",d.g.ea(d.A,d.u,null,x)),Uc(),aO(d.i,d.u,d.A,d.l,d.R,d.m)}mi.prototype.ca=function(d){d=d.target;const x=this.M;x&&Rs(d)==3?x.j():this.Y(d)},mi.prototype.Y=function(d){try{if(d==this.g)e:{const bn=Rs(this.g);var x=this.g.Ba();const Ba=this.g.Z();if(!(3>bn)&&(bn!=3||this.g&&(this.h.h||this.g.oa()||L_(this.g)))){this.J||bn!=4||x==7||(x==8||0>=Ba?Uc(3):Uc(2)),Mg(this);var E=this.g.Z();this.X=E;t:if(y_(this)){var k=L_(this.g);d="";var U=k.length,z=Rs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){jo(this),qc(this);var ce="";break t}this.h.i=new l.TextDecoder}for(x=0;x<U;x++)this.h.h=!0,d+=this.h.i.decode(k[x],{stream:!(z&&x==U-1)});k.length=0,this.h.g+=d,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=E==200,lO(this.i,this.u,this.A,this.l,this.R,bn,E),this.o){if(this.T&&!this.K){t:{if(this.g){var yt,ln=this.g;if((yt=ln.g?ln.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(yt)){var et=yt;break t}}et=null}if(E=et)Fa(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Og(this,E);else{this.o=!1,this.s=3,Dn(12),jo(this),qc(this);break e}}if(this.P){E=!0;let Br;for(;!this.J&&this.C<ce.length;)if(Br=dO(this,ce),Br==kg){bn==4&&(this.s=4,Dn(14),E=!1),Fa(this.i,this.l,null,"[Incomplete Response]");break}else if(Br==p_){this.s=4,Dn(15),Fa(this.i,this.l,ce,"[Invalid Chunk]"),E=!1;break}else Fa(this.i,this.l,Br,null),Og(this,Br);if(y_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),bn!=4||ce.length!=0||this.h.h||(this.s=1,Dn(16),E=!1),this.o=this.o&&E,!E)Fa(this.i,this.l,ce,"[Invalid Chunked Response]"),jo(this),qc(this);else if(0<ce.length&&!this.W){this.W=!0;var wn=this.j;wn.g==this&&wn.ba&&!wn.M&&(wn.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),Bg(wn),wn.M=!0,Dn(11))}}else Fa(this.i,this.l,ce,null),Og(this,ce);bn==4&&jo(this),this.o&&!this.J&&(bn==4?q_(this.j,this):(this.o=!1,Ch(this)))}else CO(this.g),E==400&&0<ce.indexOf("Unknown SID")?(this.s=3,Dn(12)):(this.s=0,Dn(13)),jo(this),qc(this)}}}catch{}finally{}};function y_(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function dO(d,x){var E=d.C,k=x.indexOf(`
`,E);return k==-1?kg:(E=Number(x.substring(E,k)),isNaN(E)?p_:(k+=1,k+E>x.length?kg:(x=x.slice(k,k+E),d.C=k+E,x)))}mi.prototype.cancel=function(){this.J=!0,jo(this)};function Ch(d){d.S=Date.now()+d.I,v_(d,d.I)}function v_(d,x){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Bc(m(d.ba,d),x)}function Mg(d){d.B&&(l.clearTimeout(d.B),d.B=null)}mi.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(cO(this.i,this.A),this.L!=2&&(Uc(),Dn(17)),jo(this),this.s=2,qc(this)):v_(this,this.S-d)};function qc(d){d.j.G==0||d.J||q_(d.j,d)}function jo(d){Mg(d);var x=d.M;x&&typeof x.ma=="function"&&x.ma(),d.M=null,Sh(d.U),d.g&&(x=d.g,d.g=null,x.abort(),x.ma())}function Og(d,x){try{var E=d.j;if(E.G!=0&&(E.g==d||Lg(E.h,d))){if(!d.K&&Lg(E.h,d)&&E.G==3){try{var k=E.Da.g.parse(x)}catch{k=null}if(Array.isArray(k)&&k.length==3){var U=k;if(U[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<d.F)Lh(E),Mh(E);else break e;Ug(E),Dn(18)}}else E.za=U[1],0<E.za-E.T&&37500>U[2]&&E.F&&E.v==0&&!E.C&&(E.C=Bc(m(E.Za,E),6e3));if(1>=b_(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Do(E,11)}else if((d.K||E.g==d)&&Lh(E),!w(x))for(U=E.Da.g.parse(x),x=0;x<U.length;x++){let et=U[x];if(E.T=et[0],et=et[1],E.G==2)if(et[0]=="c"){E.K=et[1],E.ia=et[2];const wn=et[3];wn!=null&&(E.la=wn,E.j.info("VER="+E.la));const bn=et[4];bn!=null&&(E.Aa=bn,E.j.info("SVER="+E.Aa));const Ba=et[5];Ba!=null&&typeof Ba=="number"&&0<Ba&&(k=1.5*Ba,E.L=k,E.j.info("backChannelRequestTimeoutMs_="+k)),k=E;const Br=d.g;if(Br){const Fh=Br.g?Br.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fh){var z=k.h;z.g||Fh.indexOf("spdy")==-1&&Fh.indexOf("quic")==-1&&Fh.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(Vg(z,z.h),z.h=null))}if(k.D){const zg=Br.g?Br.g.getResponseHeader("X-HTTP-Session-Id"):null;zg&&(k.ya=zg,_t(k.I,k.D,zg))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-d.F,E.j.info("Handshake RTT: "+E.R+"ms")),k=E;var ce=d;if(k.qa=K_(k,k.J?k.ia:null,k.W),ce.K){__(k.h,ce);var yt=ce,ln=k.L;ln&&(yt.I=ln),yt.B&&(Mg(yt),Ch(yt)),k.g=ce}else B_(k);0<E.i.length&&Oh(E)}else et[0]!="stop"&&et[0]!="close"||Do(E,7);else E.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?Do(E,7):$g(E):et[0]!="noop"&&E.l&&E.l.ta(et),E.v=0)}}Uc(4)}catch{}}var hO=class{constructor(d,x){this.g=d,this.map=x}};function x_(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function w_(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function b_(d){return d.h?1:d.g?d.g.size:0}function Lg(d,x){return d.h?d.h==x:d.g?d.g.has(x):!1}function Vg(d,x){d.g?d.g.add(x):d.h=x}function __(d,x){d.h&&d.h==x?d.h=null:d.g&&d.g.has(x)&&d.g.delete(x)}x_.prototype.cancel=function(){if(this.i=E_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function E_(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let x=d.i;for(const E of d.g.values())x=x.concat(E.D);return x}return y(d.i)}function fO(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var x=[],E=d.length,k=0;k<E;k++)x.push(d[k]);return x}x=[],E=0;for(k in d)x[E++]=d[k];return x}function mO(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var x=[];d=d.length;for(var E=0;E<d;E++)x.push(E);return x}x=[],E=0;for(const k in d)x[E++]=k;return x}}}function S_(d,x){if(d.forEach&&typeof d.forEach=="function")d.forEach(x,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,x,void 0);else for(var E=mO(d),k=fO(d),U=k.length,z=0;z<U;z++)x.call(void 0,k[z],E&&E[z],d)}var I_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pO(d,x){if(d){d=d.split("&");for(var E=0;E<d.length;E++){var k=d[E].indexOf("="),U=null;if(0<=k){var z=d[E].substring(0,k);U=d[E].substring(k+1)}else z=d[E];x(z,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function ko(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof ko){this.h=d.h,Ah(this,d.j),this.o=d.o,this.g=d.g,Ph(this,d.s),this.l=d.l;var x=d.i,E=new Kc;E.i=x.i,x.g&&(E.g=new Map(x.g),E.h=x.h),T_(this,E),this.m=d.m}else d&&(x=String(d).match(I_))?(this.h=!1,Ah(this,x[1]||"",!0),this.o=Wc(x[2]||""),this.g=Wc(x[3]||"",!0),Ph(this,x[4]),this.l=Wc(x[5]||"",!0),T_(this,x[6]||"",!0),this.m=Wc(x[7]||"")):(this.h=!1,this.i=new Kc(null,this.h))}ko.prototype.toString=function(){var d=[],x=this.j;x&&d.push(Hc(x,N_,!0),":");var E=this.g;return(E||x=="file")&&(d.push("//"),(x=this.o)&&d.push(Hc(x,N_,!0),"@"),d.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&d.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(Hc(E,E.charAt(0)=="/"?vO:yO,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",Hc(E,wO)),d.join("")};function Ps(d){return new ko(d)}function Ah(d,x,E){d.j=E?Wc(x,!0):x,d.j&&(d.j=d.j.replace(/:$/,""))}function Ph(d,x){if(x){if(x=Number(x),isNaN(x)||0>x)throw Error("Bad port number "+x);d.s=x}else d.s=null}function T_(d,x,E){x instanceof Kc?(d.i=x,bO(d.i,d.h)):(E||(x=Hc(x,xO)),d.i=new Kc(x,d.h))}function _t(d,x,E){d.i.set(x,E)}function Rh(d){return _t(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Wc(d,x){return d?x?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Hc(d,x,E){return typeof d=="string"?(d=encodeURI(d).replace(x,gO),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function gO(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var N_=/[#\/\?@]/g,yO=/[#\?:]/g,vO=/[#\?]/g,xO=/[#\?@]/g,wO=/#/g;function Kc(d,x){this.h=this.g=null,this.i=d||null,this.j=!!x}function pi(d){d.g||(d.g=new Map,d.h=0,d.i&&pO(d.i,function(x,E){d.add(decodeURIComponent(x.replace(/\+/g," ")),E)}))}t=Kc.prototype,t.add=function(d,x){pi(this),this.i=null,d=$a(this,d);var E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(x),this.h+=1,this};function C_(d,x){pi(d),x=$a(d,x),d.g.has(x)&&(d.i=null,d.h-=d.g.get(x).length,d.g.delete(x))}function A_(d,x){return pi(d),x=$a(d,x),d.g.has(x)}t.forEach=function(d,x){pi(this),this.g.forEach(function(E,k){E.forEach(function(U){d.call(x,U,k,this)},this)},this)},t.na=function(){pi(this);const d=Array.from(this.g.values()),x=Array.from(this.g.keys()),E=[];for(let k=0;k<x.length;k++){const U=d[k];for(let z=0;z<U.length;z++)E.push(x[k])}return E},t.V=function(d){pi(this);let x=[];if(typeof d=="string")A_(this,d)&&(x=x.concat(this.g.get($a(this,d))));else{d=Array.from(this.g.values());for(let E=0;E<d.length;E++)x=x.concat(d[E])}return x},t.set=function(d,x){return pi(this),this.i=null,d=$a(this,d),A_(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[x]),this.h+=1,this},t.get=function(d,x){return d?(d=this.V(d),0<d.length?String(d[0]):x):x};function P_(d,x,E){C_(d,x),0<E.length&&(d.i=null,d.g.set($a(d,x),y(E)),d.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],x=Array.from(this.g.keys());for(var E=0;E<x.length;E++){var k=x[E];const z=encodeURIComponent(String(k)),ce=this.V(k);for(k=0;k<ce.length;k++){var U=z;ce[k]!==""&&(U+="="+encodeURIComponent(String(ce[k]))),d.push(U)}}return this.i=d.join("&")};function $a(d,x){return x=String(x),d.j&&(x=x.toLowerCase()),x}function bO(d,x){x&&!d.j&&(pi(d),d.i=null,d.g.forEach(function(E,k){var U=k.toLowerCase();k!=U&&(C_(this,k),P_(this,U,E))},d)),d.j=x}function _O(d,x){const E=new zc;if(l.Image){const k=new Image;k.onload=g(gi,E,"TestLoadImage: loaded",!0,x,k),k.onerror=g(gi,E,"TestLoadImage: error",!1,x,k),k.onabort=g(gi,E,"TestLoadImage: abort",!1,x,k),k.ontimeout=g(gi,E,"TestLoadImage: timeout",!1,x,k),l.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=d}else x(!1)}function EO(d,x){const E=new zc,k=new AbortController,U=setTimeout(()=>{k.abort(),gi(E,"TestPingServer: timeout",!1,x)},1e4);fetch(d,{signal:k.signal}).then(z=>{clearTimeout(U),z.ok?gi(E,"TestPingServer: ok",!0,x):gi(E,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(U),gi(E,"TestPingServer: error",!1,x)})}function gi(d,x,E,k,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),k(E)}catch{}}function SO(){this.g=new Rg}function IO(d,x,E){const k=E||"";try{S_(d,function(U,z){let ce=U;u(U)&&(ce=Ro(U)),x.push(k+z+"="+encodeURIComponent(ce))})}catch(U){throw x.push(k+"type="+encodeURIComponent("_badmap")),U}}function jh(d){this.l=d.Ub||null,this.j=d.eb||!1}v(jh,ke),jh.prototype.g=function(){return new kh(this.l,this.j)},jh.prototype.i=function(d){return function(){return d}}({});function kh(d,x){xt.call(this),this.D=d,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(kh,xt),t=kh.prototype,t.open=function(d,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=x,this.readyState=1,Qc(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const x={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(x.body=d),(this.D||l).fetch(new Request(this.A,x)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Gc(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Qc(this)),this.g&&(this.readyState=3,Qc(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;R_(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function R_(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var x=d.value?d.value:new Uint8Array(0);(x=this.v.decode(x,{stream:!d.done}))&&(this.response=this.responseText+=x)}d.done?Gc(this):Qc(this),this.readyState==3&&R_(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,Gc(this))},t.Qa=function(d){this.g&&(this.response=d,Gc(this))},t.ga=function(){this.g&&Gc(this)};function Gc(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Qc(d)}t.setRequestHeader=function(d,x){this.u.append(d,x)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],x=this.h.entries();for(var E=x.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=x.next();return d.join(`\r
`)};function Qc(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(kh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function j_(d){let x="";return D(d,function(E,k){x+=k,x+=":",x+=E,x+=`\r
`}),x}function Fg(d,x,E){e:{for(k in E){var k=!1;break e}k=!0}k||(E=j_(E),typeof d=="string"?E!=null&&encodeURIComponent(String(E)):_t(d,x,E))}function Mt(d){xt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Mt,xt);var TO=/^https?$/i,NO=["POST","PUT"];t=Mt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,x,E,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);x=x?x.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():jg.g(),this.v=this.o?ft(this.o):ft(jg),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(x,String(d),!0),this.B=!1}catch(z){k_(this,z);return}if(d=E||"",E=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var U in k)E.set(U,k[U]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const z of k.keys())E.set(z,k.get(z));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(E.keys()).find(z=>z.toLowerCase()=="content-type"),U=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call(NO,x,void 0))||k||U||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,ce]of E)this.g.setRequestHeader(z,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{O_(this),this.u=!0,this.g.send(d),this.u=!1}catch(z){k_(this,z)}};function k_(d,x){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=x,d.m=5,D_(d),Dh(d)}function D_(d){d.A||(d.A=!0,je(d,"complete"),je(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,je(this,"complete"),je(this,"abort"),Dh(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dh(this,!0)),Mt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?M_(this):this.bb())},t.bb=function(){M_(this)};function M_(d){if(d.h&&typeof o<"u"&&(!d.v[1]||Rs(d)!=4||d.Z()!=2)){if(d.u&&Rs(d)==4)vn(d.Ea,0,d);else if(je(d,"readystatechange"),Rs(d)==4){d.h=!1;try{const ce=d.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var E;if(!(E=x)){var k;if(k=ce===0){var U=String(d.D).match(I_)[1]||null;!U&&l.self&&l.self.location&&(U=l.self.location.protocol.slice(0,-1)),k=!TO.test(U?U.toLowerCase():"")}E=k}if(E)je(d,"complete"),je(d,"success");else{d.m=6;try{var z=2<Rs(d)?d.g.statusText:""}catch{z=""}d.l=z+" ["+d.Z()+"]",D_(d)}}finally{Dh(d)}}}}function Dh(d,x){if(d.g){O_(d);const E=d.g,k=d.v[0]?()=>{}:null;d.g=null,d.v=null,x||je(d,"ready");try{E.onreadystatechange=k}catch{}}}function O_(d){d.I&&(l.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function Rs(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<Rs(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var x=this.g.responseText;return d&&x.indexOf(d)==0&&(x=x.substring(d.length)),as(x)}};function L_(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function CO(d){const x={};d=(d.g&&2<=Rs(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<d.length;k++){if(w(d[k]))continue;var E=M(d[k]);const U=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const z=x[U]||[];x[U]=z,z.push(E)}T(x,function(k){return k.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yc(d,x,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||x}function V_(d){this.Aa=0,this.i=[],this.j=new zc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yc("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yc("baseRetryDelayMs",5e3,d),this.cb=Yc("retryDelaySeedMs",1e4,d),this.Wa=Yc("forwardChannelMaxRetries",2,d),this.wa=Yc("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new x_(d&&d.concurrentRequestLimit),this.Da=new SO,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=V_.prototype,t.la=8,t.G=1,t.connect=function(d,x,E,k){Dn(0),this.W=d,this.H=x||{},E&&k!==void 0&&(this.H.OSID=E,this.H.OAID=k),this.F=this.X,this.I=K_(this,null,this.W),Oh(this)};function $g(d){if(F_(d),d.G==3){var x=d.U++,E=Ps(d.I);if(_t(E,"SID",d.K),_t(E,"RID",x),_t(E,"TYPE","terminate"),Xc(d,E),x=new mi(d,d.j,x),x.L=2,x.v=Rh(Ps(E)),E=!1,l.navigator&&l.navigator.sendBeacon)try{E=l.navigator.sendBeacon(x.v.toString(),"")}catch{}!E&&l.Image&&(new Image().src=x.v,E=!0),E||(x.g=G_(x.j,null),x.g.ea(x.v)),x.F=Date.now(),Ch(x)}H_(d)}function Mh(d){d.g&&(Bg(d),d.g.cancel(),d.g=null)}function F_(d){Mh(d),d.u&&(l.clearTimeout(d.u),d.u=null),Lh(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function Oh(d){if(!w_(d.h)&&!d.s){d.s=!0;var x=d.Ga;G||X(),O||(G(),O=!0),L.add(x,d),d.B=0}}function AO(d,x){return b_(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=x.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Bc(m(d.Ga,d,x),W_(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const U=new mi(this,this.j,d);let z=this.o;if(this.S&&(z?(z=I(z),R(z,this.S)):z=this.S),this.m!==null||this.O||(U.H=z,z=null),this.P)e:{for(var x=0,E=0;E<this.i.length;E++){t:{var k=this.i[E];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(x+=k,4096<x){x=E;break e}if(x===4096||E===this.i.length-1){x=E+1;break e}}x=1e3}else x=1e3;x=U_(this,U,x),E=Ps(this.I),_t(E,"RID",d),_t(E,"CVER",22),this.D&&_t(E,"X-HTTP-Session-Id",this.D),Xc(this,E),z&&(this.O?x="headers="+encodeURIComponent(String(j_(z)))+"&"+x:this.m&&Fg(E,this.m,z)),Vg(this.h,U),this.Ua&&_t(E,"TYPE","init"),this.P?(_t(E,"$req",x),_t(E,"SID","null"),U.T=!0,Dg(U,E,null)):Dg(U,E,x),this.G=2}}else this.G==3&&(d?$_(this,d):this.i.length==0||w_(this.h)||$_(this))};function $_(d,x){var E;x?E=x.l:E=d.U++;const k=Ps(d.I);_t(k,"SID",d.K),_t(k,"RID",E),_t(k,"AID",d.T),Xc(d,k),d.m&&d.o&&Fg(k,d.m,d.o),E=new mi(d,d.j,E,d.B+1),d.m===null&&(E.H=d.o),x&&(d.i=x.D.concat(d.i)),x=U_(d,E,1e3),E.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Vg(d.h,E),Dg(E,k,x)}function Xc(d,x){d.H&&D(d.H,function(E,k){_t(x,k,E)}),d.l&&S_({},function(E,k){_t(x,k,E)})}function U_(d,x,E){E=Math.min(d.i.length,E);var k=d.l?m(d.l.Na,d.l,d):null;e:{var U=d.i;let z=-1;for(;;){const ce=["count="+E];z==-1?0<E?(z=U[0].g,ce.push("ofs="+z)):z=0:ce.push("ofs="+z);let yt=!0;for(let ln=0;ln<E;ln++){let et=U[ln].g;const wn=U[ln].map;if(et-=z,0>et)z=Math.max(0,U[ln].g-100),yt=!1;else try{IO(wn,ce,"req"+et+"_")}catch{k&&k(wn)}}if(yt){k=ce.join("&");break e}}}return d=d.i.splice(0,E),x.D=d,k}function B_(d){if(!d.g&&!d.u){d.Y=1;var x=d.Fa;G||X(),O||(G(),O=!0),L.add(x,d),d.v=0}}function Ug(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Bc(m(d.Fa,d),W_(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,z_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Bc(m(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Dn(10),Mh(this),z_(this))};function Bg(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function z_(d){d.g=new mi(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var x=Ps(d.qa);_t(x,"RID","rpc"),_t(x,"SID",d.K),_t(x,"AID",d.T),_t(x,"CI",d.F?"0":"1"),!d.F&&d.ja&&_t(x,"TO",d.ja),_t(x,"TYPE","xmlhttp"),Xc(d,x),d.m&&d.o&&Fg(x,d.m,d.o),d.L&&(d.g.I=d.L);var E=d.g;d=d.ia,E.L=1,E.v=Rh(Ps(x)),E.m=null,E.P=!0,g_(E,d)}t.Za=function(){this.C!=null&&(this.C=null,Mh(this),Ug(this),Dn(19))};function Lh(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function q_(d,x){var E=null;if(d.g==x){Lh(d),Bg(d),d.g=null;var k=2}else if(Lg(d.h,x))E=x.D,__(d.h,x),k=1;else return;if(d.G!=0){if(x.o)if(k==1){E=x.m?x.m.length:0,x=Date.now()-x.F;var U=d.B;k=Ih(),je(k,new h_(k,E)),Oh(d)}else B_(d);else if(U=x.s,U==3||U==0&&0<x.X||!(k==1&&AO(d,x)||k==2&&Ug(d)))switch(E&&0<E.length&&(x=d.h,x.i=x.i.concat(E)),U){case 1:Do(d,5);break;case 4:Do(d,10);break;case 3:Do(d,6);break;default:Do(d,2)}}}function W_(d,x){let E=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(E*=2),E*x}function Do(d,x){if(d.j.info("Error code "+x),x==2){var E=m(d.fb,d),k=d.Xa;const U=!k;k=new ko(k||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ah(k,"https"),Rh(k),U?_O(k.toString(),E):EO(k.toString(),E)}else Dn(2);d.G=0,d.l&&d.l.sa(x),H_(d),F_(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Dn(2)):(this.j.info("Failed to ping google.com"),Dn(1))};function H_(d){if(d.G=0,d.ka=[],d.l){const x=E_(d.h);(x.length!=0||d.i.length!=0)&&(b(d.ka,x),b(d.ka,d.i),d.h.i.length=0,y(d.i),d.i.length=0),d.l.ra()}}function K_(d,x,E){var k=E instanceof ko?Ps(E):new ko(E);if(k.g!="")x&&(k.g=x+"."+k.g),Ph(k,k.s);else{var U=l.location;k=U.protocol,x=x?x+"."+U.hostname:U.hostname,U=+U.port;var z=new ko(null);k&&Ah(z,k),x&&(z.g=x),U&&Ph(z,U),E&&(z.l=E),k=z}return E=d.D,x=d.ya,E&&x&&_t(k,E,x),_t(k,"VER",d.la),Xc(d,k),k}function G_(d,x,E){if(x&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return x=d.Ca&&!d.pa?new Mt(new jh({eb:E})):new Mt(d.pa),x.Ha(d.J),x}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Q_(){}t=Q_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Vh(){}Vh.prototype.g=function(d,x){return new rr(d,x)};function rr(d,x){xt.call(this),this.g=new V_(x),this.l=d,this.h=x&&x.messageUrlParams||null,d=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(d?d["X-WebChannel-Content-Type"]=x.messageContentType:d={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.va&&(d?d["X-WebChannel-Client-Profile"]=x.va:d={"X-WebChannel-Client-Profile":x.va}),this.g.S=d,(d=x&&x.Sb)&&!w(d)&&(this.g.m=d),this.v=x&&x.supportsCrossDomainXhr||!1,this.u=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!w(x)&&(this.g.D=x,d=this.h,d!==null&&x in d&&(d=this.h,x in d&&delete d[x])),this.j=new Ua(this)}v(rr,xt),rr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rr.prototype.close=function(){$g(this.g)},rr.prototype.o=function(d){var x=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.u&&(E={},E.__data__=Ro(d),d=E);x.i.push(new hO(x.Ya++,d)),x.G==3&&Oh(x)},rr.prototype.N=function(){this.g.l=null,delete this.j,$g(this.g),delete this.g,rr.aa.N.call(this)};function Y_(d){Gn.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var x=d.__sm__;if(x){e:{for(const E in x){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,x=x!==null&&d in x?x[d]:void 0),this.data=x}else this.data=d}v(Y_,Gn);function X_(){fi.call(this),this.status=1}v(X_,fi);function Ua(d){this.g=d}v(Ua,Q_),Ua.prototype.ua=function(){je(this.g,"a")},Ua.prototype.ta=function(d){je(this.g,new Y_(d))},Ua.prototype.sa=function(d){je(this.g,new X_)},Ua.prototype.ra=function(){je(this.g,"b")},Vh.prototype.createWebChannel=Vh.prototype.g,rr.prototype.send=rr.prototype.o,rr.prototype.open=rr.prototype.m,rr.prototype.close=rr.prototype.close,ER=function(){return new Vh},_R=function(){return Ih()},bR=As,p0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Th.NO_ERROR=0,Th.TIMEOUT=8,Th.HTTP_ERROR=6,Bf=Th,f_.COMPLETE="complete",wR=f_,at.EventType=xn,xn.OPEN="a",xn.CLOSE="b",xn.ERROR="c",xn.MESSAGE="d",xt.prototype.listen=xt.prototype.K,Su=at,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,xR=Mt}).apply(typeof df<"u"?df:typeof self<"u"?self:typeof window<"u"?window:{});const bS="@firebase/firestore",_S="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jc="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa=new xw("@firebase/firestore");function nl(){return xa.logLevel}function se(t,...e){if(xa.logLevel<=qe.DEBUG){const n=e.map(jw);xa.debug(`Firestore (${jc}): ${t}`,...n)}}function Fn(t,...e){if(xa.logLevel<=qe.ERROR){const n=e.map(jw);xa.error(`Firestore (${jc}): ${t}`,...n)}}function wa(t,...e){if(xa.logLevel<=qe.WARN){const n=e.map(jw);xa.warn(`Firestore (${jc}): ${t}`,...n)}}function jw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t="Unexpected state"){const e=`FIRESTORE (${jc}) INTERNAL ASSERTION FAILED: `+t;throw Fn(e),new Error(e)}function Ee(t,e){t||we()}function Me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends ai{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xz{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(un.UNAUTHENTICATED))}shutdown(){}}class wz{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class bz{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ee(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new _s;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new _s,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new _s)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string"),new SR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string"),new un(e)}}class _z{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=un.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Ez{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new _z(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(un.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ES{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Sz{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,ur(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){Ee(this.o===void 0);const r=i=>{i.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new ES(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ee(typeof n.token=="string"),this.R=n.token,new ES(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iz(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Iz(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Le(t,e){return t<e?-1:t>e?1:0}function rc(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function TR(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS=-62135596800,IS=1e6;class $e{static now(){return $e.fromMillis(Date.now())}static fromDate(e){return $e.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*IS);return new $e(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new le(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new le(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<SS)throw new le(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/IS}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-SS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new $e(0,0))}static max(){return new Ne(new $e(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS="__name__";class us{constructor(e,n,r){n===void 0?n=0:n>e.length&&we(),r===void 0?r=e.length-n:r>e.length-n&&we(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return us.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof us?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=us.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Math.sign(e.length-n.length)}static compareSegments(e,n){const r=us.isNumericId(e),s=us.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?us.extractNumericId(e).compare(us.extractNumericId(n)):e<n?-1:e>n?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return no.fromString(e.substring(4,e.length-2))}}class ot extends us{construct(e,n,r){return new ot(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new le(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ot(n)}static emptyPath(){return new ot([])}}const Tz=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jt extends us{construct(e,n,r){return new jt(e,n,r)}static isValidIdentifier(e){return Tz.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===TS}static keyField(){return new jt([TS])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new le(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new le(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new le(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new le(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jt(n)}static emptyPath(){return new jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(ot.fromString(e))}static fromName(e){return new he(ot.fromString(e).popFirst(5))}static empty(){return new he(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ot.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new ot(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d=-1;class Um{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function g0(t){return t.fields.find(e=>e.kind===2)}function Fo(t){return t.fields.filter(e=>e.kind!==2)}Um.UNKNOWN_ID=-1;class zf{constructor(e,n){this.fieldPath=e,this.kind=n}}class Ed{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Ed(0,wr.min())}}function Nz(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ne.fromTimestamp(r===1e9?new $e(n+1,0):new $e(n,r));return new wr(s,he.empty(),e)}function NR(t){return new wr(t.readTime,t.key,_d)}class wr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new wr(Ne.min(),he.empty(),_d)}static max(){return new wr(Ne.max(),he.empty(),_d)}}function kw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=he.comparator(t.documentKey,e.documentKey),n!==0?n:Le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Da(t){if(t.code!==H.FAILED_PRECONDITION||t.message!==CR)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(s=>s?$.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new $((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(h=>{o[u]=h,++l,l===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new $((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr="SimpleDb";class Yp{static open(e,n,r,s){try{return new Yp(n,e.transaction(s,r))}catch(i){throw new zu(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.m=new _s,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{n.error?this.m.reject(new zu(e,n.error)):this.m.resolve()},this.transaction.onerror=r=>{const s=Dw(r.target.error);this.m.reject(new zu(e,s))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(se(lr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Az(n)}}class ro{static delete(e){return se(lr,"Removing database:",e),Bo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!PP())return!1;if(ro.v())return!0;const e=en(),n=ro.C(e),r=0<n&&n<10,s=PR(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static C(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.O=r,ro.C(en())===12.2&&Fn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(e){return this.db||(se(lr,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new zu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new le(H.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new le(H.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new zu(e,o))},s.onupgradeneeded=i=>{se(lr,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.O.B(o,s.transaction,i.oldVersion,this.version).next(()=>{se(lr,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.N(e);const l=Yp.open(this.db,e,i?"readonly":"readwrite",r),c=s(l).next(u=>(l.S(),u)).catch(u=>(l.abort(u),$.reject(u))).toPromise();return c.catch(()=>{}),await l.p,c}catch(l){const c=l,u=c.name!=="FirebaseError"&&o<3;if(se(lr,"Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function PR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Cz{constructor(e){this.q=e,this.$=!1,this.K=null}get isDone(){return this.$}get U(){return this.K}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.K=e}delete(){return Bo(this.q.delete())}}class zu extends le{constructor(e,n){super(H.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function To(t){return t.name==="IndexedDbTransactionError"}class Az{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(se(lr,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(se(lr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Bo(r)}add(e){return se(lr,"ADD",this.store.name,e,e),Bo(this.store.add(e))}get(e){return Bo(this.store.get(e)).next(n=>(n===void 0&&(n=null),se(lr,"GET",this.store.name,e,n),n))}delete(e){return se(lr,"DELETE",this.store.name,e),Bo(this.store.delete(e))}count(){return se(lr,"COUNT",this.store.name),Bo(this.store.count())}G(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new $((o,l)=>{i.onerror=c=>{l(c.target.error)},i.onsuccess=c=>{o(c.target.result)}})}{const i=this.cursor(r),o=[];return this.j(i,(l,c)=>{o.push(c)}).next(()=>o)}}H(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new $((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}J(e,n){se(lr,"DELETE ALL",this.store.name);const r=this.options(e,n);r.Y=!1;const s=this.cursor(r);return this.j(s,(i,o,l)=>l.delete())}Z(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.j(s,n)}X(e){const n=this.cursor({});return new $((r,s)=>{n.onerror=i=>{const o=Dw(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(l=>{l?o.continue():r()}):r()}})}j(e,n){const r=[];return new $((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const l=o.target.result;if(!l)return void s();const c=new Cz(l),u=n(l.primaryKey,l.value,c);if(u instanceof $){const h=u.catch(f=>(c.done(),$.reject(f)));r.push(h)}c.isDone?s():c.U===null?l.continue():l.continue(c.U)}}).next(()=>$.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Bo(t){return new $((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=Dw(r.target.error);n(s)}})}let NS=!1;function Dw(t){const e=ro.C(en());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return NS||(NS=!0,setTimeout(()=>{throw r},0)),r}}return t}const qu="IndexBackfiller";class Pz{constructor(e,n){this.asyncQueue=e,this.ee=n,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){se(qu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ee.ne();se(qu,`Documents written: ${n}`)}catch(n){To(n)?se(qu,"Ignoring IndexedDB error during index backfill: ",n):await Da(n)}await this.te(6e4)})}}class Rz{constructor(e,n){this.localStore=e,this.persistence=n}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.re(n,e))}re(e,n){const r=new Set;let s=n,i=!0;return $.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return se(qu,`Processing collection: ${o}`),this.ie(e,o,s).next(l=>{s-=l,r.add(o)});i=!1})).next(()=>n-s)}ie(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.se(s,i)).next(l=>(se(qu,`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,n,l))).next(()=>o.size)}))}se(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=NR(i);kw(o,r)>0&&(r=o)}),new wr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}jr.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra=-1;function Xp(t){return t==null}function Sd(t){return t===0&&1/t==-1/0}function jz(t){return typeof t=="number"&&Number.isInteger(t)&&!Sd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="";function Pn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=CS(e)),e=kz(t.get(n),e);return CS(e)}function kz(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Bm:n+="";break;default:n+=i}}return n}function CS(t){return t+Bm+""}function gs(t){const e=t.length;if(Ee(e>=2),e===2)return Ee(t.charAt(0)===Bm&&t.charAt(1)===""),ot.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf(Bm,i);switch((o<0||o>n)&&we(),t.charAt(o+1)){case"":const l=t.substring(i,o);let c;s.length===0?c=l:(s+=l,c=s,s=""),r.push(c);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:we()}i=o+2}return new ot(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o="remoteDocuments",sh="owner",qa="owner",Id="mutationQueues",Dz="userId",Qr="mutations",AS="batchId",Yo="userMutationsIndex",PS=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(t,e){return[t,Pn(e)]}function RR(t,e,n){return[t,Pn(e),n]}const Mz={},sc="documentMutations",zm="remoteDocumentsV14",Oz=["prefixPath","collectionGroup","readTime","documentId"],Wf="documentKeyIndex",Lz=["prefixPath","collectionGroup","documentId"],jR="collectionGroupIndex",Vz=["collectionGroup","readTime","prefixPath","documentId"],Td="remoteDocumentGlobal",y0="remoteDocumentGlobalKey",ic="targets",kR="queryTargetsIndex",Fz=["canonicalId","targetId"],oc="targetDocuments",$z=["targetId","path"],Mw="documentTargetsIndex",Uz=["path","targetId"],qm="targetGlobalKey",sa="targetGlobal",Nd="collectionParents",Bz=["collectionId","parent"],ac="clientMetadata",zz="clientId",Jp="bundles",qz="bundleId",Zp="namedQueries",Wz="name",Ow="indexConfiguration",Hz="indexId",v0="collectionGroupIndex",Kz="collectionGroup",Wm="indexState",Gz=["indexId","uid"],DR="sequenceNumberIndex",Qz=["uid","sequenceNumber"],Hm="indexEntries",Yz=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],MR="documentKeyIndex",Xz=["indexId","uid","orderedDocumentKey"],eg="documentOverlays",Jz=["userId","collectionPath","documentId"],x0="collectionPathOverlayIndex",Zz=["userId","collectionPath","largestBatchId"],OR="collectionGroupOverlayIndex",e8=["userId","collectionGroup","largestBatchId"],Lw="globals",t8="name",LR=[Id,Qr,sc,$o,ic,sh,sa,oc,ac,Td,Nd,Jp,Zp],n8=[...LR,eg],VR=[Id,Qr,sc,zm,ic,sh,sa,oc,ac,Td,Nd,Jp,Zp,eg],FR=VR,Vw=[...FR,Ow,Wm,Hm],r8=Vw,s8=[...Vw,Lw];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0 extends AR{constructor(e,n){super(),this.ue=e,this.currentSequenceNumber=n}}function tn(t,e){const n=Me(t);return ro.M(n.ue,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function No(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $R(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,n){this.comparator=e,this.root=n||dn.EMPTY}insert(e,n){return new Pt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dn.BLACK,null,null))}remove(e){return new Pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hf(this.root,e,this.comparator,!1)}getReverseIterator(){return new hf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hf(this.root,e,this.comparator,!0)}}class hf{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dn{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??dn.RED,this.left=s??dn.EMPTY,this.right=i??dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new dn(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return dn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw we();const e=this.left.check();if(e!==this.right.check())throw we();return e+(this.isRed()?0:1)}}dn.EMPTY=null,dn.RED=!0,dn.BLACK=!1;dn.EMPTY=new class{constructor(){this.size=0}get key(){throw we()}get value(){throw we()}get color(){throw we()}get left(){throw we()}get right(){throw we()}copy(e,n,r,s,i){return this}insert(e,n,r){return new dn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.comparator=e,this.data=new Pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new jS(this.data.getIterator())}getIteratorFrom(e){return new jS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new dt(this.comparator);return n.data=e,n}}class jS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Wa(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.fields=e,e.sort(jt.comparator)}static empty(){return new Xn([])}unionWith(e){let n=new dt(jt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return rc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new UR("Invalid base64 string: "+i):i}}(e);return new Gt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Gt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const i8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ri(t){if(Ee(!!t),typeof t=="string"){let e=0;const n=i8.exec(t);if(Ee(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Nt(t.seconds),nanos:Nt(t.nanos)}}function Nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function si(t){return typeof t=="string"?Gt.fromBase64String(t):Gt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR="server_timestamp",zR="__type__",qR="__previous_value__",WR="__local_write_time__";function Fw(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[zR])===null||n===void 0?void 0:n.stringValue)===BR}function tg(t){const e=t.mapValue.fields[qR];return Fw(e)?tg(e):e}function Cd(t){const e=ri(t.mapValue.fields[WR].timestampValue);return new $e(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8{constructor(e,n,r,s,i,o,l,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u}}const Km="(default)";class ba{constructor(e,n){this.projectId=e,this.database=n||Km}static empty(){return new ba("","")}get isDefaultDatabase(){return this.database===Km}isEqual(e){return e instanceof ba&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w="__type__",HR="__max__",Bi={mapValue:{fields:{__type__:{stringValue:HR}}}},Uw="__vector__",lc="value",Hf={nullValue:"NULL_VALUE"};function ho(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Fw(t)?4:KR(t)?9007199254740991:ng(t)?10:11:we()}function Is(t,e){if(t===e)return!0;const n=ho(t);if(n!==ho(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Cd(t).isEqual(Cd(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ri(s.timestampValue),l=ri(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return si(s.bytesValue).isEqual(si(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Nt(s.geoPointValue.latitude)===Nt(i.geoPointValue.latitude)&&Nt(s.geoPointValue.longitude)===Nt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Nt(s.integerValue)===Nt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Nt(s.doubleValue),l=Nt(i.doubleValue);return o===l?Sd(o)===Sd(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return rc(t.arrayValue.values||[],e.arrayValue.values||[],Is);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(RS(o)!==RS(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Is(o[c],l[c])))return!1;return!0}(t,e);default:return we()}}function Ad(t,e){return(t.values||[]).find(n=>Is(n,e))!==void 0}function fo(t,e){if(t===e)return 0;const n=ho(t),r=ho(e);if(n!==r)return Le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Nt(i.integerValue||i.doubleValue),c=Nt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return kS(t.timestampValue,e.timestampValue);case 4:return kS(Cd(t),Cd(e));case 5:return Le(t.stringValue,e.stringValue);case 6:return function(i,o){const l=si(i),c=si(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=Le(l[u],c[u]);if(h!==0)return h}return Le(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Le(Nt(i.latitude),Nt(o.latitude));return l!==0?l:Le(Nt(i.longitude),Nt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return DS(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,c,u,h;const f=i.fields||{},m=o.fields||{},g=(l=f[lc])===null||l===void 0?void 0:l.arrayValue,v=(c=m[lc])===null||c===void 0?void 0:c.arrayValue,y=Le(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((h=v==null?void 0:v.values)===null||h===void 0?void 0:h.length)||0);return y!==0?y:DS(g,v)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Bi.mapValue&&o===Bi.mapValue)return 0;if(i===Bi.mapValue)return 1;if(o===Bi.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const m=Le(c[f],h[f]);if(m!==0)return m;const g=fo(l[c[f]],u[h[f]]);if(g!==0)return g}return Le(c.length,h.length)}(t.mapValue,e.mapValue);default:throw we()}}function kS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Le(t,e);const n=ri(t),r=ri(e),s=Le(n.seconds,r.seconds);return s!==0?s:Le(n.nanos,r.nanos)}function DS(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=fo(n[s],r[s]);if(i)return i}return Le(n.length,r.length)}function cc(t){return b0(t)}function b0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ri(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return si(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return he.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=b0(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${b0(n.fields[o])}`;return s+"}"}(t.mapValue):we()}function Kf(t){switch(ho(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=tg(t);return e?16+Kf(e):16;case 5:return 2*t.stringValue.length;case 6:return si(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Kf(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return No(r.fields,(i,o)=>{s+=i.length+Kf(o)}),s}(t.mapValue);default:throw we()}}function Pd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function _0(t){return!!t&&"integerValue"in t}function Rd(t){return!!t&&"arrayValue"in t}function MS(t){return!!t&&"nullValue"in t}function OS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Gf(t){return!!t&&"mapValue"in t}function ng(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[$w])===null||n===void 0?void 0:n.stringValue)===Uw}function Wu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return No(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Wu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Wu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function KR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===HR}const GR={mapValue:{fields:{[$w]:{stringValue:Uw},[lc]:{arrayValue:{}}}}};function a8(t){return"nullValue"in t?Hf:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Pd(ba.empty(),he.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?ng(t)?GR:{mapValue:{}}:we()}function l8(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Pd(ba.empty(),he.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?GR:"mapValue"in t?ng(t)?{mapValue:{}}:Bi:we()}function LS(t,e){const n=fo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function VS(t,e){const n=fo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.value=e}static empty(){return new An({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Gf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wu(n)}setAll(e){let n=jt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Wu(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Gf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Is(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Gf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){No(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new An(Wu(this.value))}}function QR(t){const e=[];return No(t.fields,(n,r)=>{const s=new jt([n]);if(Gf(r)){const i=QR(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Vt(e,0,Ne.min(),Ne.min(),Ne.min(),An.empty(),0)}static newFoundDocument(e,n,r,s){return new Vt(e,1,n,Ne.min(),r,s,0)}static newNoDocument(e,n){return new Vt(e,2,n,Ne.min(),Ne.min(),An.empty(),0)}static newUnknownDocument(e,n){return new Vt(e,3,n,Ne.min(),Ne.min(),An.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n){this.position=e,this.inclusive=n}}function FS(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=he.comparator(he.fromName(o.referenceValue),n.key):r=fo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function $S(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Is(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,n="asc"){this.field=e,this.dir=n}}function c8(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{}class We extends YR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new u8(e,n,r):n==="array-contains"?new f8(e,r):n==="in"?new n2(e,r):n==="not-in"?new m8(e,r):n==="array-contains-any"?new p8(e,r):new We(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new d8(e,r):new h8(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(fo(n,this.value)):n!==null&&ho(this.value)===ho(n)&&this.matchesComparison(fo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ct extends YR{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new ct(e,n)}matches(e){return dc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function dc(t){return t.op==="and"}function E0(t){return t.op==="or"}function Bw(t){return XR(t)&&dc(t)}function XR(t){for(const e of t.filters)if(e instanceof ct)return!1;return!0}function S0(t){if(t instanceof We)return t.field.canonicalString()+t.op.toString()+cc(t.value);if(Bw(t))return t.filters.map(e=>S0(e)).join(",");{const e=t.filters.map(n=>S0(n)).join(",");return`${t.op}(${e})`}}function JR(t,e){return t instanceof We?function(r,s){return s instanceof We&&r.op===s.op&&r.field.isEqual(s.field)&&Is(r.value,s.value)}(t,e):t instanceof ct?function(r,s){return s instanceof ct&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&JR(o,s.filters[l]),!0):!1}(t,e):void we()}function ZR(t,e){const n=t.filters.concat(e);return ct.create(n,t.op)}function e2(t){return t instanceof We?function(n){return`${n.field.canonicalString()} ${n.op} ${cc(n.value)}`}(t):t instanceof ct?function(n){return n.op.toString()+" {"+n.getFilters().map(e2).join(" ,")+"}"}(t):"Filter"}class u8 extends We{constructor(e,n,r){super(e,n,r),this.key=he.fromName(r.referenceValue)}matches(e){const n=he.comparator(e.key,this.key);return this.matchesComparison(n)}}class d8 extends We{constructor(e,n){super(e,"in",n),this.keys=t2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class h8 extends We{constructor(e,n){super(e,"not-in",n),this.keys=t2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function t2(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>he.fromName(r.referenceValue))}class f8 extends We{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Rd(n)&&Ad(n.arrayValue,this.value)}}class n2 extends We{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ad(this.value.arrayValue,n)}}class m8 extends We{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ad(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ad(this.value.arrayValue,n)}}class p8 extends We{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Rd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ad(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.le=null}}function I0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new g8(t,e,n,r,s,i,o)}function _a(t){const e=Me(t);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>S0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Xp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>cc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>cc(r)).join(",")),e.le=n}return e.le}function ih(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!c8(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!JR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$S(t.startAt,e.startAt)&&$S(t.endAt,e.endAt)}function Gm(t){return he.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Qm(t,e){return t.filters.filter(n=>n instanceof We&&n.field.isEqual(e))}function US(t,e,n){let r=Hf,s=!0;for(const i of Qm(t,e)){let o=Hf,l=!0;switch(i.op){case"<":case"<=":o=a8(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,l=!1;break;case"!=":case"not-in":o=Hf}LS({value:r,inclusive:s},{value:o,inclusive:l})<0&&(r=o,s=l)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];LS({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function BS(t,e,n){let r=Bi,s=!0;for(const i of Qm(t,e)){let o=Bi,l=!0;switch(i.op){case">=":case">":o=l8(i.value),l=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,l=!1;break;case"!=":case"not-in":o=Bi}VS({value:r,inclusive:s},{value:o,inclusive:l})>0&&(r=o,s=l)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];VS({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function y8(t,e,n,r,s,i,o,l){return new kc(t,e,n,r,s,i,o,l)}function oh(t){return new kc(t)}function zS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function r2(t){return t.collectionGroup!==null}function Hu(t){const e=Me(t);if(e.he===null){e.he=[];const n=new Set;for(const i of e.explicitOrderBy)e.he.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new dt(jt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.he.push(new jd(i,r))}),n.has(jt.keyField().canonicalString())||e.he.push(new jd(jt.keyField(),r))}return e.he}function Mr(t){const e=Me(t);return e.Pe||(e.Pe=v8(e,Hu(t))),e.Pe}function v8(t,e){if(t.limitType==="F")return I0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new jd(s.field,i)});const n=t.endAt?new uc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new uc(t.startAt.position,t.startAt.inclusive):null;return I0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function T0(t,e){const n=t.filters.concat([e]);return new kc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ym(t,e,n){return new kc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function rg(t,e){return ih(Mr(t),Mr(e))&&t.limitType===e.limitType}function s2(t){return`${_a(Mr(t))}|lt:${t.limitType}`}function rl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>e2(s)).join(", ")}]`),Xp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>cc(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>cc(s)).join(",")),`Target(${r})`}(Mr(t))}; limitType=${t.limitType})`}function ah(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):he.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Hu(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const u=FS(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,Hu(r),s)||r.endAt&&!function(o,l,c){const u=FS(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,Hu(r),s))}(t,e)}function x8(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function i2(t){return(e,n)=>{let r=!1;for(const s of Hu(t)){const i=w8(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function w8(t,e,n){const r=t.field.isKeyField()?he.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?fo(c,u):we()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return we()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){No(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return $R(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b8=new Pt(he.comparator);function mr(){return b8}const o2=new Pt(he.comparator);function Iu(...t){let e=o2;for(const n of t)e=e.insert(n.key,n);return e}function a2(t){let e=o2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ys(){return Ku()}function l2(){return Ku()}function Ku(){return new li(t=>t.toString(),(t,e)=>t.isEqual(e))}const _8=new Pt(he.comparator),E8=new dt(he.comparator);function Ue(...t){let e=E8;for(const n of t)e=e.add(n);return e}const S8=new dt(Le);function I8(){return S8}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sd(e)?"-0":e}}function c2(t){return{integerValue:""+t}}function T8(t,e){return jz(e)?c2(e):zw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(){this._=void 0}}function N8(t,e,n){return t instanceof hc?function(s,i){const o={fields:{[zR]:{stringValue:BR},[WR]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Fw(i)&&(i=tg(i)),i&&(o.fields[qR]=i),{mapValue:o}}(n,e):t instanceof fc?d2(t,e):t instanceof mc?h2(t,e):function(s,i){const o=u2(s,i),l=qS(o)+qS(s.Ie);return _0(o)&&_0(s.Ie)?c2(l):zw(s.serializer,l)}(t,e)}function C8(t,e,n){return t instanceof fc?d2(t,e):t instanceof mc?h2(t,e):n}function u2(t,e){return t instanceof kd?function(r){return _0(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class hc extends sg{}class fc extends sg{constructor(e){super(),this.elements=e}}function d2(t,e){const n=f2(e);for(const r of t.elements)n.some(s=>Is(s,r))||n.push(r);return{arrayValue:{values:n}}}class mc extends sg{constructor(e){super(),this.elements=e}}function h2(t,e){let n=f2(e);for(const r of t.elements)n=n.filter(s=>!Is(s,r));return{arrayValue:{values:n}}}class kd extends sg{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function qS(t){return Nt(t.integerValue||t.doubleValue)}function f2(t){return Rd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,n){this.field=e,this.transform=n}}function A8(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof fc&&s instanceof fc||r instanceof mc&&s instanceof mc?rc(r.elements,s.elements,Is):r instanceof kd&&s instanceof kd?Is(r.Ie,s.Ie):r instanceof hc&&s instanceof hc}(t.transform,e.transform)}class P8{constructor(e,n){this.version=e,this.transformResults=n}}class on{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ig{}function p2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new lh(t.key,on.none()):new Dc(t.key,t.data,on.none());{const n=t.data,r=An.empty();let s=new dt(jt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ci(t.key,r,new Xn(s.toArray()),on.none())}}function R8(t,e,n){t instanceof Dc?function(s,i,o){const l=s.value.clone(),c=HS(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ci?function(s,i,o){if(!Qf(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=HS(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(g2(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Gu(t,e,n,r){return t instanceof Dc?function(i,o,l,c){if(!Qf(i.precondition,o))return l;const u=i.value.clone(),h=KS(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ci?function(i,o,l,c){if(!Qf(i.precondition,o))return l;const u=KS(i.fieldTransforms,c,o),h=o.data;return h.setAll(g2(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,l){return Qf(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function j8(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=u2(r.transform,s||null);i!=null&&(n===null&&(n=An.empty()),n.set(r.field,i))}return n||null}function WS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&rc(r,s,(i,o)=>A8(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Dc extends ig{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ci extends ig{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function g2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function HS(t,e,n){const r=new Map;Ee(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,C8(o,l,n[s]))}return r}function KS(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,N8(i,o,e))}return r}class lh extends ig{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class y2 extends ig{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&R8(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Gu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Gu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=l2();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=p2(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(Ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ue())}isEqual(e){return this.batchId===e.batchId&&rc(this.mutations,e.mutations,(n,r)=>WS(n,r))&&rc(this.baseMutations,e.baseMutations,(n,r)=>WS(n,r))}}class Ww{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ee(e.mutations.length===r.length);let s=function(){return _8}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Ww(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k8{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,He;function D8(t){switch(t){case H.OK:return we();case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return we()}}function v2(t){if(t===void 0)return Fn("GRPC error has no .code"),H.UNKNOWN;switch(t){case qt.OK:return H.OK;case qt.CANCELLED:return H.CANCELLED;case qt.UNKNOWN:return H.UNKNOWN;case qt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case qt.INTERNAL:return H.INTERNAL;case qt.UNAVAILABLE:return H.UNAVAILABLE;case qt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case qt.NOT_FOUND:return H.NOT_FOUND;case qt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case qt.ABORTED:return H.ABORTED;case qt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case qt.DATA_LOSS:return H.DATA_LOSS;default:return we()}}(He=qt||(qt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M8(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O8=new no([4294967295,4294967295],0);function GS(t){const e=M8().encode(t),n=new vR;return n.update(e),new Uint8Array(n.digest())}function QS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new no([n,r],0),new no([s,i],0)]}class Kw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Tu(`Invalid padding: ${n}`);if(r<0)throw new Tu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Tu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Tu(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=no.fromNumber(this.Ee)}Ae(e,n,r){let s=e.add(n.multiply(no.fromNumber(r)));return s.compare(O8)===1&&(s=new no([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=GS(e),[r,s]=QS(n);for(let i=0;i<this.hashCount;i++){const o=this.Ae(r,s,i);if(!this.Re(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Kw(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ee===0)return;const n=GS(e),[r,s]=QS(n);for(let i=0;i<this.hashCount;i++){const o=this.Ae(r,s,i);this.Ve(o)}}Ve(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Tu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ch.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new og(Ne.min(),s,new Pt(Le),mr(),Ue())}}class ch{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ch(r,n,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,n,r,s){this.me=e,this.removedTargetIds=n,this.key=r,this.fe=s}}class x2{constructor(e,n){this.targetId=e,this.ge=n}}class w2{constructor(e,n,r=Gt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class YS{constructor(){this.pe=0,this.ye=XS(),this.we=Gt.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=Ue(),n=Ue(),r=Ue();return this.ye.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:we()}}),new ch(this.we,this.be,e,n,r)}Me(){this.Se=!1,this.ye=XS()}xe(e,n){this.Se=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Ee(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class L8{constructor(e){this.ke=e,this.qe=new Map,this.Qe=mr(),this.$e=ff(),this.Ke=ff(),this.Ue=new Pt(Le)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const r=this.He(n);switch(e.state){case 0:this.Je(n)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(n);break;case 3:this.Je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),r.Ce(e.resumeToken));break;default:we()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((r,s)=>{this.Je(s)&&n(s)})}Ze(e){const n=e.targetId,r=e.ge.count,s=this.Xe(n);if(s){const i=s.target;if(Gm(i))if(r===0){const o=new he(i.path);this.ze(n,o,Vt.newNoDocument(o,Ne.min()))}else Ee(r===1);else{const o=this.et(n);if(o!==r){const l=this.tt(e),c=l?this.nt(l,e,o):1;if(c!==0){this.Ye(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(n,u)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=si(r).toUint8Array()}catch(c){if(c instanceof UR)return wa("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Kw(o,s,i)}catch(c){return wa(c instanceof Tu?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ee===0?null:l}nt(e,n,r){return n.ge.count===r-this.st(e,n.targetId)?0:2}st(e,n){const r=this.ke.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.ke.it(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.ze(n,i,null),s++)}),s}ot(e){const n=new Map;this.qe.forEach((i,o)=>{const l=this.Xe(o);if(l){if(i.current&&Gm(l.target)){const c=new he(l.target.path);this._t(c).has(o)||this.ut(o,c)||this.ze(o,c,Vt.newNoDocument(c,e))}i.ve&&(n.set(o,i.Fe()),i.Me())}});let r=Ue();this.Ke.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.Xe(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.Qe.forEach((i,o)=>o.setReadTime(e));const s=new og(e,n,this.Ue,this.Qe,r);return this.Qe=mr(),this.$e=ff(),this.Ke=ff(),this.Ue=new Pt(Le),s}Ge(e,n){if(!this.Je(e))return;const r=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,r),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ke=this.Ke.insert(n.key,this.ct(n.key).add(e))}ze(e,n,r){if(!this.Je(e))return;const s=this.He(e);this.ut(e,n)?s.xe(n,1):s.Oe(n),this.Ke=this.Ke.insert(n,this.ct(n).delete(e)),this.Ke=this.Ke.insert(n,this.ct(n).add(e)),r&&(this.Qe=this.Qe.insert(n,r))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new YS,this.qe.set(e,n)),n}ct(e){let n=this.Ke.get(e);return n||(n=new dt(Le),this.Ke=this.Ke.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new dt(Le),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new YS),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function ff(){return new Pt(he.comparator)}function XS(){return new Pt(he.comparator)}const V8={asc:"ASCENDING",desc:"DESCENDING"},F8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$8={and:"AND",or:"OR"};class U8{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function N0(t,e){return t.useProto3Json||Xp(e)?e:{value:e}}function pc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function b2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function B8(t,e){return pc(t,e.toTimestamp())}function Un(t){return Ee(!!t),Ne.fromTimestamp(function(n){const r=ri(n);return new $e(r.seconds,r.nanos)}(t))}function Gw(t,e){return C0(t,e).canonicalString()}function C0(t,e){const n=function(s){return new ot(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function _2(t){const e=ot.fromString(t);return Ee(R2(e)),e}function Xm(t,e){return Gw(t.databaseId,e.path)}function ia(t,e){const n=_2(e);if(n.get(1)!==t.databaseId.projectId)throw new le(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new le(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new he(I2(n))}function E2(t,e){return Gw(t.databaseId,e)}function S2(t){const e=_2(t);return e.length===4?ot.emptyPath():I2(e)}function A0(t){return new ot(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function I2(t){return Ee(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function JS(t,e,n){return{name:Xm(t,e),fields:n.value.mapValue.fields}}function z8(t,e,n){const r=ia(t,e.name),s=Un(e.updateTime),i=e.createTime?Un(e.createTime):Ne.min(),o=new An({mapValue:{fields:e.fields}}),l=Vt.newFoundDocument(r,s,i,o);return n&&l.setHasCommittedMutations(),n?l.setHasCommittedMutations():l}function q8(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:we()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(Ee(h===void 0||typeof h=="string"),Gt.fromBase64String(h||"")):(Ee(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Gt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const h=u.code===void 0?H.UNKNOWN:v2(u.code);return new le(h,u.message||"")}(o);n=new w2(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ia(t,r.document.name),i=Un(r.document.updateTime),o=r.document.createTime?Un(r.document.createTime):Ne.min(),l=new An({mapValue:{fields:r.document.fields}}),c=Vt.newFoundDocument(s,i,o,l),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Yf(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ia(t,r.document),i=r.readTime?Un(r.readTime):Ne.min(),o=Vt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Yf([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ia(t,r.document),i=r.removedTargetIds||[];n=new Yf([],i,s,null)}else{if(!("filter"in e))return we();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new k8(s,i),l=r.targetId;n=new x2(l,o)}}return n}function Jm(t,e){let n;if(e instanceof Dc)n={update:JS(t,e.key,e.value)};else if(e instanceof lh)n={delete:Xm(t,e.key)};else if(e instanceof ci)n={update:JS(t,e.key,e.data),updateMask:Y8(e.fieldMask)};else{if(!(e instanceof y2))return we();n={verify:Xm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof hc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof fc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof mc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof kd)return{fieldPath:o.field.canonicalString(),increment:l.Ie};throw we()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:B8(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:we()}(t,e.precondition)),n}function P0(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?on.updateTime(Un(i.updateTime)):i.exists!==void 0?on.exists(i.exists):on.none()}(e.currentDocument):on.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,l){let c=null;if("setToServerValue"in l)Ee(l.setToServerValue==="REQUEST_TIME"),c=new hc;else if("appendMissingElements"in l){const h=l.appendMissingElements.values||[];c=new fc(h)}else if("removeAllFromArray"in l){const h=l.removeAllFromArray.values||[];c=new mc(h)}else"increment"in l?c=new kd(o,l.increment):we();const u=jt.fromServerFormat(l.fieldPath);return new m2(u,c)}(t,s)):[];if(e.update){e.update.name;const s=ia(t,e.update.name),i=new An({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(c){const u=c.fieldPaths||[];return new Xn(u.map(h=>jt.fromServerFormat(h)))}(e.updateMask);return new ci(s,i,o,n,r)}return new Dc(s,i,n,r)}if(e.delete){const s=ia(t,e.delete);return new lh(s,n)}if(e.verify){const s=ia(t,e.verify);return new y2(s,n)}return we()}function W8(t,e){return t&&t.length>0?(Ee(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Un(s.updateTime):Un(i);return o.isEqual(Ne.min())&&(o=Un(i)),new P8(o,s.transformResults||[])}(n,e))):[]}function T2(t,e){return{documents:[E2(t,e.path)]}}function N2(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=E2(t,s);const i=function(u){if(u.length!==0)return P2(ct.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:sl(m.field),direction:K8(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=N0(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ht:n,parent:s}}function C2(t){let e=S2(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ee(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const m=A2(f);return m instanceof ct&&Bw(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(v){return new jd(il(v.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,Xp(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){const m=!!f.before,g=f.values||[];return new uc(g,m)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const m=!f.before,g=f.values||[];return new uc(g,m)}(n.endAt)),y8(e,s,o,i,l,"F",c,u)}function H8(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function A2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=il(n.unaryFilter.field);return We.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=il(n.unaryFilter.field);return We.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=il(n.unaryFilter.field);return We.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=il(n.unaryFilter.field);return We.create(o,"!=",{nullValue:"NULL_VALUE"});default:return we()}}(t):t.fieldFilter!==void 0?function(n){return We.create(il(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return we()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ct.create(n.compositeFilter.filters.map(r=>A2(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return we()}}(n.compositeFilter.op))}(t):we()}function K8(t){return V8[t]}function G8(t){return F8[t]}function Q8(t){return $8[t]}function sl(t){return{fieldPath:t.canonicalString()}}function il(t){return jt.fromServerFormat(t.fieldPath)}function P2(t){return t instanceof We?function(n){if(n.op==="=="){if(OS(n.value))return{unaryFilter:{field:sl(n.field),op:"IS_NAN"}};if(MS(n.value))return{unaryFilter:{field:sl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(OS(n.value))return{unaryFilter:{field:sl(n.field),op:"IS_NOT_NAN"}};if(MS(n.value))return{unaryFilter:{field:sl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sl(n.field),op:G8(n.op),value:n.value}}}(t):t instanceof ct?function(n){const r=n.getFilters().map(s=>P2(s));return r.length===1?r[0]:{compositeFilter:{op:Q8(n.op),filters:r}}}(t):we()}function Y8(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function R2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,n,r,s,i=Ne.min(),o=Ne.min(),l=Gt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Ws(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e){this.Tt=e}}function X8(t,e){let n;if(e.document)n=z8(t.Tt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=he.fromSegments(e.noDocument.path),s=Sa(e.noDocument.readTime);n=Vt.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return we();{const r=he.fromSegments(e.unknownDocument.path),s=Sa(e.unknownDocument.version);n=Vt.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new $e(s[0],s[1]);return Ne.fromTimestamp(i)}(e.readTime)),n}function ZS(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Zm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:Xm(i,o.key),fields:o.data.value.mapValue.fields,updateTime:pc(i,o.version.toTimestamp()),createTime:pc(i,o.createTime.toTimestamp())}}(t.Tt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ea(e.version)};else{if(!e.isUnknownDocument())return we();r.unknownDocument={path:n.path.toArray(),version:Ea(e.version)}}return r}function Zm(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ea(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Sa(t){const e=new $e(t.seconds,t.nanoseconds);return Ne.fromTimestamp(e)}function zo(t,e){const n=(e.baseMutations||[]).map(i=>P0(t.Tt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const l=e.mutations[i+1];o.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>P0(t.Tt,i)),s=$e.fromMillis(e.localWriteTimeMs);return new qw(e.batchId,s,n,r)}function Nu(t){const e=Sa(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Sa(t.lastLimboFreeSnapshotVersion):Ne.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){return Ee(i.documents.length===1),Mr(oh(S2(i.documents[0])))}(t.query):function(i){return Mr(C2(i))}(t.query),new Ws(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Gt.fromBase64String(t.resumeToken))}function k2(t,e){const n=Ea(e.snapshotVersion),r=Ea(e.lastLimboFreeSnapshotVersion);let s;s=Gm(e.target)?T2(t.Tt,e.target):N2(t.Tt,e.target).ht;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:_a(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function D2(t){const e=C2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ym(e,e.limit,"L"):e}function ky(t,e){return new Hw(e.largestBatchId,P0(t.Tt,e.overlayMutation))}function eI(t,e){const n=e.path.lastSegment();return[t,Pn(e.path.popLast()),n]}function tI(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ea(r.readTime),documentKey:Pn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J8{getBundleMetadata(e,n){return nI(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:Sa(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return nI(e).put(function(s){return{bundleId:s.id,createTime:Ea(Un(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return rI(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:D2(i.bundledQuery),readTime:Sa(i.readTime)}}(r)})}saveNamedQuery(e,n){return rI(e).put(function(s){return{name:s.name,readTime:Ea(Un(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function nI(t){return tn(t,Jp)}function rI(t){return tn(t,Zp)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,n){this.serializer=e,this.userId=n}static It(e,n){const r=n.uid||"";return new ag(e,r)}getOverlay(e,n){return lu(e).get(eI(this.userId,n)).next(r=>r?ky(this.serializer,r):null)}getOverlays(e,n){const r=ys();return $.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const l=new Hw(n,o);s.push(this.Et(e,l))}),$.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(Pn(o.getCollectionPath())));const i=[];return s.forEach(o=>{const l=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(lu(e).J(x0,l))}),$.waitFor(i)}getOverlaysForCollection(e,n,r){const s=ys(),i=Pn(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return lu(e).G(x0,o).next(l=>{for(const c of l){const u=ky(this.serializer,c);s.set(u.getKey(),u)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=ys();let o;const l=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return lu(e).Z({index:OR,range:l},(c,u,h)=>{const f=ky(this.serializer,u);i.size()<s||f.largestBatchId===o?(i.set(f.getKey(),f),o=f.largestBatchId):h.done()}).next(()=>i)}Et(e,n){return lu(e).put(function(s,i,o){const[l,c,u]=eI(i,o.mutation.key);return{userId:i,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Jm(s.Tt,o.mutation)}}(this.serializer,this.userId,n))}}function lu(t){return tn(t,eg)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z8{dt(e){return tn(e,Lw)}getSessionToken(e){return this.dt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?Gt.fromUint8Array(r):Gt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.dt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(){}At(e,n){this.Rt(e,n),n.Vt()}Rt(e,n){if("nullValue"in e)this.ft(n,5);else if("booleanValue"in e)this.ft(n,10),n.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(n,15),n.gt(Nt(e.integerValue));else if("doubleValue"in e){const r=Nt(e.doubleValue);isNaN(r)?this.ft(n,13):(this.ft(n,15),Sd(r)?n.gt(0):n.gt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.ft(n,20),typeof r=="string"&&(r=ri(r)),n.yt(`${r.seconds||""}`),n.gt(r.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,n),this.bt(n);else if("bytesValue"in e)this.ft(n,30),n.St(si(e.bytesValue)),this.bt(n);else if("referenceValue"in e)this.Dt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.ft(n,45),n.gt(r.latitude||0),n.gt(r.longitude||0)}else"mapValue"in e?KR(e)?this.ft(n,Number.MAX_SAFE_INTEGER):ng(e)?this.vt(e.mapValue,n):(this.Ct(e.mapValue,n),this.bt(n)):"arrayValue"in e?(this.Ft(e.arrayValue,n),this.bt(n)):we()}wt(e,n){this.ft(n,25),this.Mt(e,n)}Mt(e,n){n.yt(e)}Ct(e,n){const r=e.fields||{};this.ft(n,55);for(const s of Object.keys(r))this.wt(s,n),this.Rt(r[s],n)}vt(e,n){var r,s;const i=e.fields||{};this.ft(n,53);const o=lc,l=((s=(r=i[o].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.ft(n,15),n.gt(Nt(l)),this.wt(o,n),this.Rt(i[o],n)}Ft(e,n){const r=e.values||[];this.ft(n,50);for(const s of r)this.Rt(s,n)}Dt(e,n){this.ft(n,37),he.fromName(e).path.forEach(r=>{this.ft(n,60),this.Mt(r,n)})}ft(e,n){e.gt(n)}bt(e){e.gt(2)}}qo.xt=new qo;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha=255;function eq(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function sI(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=eq(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class tq{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Nt(r.value),r=n.next();this.Bt()}Lt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.kt(r.value),r=n.next();this.qt()}Qt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Nt(r);else if(r<2048)this.Nt(960|r>>>6),this.Nt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Nt(480|r>>>12),this.Nt(128|63&r>>>6),this.Nt(128|63&r);else{const s=n.codePointAt(0);this.Nt(240|s>>>18),this.Nt(128|63&s>>>12),this.Nt(128|63&s>>>6),this.Nt(128|63&s)}}this.Bt()}$t(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.kt(r);else if(r<2048)this.kt(960|r>>>6),this.kt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.kt(480|r>>>12),this.kt(128|63&r>>>6),this.kt(128|63&r);else{const s=n.codePointAt(0);this.kt(240|s>>>18),this.kt(128|63&s>>>12),this.kt(128|63&s>>>6),this.kt(128|63&s)}}this.qt()}Kt(e){const n=this.Ut(e),r=sI(n);this.Wt(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}Gt(e){const n=this.Ut(e),r=sI(n);this.Wt(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}zt(){this.jt(Ha),this.jt(255)}Ht(){this.Jt(Ha),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Ut(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Nt(e){const n=255&e;n===0?(this.jt(0),this.jt(255)):n===Ha?(this.jt(Ha),this.jt(0)):this.jt(n)}kt(e){const n=255&e;n===0?(this.Jt(0),this.Jt(255)):n===Ha?(this.Jt(Ha),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class nq{constructor(e){this.Zt=e}St(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Kt(e)}Vt(){this.Zt.zt()}}class rq{constructor(e){this.Zt=e}St(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}}class cu{constructor(){this.Zt=new tq,this.Xt=new nq(this.Zt),this.en=new rq(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return e===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}nn(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Wo(this.indexId,this.documentKey,this.arrayValue,r)}}function bi(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=iI(t.arrayValue,e.arrayValue),n!==0?n:(n=iI(t.directionalValue,e.directionalValue),n!==0?n:he.comparator(t.documentKey,e.documentKey)))}function iI(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e){this.rn=new dt((n,r)=>jt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(const n of e.filters){const r=n;r.isInequality()?this.rn=this.rn.add(r):this._n.push(r)}}get an(){return this.rn.size>1}un(e){if(Ee(e.collectionGroup===this.collectionId),this.an)return!1;const n=g0(e);if(n!==void 0&&!this.cn(n))return!1;const r=Fo(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.cn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.rn.size>0){const l=this.rn.getIterator().getNext();if(!s.has(l.field.canonicalString())){const c=r[i];if(!this.ln(l,c)||!this.hn(this.sn[o++],c))return!1}++i}for(;i<r.length;++i){const l=r[i];if(o>=this.sn.length||!this.hn(this.sn[o++],l))return!1}return!0}Pn(){if(this.an)return null;let e=new dt(jt.comparator);const n=[];for(const r of this._n)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new zf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new zf(r.field,0))}for(const r of this.sn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new zf(r.field,r.dir==="asc"?0:1)));return new Um(Um.UNKNOWN_ID,this.collectionId,n,Ed.empty())}cn(e){for(const n of this._n)if(this.ln(n,e))return!0;return!1}ln(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}hn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(t){var e,n;if(Ee(t instanceof We||t instanceof ct),t instanceof We){if(t instanceof n2){const s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(i=>We.create(t.field,"==",i)))||[];return ct.create(s,"or")}return t}const r=t.filters.map(s=>M2(s));return ct.create(r,t.op)}function sq(t){if(t.getFilters().length===0)return[];const e=k0(M2(t));return Ee(O2(e)),R0(e)||j0(e)?[e]:e.getFilters()}function R0(t){return t instanceof We}function j0(t){return t instanceof ct&&Bw(t)}function O2(t){return R0(t)||j0(t)||function(n){if(n instanceof ct&&E0(n)){for(const r of n.getFilters())if(!R0(r)&&!j0(r))return!1;return!0}return!1}(t)}function k0(t){if(Ee(t instanceof We||t instanceof ct),t instanceof We)return t;if(t.filters.length===1)return k0(t.filters[0]);const e=t.filters.map(r=>k0(r));let n=ct.create(e,t.op);return n=ep(n),O2(n)?n:(Ee(n instanceof ct),Ee(dc(n)),Ee(n.filters.length>1),n.filters.reduce((r,s)=>Qw(r,s)))}function Qw(t,e){let n;return Ee(t instanceof We||t instanceof ct),Ee(e instanceof We||e instanceof ct),n=t instanceof We?e instanceof We?function(s,i){return ct.create([s,i],"and")}(t,e):aI(t,e):e instanceof We?aI(e,t):function(s,i){if(Ee(s.filters.length>0&&i.filters.length>0),dc(s)&&dc(i))return ZR(s,i.getFilters());const o=E0(s)?s:i,l=E0(s)?i:s,c=o.filters.map(u=>Qw(u,l));return ct.create(c,"or")}(t,e),ep(n)}function aI(t,e){if(dc(e))return ZR(e,t.getFilters());{const n=e.filters.map(r=>Qw(t,r));return ct.create(n,"or")}}function ep(t){if(Ee(t instanceof We||t instanceof ct),t instanceof We)return t;const e=t.getFilters();if(e.length===1)return ep(e[0]);if(XR(t))return t;const n=e.map(s=>ep(s)),r=[];return n.forEach(s=>{s instanceof We?r.push(s):s instanceof ct&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:ct.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iq{constructor(){this.Tn=new Yw}addToCollectionParentIndex(e,n){return this.Tn.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(wr.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(wr.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class Yw{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new dt(ot.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new dt(ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI="IndexedDbIndexManager",mf=new Uint8Array(0);class oq{constructor(e,n){this.databaseId=n,this.In=new Yw,this.En=new li(r=>_a(r),(r,s)=>ih(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.In.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.In.add(n)});const i={collectionId:r,parent:Pn(s)};return cI(e).put(i)}return $.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[TR(n),""],!1,!0);return cI(e).G(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(gs(o.parent))}return r})}addFieldIndex(e,n){const r=uu(e),s=function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=Ga(e);return i.next(l=>{o.put(tI(l,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=uu(e),s=Ga(e),i=Ka(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=uu(e),r=Ka(e),s=Ga(e);return n.J().next(()=>r.J()).next(()=>s.J())}createTargetIndexes(e,n){return $.forEach(this.dn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new oI(r).Pn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=Ka(e);let s=!0;const i=new Map;return $.forEach(this.dn(n),o=>this.An(e,o).next(l=>{s&&(s=!!l),i.set(o,l)})).next(()=>{if(s){let o=Ue();const l=[];return $.forEach(i,(c,u)=>{se(lI,`Using index ${function(S){return`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(N=>`${N.fieldPath}:${N.kind}`).join(",")}`}(c)} to execute ${_a(n)}`);const h=function(S,N){const j=g0(N);if(j===void 0)return null;for(const D of Qm(S,j.fieldPath))switch(D.op){case"array-contains-any":return D.value.arrayValue.values||[];case"array-contains":return[D.value]}return null}(u,c),f=function(S,N){const j=new Map;for(const D of Fo(N))for(const T of Qm(S,D.fieldPath))switch(T.op){case"==":case"in":j.set(D.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return j.set(D.fieldPath.canonicalString(),T.value),Array.from(j.values())}return null}(u,c),m=function(S,N){const j=[];let D=!0;for(const T of Fo(N)){const I=T.kind===0?US(S,T.fieldPath,S.startAt):BS(S,T.fieldPath,S.startAt);j.push(I.value),D&&(D=I.inclusive)}return new uc(j,D)}(u,c),g=function(S,N){const j=[];let D=!0;for(const T of Fo(N)){const I=T.kind===0?BS(S,T.fieldPath,S.endAt):US(S,T.fieldPath,S.endAt);j.push(I.value),D&&(D=I.inclusive)}return new uc(j,D)}(u,c),v=this.Rn(c,u,m),y=this.Rn(c,u,g),b=this.Vn(c,u,f),_=this.mn(c.indexId,h,v,m.inclusive,y,g.inclusive,b);return $.forEach(_,w=>r.H(w,n.limit).next(S=>{S.forEach(N=>{const j=he.fromSegments(N.documentKey);o.has(j)||(o=o.add(j),l.push(j))})}))}).next(()=>l)}return $.resolve(null)})}dn(e){let n=this.En.get(e);return n||(e.filters.length===0?n=[e]:n=sq(ct.create(e.filters,"and")).map(r=>I0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.En.set(e,n),n)}mn(e,n,r,s,i,o,l){const c=(n!=null?n.length:1)*Math.max(r.length,i.length),u=c/(n!=null?n.length:1),h=[];for(let f=0;f<c;++f){const m=n?this.fn(n[f/u]):mf,g=this.gn(e,m,r[f%u],s),v=this.pn(e,m,i[f%u],o),y=l.map(b=>this.gn(e,m,b,!0));h.push(...this.createRange(g,v,y))}return h}gn(e,n,r,s){const i=new Wo(e,he.empty(),n,r);return s?i:i.nn()}pn(e,n,r,s){const i=new Wo(e,he.empty(),n,r);return s?i.nn():i}An(e,n){const r=new oI(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const l of i)r.un(l)&&(!o||l.fields.length>o.fields.length)&&(o=l);return o})}getIndexType(e,n){let r=2;const s=this.dn(n);return $.forEach(s,i=>this.An(e,i).next(o=>{o?r!==0&&o.fields.length<function(c){let u=new dt(jt.comparator),h=!1;for(const f of c.filters)for(const m of f.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:u=u.add(m.field));for(const f of c.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(h?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}yn(e,n){const r=new cu;for(const s of Fo(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.tn(s.kind);qo.xt.At(i,o)}return r.Yt()}fn(e){const n=new cu;return qo.xt.At(e,n.tn(0)),n.Yt()}wn(e,n){const r=new cu;return qo.xt.At(Pd(this.databaseId,n),r.tn(function(i){const o=Fo(i);return o.length===0?0:o[o.length-1].kind}(e))),r.Yt()}Vn(e,n,r){if(r===null)return[];let s=[];s.push(new cu);let i=0;for(const o of Fo(e)){const l=r[i++];for(const c of s)if(this.bn(n,o.fieldPath)&&Rd(l))s=this.Sn(s,o,l);else{const u=c.tn(o.kind);qo.xt.At(l,u)}}return this.Dn(s)}Rn(e,n,r){return this.Vn(e,n,r.position)}Dn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Yt();return n}Sn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const l of s){const c=new cu;c.seed(l.Yt()),qo.xt.At(o,c.tn(n.kind)),i.push(c)}return i}bn(e,n){return!!e.filters.find(r=>r instanceof We&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=uu(e),s=Ga(e);return(n?r.G(v0,IDBKeyRange.bound(n,n)):r.G()).next(i=>{const o=[];return $.forEach(i,l=>s.get([l.indexId,this.uid]).next(c=>{o.push(function(h,f){const m=f?new Ed(f.sequenceNumber,new wr(Sa(f.readTime),new he(gs(f.documentKey)),f.largestBatchId)):Ed.empty(),g=h.fields.map(([v,y])=>new zf(jt.fromServerFormat(v),y));return new Um(h.indexId,h.collectionGroup,g,m)}(l,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:Le(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=uu(e),i=Ga(e);return this.vn(e).next(o=>s.G(v0,IDBKeyRange.bound(n,n)).next(l=>$.forEach(l,c=>i.put(tI(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return $.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?$.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(l=>(r.set(s.collectionGroup,l),$.forEach(l,c=>this.Cn(e,s,c).next(u=>{const h=this.Fn(i,c);return u.isEqual(h)?$.resolve():this.Mn(e,i,c,u,h)}))))})}xn(e,n,r,s){return Ka(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.wn(r,n.key),documentKey:n.key.path.toArray()})}On(e,n,r,s){return Ka(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.wn(r,n.key),n.key.path.toArray()])}Cn(e,n,r){const s=Ka(e);let i=new dt(bi);return s.Z({index:MR,range:IDBKeyRange.only([r.indexId,this.uid,this.wn(r,n)])},(o,l)=>{i=i.add(new Wo(r.indexId,n,l.arrayValue,l.directionalValue))}).next(()=>i)}Fn(e,n){let r=new dt(bi);const s=this.yn(n,e);if(s==null)return r;const i=g0(n);if(i!=null){const o=e.data.field(i.fieldPath);if(Rd(o))for(const l of o.arrayValue.values||[])r=r.add(new Wo(n.indexId,e.key,this.fn(l),s))}else r=r.add(new Wo(n.indexId,e.key,mf,s));return r}Mn(e,n,r,s,i){se(lI,"Updating index entries for document '%s'",n.key);const o=[];return function(c,u,h,f,m){const g=c.getIterator(),v=u.getIterator();let y=Wa(g),b=Wa(v);for(;y||b;){let _=!1,w=!1;if(y&&b){const S=h(y,b);S<0?w=!0:S>0&&(_=!0)}else y!=null?w=!0:_=!0;_?(f(b),b=Wa(v)):w?(m(y),y=Wa(g)):(y=Wa(g),b=Wa(v))}}(s,i,bi,l=>{o.push(this.xn(e,n,r,l))},l=>{o.push(this.On(e,n,r,l))}),$.waitFor(o)}vn(e){let n=1;return Ga(e).Z({index:DR,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,l)=>bi(o,l)).filter((o,l,c)=>!l||bi(o,c[l-1])!==0);const s=[];s.push(e);for(const o of r){const l=bi(o,e),c=bi(o,n);if(l===0)s[0]=e.nn();else if(l>0&&c<0)s.push(o),s.push(o.nn());else if(c>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Nn(s[o],s[o+1]))return[];const l=[s[o].indexId,this.uid,s[o].arrayValue,s[o].directionalValue,mf,[]],c=[s[o+1].indexId,this.uid,s[o+1].arrayValue,s[o+1].directionalValue,mf,[]];i.push(IDBKeyRange.bound(l,c))}return i}Nn(e,n){return bi(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(uI)}getMinOffset(e,n){return $.mapArray(this.dn(n),r=>this.An(e,r).next(s=>s||we())).next(uI)}}function cI(t){return tn(t,Nd)}function Ka(t){return tn(t,Hm)}function uu(t){return tn(t,Ow)}function Ga(t){return tn(t,Wm)}function uI(t){Ee(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;kw(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new wr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},L2=41943040;class Nn{static withCacheSize(e){return new Nn(e,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2(t,e,n){const r=t.store(Qr),s=t.store(sc),i=[],o=IDBKeyRange.only(n.batchId);let l=0;const c=r.Z({range:o},(h,f,m)=>(l++,m.delete()));i.push(c.next(()=>{Ee(l===1)}));const u=[];for(const h of n.mutations){const f=RR(e,h.key.path,n.batchId);i.push(s.delete(f)),u.push(h.key)}return $.waitFor(i).next(()=>u)}function tp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw we();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn.DEFAULT_COLLECTION_PERCENTILE=10,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nn.DEFAULT=new Nn(L2,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nn.DISABLED=new Nn(-1,0,0);class lg{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Bn={}}static It(e,n,r,s){Ee(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new lg(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _i(e).Z({index:Yo,range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=ol(e),o=_i(e);return o.add({}).next(l=>{Ee(typeof l=="number");const c=new qw(l,n,r,s),u=function(g,v,y){const b=y.baseMutations.map(w=>Jm(g.Tt,w)),_=y.mutations.map(w=>Jm(g.Tt,w));return{userId:v,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:b,mutations:_}}(this.serializer,this.userId,c),h=[];let f=new dt((m,g)=>Le(m.canonicalString(),g.canonicalString()));for(const m of s){const g=RR(this.userId,m.key.path,l);f=f.add(m.key.path.popLast()),h.push(o.put(u)),h.push(i.put(g,Mz))}return f.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Bn[l]=c.keys()}),$.waitFor(h).next(()=>c)})}lookupMutationBatch(e,n){return _i(e).get(n).next(r=>r?(Ee(r.userId===this.userId),zo(this.serializer,r)):null)}Ln(e,n){return this.Bn[n]?$.resolve(this.Bn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Bn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return _i(e).Z({index:Yo,range:s},(o,l,c)=>{l.userId===this.userId&&(Ee(l.batchId>=r),i=zo(this.serializer,l)),c.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ra;return _i(e).Z({index:Yo,range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,ra],[this.userId,Number.POSITIVE_INFINITY]);return _i(e).G(Yo,n).next(r=>r.map(s=>zo(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=qf(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return ol(e).Z({range:s},(o,l,c)=>{const[u,h,f]=o,m=gs(h);if(u===this.userId&&n.path.isEqual(m))return _i(e).get(f).next(g=>{if(!g)throw we();Ee(g.userId===this.userId),i.push(zo(this.serializer,g))});c.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new dt(Le);const s=[];return n.forEach(i=>{const o=qf(this.userId,i.path),l=IDBKeyRange.lowerBound(o),c=ol(e).Z({range:l},(u,h,f)=>{const[m,g,v]=u,y=gs(g);m===this.userId&&i.path.isEqual(y)?r=r.add(v):f.done()});s.push(c)}),$.waitFor(s).next(()=>this.kn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=qf(this.userId,r),o=IDBKeyRange.lowerBound(i);let l=new dt(Le);return ol(e).Z({range:o},(c,u,h)=>{const[f,m,g]=c,v=gs(m);f===this.userId&&r.isPrefixOf(v)?v.length===s&&(l=l.add(g)):h.done()}).next(()=>this.kn(e,l))}kn(e,n){const r=[],s=[];return n.forEach(i=>{s.push(_i(e).get(i).next(o=>{if(o===null)throw we();Ee(o.userId===this.userId),r.push(zo(this.serializer,o))}))}),$.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return V2(e.ue,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.qn(n.batchId)}),$.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return $.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return ol(e).Z({range:r},(i,o,l)=>{if(i[0]===this.userId){const c=gs(i[1]);s.push(c)}else l.done()}).next(()=>{Ee(s.length===0)})})}containsKey(e,n){return F2(e,this.userId,n)}Qn(e){return $2(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:ra,lastStreamToken:""})}}function F2(t,e,n){const r=qf(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return ol(t).Z({range:i,Y:!0},(l,c,u)=>{const[h,f,m]=l;h===e&&f===s&&(o=!0),u.done()}).next(()=>o)}function _i(t){return tn(t,Qr)}function ol(t){return tn(t,sc)}function $2(t){return tn(t,Id)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new Ia(0)}static Un(){return new Ia(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aq{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Wn(e).next(n=>{const r=new Ia(n.highestTargetId);return n.highestTargetId=r.next(),this.Gn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Wn(e).next(n=>Ne.fromTimestamp(new $e(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Wn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Wn(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.Gn(e,s)))}addTargetData(e,n){return this.zn(e,n).next(()=>this.Wn(e).next(r=>(r.targetCount+=1,this.jn(n,r),this.Gn(e,r))))}updateTargetData(e,n){return this.zn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Qa(e).delete(n.targetId)).next(()=>this.Wn(e)).next(r=>(Ee(r.targetCount>0),r.targetCount-=1,this.Gn(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return Qa(e).Z((o,l)=>{const c=Nu(l);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(s++,i.push(this.removeTargetData(e,c)))}).next(()=>$.waitFor(i)).next(()=>s)}forEachTarget(e,n){return Qa(e).Z((r,s)=>{const i=Nu(s);n(i)})}Wn(e){return hI(e).get(qm).next(n=>(Ee(n!==null),n))}Gn(e,n){return hI(e).put(qm,n)}zn(e,n){return Qa(e).put(k2(this.serializer,n))}jn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Wn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=_a(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return Qa(e).Z({range:s,index:kR},(o,l,c)=>{const u=Nu(l);ih(n,u.target)&&(i=u,c.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=ki(e);return n.forEach(o=>{const l=Pn(o.path);s.push(i.put({targetId:r,path:l})),s.push(this.referenceDelegate.addReference(e,r,o))}),$.waitFor(s)}removeMatchingKeys(e,n,r){const s=ki(e);return $.forEach(n,i=>{const o=Pn(i.path);return $.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=ki(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=ki(e);let i=Ue();return s.Z({range:r,Y:!0},(o,l,c)=>{const u=gs(o[1]),h=new he(u);i=i.add(h)}).next(()=>i)}containsKey(e,n){const r=Pn(n.path),s=IDBKeyRange.bound([r],[TR(r)],!1,!0);let i=0;return ki(e).Z({index:Mw,Y:!0,range:s},([o,l],c,u)=>{o!==0&&(i++,u.done())}).next(()=>i>0)}lt(e,n){return Qa(e).get(n).next(r=>r?Nu(r):null)}}function Qa(t){return tn(t,ic)}function hI(t){return tn(t,sa)}function ki(t){return tn(t,oc)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI="LruGarbageCollector",lq=1048576;function mI([t,e],[n,r]){const s=Le(t,n);return s===0?Le(e,r):s}class cq{constructor(e){this.Hn=e,this.buffer=new dt(mI),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();mI(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class U2{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){se(fI,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){To(n)?se(fI,"Ignoring IndexedDB error during garbage collection: ",n):await Da(n)}await this.er(3e5)})}}class uq{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return $.resolve(jr.ae);const r=new cq(n);return this.tr.forEachTarget(e,s=>r.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>r.Zn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.tr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(dI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dI):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let r,s,i,o,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),nl()<=qe.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function B2(t,e){return new uq(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dq{constructor(e,n){this.db=e,this.garbageCollector=B2(this,n)}nr(e){const n=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}sr(e){let n=0;return this.rr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}rr(e,n){return this._r(e,(r,s)=>n(s))}addReference(e,n,r){return pf(e,r)}removeReference(e,n,r){return pf(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return pf(e,n)}ar(e,n){return function(s,i){let o=!1;return $2(s).X(l=>F2(s,l,i).next(c=>(c&&(o=!0),$.resolve(!c)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this._r(e,(o,l)=>{if(l<=n){const c=this.ar(e,o).next(u=>{if(!u)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Ne.min()),ki(e).delete(function(f){return[0,Pn(f.path)]}(o))))});s.push(c)}}).next(()=>$.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return pf(e,n)}_r(e,n){const r=ki(e);let s,i=jr.ae;return r.Z({index:Mw},([o,l],{path:c,sequenceNumber:u})=>{o===0?(i!==jr.ae&&n(new he(gs(s)),i),i=u,s=c):i=jr.ae}).next(()=>{i!==jr.ae&&n(new he(gs(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function pf(t,e){return ki(t).put(function(r,s){return{targetId:0,path:Pn(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(){this.changes=new li(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Vt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hq{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Mo(e).put(r)}removeEntry(e,n,r){return Mo(e).delete(function(i,o){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Zm(o),l[l.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.ur(e,r)))}getEntry(e,n){let r=Vt.newInvalidDocument(n);return Mo(e).Z({index:Wf,range:IDBKeyRange.only(du(n))},(s,i)=>{r=this.cr(n,i)}).next(()=>r)}lr(e,n){let r={size:0,document:Vt.newInvalidDocument(n)};return Mo(e).Z({index:Wf,range:IDBKeyRange.only(du(n))},(s,i)=>{r={document:this.cr(n,i),size:tp(i)}}).next(()=>r)}getEntries(e,n){let r=mr();return this.hr(e,n,(s,i)=>{const o=this.cr(s,i);r=r.insert(s,o)}).next(()=>r)}Pr(e,n){let r=mr(),s=new Pt(he.comparator);return this.hr(e,n,(i,o)=>{const l=this.cr(i,o);r=r.insert(i,l),s=s.insert(i,tp(o))}).next(()=>({documents:r,Tr:s}))}hr(e,n,r){if(n.isEmpty())return $.resolve();let s=new dt(yI);n.forEach(c=>s=s.add(c));const i=IDBKeyRange.bound(du(s.first()),du(s.last())),o=s.getIterator();let l=o.getNext();return Mo(e).Z({index:Wf,range:i},(c,u,h)=>{const f=he.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;l&&yI(l,f)<0;)r(l,null),l=o.getNext();l&&l.isEqual(f)&&(r(l,u),l=o.hasNext()?o.getNext():null),l?h.W(du(l)):h.done()}).next(()=>{for(;l;)r(l,null),l=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,l=[o.popLast().toArray(),o.lastSegment(),Zm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Mo(e).G(IDBKeyRange.bound(l,c,!0)).next(u=>{i==null||i.incrementDocumentReadCount(u.length);let h=mr();for(const f of u){const m=this.cr(he.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);m.isFoundDocument()&&(ah(n,m)||s.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,n,r,s){let i=mr();const o=gI(n,r),l=gI(n,wr.max());return Mo(e).Z({index:jR,range:IDBKeyRange.bound(o,l,!0)},(c,u,h)=>{const f=this.cr(he.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);i=i.insert(f.key,f),i.size===s&&h.done()}).next(()=>i)}newChangeBuffer(e){return new fq(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return pI(e).get(y0).next(n=>(Ee(!!n),n))}ur(e,n){return pI(e).put(y0,n)}cr(e,n){if(n){const r=X8(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Ne.min())))return r}return Vt.newInvalidDocument(e)}}function q2(t){return new hq(t)}class fq extends z2{constructor(e,n){super(),this.Ir=e,this.trackRemovals=n,this.Er=new li(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new dt((i,o)=>Le(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const l=this.Er.get(i);if(n.push(this.Ir.removeEntry(e,i,l.readTime)),o.isValidDocument()){const c=ZS(this.Ir.serializer,o);s=s.add(i.path.popLast());const u=tp(c);r+=u-l.size,n.push(this.Ir.addEntry(e,i,c))}else if(r-=l.size,this.trackRemovals){const c=ZS(this.Ir.serializer,o.convertToNoDocument(Ne.min()));n.push(this.Ir.addEntry(e,i,c))}}),s.forEach(i=>{n.push(this.Ir.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Ir.updateMetadata(e,r)),$.waitFor(n)}getFromCache(e,n){return this.Ir.lr(e,n).next(r=>(this.Er.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Ir.Pr(e,n).next(({documents:r,Tr:s})=>(s.forEach((i,o)=>{this.Er.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function pI(t){return tn(t,Td)}function Mo(t){return tn(t,zm)}function du(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function gI(t,e){const n=e.documentKey.path.toArray();return[t,Zm(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function yI(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=Le(n[i],r[i]),s)return s;return s=Le(n.length,r.length),s||(s=Le(n[n.length-2],r[r.length-2]),s||Le(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mq{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Gu(r.mutation,s,Xn.empty(),$e.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ue()){const s=ys();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Iu();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ys();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ue()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=mr();const o=Ku(),l=function(){return Ku()}();return n.forEach((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof ci)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Gu(h.mutation,u,h.mutation.getFieldMask(),$e.now())):o.set(u.key,Xn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var f;return l.set(u,new mq(h,(f=o.get(u))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Ku();let s=new Pt((o,l)=>o-l),i=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||Xn.empty();h=l.applyToLocalView(u,h),r.set(c,h);const f=(s.get(l.batchId)||Ue()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,f=l2();h.forEach(m=>{if(!i.has(m)){const g=p2(n.get(m),r.get(m));g!==null&&f.set(m,g),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return $.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return he.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):r2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):$.resolve(ys());let l=_d,c=i;return o.next(u=>$.forEach(u,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?$.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,Ue())).next(h=>({batchId:l,changes:a2(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new he(n)).next(r=>{let s=Iu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Iu();return this.indexManager.getCollectionParents(e,i).next(l=>$.forEach(l,c=>{const u=function(f,m){return new kc(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Vt.newInvalidDocument(h)))});let l=Iu();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&Gu(h.mutation,u,Xn.empty(),$e.now()),ah(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pq{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return $.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Un(s.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(s){return{name:s.name,query:D2(s.bundledQuery),readTime:Un(s.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gq{constructor(){this.overlays=new Pt(he.comparator),this.Rr=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ys();return $.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.Et(e,n,i)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Rr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Rr.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const s=ys(),i=n.length+1,o=new he(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return $.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Pt((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=ys(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=ys(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=s)););return $.resolve(l)}Et(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Rr.get(s.largestBatchId).delete(r.key);this.Rr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Hw(n,r));let i=this.Rr.get(n);i===void 0&&(i=Ue(),this.Rr.set(n,i)),this.Rr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yq{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(){this.Vr=new dt(nn.mr),this.gr=new dt(nn.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const r=new nn(e,n);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.wr(new nn(e,n))}br(e,n){e.forEach(r=>this.removeReference(r,n))}Sr(e){const n=new he(new ot([])),r=new nn(n,e),s=new nn(n,e+1),i=[];return this.gr.forEachInRange([r,s],o=>{this.wr(o),i.push(o.key)}),i}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new he(new ot([])),r=new nn(n,e),s=new nn(n,e+1);let i=Ue();return this.gr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new nn(e,0),r=this.Vr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class nn{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return he.comparator(e.key,n.key)||Le(e.Cr,n.Cr)}static pr(e,n){return Le(e.Cr,n.Cr)||he.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vq{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new dt(nn.mr)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new qw(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Mr=this.Mr.add(new nn(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,n){return $.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Nr(r),i=s<0?0:s;return $.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?ra:this.Fr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new nn(n,0),s=new nn(n,Number.POSITIVE_INFINITY),i=[];return this.Mr.forEachInRange([r,s],o=>{const l=this.Or(o.Cr);i.push(l)}),$.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new dt(Le);return n.forEach(s=>{const i=new nn(s,0),o=new nn(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([i,o],l=>{r=r.add(l.Cr)})}),$.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;he.isDocumentKey(i)||(i=i.child(""));const o=new nn(new he(i),0);let l=new dt(Le);return this.Mr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Cr)),!0)},o),$.resolve(this.Br(l))}Br(e){const n=[];return e.forEach(r=>{const s=this.Or(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ee(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return $.forEach(n.mutations,s=>{const i=new nn(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,n){const r=new nn(n,0),s=this.Mr.firstAfterOrEqual(r);return $.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xq{constructor(e){this.kr=e,this.docs=function(){return new Pt(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.kr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():Vt.newInvalidDocument(n))}getEntries(e,n){let r=mr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Vt.newInvalidDocument(s))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=mr();const o=n.path,l=new he(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||kw(NR(h),r)<=0||(s.has(h.key)||ah(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return $.resolve(i)}getAllFromCollectionGroup(e,n,r,s){we()}qr(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new wq(this)}getSize(e){return $.resolve(this.size)}}class wq extends z2{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bq{constructor(e){this.persistence=e,this.Qr=new li(n=>_a(n),ih),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Xw,this.targetCount=0,this.Ur=Ia.Kn()}forEachTarget(e,n){return this.Qr.forEach((r,s)=>n(s)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.$r&&(this.$r=n),$.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ur=new Ia(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.zn(n),$.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Kr.Sr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Qr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Qr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),$.waitFor(i).next(()=>s)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.Qr.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this.Kr.yr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this.Kr.br(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),$.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Kr.Sr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Kr.vr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this.Kr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new jr(0),this.zr=!1,this.zr=!0,this.jr=new yq,this.referenceDelegate=e(this),this.Hr=new bq(this),this.indexManager=new iq,this.remoteDocumentCache=function(s){return new xq(s)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new j2(n),this.Yr=new pq(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gq,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Wr[e.toKey()];return r||(r=new vq(n,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,r){se("MemoryPersistence","Starting transaction:",e);const s=new _q(this.Gr.next());return this.referenceDelegate.Zr(),r(s).next(i=>this.referenceDelegate.Xr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}ei(e,n){return $.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,n)))}}class _q extends AR{constructor(e){super(),this.currentSequenceNumber=e}}class cg{constructor(e){this.persistence=e,this.ti=new Xw,this.ni=null}static ri(e){return new cg(e)}get ii(){if(this.ni)return this.ni;throw we()}addReference(e,n,r){return this.ti.addReference(r,n),this.ii.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.ti.removeReference(r,n),this.ii.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),$.resolve()}removeTarget(e,n){this.ti.Sr(n.targetId).forEach(s=>this.ii.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.ii.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.ii,r=>{const s=he.fromPath(r);return this.si(e,s).next(i=>{i||n.removeEntry(s,Ne.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(r=>{r?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return $.or([()=>$.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class np{constructor(e,n){this.persistence=e,this.oi=new li(r=>Pn(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=B2(this,n)}static ri(e,n){return new np(e,n)}Zr(){}Xr(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}sr(e){let n=0;return this.rr(e,r=>{n++}).next(()=>n)}rr(e,n){return $.forEach(this.oi,(r,s)=>this.ar(e,r,s).next(i=>i?$.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.qr(e,o=>this.ar(e,o,n).next(l=>{l||(r++,i.removeEntry(o,Ne.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),$.resolve()}removeReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),$.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Kf(e.data.value)),n}ar(e,n,r){return $.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.oi.get(n);return $.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eq{constructor(e){this.serializer=e}B(e,n,r,s){const i=new Yp("createOrUpgrade",n);r<1&&s>=1&&(function(c){c.createObjectStore(sh)}(e),function(c){c.createObjectStore(Id,{keyPath:Dz}),c.createObjectStore(Qr,{keyPath:AS,autoIncrement:!0}).createIndex(Yo,PS,{unique:!0}),c.createObjectStore(sc)}(e),vI(e),function(c){c.createObjectStore($o)}(e));let o=$.resolve();return r<3&&s>=3&&(r!==0&&(function(c){c.deleteObjectStore(oc),c.deleteObjectStore(ic),c.deleteObjectStore(sa)}(e),vI(e)),o=o.next(()=>function(c){const u=c.store(sa),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ne.min().toTimestamp(),targetCount:0};return u.put(qm,h)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(c,u){return u.store(Qr).G().next(f=>{c.deleteObjectStore(Qr),c.createObjectStore(Qr,{keyPath:AS,autoIncrement:!0}).createIndex(Yo,PS,{unique:!0});const m=u.store(Qr),g=f.map(v=>m.put(v));return $.waitFor(g)})}(e,i))),o=o.next(()=>{(function(c){c.createObjectStore(ac,{keyPath:zz})})(e)})),r<5&&s>=5&&(o=o.next(()=>this._i(i))),r<6&&s>=6&&(o=o.next(()=>(function(c){c.createObjectStore(Td)}(e),this.ai(i)))),r<7&&s>=7&&(o=o.next(()=>this.ui(i))),r<8&&s>=8&&(o=o.next(()=>this.ci(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.li(i))),r<11&&s>=11&&(o=o.next(()=>{(function(c){c.createObjectStore(Jp,{keyPath:qz})})(e),function(c){c.createObjectStore(Zp,{keyPath:Wz})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(c){const u=c.createObjectStore(eg,{keyPath:Jz});u.createIndex(x0,Zz,{unique:!1}),u.createIndex(OR,e8,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(c){const u=c.createObjectStore(zm,{keyPath:Oz});u.createIndex(Wf,Lz),u.createIndex(jR,Vz)}(e)).next(()=>this.hi(e,i)).next(()=>e.deleteObjectStore($o))),r<14&&s>=14&&(o=o.next(()=>this.Pi(e,i))),r<15&&s>=15&&(o=o.next(()=>function(c){c.createObjectStore(Ow,{keyPath:Hz,autoIncrement:!0}).createIndex(v0,Kz,{unique:!1}),c.createObjectStore(Wm,{keyPath:Gz}).createIndex(DR,Qz,{unique:!1}),c.createObjectStore(Hm,{keyPath:Yz}).createIndex(MR,Xz,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore(Wm).clear()}).next(()=>{n.objectStore(Hm).clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(c){c.createObjectStore(Lw,{keyPath:t8})})(e)})),o}ai(e){let n=0;return e.store($o).Z((r,s)=>{n+=tp(s)}).next(()=>{const r={byteSize:n};return e.store(Td).put(y0,r)})}_i(e){const n=e.store(Id),r=e.store(Qr);return n.G().next(s=>$.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,ra],[i.userId,i.lastAcknowledgedBatchId]);return r.G(Yo,o).next(l=>$.forEach(l,c=>{Ee(c.userId===i.userId);const u=zo(this.serializer,c);return V2(e,i.userId,u).next(()=>{})}))}))}ui(e){const n=e.store(oc),r=e.store($o);return e.store(sa).get(qm).next(s=>{const i=[];return r.Z((o,l)=>{const c=new ot(o),u=function(f){return[0,Pn(f)]}(c);i.push(n.get(u).next(h=>h?$.resolve():(f=>n.put({targetId:0,path:Pn(f),sequenceNumber:s.highestListenSequenceNumber}))(c)))}).next(()=>$.waitFor(i))})}ci(e,n){e.createObjectStore(Nd,{keyPath:Bz});const r=n.store(Nd),s=new Yw,i=o=>{if(s.add(o)){const l=o.lastSegment(),c=o.popLast();return r.put({collectionId:l,parent:Pn(c)})}};return n.store($o).Z({Y:!0},(o,l)=>{const c=new ot(o);return i(c.popLast())}).next(()=>n.store(sc).Z({Y:!0},([o,l,c],u)=>{const h=gs(l);return i(h.popLast())}))}li(e){const n=e.store(ic);return n.Z((r,s)=>{const i=Nu(s),o=k2(this.serializer,i);return n.put(o)})}hi(e,n){const r=n.store($o),s=[];return r.Z((i,o)=>{const l=n.store(zm),c=function(f){return f.document?new he(ot.fromString(f.document.name).popFirst(5)):f.noDocument?he.fromSegments(f.noDocument.path):f.unknownDocument?he.fromSegments(f.unknownDocument.path):we()}(o).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(l.put(u))}).next(()=>$.waitFor(s))}Pi(e,n){const r=n.store(Qr),s=q2(this.serializer),i=new Jw(cg.ri,this.serializer.Tt);return r.G().next(o=>{const l=new Map;return o.forEach(c=>{var u;let h=(u=l.get(c.userId))!==null&&u!==void 0?u:Ue();zo(this.serializer,c).keys().forEach(f=>h=h.add(f)),l.set(c.userId,h)}),$.forEach(l,(c,u)=>{const h=new un(u),f=ag.It(this.serializer,h),m=i.getIndexManager(h),g=lg.It(h,this.serializer,m,i.referenceDelegate);return new W2(s,g,f,m).recalculateAndSaveOverlaysForDocumentKeys(new w0(n,jr.ae),c).next()})})}}function vI(t){t.createObjectStore(oc,{keyPath:$z}).createIndex(Mw,Uz,{unique:!0}),t.createObjectStore(ic,{keyPath:"targetId"}).createIndex(kR,Fz,{unique:!0}),t.createObjectStore(sa)}const Ei="IndexedDbPersistence",Dy=18e5,My=5e3,Oy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Sq="main";class Zw{constructor(e,n,r,s,i,o,l,c,u,h,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Ti=i,this.window=o,this.document=l,this.Ii=u,this.Ei=h,this.di=f,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=m=>Promise.resolve(),!Zw.D())throw new le(H.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new dq(this,s),this.gi=n+Sq,this.serializer=new j2(c),this.pi=new ro(this.gi,this.di,new Eq(this.serializer)),this.jr=new Z8,this.Hr=new aq(this.referenceDelegate,this.serializer),this.remoteDocumentCache=q2(this.serializer),this.Yr=new J8,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,h===!1&&Fn(Ei,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new le(H.FAILED_PRECONDITION,Oy);return this.bi(),this.Si(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Hr.getHighestSequenceNumber(e))}).then(e=>{this.Gr=new jr(e,this.Ii)}).then(()=>{this.zr=!0}).catch(e=>(this.pi&&this.pi.close(),Promise.reject(e)))}Ci(e){return this.fi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget(async()=>{this.started&&await this.wi()}))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(e).next(n=>{n||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(e)).next(n=>this.isPrimary&&!n?this.xi(e).next(()=>!1):!!n&&this.Oi(e).next(()=>!0))).catch(e=>{if(To(e))return se(Ei,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return se(Ei,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Fi(e){return hu(e).get(qa).next(n=>$.resolve(this.Ni(n)))}Bi(e){return gf(e).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,Dy)){this.mi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=tn(n,ac);return r.G().next(s=>{const i=this.qi(s,Dy),o=s.filter(l=>i.indexOf(l)===-1);return $.forEach(o,l=>r.delete(l.clientId)).next(()=>o)})}).catch(()=>[]);if(this.yi)for(const n of e)this.yi.removeItem(this.Qi(n.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?$.resolve(!0):hu(e).get(qa).next(n=>{if(n!==null&&this.ki(n.leaseTimestampMs,My)&&!this.$i(n.ownerId)){if(this.Ni(n)&&this.networkEnabled)return!0;if(!this.Ni(n)){if(!n.allowTabSynchronization)throw new le(H.FAILED_PRECONDITION,Oy);return!1}}return!(!this.networkEnabled||!this.inForeground)||gf(e).G().next(r=>this.qi(r,My).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,l=this.networkEnabled===s.networkEnabled;if(i||o&&l)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&se(Ei,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.zr=!1,this.Ki(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ui(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[sh,ac],e=>{const n=new w0(e,jr.ae);return this.xi(n).next(()=>this.Bi(n))}),this.pi.close(),this.Gi()}qi(e,n){return e.filter(r=>this.ki(r.updateTimeMs,n)&&!this.$i(r.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",e=>gf(e).G().next(n=>this.qi(n,Dy).map(r=>r.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,n){return lg.It(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new oq(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return ag.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,n,r){se(Ei,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(c){return c===17?s8:c===16?r8:c===15?Vw:c===14?FR:c===13?VR:c===12?n8:c===11?LR:void we()}(this.di);let o;return this.pi.runTransaction(e,s,i,l=>(o=new w0(l,this.Gr?this.Gr.next():jr.ae),n==="readwrite-primary"?this.Fi(o).next(c=>!!c||this.Mi(o)).next(c=>{if(!c)throw Fn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new le(H.FAILED_PRECONDITION,CR);return r(o)}).next(c=>this.Oi(o).next(()=>c)):this.ji(o).next(()=>r(o)))).then(l=>(o.raiseOnCommittedEvent(),l))}ji(e){return hu(e).get(qa).next(n=>{if(n!==null&&this.ki(n.leaseTimestampMs,My)&&!this.$i(n.ownerId)&&!this.Ni(n)&&!(this.Ei||this.allowTabSynchronization&&n.allowTabSynchronization))throw new le(H.FAILED_PRECONDITION,Oy)})}Oi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return hu(e).put(qa,n)}static D(){return ro.D()}xi(e){const n=hu(e);return n.get(qa).next(r=>this.Ni(r)?(se(Ei,"Releasing primary lease."),n.delete(qa)):$.resolve())}ki(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Fn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}bi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ui(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}Si(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ai=()=>{this.Ki();const n=/(?:Version|Mobile)\/1[456]/;AP()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var n;try{const r=((n=this.yi)===null||n===void 0?void 0:n.getItem(this.Qi(e)))!==null;return se(Ei,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Fn(Ei,"Failed to get zombied client id.",r),!1}}Ki(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(e){Fn("Failed to set zombie client id.",e)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function hu(t){return tn(t,sh)}function gf(t){return tn(t,ac)}function Iq(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Hi=r,this.Ji=s}static Yi(e,n){let r=Ue(),s=Ue();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new eb(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tq{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return AP()?8:PR(en())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.rs(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ss(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Tq;return this._s(e,n,o).next(l=>{if(i.result=l,this.Xi)return this.us(e,n,o,l.size)})}).next(()=>i.result)}us(e,n,r,s){return r.documentReadCount<this.es?(nl()<=qe.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",rl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),$.resolve()):(nl()<=qe.DEBUG&&se("QueryEngine","Query:",rl(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ts*s?(nl()<=qe.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",rl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mr(n))):$.resolve())}rs(e,n){if(zS(n))return $.resolve(null);let r=Mr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ym(n,null,"F"),r=Mr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ue(...i);return this.ns.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.cs(n,l);return this.ls(n,u,o,c.readTime)?this.rs(e,Ym(n,null,"F")):this.hs(e,u,n,c)}))})))}ss(e,n,r,s){return zS(n)||s.isEqual(Ne.min())?$.resolve(null):this.ns.getDocuments(e,r).next(i=>{const o=this.cs(n,i);return this.ls(n,o,r,s)?$.resolve(null):(nl()<=qe.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),rl(n)),this.hs(e,o,n,Nz(s,_d)).next(l=>l))})}cs(e,n){let r=new dt(i2(e));return n.forEach((s,i)=>{ah(e,i)&&(r=r.add(i))}),r}ls(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}_s(e,n,r){return nl()<=qe.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",rl(n)),this.ns.getDocumentsMatchingQuery(e,n,wr.min(),r)}hs(e,n,r,s){return this.ns.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb="LocalStore",Nq=3e8;class Cq{constructor(e,n,r,s){this.persistence=e,this.Ps=n,this.serializer=s,this.Ts=new Pt(Le),this.Is=new li(i=>_a(i),ih),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new W2(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function K2(t,e,n,r){return new Cq(t,e,n,r)}async function G2(t,e){const n=Me(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.As(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=Ue();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Rs:u,removedBatchIds:o,addedBatchIds:l}))})})}function Aq(t,e){const n=Me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.ds.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const f=u.batch,m=f.keys();let g=$.resolve();return m.forEach(v=>{g=g.next(()=>h.getEntry(c,v)).next(y=>{const b=u.docVersions.get(v);Ee(b!==null),y.version.compareTo(b)<0&&(f.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),h.addEntry(y)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Ue();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Q2(t){const e=Me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function Pq(t,e){const n=Me(t),r=e.snapshotVersion;let s=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.ds.newChangeBuffer({trackRemovals:!0});s=n.Ts;const l=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;l.push(n.Hr.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Hr.addMatchingKeys(i,h.addedDocuments,f)));let g=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(Gt.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(f,g),function(y,b,_){return y.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=Nq?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(m,g,h)&&l.push(n.Hr.updateTargetData(i,g))});let c=mr(),u=Ue();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(Rq(i,o,e.documentUpdates).next(h=>{c=h.Vs,u=h.fs})),!r.isEqual(Ne.min())){const h=n.Hr.getLastRemoteSnapshotVersion(i).next(f=>n.Hr.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return $.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Ts=s,i))}function Rq(t,e,n){let r=Ue(),s=Ue();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=mr();return n.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(Ne.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):se(tb,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Vs:o,fs:s}})}function jq(t,e){const n=Me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ra),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function kq(t,e){const n=Me(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Hr.getTargetData(r,e).next(i=>i?(s=i,$.resolve(s)):n.Hr.allocateTargetId(r).next(o=>(s=new Ws(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Hr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(r.targetId,r),n.Is.set(e,r.targetId)),r})}async function D0(t,e,n){const r=Me(t),s=r.Ts.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!To(o))throw o;se(tb,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ts=r.Ts.remove(e),r.Is.delete(s.target)}function xI(t,e,n){const r=Me(t);let s=Ne.min(),i=Ue();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const f=Me(c),m=f.Is.get(h);return m!==void 0?$.resolve(f.Ts.get(m)):f.Hr.getTargetData(u,h)}(r,o,Mr(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.Ps.getDocumentsMatchingQuery(o,e,n?s:Ne.min(),n?i:Ue())).next(l=>(Dq(r,x8(e),l),{documents:l,gs:i})))}function Dq(t,e,n){let r=t.Es.get(e)||Ne.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Es.set(e,r)}class wI{constructor(){this.activeTargetIds=I8()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Y2{constructor(){this.ho=new wI,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,r){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new wI,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mq{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI="ConnectivityMonitor";class _I{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){se(bI,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){se(bI,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yf=null;function M0(){return yf===null?yf=function(){return 268435456+Math.round(2147483648*Math.random())}():yf++,"0x"+yf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly="RestConnection",Oq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Lq{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${r}/databases/${s}`,this.wo=this.databaseId.database===Km?`project_id=${r}`:`project_id=${r}&database_id=${s}`}bo(e,n,r,s,i){const o=M0(),l=this.So(e,n.toUriEncodedString());se(Ly,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(c,s,i),this.vo(e,l,c,r).then(u=>(se(Ly,`Received RPC '${e}' ${o}: `,u),u),u=>{throw wa(Ly,`RPC '${e}' ${o} failed with error: `,u,"url: ",l,"request:",r),u})}Co(e,n,r,s,i,o){return this.bo(e,n,r,s,i)}Do(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+jc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}So(e,n){const r=Oq[e];return`${this.po}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vq{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In="WebChannelConnection";class Fq extends Lq{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,r,s){const i=M0();return new Promise((o,l)=>{const c=new xR;c.setWithCredentials(!0),c.listenOnce(wR.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Bf.NO_ERROR:const h=c.getResponseJson();se(In,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case Bf.TIMEOUT:se(In,`RPC '${e}' ${i} timed out`),l(new le(H.DEADLINE_EXCEEDED,"Request time out"));break;case Bf.HTTP_ERROR:const f=c.getStatus();if(se(In,`RPC '${e}' ${i} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const v=function(b){const _=b.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(_)>=0?_:H.UNKNOWN}(g.status);l(new le(v,g.message))}else l(new le(H.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new le(H.UNAVAILABLE,"Connection failed."));break;default:we()}}finally{se(In,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(s);se(In,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",u,r,15)})}Wo(e,n,r){const s=M0(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ER(),l=_R(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");se(In,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);let m=!1,g=!1;const v=new Vq({Fo:b=>{g?se(In,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(m||(se(In,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),se(In,`RPC '${e}' stream ${s} sending:`,b),f.send(b))},Mo:()=>f.close()}),y=(b,_,w)=>{b.listen(_,S=>{try{w(S)}catch(N){setTimeout(()=>{throw N},0)}})};return y(f,Su.EventType.OPEN,()=>{g||(se(In,`RPC '${e}' stream ${s} transport opened.`),v.Qo())}),y(f,Su.EventType.CLOSE,()=>{g||(g=!0,se(In,`RPC '${e}' stream ${s} transport closed`),v.Ko())}),y(f,Su.EventType.ERROR,b=>{g||(g=!0,wa(In,`RPC '${e}' stream ${s} transport errored:`,b),v.Ko(new le(H.UNAVAILABLE,"The operation could not be completed")))}),y(f,Su.EventType.MESSAGE,b=>{var _;if(!g){const w=b.data[0];Ee(!!w);const S=w,N=(S==null?void 0:S.error)||((_=S[0])===null||_===void 0?void 0:_.error);if(N){se(In,`RPC '${e}' stream ${s} received error:`,N);const j=N.status;let D=function(C){const R=qt[C];if(R!==void 0)return v2(R)}(j),T=N.message;D===void 0&&(D=H.INTERNAL,T="Unknown error status: "+j+" with message "+N.message),g=!0,v.Ko(new le(D,T)),f.close()}else se(In,`RPC '${e}' stream ${s} received:`,w),v.Uo(w)}}),y(l,bR.STAT_EVENT,b=>{b.stat===p0.PROXY?se(In,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===p0.NOPROXY&&se(In,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.$o()},0),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $q(){return typeof window<"u"?window:null}function Xf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(t){return new U8(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ti=e,this.timerId=n,this.Go=r,this.zo=s,this.jo=i,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),s=Math.max(0,n-r);s>0&&se("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI="PersistentStream";class J2{constructor(e,n,r,s,i,o,l,c){this.Ti=e,this.n_=r,this.r_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new X2(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===H.RESOURCE_EXHAUSTED?(Fn(n.toString()),Fn("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.i_===n&&this.V_(r,s)},r=>{e(()=>{const s=new le(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(s)})})}V_(e,n){const r=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{r(()=>this.m_(s))}),this.stream.onMessage(s=>{r(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return se(EI,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(se(EI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Uq extends J2{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=q8(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ne.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ne.min():o.readTime?Un(o.readTime):Ne.min()}(e);return this.listener.p_(n,r)}y_(e){const n={};n.database=A0(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=Gm(c)?{documents:T2(i,c)}:{query:N2(i,c).ht},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=b2(i,o.resumeToken);const u=N0(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Ne.min())>0){l.readTime=pc(i,o.snapshotVersion.toTimestamp());const u=N0(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=H8(this.serializer,e);r&&(n.labels=r),this.I_(n)}w_(e){const n={};n.database=A0(this.serializer),n.removeTarget=e,this.I_(n)}}class Bq extends J2{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=W8(e.writeResults,e.commitTime),r=Un(e.commitTime);return this.listener.v_(r,n)}C_(){const e={};e.database=A0(this.serializer),this.I_(e)}S_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Jm(this.serializer,r))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zq{}class qq extends zq{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new le(H.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,n,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.bo(e,C0(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new le(H.UNKNOWN,i.toString())})}Co(e,n,r,s,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Co(e,C0(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new le(H.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class Wq{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Fn(n),this.N_=!1):se("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta="RemoteStore";class Hq{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=i,this.z_.To(o=>{r.enqueueAndForget(async()=>{Ma(this)&&(se(Ta,"Restarting streams for network reachability change."),await async function(c){const u=Me(c);u.W_.add(4),await uh(u),u.j_.set("Unknown"),u.W_.delete(4),await dg(u)}(this))})}),this.j_=new Wq(r,s)}}async function dg(t){if(Ma(t))for(const e of t.G_)await e(!0)}async function uh(t){for(const e of t.G_)await e(!1)}function Z2(t,e){const n=Me(t);n.U_.has(e.targetId)||(n.U_.set(e.targetId,e),ib(n)?sb(n):Mc(n).c_()&&rb(n,e))}function nb(t,e){const n=Me(t),r=Mc(n);n.U_.delete(e),r.c_()&&ej(n,e),n.U_.size===0&&(r.c_()?r.P_():Ma(n)&&n.j_.set("Unknown"))}function rb(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Mc(t).y_(e)}function ej(t,e){t.H_.Ne(e),Mc(t).w_(e)}function sb(t){t.H_=new L8({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.U_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),Mc(t).start(),t.j_.B_()}function ib(t){return Ma(t)&&!Mc(t).u_()&&t.U_.size>0}function Ma(t){return Me(t).W_.size===0}function tj(t){t.H_=void 0}async function Kq(t){t.j_.set("Online")}async function Gq(t){t.U_.forEach((e,n)=>{rb(t,e)})}async function Qq(t,e){tj(t),ib(t)?(t.j_.q_(e),sb(t)):t.j_.set("Unknown")}async function Yq(t,e,n){if(t.j_.set("Online"),e instanceof w2&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.U_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.U_.delete(l),s.H_.removeTarget(l))}(t,e)}catch(r){se(Ta,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await rp(t,r)}else if(e instanceof Yf?t.H_.We(e):e instanceof x2?t.H_.Ze(e):t.H_.je(e),!n.isEqual(Ne.min()))try{const r=await Q2(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.H_.ot(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.U_.get(u);h&&i.U_.set(u,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const h=i.U_.get(c);if(!h)return;i.U_.set(c,h.withResumeToken(Gt.EMPTY_BYTE_STRING,h.snapshotVersion)),ej(i,c);const f=new Ws(h.target,c,u,h.sequenceNumber);rb(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){se(Ta,"Failed to raise snapshot:",r),await rp(t,r)}}async function rp(t,e,n){if(!To(e))throw e;t.W_.add(1),await uh(t),t.j_.set("Offline"),n||(n=()=>Q2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se(Ta,"Retrying IndexedDB access"),await n(),t.W_.delete(1),await dg(t)})}function nj(t,e){return e().catch(n=>rp(t,n,e))}async function dh(t){const e=Me(t),n=mo(e);let r=e.K_.length>0?e.K_[e.K_.length-1].batchId:ra;for(;Xq(e);)try{const s=await jq(e.localStore,r);if(s===null){e.K_.length===0&&n.P_();break}r=s.batchId,Jq(e,s)}catch(s){await rp(e,s)}rj(e)&&sj(e)}function Xq(t){return Ma(t)&&t.K_.length<10}function Jq(t,e){t.K_.push(e);const n=mo(t);n.c_()&&n.b_&&n.S_(e.mutations)}function rj(t){return Ma(t)&&!mo(t).u_()&&t.K_.length>0}function sj(t){mo(t).start()}async function Zq(t){mo(t).C_()}async function eW(t){const e=mo(t);for(const n of t.K_)e.S_(n.mutations)}async function tW(t,e,n){const r=t.K_.shift(),s=Ww.from(r,e,n);await nj(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await dh(t)}async function nW(t,e){e&&mo(t).b_&&await async function(r,s){if(function(o){return D8(o)&&o!==H.ABORTED}(s.code)){const i=r.K_.shift();mo(r).h_(),await nj(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await dh(r)}}(t,e),rj(t)&&sj(t)}async function SI(t,e){const n=Me(t);n.asyncQueue.verifyOperationInProgress(),se(Ta,"RemoteStore received new credentials");const r=Ma(n);n.W_.add(3),await uh(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await dg(n)}async function rW(t,e){const n=Me(t);e?(n.W_.delete(2),await dg(n)):e||(n.W_.add(2),await uh(n),n.j_.set("Unknown"))}function Mc(t){return t.J_||(t.J_=function(n,r,s){const i=Me(n);return i.M_(),new Uq(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{xo:Kq.bind(null,t),No:Gq.bind(null,t),Lo:Qq.bind(null,t),p_:Yq.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),ib(t)?sb(t):t.j_.set("Unknown")):(await t.J_.stop(),tj(t))})),t.J_}function mo(t){return t.Y_||(t.Y_=function(n,r,s){const i=Me(n);return i.M_(),new Bq(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:Zq.bind(null,t),Lo:nW.bind(null,t),D_:eW.bind(null,t),v_:tW.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await dh(t)):(await t.Y_.stop(),t.K_.length>0&&(se(Ta,`Stopping write stream with ${t.K_.length} pending writes`),t.K_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new _s,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new ob(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ab(t,e){if(Fn("AsyncQueue",`${e}: ${t}`),To(t))return new le(H.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{static emptySet(e){return new Ml(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||he.comparator(n.key,r.key):(n,r)=>he.comparator(n.key,r.key),this.keyedMap=Iu(),this.sortedSet=new Pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ml)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ml;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(){this.Z_=new Pt(he.comparator)}track(e){const n=e.doc.key,r=this.Z_.get(n);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(n):e.type===1&&r.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):we():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class gc{constructor(e,n,r,s,i,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new gc(e,n,Ml.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sW{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class iW{constructor(){this.queries=TI(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,r){const s=Me(n),i=s.queries;s.queries=TI(),i.forEach((o,l)=>{for(const c of l.ta)c.onError(r)})})(this,new le(H.ABORTED,"Firestore shutting down"))}}function TI(){return new li(t=>s2(t),rg)}async function lb(t,e){const n=Me(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.na()&&e.ra()&&(r=2):(i=new sW,r=e.ra()?0:1);try{switch(r){case 0:i.ea=await n.onListen(s,!0);break;case 1:i.ea=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=ab(o,`Initialization of query '${rl(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.ta.push(e),e.sa(n.onlineState),i.ea&&e.oa(i.ea)&&ub(n)}async function cb(t,e){const n=Me(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.ta.indexOf(e);o>=0&&(i.ta.splice(o,1),i.ta.length===0?s=e.ra()?0:1:!i.na()&&e.ra()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function oW(t,e){const n=Me(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.ta)l.oa(s)&&(r=!0);o.ea=s}}r&&ub(n)}function aW(t,e,n){const r=Me(t),s=r.queries.get(e);if(s)for(const i of s.ta)i.onError(n);r.queries.delete(e)}function ub(t){t.ia.forEach(e=>{e.next()})}var O0,NI;(NI=O0||(O0={}))._a="default",NI.Cache="cache";class db{constructor(e,n,r){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new gc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const r=n!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=gc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==O0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e){this.key=e}}class oj{constructor(e){this.key=e}}class lW{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ue(),this.mutatedKeys=Ue(),this.ya=i2(e),this.wa=new Ml(this.ya)}get ba(){return this.fa}Sa(e,n){const r=n?n.Da:new II,s=n?n.wa:this.wa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),g=ah(this.query,f)?f:null,v=!!m&&this.mutatedKeys.has(m.key),y=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let b=!1;m&&g?m.data.isEqual(g.data)?v!==y&&(r.track({type:3,doc:g}),b=!0):this.va(m,g)||(r.track({type:2,doc:g}),b=!0,(c&&this.ya(g,c)>0||u&&this.ya(g,u)<0)&&(l=!0)):!m&&g?(r.track({type:0,doc:g}),b=!0):m&&!g&&(r.track({type:1,doc:m}),b=!0,(c||u)&&(l=!0)),b&&(g?(o=o.add(g),i=y?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{wa:o,Da:r,ls:l,mutatedKeys:i}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const o=e.Da.X_();o.sort((h,f)=>function(g,v){const y=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we()}};return y(g)-y(v)}(h.type,f.type)||this.ya(h.doc,f.doc)),this.Ca(r),s=s!=null&&s;const l=n&&!s?this.Fa():[],c=this.pa.size===0&&this.current&&!s?1:0,u=c!==this.ga;return this.ga=c,o.length!==0||u?{snapshot:new gc(this.query,e.wa,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:l}:{Ma:l}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new II,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ue(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const n=[];return e.forEach(r=>{this.pa.has(r)||n.push(new oj(r))}),this.pa.forEach(r=>{e.has(r)||n.push(new ij(r))}),n}Oa(e){this.fa=e.gs,this.pa=Ue();const n=this.Sa(e.documents);return this.applyChanges(n,!0)}Na(){return gc.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const hb="SyncEngine";class cW{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class uW{constructor(e){this.key=e,this.Ba=!1}}class dW{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new li(l=>s2(l),rg),this.qa=new Map,this.Qa=new Set,this.$a=new Pt(he.comparator),this.Ka=new Map,this.Ua=new Xw,this.Wa={},this.Ga=new Map,this.za=Ia.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function hW(t,e,n=!0){const r=hj(t);let s;const i=r.ka.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Na()):s=await aj(r,e,n,!0),s}async function fW(t,e){const n=hj(t);await aj(n,e,!0,!1)}async function aj(t,e,n,r){const s=await kq(t.localStore,Mr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await mW(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Z2(t.remoteStore,s),l}async function mW(t,e,n,r,s){t.Ha=(f,m,g)=>async function(y,b,_,w){let S=b.view.Sa(_);S.ls&&(S=await xI(y.localStore,b.query,!1).then(({documents:T})=>b.view.Sa(T,S)));const N=w&&w.targetChanges.get(b.targetId),j=w&&w.targetMismatches.get(b.targetId)!=null,D=b.view.applyChanges(S,y.isPrimaryClient,N,j);return AI(y,b.targetId,D.Ma),D.snapshot}(t,f,m,g);const i=await xI(t.localStore,e,!0),o=new lW(e,i.gs),l=o.Sa(i.documents),c=ch.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,c);AI(t,n,u.Ma);const h=new cW(e,n,o);return t.ka.set(e,h),t.qa.has(n)?t.qa.get(n).push(e):t.qa.set(n,[e]),u.snapshot}async function pW(t,e,n){const r=Me(t),s=r.ka.get(e),i=r.qa.get(s.targetId);if(i.length>1)return r.qa.set(s.targetId,i.filter(o=>!rg(o,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await D0(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&nb(r.remoteStore,s.targetId),L0(r,s.targetId)}).catch(Da)):(L0(r,s.targetId),await D0(r.localStore,s.targetId,!0))}async function gW(t,e){const n=Me(t),r=n.ka.get(e),s=n.qa.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),nb(n.remoteStore,r.targetId))}async function yW(t,e,n){const r=fj(t);try{const s=await function(o,l){const c=Me(o),u=$e.now(),h=l.reduce((g,v)=>g.add(v.key),Ue());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=mr(),y=Ue();return c.ds.getEntries(g,h).next(b=>{v=b,v.forEach((_,w)=>{w.isValidDocument()||(y=y.add(_))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,v)).next(b=>{f=b;const _=[];for(const w of l){const S=j8(w,f.get(w.key).overlayedDocument);S!=null&&_.push(new ci(w.key,S,QR(S.value.mapValue),on.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,_,l)}).next(b=>{m=b;const _=b.applyToLocalDocumentSet(f,y);return c.documentOverlayCache.saveOverlays(g,b.batchId,_)})}).then(()=>({batchId:m.batchId,changes:a2(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.Wa[o.currentUser.toKey()];u||(u=new Pt(Le)),u=u.insert(l,c),o.Wa[o.currentUser.toKey()]=u}(r,s.batchId,n),await hh(r,s.changes),await dh(r.remoteStore)}catch(s){const i=ab(s,"Failed to persist write");n.reject(i)}}async function lj(t,e){const n=Me(t);try{const r=await Pq(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Ka.get(i);o&&(Ee(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ba=!0:s.modifiedDocuments.size>0?Ee(o.Ba):s.removedDocuments.size>0&&(Ee(o.Ba),o.Ba=!1))}),await hh(n,r,e)}catch(r){await Da(r)}}function CI(t,e,n){const r=Me(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ka.forEach((i,o)=>{const l=o.view.sa(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=Me(o);c.onlineState=l;let u=!1;c.queries.forEach((h,f)=>{for(const m of f.ta)m.sa(l)&&(u=!0)}),u&&ub(c)}(r.eventManager,e),s.length&&r.La.p_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function vW(t,e,n){const r=Me(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Ka.get(e),i=s&&s.key;if(i){let o=new Pt(he.comparator);o=o.insert(i,Vt.newNoDocument(i,Ne.min()));const l=Ue().add(i),c=new og(Ne.min(),new Map,new Pt(Le),o,l);await lj(r,c),r.$a=r.$a.remove(i),r.Ka.delete(e),fb(r)}else await D0(r.localStore,e,!1).then(()=>L0(r,e,n)).catch(Da)}async function xW(t,e){const n=Me(t),r=e.batch.batchId;try{const s=await Aq(n.localStore,e);uj(n,r,null),cj(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await hh(n,s)}catch(s){await Da(s)}}async function wW(t,e,n){const r=Me(t);try{const s=await function(o,l){const c=Me(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(Ee(f!==null),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);uj(r,e,n),cj(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await hh(r,s)}catch(s){await Da(s)}}function cj(t,e){(t.Ga.get(e)||[]).forEach(n=>{n.resolve()}),t.Ga.delete(e)}function uj(t,e,n){const r=Me(t);let s=r.Wa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Wa[r.currentUser.toKey()]=s}}function L0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.qa.get(e))t.ka.delete(r),n&&t.La.Ja(r,n);t.qa.delete(e),t.isPrimaryClient&&t.Ua.Sr(e).forEach(r=>{t.Ua.containsKey(r)||dj(t,r)})}function dj(t,e){t.Qa.delete(e.path.canonicalString());const n=t.$a.get(e);n!==null&&(nb(t.remoteStore,n),t.$a=t.$a.remove(e),t.Ka.delete(n),fb(t))}function AI(t,e,n){for(const r of n)r instanceof ij?(t.Ua.addReference(r.key,e),bW(t,r)):r instanceof oj?(se(hb,"Document no longer in limbo: "+r.key),t.Ua.removeReference(r.key,e),t.Ua.containsKey(r.key)||dj(t,r.key)):we()}function bW(t,e){const n=e.key,r=n.path.canonicalString();t.$a.get(n)||t.Qa.has(r)||(se(hb,"New document in limbo: "+n),t.Qa.add(r),fb(t))}function fb(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const n=new he(ot.fromString(e)),r=t.za.next();t.Ka.set(r,new uW(n)),t.$a=t.$a.insert(n,r),Z2(t.remoteStore,new Ws(Mr(oh(n.path)),r,"TargetPurposeLimboResolution",jr.ae))}}async function hh(t,e,n){const r=Me(t),s=[],i=[],o=[];r.ka.isEmpty()||(r.ka.forEach((l,c)=>{o.push(r.Ha(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=eb.Yi(c.targetId,u);i.push(f)}}))}),await Promise.all(o),r.La.p_(s),await async function(c,u){const h=Me(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>$.forEach(u,m=>$.forEach(m.Hi,g=>h.persistence.referenceDelegate.addReference(f,m.targetId,g)).next(()=>$.forEach(m.Ji,g=>h.persistence.referenceDelegate.removeReference(f,m.targetId,g)))))}catch(f){if(!To(f))throw f;se(tb,"Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const g=h.Ts.get(m),v=g.snapshotVersion,y=g.withLastLimboFreeSnapshotVersion(v);h.Ts=h.Ts.insert(m,y)}}}(r.localStore,i))}async function _W(t,e){const n=Me(t);if(!n.currentUser.isEqual(e)){se(hb,"User change. New user:",e.toKey());const r=await G2(n.localStore,e);n.currentUser=e,function(i,o){i.Ga.forEach(l=>{l.forEach(c=>{c.reject(new le(H.CANCELLED,o))})}),i.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await hh(n,r.Rs)}}function EW(t,e){const n=Me(t),r=n.Ka.get(e);if(r&&r.Ba)return Ue().add(r.key);{let s=Ue();const i=n.qa.get(e);if(!i)return s;for(const o of i){const l=n.ka.get(o);s=s.unionWith(l.view.ba)}return s}}function hj(t){const e=Me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=lj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=EW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vW.bind(null,e),e.La.p_=oW.bind(null,e.eventManager),e.La.Ja=aW.bind(null,e.eventManager),e}function fj(t){const e=Me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wW.bind(null,e),e}class Dd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ug(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return K2(this.persistence,new H2,e.initialUser,this.serializer)}Xa(e){return new Jw(cg.ri,this.serializer)}Za(e){return new Y2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Dd.provider={build:()=>new Dd};class SW extends Dd{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){Ee(this.persistence.referenceDelegate instanceof np);const r=this.persistence.referenceDelegate.garbageCollector;return new U2(r,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?Nn.withCacheSize(this.cacheSizeBytes):Nn.DEFAULT;return new Jw(r=>np.ri(r,n),this.serializer)}}class IW extends Dd{constructor(e,n,r){super(),this.ru=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ru.initialize(this,e),await fj(this.ru.syncEngine),await dh(this.ru.remoteStore),await this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}eu(e){return K2(this.persistence,new H2,e.initialUser,this.serializer)}tu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new U2(r,e.asyncQueue,n)}nu(e,n){const r=new Rz(n,this.persistence);return new Pz(e.asyncQueue,r)}Xa(e){const n=Iq(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Nn.withCacheSize(this.cacheSizeBytes):Nn.DEFAULT;return new Zw(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,$q(),Xf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new Y2}}class sp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>CI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=_W.bind(null,this.syncEngine),await rW(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new iW}()}createDatastore(e){const n=ug(e.databaseInfo.databaseId),r=function(i){return new Fq(i)}(e.databaseInfo);return function(i,o,l,c){return new qq(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new Hq(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>CI(this.syncEngine,n,0),function(){return _I.D()?new _I:new Mq}())}createSyncEngine(e,n){return function(s,i,o,l,c,u,h){const f=new dW(s,i,o,l,c,u);return h&&(f.ja=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Me(s);se(Ta,"RemoteStore shutting down."),i.W_.add(5),await uh(i),i.z_.shutdown(),i.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}sp.provider={build:()=>new sp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Fn("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po="FirestoreClient";class TW{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=un.UNAUTHENTICATED,this.clientId=IR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{se(po,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(se(po,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _s;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ab(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Vy(t,e){t.asyncQueue.verifyOperationInProgress(),se(po,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await G2(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function PI(t,e){t.asyncQueue.verifyOperationInProgress();const n=await NW(t);se(po,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>SI(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>SI(e.remoteStore,s)),t._onlineComponents=e}async function NW(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se(po,"Using user provided OfflineComponentProvider");try{await Vy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===H.FAILED_PRECONDITION||s.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;wa("Error using user provided cache. Falling back to memory cache: "+n),await Vy(t,new Dd)}}else se(po,"Using default OfflineComponentProvider"),await Vy(t,new SW(void 0));return t._offlineComponents}async function mj(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se(po,"Using user provided OnlineComponentProvider"),await PI(t,t._uninitializedComponentsProvider._online)):(se(po,"Using default OnlineComponentProvider"),await PI(t,new sp))),t._onlineComponents}function CW(t){return mj(t).then(e=>e.syncEngine)}async function ip(t){const e=await mj(t),n=e.eventManager;return n.onListen=hW.bind(null,e.syncEngine),n.onUnlisten=pW.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=fW.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=gW.bind(null,e.syncEngine),n}function AW(t,e,n={}){const r=new _s;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const h=new mb({next:m=>{h.su(),o.enqueueAndForget(()=>cb(i,f));const g=m.docs.has(l);!g&&m.fromCache?u.reject(new le(H.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&c&&c.source==="server"?u.reject(new le(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new db(oh(l.path),h,{includeMetadataChanges:!0,Ta:!0});return lb(i,f)}(await ip(t),t.asyncQueue,e,n,r)),r.promise}function PW(t,e,n={}){const r=new _s;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const h=new mb({next:m=>{h.su(),o.enqueueAndForget(()=>cb(i,f)),m.fromCache&&c.source==="server"?u.reject(new le(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new db(l,h,{includeMetadataChanges:!0,Ta:!0});return lb(i,f)}(await ip(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pj(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gj(t,e,n){if(!n)throw new le(H.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function RW(t,e,n,r){if(e===!0&&r===!0)throw new le(H.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function jI(t){if(!he.isDocumentKey(t))throw new le(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function kI(t){if(he.isDocumentKey(t))throw new le(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function hg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we()}function Bn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new le(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=hg(t);throw new le(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function jW(t,e){if(e<=0)throw new le(H.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj="firestore.googleapis.com",DI=!0;class MI{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new le(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=yj,this.ssl=DI}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:DI;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=L2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lq)throw new le(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RW("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pj((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new le(H.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new le(H.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new le(H.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fg{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new MI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new MI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new xz;switch(r.type){case"firstParty":return new Ez(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new le(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=RI.get(n);r&&(se("ComponentProvider","Removing Datastore"),RI.delete(n),r.terminate())}(this),Promise.resolve()}}function kW(t,e,n,r={}){var s;const i=(t=Bn(t,fg))._getSettings(),o=Object.assign(Object.assign({},i),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;i.host!==yj&&i.host!==l&&wa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},i),{host:l,ssl:!1,emulatorOptions:r});if(!pa(c,o)&&(t._setSettings(c),r.mockUserToken)){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=un.MOCK_USER;else{u=DU(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new le(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new un(f)}t._authCredentials=new wz(new SR(u,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ui(this.firestore,e,this._query)}}class Rn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new so(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rn(this.firestore,e,this._key)}}class so extends ui{constructor(e,n,r){super(e,n,oh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rn(this.firestore,null,new he(e))}withConverter(e){return new so(this.firestore,e,this._path)}}function Ie(t,e,...n){if(t=Bt(t),gj("collection","path",e),t instanceof fg){const r=ot.fromString(e,...n);return kI(r),new so(t,null,r)}{if(!(t instanceof Rn||t instanceof so))throw new le(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ot.fromString(e,...n));return kI(r),new so(t.firestore,null,r)}}function be(t,e,...n){if(t=Bt(t),arguments.length===1&&(e=IR.newId()),gj("doc","path",e),t instanceof fg){const r=ot.fromString(e,...n);return jI(r),new Rn(t,null,new he(r))}{if(!(t instanceof Rn||t instanceof so))throw new le(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ot.fromString(e,...n));return jI(r),new Rn(t.firestore,t instanceof so?t.converter:null,new he(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI="AsyncQueue";class LI{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new X2(this,"async_queue_retry"),this.bu=()=>{const r=Xf();r&&se(OI,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.Su=e;const n=Xf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=Xf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new _s;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!To(e))throw e;se(OI,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.Su.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Fn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.pu=!1,r))));return this.Su=n,n}enqueueAfterDelay(e,n,r){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const s=ob.createAndSchedule(this,e,n,r,i=>this.Fu(i));return this.fu.push(s),s}Du(){this.gu&&we()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}function VI(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Ts extends fg{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new LI,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new LI(e),this._firestoreClient=void 0,await e}}}function DW(t,e){const n=typeof t=="object"?t:DP(),r=typeof t=="string"?t:Km,s=bw(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=jU("firestore");i&&kW(s,...i)}return s}function fh(t){if(t._terminated)throw new le(H.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||vj(t),t._firestoreClient}function vj(t){var e,n,r;const s=t._freezeSettings(),i=function(l,c,u,h){return new o8(l,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,pj(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new TW(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}function MW(t,e){wa("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return OW(t,sp.provider,{build:r=>new IW(r,n.cacheSizeBytes,void 0)}),Promise.resolve()}function OW(t,e,n){if((t=Bn(t,Ts))._firestoreClient||t._terminated)throw new le(H.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new le(H.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},vj(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yc(Gt.fromBase64String(e))}catch(n){throw new le(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new yc(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new le(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new le(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new le(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LW=/^__.*__$/;class VW{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ci(e,this.data,this.fieldMask,n,this.fieldTransforms):new Dc(e,this.data,n,this.fieldTransforms)}}class xj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ci(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function wj(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we()}}class yb{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Bu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new yb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ku({path:r,Qu:!1});return s.$u(e),s}Ku(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ku({path:r,Qu:!1});return s.Bu(),s}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return op(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(wj(this.Lu)&&LW.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class FW{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ug(e)}ju(e,n,r,s=!1){return new yb({Lu:e,methodName:n,zu:r,path:jt.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pg(t){const e=t._freezeSettings(),n=ug(t._databaseId);return new FW(t._databaseId,!!e.ignoreUndefinedProperties,n)}function bj(t,e,n,r,s,i={}){const o=t.ju(i.merge||i.mergeFields?2:0,e,n,s);xb("Data must be an object, but it was:",o,r);const l=Sj(r,o);let c,u;if(i.merge)c=new Xn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=V0(e,f,n);if(!o.contains(m))throw new le(H.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Tj(h,m)||h.push(m)}c=new Xn(h),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new VW(new An(l),c,u)}class ph extends mg{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ph}}class vb extends mg{_toFieldTransform(e){return new m2(e.path,new hc)}isEqual(e){return e instanceof vb}}function _j(t,e,n,r){const s=t.ju(1,e,n);xb("Data must be an object, but it was:",s,r);const i=[],o=An.empty();No(r,(c,u)=>{const h=wb(e,c,n);u=Bt(u);const f=s.Ku(h);if(u instanceof ph)i.push(h);else{const m=gh(u,f);m!=null&&(i.push(h),o.set(h,m))}});const l=new Xn(i);return new xj(o,l,s.fieldTransforms)}function Ej(t,e,n,r,s,i){const o=t.ju(1,e,n),l=[V0(e,r,n)],c=[s];if(i.length%2!=0)throw new le(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(V0(e,i[m])),c.push(i[m+1]);const u=[],h=An.empty();for(let m=l.length-1;m>=0;--m)if(!Tj(u,l[m])){const g=l[m];let v=c[m];v=Bt(v);const y=o.Ku(g);if(v instanceof ph)u.push(g);else{const b=gh(v,y);b!=null&&(u.push(g),h.set(g,b))}}const f=new Xn(u);return new xj(h,f,o.fieldTransforms)}function $W(t,e,n,r=!1){return gh(n,t.ju(r?4:3,e))}function gh(t,e){if(Ij(t=Bt(t)))return xb("Unsupported field value:",e,t),Sj(t,e);if(t instanceof mg)return function(r,s){if(!wj(s.Lu))throw s.Wu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=gh(l,s.Uu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Bt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return T8(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=$e.fromDate(r);return{timestampValue:pc(s.serializer,i)}}if(r instanceof $e){const i=new $e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:pc(s.serializer,i)}}if(r instanceof pb)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof yc)return{bytesValue:b2(s.serializer,r._byteString)};if(r instanceof Rn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Gw(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof gb)return function(o,l){return{mapValue:{fields:{[$w]:{stringValue:Uw},[lc]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Wu("VectorValues must only contain numeric values.");return zw(l.serializer,u)})}}}}}}(r,s);throw s.Wu(`Unsupported field value: ${hg(r)}`)}(t,e)}function Sj(t,e){const n={};return $R(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):No(t,(r,s)=>{const i=gh(s,e.qu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Ij(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof $e||t instanceof pb||t instanceof yc||t instanceof Rn||t instanceof mg||t instanceof gb)}function xb(t,e,n){if(!Ij(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=hg(n);throw r==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+r)}}function V0(t,e,n){if((e=Bt(e))instanceof mh)return e._internalPath;if(typeof e=="string")return wb(t,e);throw op("Field path arguments must be of type string or ",t,!1,void 0,n)}const UW=new RegExp("[~\\*/\\[\\]]");function wb(t,e,n){if(e.search(UW)>=0)throw op(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new mh(...e.split("."))._internalPath}catch{throw op(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function op(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new le(H.INVALID_ARGUMENT,l+t+c)}function Tj(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new BW(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(gg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class BW extends Nj{data(){return super.data()}}function gg(t,e){return typeof e=="string"?wb(t,e):e instanceof mh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new le(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bb{}class _b extends bb{}function Ge(t,e,...n){let r=[];e instanceof bb&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof Eb).length,l=i.filter(c=>c instanceof yg).length;if(o>1||o>0&&l>0)throw new le(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class yg extends _b{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new yg(e,n,r)}_apply(e){const n=this._parse(e);return Aj(e._query,n),new ui(e.firestore,e.converter,T0(e._query,n))}_parse(e){const n=pg(e.firestore);return function(i,o,l,c,u,h,f){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new le(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){$I(f,h);const v=[];for(const y of f)v.push(FI(c,i,y));m={arrayValue:{values:v}}}else m=FI(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||$I(f,h),m=$W(l,o,f,h==="in"||h==="not-in");return We.create(u,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function nt(t,e,n){const r=e,s=gg("where",t);return yg._create(s,r,n)}class Eb extends bb{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Eb(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ct.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)Aj(o,c),o=T0(o,c)}(e._query,n),new ui(e.firestore,e.converter,T0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Sb extends _b{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Sb(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new le(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new le(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new jd(i,o)}(e._query,this._field,this._direction);return new ui(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new kc(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Es(t,e="asc"){const n=e,r=gg("orderBy",t);return Sb._create(r,n)}class Ib extends _b{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Ib(e,n,r)}_apply(e){return new ui(e.firestore,e.converter,Ym(e._query,this._limit,this._limitType))}}function Ol(t){return jW("limit",t),Ib._create("limit",t,"F")}function FI(t,e,n){if(typeof(n=Bt(n))=="string"){if(n==="")throw new le(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!r2(e)&&n.indexOf("/")!==-1)throw new le(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ot.fromString(n));if(!he.isDocumentKey(r))throw new le(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Pd(t,new he(r))}if(n instanceof Rn)return Pd(t,n._key);throw new le(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hg(n)}.`)}function $I(t,e){if(!Array.isArray(t)||t.length===0)throw new le(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Aj(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new le(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class zW{convertValue(e,n="none"){switch(ho(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(si(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return No(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[lc].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Nt(o.doubleValue));return new gb(i)}convertGeoPoint(e){return new pb(Nt(e.latitude),Nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=tg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Cd(e));default:return null}}convertTimestamp(e){const n=ri(e);return new $e(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ot.fromString(e);Ee(R2(r));const s=new ba(r.get(1),r.get(3)),i=new he(r.popFirst(5));return s.isEqual(n)||Fn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pj(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Rj extends Nj{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Jf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(gg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Jf extends Rj{data(e={}){return super.data(e)}}class jj{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Cu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Jf(this._firestore,this._userDataWriter,r.key,r,new Cu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new le(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new Jf(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Cu(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Jf(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Cu(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:qW(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function qW(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(t){t=Bn(t,Rn);const e=Bn(t.firestore,Ts);return AW(fh(e),t._key).then(n=>kj(e,t,n))}class Tb extends zW{constructor(e){super(),this.firestore=e}convertBytes(e){return new yc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rn(this.firestore,null,n)}}function Re(t){t=Bn(t,ui);const e=Bn(t.firestore,Ts),n=fh(e),r=new Tb(e);return Cj(t._query),PW(n,t._query).then(s=>new jj(e,r,t,s))}function tr(t,e,n){t=Bn(t,Rn);const r=Bn(t.firestore,Ts),s=Pj(t.converter,e,n);return vg(r,[bj(pg(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,on.none())])}function Co(t,e,n,...r){t=Bn(t,Rn);const s=Bn(t.firestore,Ts),i=pg(s);let o;return o=typeof(e=Bt(e))=="string"||e instanceof mh?Ej(i,"updateDoc",t._key,e,n,r):_j(i,"updateDoc",t._key,e),vg(s,[o.toMutation(t._key,on.exists(!0))])}function Nb(t){return vg(Bn(t.firestore,Ts),[new lh(t._key,on.none())])}function Qu(t,...e){var n,r,s;t=Bt(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||VI(e[o])||(i=e[o],o++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(VI(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let c,u,h;if(t instanceof Rn)u=Bn(t.firestore,Ts),h=oh(t._key.path),c={next:f=>{e[o]&&e[o](kj(u,t,f))},error:e[o+1],complete:e[o+2]};else{const f=Bn(t,ui);u=Bn(f.firestore,Ts),h=f._query;const m=new Tb(u);c={next:g=>{e[o]&&e[o](new jj(u,m,f,g))},error:e[o+1],complete:e[o+2]},Cj(t._query)}return function(m,g,v,y){const b=new mb(y),_=new db(g,b,v);return m.asyncQueue.enqueueAndForget(async()=>lb(await ip(m),_)),()=>{b.su(),m.asyncQueue.enqueueAndForget(async()=>cb(await ip(m),_))}}(fh(u),h,l,c)}function vg(t,e){return function(r,s){const i=new _s;return r.asyncQueue.enqueueAndForget(async()=>yW(await CW(r),s,i)),i.promise}(fh(t),e)}function kj(t,e,n){const r=n.docs.get(e._key),s=new Tb(t);return new Rj(t,s,e._key,r,new Cu(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WW{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=pg(e)}set(e,n,r){this._verifyNotCommitted();const s=Fy(e,this._firestore),i=Pj(s.converter,n,r),o=bj(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,on.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Fy(e,this._firestore);let o;return o=typeof(n=Bt(n))=="string"||n instanceof mh?Ej(this._dataReader,"WriteBatch.update",i._key,n,r,s):_j(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,on.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Fy(e,this._firestore);return this._mutations=this._mutations.concat(new lh(n._key,on.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new le(H.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Fy(t,e){if((t=Bt(t)).firestore!==e)throw new le(H.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HW(){return new ph("deleteField")}function hn(){return new vb("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(t){return fh(t=Bn(t,Ts)),new WW(t,e=>vg(t,e))}(function(e,n=!0){(function(s){jc=s})(Pc),nc(new ga("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Ts(new bz(r.getProvider("auth-internal")),new Sz(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new le(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ba(u.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),to(bS,_S,e),to(bS,_S,"esm2017")})();async function KW(){try{const t="";console.log("Fetching Firebase config from:",`${t}/api/config/firebase`);const e=await fetch(`${t}/api/config/firebase`);if(!e.ok){const i=await e.json().catch(()=>({}));throw new Error(`Failed to fetch config: ${e.statusText}. ${i.details||""}`)}const n=await e.json();console.log("Received Firebase config with keys:",Object.keys(n));const s=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"].filter(i=>!n[i]);if(s.length>0)throw new Error(`Firebase config is missing required fields: ${s.join(", ")}`);return n}catch(t){throw console.error("Error fetching Firebase config:",t),t}}const Te={TEAMS:"teams",MATCHES:"matches",POLL_QUESTIONS:"pollQuestions",PREDICTION_GAME:"predictionGame",SQUADS:"squads",USERS:"users",LEADERBOARD:"leaderboard",MATCH_RESULTS:"matchResults",QUESTIONS:"questions",MATCH_LEADERBOARDS:"matchLeaderboards",ANSWERS:"predictionAnswers",SYSTEM_SETTINGS:"systemSettings",GLOBAL_LEADERBOARD:"globalLeaderboard"},Cb=()=>{const t=new Date().toISOString();return{createdAt:t,updatedAt:t}},GW=()=>({updatedAt:new Date().toISOString()}),vs=t=>{if(!t||typeof t!="string"||t.startsWith("any-")||t.startsWith("no-"))return t;let e=t.trim();return e=e.replace(/(\b[A-Z])(\s+)([A-Z]\b)/g,"$1$3"),e=e.replace(/\s+/g," "),console.log(`Standardized player name: "${t}" -> "${e}"`),e},Ab=async()=>{try{const t=Ge(Ie(K,Te.MATCHES),Es("date","asc"));return(await Re(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error getting matches:",t),t}},Dj=async()=>{try{const t=new Date,e=Ge(Ie(K,Te.MATCHES),nt("date",">=",t),Es("date","asc"));return(await Re(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error getting upcoming matches:",t),t}},Mj=async t=>{try{console.log("Attempting to fetch match with ID:",t);const e=be(K,Te.MATCHES,t);console.log("Firestore reference created for collection:",Te.MATCHES);const n=await Ft(e);if(console.log("Firestore response received. Document exists:",n.exists()),n.exists()){const r=n.data();return console.log("Match data retrieved:",r),{id:n.id,...r}}return console.log("No match found with ID:",t),null}catch(e){throw console.error("Error getting match:",e),console.error("Error code:",e.code),console.error("Error message:",e.message),e.code==="permission-denied"&&(console.warn("User does not have permission to access this match data. Check Firestore rules."),e.message="You do not have permission to view this match. Please sign in or contact the administrator."),e}},Oj=async t=>{try{const e=Ie(K,Te.MATCHES),n=be(e);return await tr(n,{...t,...Cb()}),n.id}catch(e){throw console.error("Error creating match:",e),e}},Lj=async()=>{try{const t=Ie(K,Te.SQUADS);return(await Re(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error getting squads:",t),t}},F0=async t=>{try{const e=be(K,Te.SQUADS,t),n=await Ft(e);return n.exists()?{id:n.id,...n.data()}:null}catch(e){throw console.error("Error getting squad:",e),e}},Vj=async()=>{try{console.log("Checking if database needs seeding...");const t=await Re(Ie(K,Te.MATCHES)),e=await Re(Ie(K,Te.SQUADS));let n=!1;const r=mn(K);if(t.empty?(console.log("Matches collection is empty, seeding initial match data..."),[{id:"match1",team1:"Mumbai Indians",team2:"Chennai Super Kings",venue:"Wankhede Stadium, Mumbai",date:new Date("2024-03-24T14:00:00Z"),status:"upcoming"},{id:"match2",team1:"Royal Challengers Bangalore",team2:"Kolkata Knight Riders",venue:"M. Chinnaswamy Stadium, Bangalore",date:new Date("2024-03-25T14:00:00Z"),status:"upcoming"},{id:"match3",team1:"Delhi Capitals",team2:"Lucknow Super Giants",venue:"Arun Jaitley Stadium, Delhi",date:new Date("2024-03-26T14:00:00Z"),status:"upcoming"}].forEach(i=>{const o=be(K,Te.MATCHES,i.id);r.set(o,i)}),n=!0):console.log("Matches collection already contains data"),e.empty){console.log("Squads collection is empty, seeding initial squad data...");const s={team:"Mumbai Indians",squad:[{name:"Rohit Sharma",role:"Batsman",age:"35"},{name:"Jasprit Bumrah",role:"Bowler",age:"29"},{name:"Hardik Pandya",role:"All-rounder",age:"29"},{name:"Suryakumar Yadav",role:"Batsman",age:"32"},{name:"Ishan Kishan",role:"Wicket-keeper",age:"24"},{name:"Arjun Tendulkar",role:"Bowler",age:"23"},{name:"Kumar Kartikeya",role:"Bowler",age:"24"},{name:"Tilak Varma",role:"Batsman",age:"20"}],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},i={team:"Chennai Super Kings",squad:[{name:"MS Dhoni",role:"Wicket-keeper",age:"41"},{name:"Ravindra Jadeja",role:"All-rounder",age:"34"},{name:"Ruturaj Gaikwad",role:"Batsman",age:"26"},{name:"Deepak Chahar",role:"Bowler",age:"30"},{name:"Moeen Ali",role:"All-rounder",age:"35"},{name:"Shivam Dube",role:"All-rounder",age:"29"},{name:"Mitchell Santner",role:"Bowler",age:"31"},{name:"Tushar Deshpande",role:"Bowler",age:"28"}],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},o={team:"Royal Challengers Bangalore",squad:[{name:"Virat Kohli",role:"Batsman",age:"34"},{name:"Glenn Maxwell",role:"All-rounder",age:"34"},{name:"Mohammed Siraj",role:"Bowler",age:"29"},{name:"Faf du Plessis",role:"Batsman",age:"38"},{name:"Wanindu Hasaranga",role:"Bowler",age:"25"},{name:"Harshal Patel",role:"Bowler",age:"32"},{name:"Dinesh Karthik",role:"Wicket-keeper",age:"37"},{name:"Shahbaz Ahmed",role:"All-rounder",age:"28"}],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},l={team:"Kolkata Knight Riders",squad:[{name:"Shreyas Iyer",role:"Batsman",age:"28"},{name:"Andre Russell",role:"All-rounder",age:"35"},{name:"Sunil Narine",role:"All-rounder",age:"35"},{name:"Venkatesh Iyer",role:"All-rounder",age:"28"},{name:"Umesh Yadav",role:"Bowler",age:"35"},{name:"Tim Southee",role:"Bowler",age:"34"},{name:"Varun Chakravarthy",role:"Bowler",age:"31"},{name:"Lockie Ferguson",role:"Bowler",age:"31"}],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},c={team:"Delhi Capitals",squad:[{name:"Rishabh Pant",role:"Wicket-keeper",age:"25"},{name:"Axar Patel",role:"All-rounder",age:"29"},{name:"Prithvi Shaw",role:"Batsman",age:"23"},{name:"Anrich Nortje",role:"Bowler",age:"29"},{name:"Kuldeep Yadav",role:"Bowler",age:"28"},{name:"Mitchell Marsh",role:"All-rounder",age:"31"},{name:"David Warner",role:"Batsman",age:"36"},{name:"Rovman Powell",role:"Batsman",age:"29"}],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},u={team:"Lucknow Super Giants",squad:[{name:"KL Rahul",role:"Batsman",age:"31"},{name:"Nicholas Pooran",role:"Wicket-keeper",age:"27"},{name:"Krunal Pandya",role:"All-rounder",age:"32"},{name:"Marcus Stoinis",role:"All-rounder",age:"33"},{name:"Deepak Hooda",role:"All-rounder",age:"28"},{name:"Ravi Bishnoi",role:"Bowler",age:"23"},{name:"Mohsin Khan",role:"Bowler",age:"24"},{name:"Avesh Khan",role:"Bowler",age:"26"}],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},h=s.team.toLowerCase().replace(/\s+/g,""),f=i.team.toLowerCase().replace(/\s+/g,""),m=o.team.toLowerCase().replace(/\s+/g,""),g=l.team.toLowerCase().replace(/\s+/g,""),v=c.team.toLowerCase().replace(/\s+/g,""),y=u.team.toLowerCase().replace(/\s+/g,"");r.set(be(K,Te.SQUADS,h),s),r.set(be(K,Te.SQUADS,f),i),r.set(be(K,Te.SQUADS,m),o),r.set(be(K,Te.SQUADS,g),l),r.set(be(K,Te.SQUADS,v),c),r.set(be(K,Te.SQUADS,y),u),n=!0}else console.log("Squads collection already contains data");return n?(await r.commit(),console.log("Initial data seeded successfully"),!0):(console.log("Database already contains all required data, skipping seeding"),!1)}catch(t){throw console.error("Error seeding initial data:",t),t}},xg=async()=>{try{console.log("Checking if questions need to be seeded...");const t=Ie(K,"questions"),e=await Re(t);let n=!1;const r=mn(K);if(e.empty)console.log("Questions collection is empty, seeding standard questions..."),[{id:"winner",text:"Which team will win this match?",type:"winner",points:10,negativePoints:3,isActive:!0},{id:"top-batsman",text:"Who will be the top batsman in this match?",type:"topBatsman",points:15,negativePoints:5,isActive:!0},{id:"top-bowler",text:"Who will be the top bowler in this match?",type:"topBowler",points:15,negativePoints:5,isActive:!0},{id:"highest-total",text:"Will the match total exceed 350 runs?",type:"highestTotal",points:10,negativePoints:3,isActive:!0},{id:"more-sixes",text:"Which team will hit more sixes?",type:"moreSixes",points:10,negativePoints:3,isActive:!0},{id:"total-sixes",text:"How many sixes will be hit in this match?",type:"totalSixes",options:[{id:"range1",value:"12-17",label:"12-17 sixes"},{id:"range2",value:"17-22",label:"17-22 sixes"},{id:"range3",value:"22-37",label:"22-37 sixes"},{id:"range4",value:"37-42",label:"37-42 sixes"}],points:15,negativePoints:5,isActive:!0}].forEach(i=>{const o=be(t,i.id);r.set(o,i)}),n=!0;else{const s=Ge(t,nt("type","==","highestTotal"));if((await Re(s)).empty){console.log("Adding highest total question...");const c={text:"What will be the highest total of this match?",type:"highestTotal",points:10,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},u=be(t,"highest-total");r.set(u,c),n=!0}const o=Ge(t,nt("type","==","moreSixes"));if((await Re(o)).empty){console.log("Adding more sixes question...");const c={text:"Which team will hit more sixes?",type:"moreSixes",points:5,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},u=be(t,"more-sixes");r.set(u,c),n=!0}}return n?(await r.commit(),console.log("Questions seeded successfully"),!0):(console.log("Questions already exist, no seeding needed"),!1)}catch(t){throw console.error("Error seeding questions:",t),t}},yh=async t=>{try{const e=Ge(Ie(K,Te.MATCH_RESULTS),nt("matchId","==",t)),n=await Re(e);if(!n.empty){const r=n.docs[0];return{id:r.id,...r.data()}}return null}catch(e){throw console.error("Error getting match result:",e),e}},Fj=async(t,e,n)=>{try{const r=await yh(t);if(r){const s=be(K,Te.MATCH_RESULTS,r.id);return await Co(s,{...n,updatedAt:hn()}),r.id}else{const s=Ie(K,Te.MATCH_RESULTS),i=be(s);return await tr(i,{matchId:t,createdBy:e,...n,createdAt:hn(),updatedAt:hn()}),i.id}}catch(r){throw console.error("Error saving match result:",r),r}},$0=async t=>{var e;try{console.log(`Evaluating predictions for match: ${t}`);const n=await yh(t);if(!n)throw console.error(`No match result found for ${t}`),new Error(`No match result found for match ${t}`);const r=await Ft(be(K,Te.MATCHES,t));if(!r.exists())throw new Error(`Match ${t} not found`);const s=r.data();if(console.log("Match result retrieved:",n),console.log("Match data retrieved:",s),console.log("Prediction results:",n.predictionResults),!n.predictionResults||Object.keys(n.predictionResults).length===0)throw console.error(`No prediction results defined for match ${t}`),new Error(`No prediction results found for match ${t}`);const i=Ie(K,Te.QUESTIONS),o=Ge(i,nt("isActive","==",!0)),l=await Re(o),c=new Map;l.forEach(S=>{const N=S.data();c.set(S.id,{id:S.id,text:N.text,type:N.type,points:N.points||10,negativePoints:N.negativePoints||0,isActive:N.isActive}),N.type&&c.set(N.type,{id:S.id,text:N.text,type:N.type,points:N.points||10,negativePoints:N.negativePoints||0,isActive:N.isActive})}),console.log(`Loaded ${c.size} active questions for evaluation`);const u=await Ft(be(K,Te.TEAMS,s.team1)),h=await Ft(be(K,Te.TEAMS,s.team2)),f=u.exists()?u.data():{name:s.team1},m=h.exists()?h.data():{name:s.team2},g=Ie(K,"predictionAnswers"),v=Ge(g,nt("matchId","==",t)),y=await Re(v);console.log(`Found ${y.size} prediction answers to evaluate`);const b=mn(K);let _=0;const w={};for(const S of y.docs){const N=S.data(),{userId:j,questionId:D,answer:T}=N;w[j]?w[j].totalPredictions++:w[j]={totalPoints:0,correctPredictions:0,totalPredictions:1};const I=D.toLowerCase().replace(/\s+/g,"-");let C=n.predictionResults[D]||n.predictionResults[I]||n.predictionResults[`${t}-${I}`];if(C===void 0&&(I==="winner"?C=n.winner:I==="top-batsman"?C=n.topBatsmanId:I==="top-bowler"?C=n.topBowlerId:I==="more-sixes"?C=n.moreSixes:I==="highest-total"&&(C=(e=n.highestTotal)==null?void 0:e.toString())),C===void 0){console.log(`No correct answer found for question: ${D}, skipping evaluation`);continue}const R=c.get(I)||c.get(D)||c.get(D.toLowerCase())||{id:D,points:10,negativePoints:0,type:"unknown"},M=R.points||10,P=R.negativePoints||0,A=R.type||I;console.log(`Evaluating question: ${A} (ID: ${D})`),console.log(`Points for correct answer: ${M}, negative points: ${P}`),console.log(`User answer: ${T}, Correct answer: ${C}`);let F=!1;if(A==="winner")F=T===C;else if(A==="topBatsman"){const q=vs(T),G=vs(C);F=q===G}else if(A==="topBowler"){const q=vs(T),G=vs(C);F=q===G}else if(A==="moreSixes")F=T===C;else if(A==="totalSixes"){const q=parseInt((C==null?void 0:C.toString())||"0"),G=T.split("-");if(G.length===2){const O=parseInt(G[0]),L=parseInt(G[1]);F=q>=O&&q<=L,console.log(`Total sixes evaluation: User predicted ${T} range, Actual sixes: ${q}, IsCorrect: ${F}`)}else console.log(`Invalid total sixes answer format: ${T}`),F=!1}else if(A==="highestTotal"){let q=!1;if(typeof C=="number"||!isNaN(parseInt(C)))q=parseInt((C==null?void 0:C.toString())||"0")>350;else if(typeof C=="string"){const L=C.toLowerCase();q=L==="yes"||L==="true"}const G=T.toLowerCase(),O=G==="yes"||G==="true";F=O===q,console.log(`Highest total evaluation: User predicted exceed: ${O}, Actual exceeded: ${q}, IsCorrect: ${F}`)}else F=T===C;const Y=F?M:-P;b.update(S.ref,{isCorrect:F,pointsEarned:Y,evaluatedAt:hn(),updatedAt:hn()}),_++,w[j].totalPoints+=Y,F&&w[j].correctPredictions++,console.log(`Evaluated prediction for user ${j}: Question: ${D}, IsCorrect: ${F}, Points: ${Y}`)}if(_>0){await b.commit(),console.log(`Updated ${_} predictions`);const S=be(K,Te.MATCH_RESULTS,n.id);await Co(S,{isEvaluated:!0,evaluatedAt:hn()}),await QW(t,w);for(const N of Object.keys(w))await Md(N,t)}console.log("Prediction evaluation completed successfully")}catch(n){throw console.error("Error evaluating predictions:",n),n}},QW=async(t,e)=>{try{const n=Ie(K,"leaderboards"),r=Ge(n,nt("matchId","==",t),nt("type","==","match")),s=await Re(r);let i;if(s.empty){const l=be(n);i=l.id,await tr(l,{id:i,matchId:t,type:"match",title:`Match ${t} Leaderboard`,createdAt:hn(),updatedAt:hn()})}else i=s.docs[0].id;const o=mn(K);for(const[l,c]of Object.entries(e))if(c.totalPoints>0){const u=await Ft(be(K,"users",l));if(u.exists()){const h=u.data(),f=be(K,"leaderboards",i,"entries",l);o.set(f,{userId:l,displayName:h.displayName||"Anonymous User",photoURL:h.photoURL,points:c.totalPoints,correctPredictions:c.correctPredictions,totalPredictions:c.totalPredictions,accuracy:c.totalPredictions>0?Math.round(c.correctPredictions/c.totalPredictions*100):0,updatedAt:hn()},{merge:!0})}}return await o.commit(),console.log(`Updated leaderboard for match ${t}`),i}catch(n){throw console.error("Error creating match leaderboard:",n),n}},$j=async(t,e,n,r)=>{try{const s=be(K,Te.MATCHES,t);await Co(s,{...n,...GW()}),await Fj(t,e,r)}catch(s){throw console.error("Error updating match with results:",s),s}},Uj=async t=>{try{const e=await yh(t);if(e){const n=be(K,Te.MATCH_RESULTS,e.id);await Nb(n),console.log(`Match result deleted for match: ${t}`)}else console.log(`No match result found for match: ${t}`)}catch(e){throw console.error("Error resetting match result:",e),e}},Bj=async t=>{try{const e=Ie(K,"predictionAnswers"),n=Ge(e,nt("matchId","==",t)),r=await Re(n);if(r.empty){console.log(`No prediction answers found for match: ${t}`);return}const s={};r.forEach(h=>{const f=h.data(),m=f.userId;if(f.isCorrect!==void 0&&f.pointsEarned!==void 0){s[m]||(s[m]={pointsToDeduct:0,correctToDeduct:0,totalToDeduct:0});const g=f.pointsEarned||0;s[m].pointsToDeduct+=g,f.isCorrect&&(s[m].correctToDeduct+=1),s[m].totalToDeduct+=1}});const i=mn(K);let o=0;if(r.forEach(h=>{i.delete(h.ref),o++,o>=500&&(i.commit(),o=0)}),o>0&&await i.commit(),Object.keys(s).length>0){const h=mn(K);for(const[f,m]of Object.entries(s)){const g=be(K,"users",f),v=await Ft(g);if(v.exists()){const y=v.data(),b=Math.max(0,(y.totalPoints||0)-m.pointsToDeduct),_=Math.max(0,(y.weeklyPoints||0)-m.pointsToDeduct),w=Math.max(0,(y.correctPredictions||0)-m.correctToDeduct),S=Math.max(0,(y.totalPredictions||0)-m.totalToDeduct),N=S>0?Math.round(w/S*100):0;h.update(g,{totalPoints:b,weeklyPoints:_,correctPredictions:w,totalPredictions:S,overallAccuracy:N,updatedAt:hn()}),console.log(`Updating user ${f} stats: deducting ${m.pointsToDeduct} points, ${m.correctToDeduct} correct predictions, ${m.totalToDeduct} total predictions`)}}await h.commit(),console.log(`Updating global leaderboard for ${Object.keys(s).length} users`);for(const f of Object.keys(s))try{await Md(f,t),console.log(`Updated global leaderboard for user ${f}`)}catch(m){console.error(`Error updating global leaderboard for user ${f}:`,m)}}const l=Ie(K,"leaderboards"),c=Ge(l,nt("matchId","==",t),nt("type","==","match")),u=await Re(c);if(!u.empty){const h=u.docs[0].id,f=Ie(K,"leaderboards",h,"entries"),m=await Re(f);if(!m.empty){const g=mn(K);let v=0;m.forEach(y=>{g.delete(y.ref),v++,v>=500&&(g.commit(),v=0)}),v>0&&await g.commit()}await Nb(be(K,"leaderboards",h))}console.log(`Reset completed for match: ${t}`)}catch(e){throw console.error("Error resetting match predictions:",e),e}},Md=async(t,e)=>{var n,r;try{const s=be(K,Te.USERS,t),i=await Ft(s);if(!i.exists()){console.error(`User ${t} not found`);return}const o=Ge(Ie(K,Te.ANSWERS),nt("userId","==",t)),l=await Re(o);let c=0,u=0,h=0;const f=new Set;l.forEach(v=>{const y=v.data();c+=y.pointsEarned||0,y.isCorrect&&u++,h++,y.matchId&&f.add(y.matchId)});const m=h>0?u/h*100:0,g=be(K,Te.GLOBAL_LEADERBOARD,t);await tr(g,{userId:t,displayName:((n=i.data())==null?void 0:n.displayName)||"Anonymous User",photoURL:(r=i.data())==null?void 0:r.photoURL,totalPoints:c,correctPredictions:u,totalPredictions:h,accuracy:m,lastUpdated:hn(),matchesPlayed:f.size},{merge:!0})}catch(s){throw console.error("Error updating global leaderboard:",s),s}},zj=async()=>{try{console.log("Checking for existing questions...");const t=Ie(K,Te.QUESTIONS);if((await Re(t)).docs.some(i=>{const o=i.data();return o.type&&["winner","topBatsman","topBowler","highestTotal","moreSixes","totalSixes"].includes(o.type)}))return console.log("Standard questions already exist, skipping seed operation"),!1;console.log("No standard questions found, seeding default questions...");const r=[{id:"winner",text:"Which team will win this match?",type:"winner",points:10,negativePoints:3,isActive:!0},{id:"top-batsman",text:"Who will be the top batsman in this match?",type:"topBatsman",points:15,negativePoints:5,isActive:!0},{id:"top-bowler",text:"Who will be the top bowler in this match?",type:"topBowler",points:15,negativePoints:5,isActive:!0},{id:"highest-total",text:"Will the match total exceed 350 runs?",type:"highestTotal",points:10,negativePoints:3,isActive:!0},{id:"more-sixes",text:"Which team will hit more sixes?",type:"moreSixes",points:10,negativePoints:3,isActive:!0},{id:"total-sixes",text:"How many sixes will be hit in this match?",type:"totalSixes",options:[{id:"range1",value:"12-17",label:"12-17 sixes"},{id:"range2",value:"17-22",label:"17-22 sixes"},{id:"range3",value:"22-37",label:"22-37 sixes"},{id:"range4",value:"37-42",label:"37-42 sixes"}],points:15,negativePoints:5,isActive:!0}],s=mn(K);return r.forEach(i=>{const o=be(K,Te.QUESTIONS,i.id);s.set(o,{...i,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}),await s.commit(),console.log("Successfully seeded standard questions"),!0}catch(t){return console.error("Error seeding standard questions:",t),!1}},YW=Object.freeze(Object.defineProperty({__proto__:null,COLLECTIONS:Te,createMatch:Oj,createTimestamps:Cb,evaluateMatchPredictions:$0,getMatch:Mj,getMatchResult:yh,getMatches:Ab,getSquad:F0,getSquads:Lj,getUpcomingMatches:Dj,resetMatchPredictions:Bj,resetMatchResult:Uj,saveMatchResult:Fj,seedInitialData:Vj,seedQuestionsIfNeeded:xg,seedStandardQuestionsIfNeeded:zj,standardizePlayerName:vs,updateGlobalLeaderboard:Md,updateMatchWithResults:$j},Symbol.toStringTag,{value:"Module"}));let Ya=null,Nr=null,K=null;const XW=new Vs,JW=new Ls;async function ZW(){try{if(Ya)return{app:Ya,auth:Nr,db:K};console.log("Initializing Firebase with config from Azure Key Vault...");const t=await KW();return Ya=kP(t),Nr=yz(Ya),K=DW(Ya),K&&(MW(K).then(()=>{console.log("Firestore persistence enabled")}).catch(e=>{console.error("Error enabling Firestore persistence:",e),e.code==="failed-precondition"?console.warn("Multiple tabs open, persistence can only be enabled in one tab at a time."):e.code==="unimplemented"&&console.warn("The current browser does not support persistence.")}),zj().then(e=>{console.log(e?"Standard questions seeded successfully":"Standard questions already exist, no seeding needed")}).catch(e=>{console.error("Error seeding standard questions:",e)})),{app:Ya,auth:Nr,db:K}}catch(t){throw console.error("Failed to initialize Firebase:",t),t}}const qj=p.createContext(null),kn=()=>{const t=p.useContext(qj);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},e7=({children:t})=>{const[e,n]=p.useState(null),[r,s]=p.useState(!0),i=async m=>{var y;const g=be(K,Te.USERS,m.uid),v=await Ft(g);v.exists()?await tr(g,{displayName:m.displayName||v.data().displayName,photoURL:m.photoURL||v.data().photoURL,email:m.email,updatedAt:new Date().toISOString()},{merge:!0}):await tr(g,{uid:m.uid,email:m.email,displayName:m.displayName||((y=m.email)==null?void 0:y.split("@")[0])||"Anonymous User",photoURL:m.photoURL,role:"user",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})},o=(m,g)=>r9(Nr,m,g).then(async v=>(await i(v.user),v.user)),l=(m,g)=>s9(Nr,m,g).then(async v=>(await i(v.user),v.user)),c=()=>a9(Nr),u=()=>hS(Nr,XW).then(async m=>(await i(m.user),m.user)),h=()=>hS(Nr,JW).then(async m=>(await i(m.user),m.user));p.useEffect(()=>oR(Nr,async g=>{g&&await i(g),n(g),s(!1)}),[]);const f={currentUser:e,loading:r,signup:o,login:l,logout:c,googleSignIn:u,facebookSignIn:h};return a.jsx(qj.Provider,{value:f,children:t})},U0={enableLogging:!0,lastUpdated:new Date().toISOString()};let al={...U0},UI=!1;const Os={log:console.log,warn:console.warn,error:console.error,info:console.info,debug:console.debug},Wj=async()=>{if(!UI)try{const t=be(K,Te.SYSTEM_SETTINGS,"loggingConfig"),e=await Ft(t);e.exists()?al=e.data():(await tr(t,U0),al={...U0}),Qu(t,n=>{if(n.exists()){const r=n.data();al=r,BI(r.enableLogging)}}),BI(al.enableLogging),UI=!0,al.enableLogging&&Os.info("Logging control system initialized")}catch(t){Os.error("Error initializing logging control:",t)}},t7=async t=>{try{const e=be(K,Te.SYSTEM_SETTINGS,"loggingConfig");return await tr(e,{enableLogging:t,lastUpdated:new Date().toISOString()}),!0}catch(e){return Os.error("Error updating logging settings:",e),!1}},BI=t=>{t?(console.log=Os.log,console.warn=Os.warn,console.error=Os.error,console.info=Os.info,console.debug=Os.debug):(console.log=()=>{},console.warn=()=>{},console.info=()=>{},console.debug=()=>{},console.error=Os.error)},n7=()=>al.enableLogging,r7=Qd("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Se=p.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?da:"button";return a.jsx(o,{className:_e(r7({variant:e,size:n,className:t})),ref:i,...s})});Se.displayName="Button";var s7=p.createContext(void 0);function Oc(t){const e=p.useContext(s7);return t||e||"ltr"}var $y=0;function Hj(){p.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??zI()),document.body.insertAdjacentElement("beforeend",t[1]??zI()),$y++,()=>{$y===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),$y--}},[])}function zI(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Uy="focusScope.autoFocusOnMount",By="focusScope.autoFocusOnUnmount",qI={bubbles:!1,cancelable:!0},i7="FocusScope",Pb=p.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[l,c]=p.useState(null),u=gn(s),h=gn(i),f=p.useRef(null),m=Ze(e,y=>c(y)),g=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let y=function(S){if(g.paused||!l)return;const N=S.target;l.contains(N)?f.current=N:Ti(f.current,{select:!0})},b=function(S){if(g.paused||!l)return;const N=S.relatedTarget;N!==null&&(l.contains(N)||Ti(f.current,{select:!0}))},_=function(S){if(document.activeElement===document.body)for(const j of S)j.removedNodes.length>0&&Ti(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",b);const w=new MutationObserver(_);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",b),w.disconnect()}}},[r,l,g.paused]),p.useEffect(()=>{if(l){HI.add(g);const y=document.activeElement;if(!l.contains(y)){const _=new CustomEvent(Uy,qI);l.addEventListener(Uy,u),l.dispatchEvent(_),_.defaultPrevented||(o7(d7(Kj(l)),{select:!0}),document.activeElement===y&&Ti(l))}return()=>{l.removeEventListener(Uy,u),setTimeout(()=>{const _=new CustomEvent(By,qI);l.addEventListener(By,h),l.dispatchEvent(_),_.defaultPrevented||Ti(y??document.body,{select:!0}),l.removeEventListener(By,h),HI.remove(g)},0)}}},[l,u,h,g]);const v=p.useCallback(y=>{if(!n&&!r||g.paused)return;const b=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,_=document.activeElement;if(b&&_){const w=y.currentTarget,[S,N]=a7(w);S&&N?!y.shiftKey&&_===N?(y.preventDefault(),n&&Ti(S,{select:!0})):y.shiftKey&&_===S&&(y.preventDefault(),n&&Ti(N,{select:!0})):_===w&&y.preventDefault()}},[n,r,g.paused]);return a.jsx(Ce.div,{tabIndex:-1,...o,ref:m,onKeyDown:v})});Pb.displayName=i7;function o7(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Ti(r,{select:e}),document.activeElement!==n)return}function a7(t){const e=Kj(t),n=WI(e,t),r=WI(e.reverse(),t);return[n,r]}function Kj(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function WI(t,e){for(const n of t)if(!l7(n,{upTo:e}))return n}function l7(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function c7(t){return t instanceof HTMLInputElement&&"select"in t}function Ti(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&c7(t)&&e&&t.select()}}var HI=u7();function u7(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=KI(t,e),t.unshift(e)},remove(e){var n;t=KI(t,e),(n=t[0])==null||n.resume()}}}function KI(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function d7(t){return t.filter(e=>e.tagName!=="A")}function h7(t,e=[]){let n=[];function r(i,o){const l=p.createContext(o),c=n.length;n=[...n,o];function u(f){const{scope:m,children:g,...v}=f,y=(m==null?void 0:m[t][c])||l,b=p.useMemo(()=>v,Object.values(v));return a.jsx(y.Provider,{value:b,children:g})}function h(f,m){const g=(m==null?void 0:m[t][c])||l,v=p.useContext(g);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return u.displayName=i+"Provider",[u,h]}const s=()=>{const i=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,f7(s,...e)]}function f7(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var zy="rovingFocusGroup.onEntryFocus",m7={bubbles:!1,cancelable:!0},wg="RovingFocusGroup",[B0,Gj,p7]=Hd(wg),[g7,Lc]=h7(wg,[p7]),[y7,v7]=g7(wg),Qj=p.forwardRef((t,e)=>a.jsx(B0.Provider,{scope:t.__scopeRovingFocusGroup,children:a.jsx(B0.Slot,{scope:t.__scopeRovingFocusGroup,children:a.jsx(x7,{...t,ref:e})})}));Qj.displayName=wg;var x7=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...f}=t,m=p.useRef(null),g=Ze(e,m),v=Oc(i),[y=null,b]=ns({prop:o,defaultProp:l,onChange:c}),[_,w]=p.useState(!1),S=gn(u),N=Gj(n),j=p.useRef(!1),[D,T]=p.useState(0);return p.useEffect(()=>{const I=m.current;if(I)return I.addEventListener(zy,S),()=>I.removeEventListener(zy,S)},[S]),a.jsx(y7,{scope:n,orientation:r,dir:v,loop:s,currentTabStopId:y,onItemFocus:p.useCallback(I=>b(I),[b]),onItemShiftTab:p.useCallback(()=>w(!0),[]),onFocusableItemAdd:p.useCallback(()=>T(I=>I+1),[]),onFocusableItemRemove:p.useCallback(()=>T(I=>I-1),[]),children:a.jsx(Ce.div,{tabIndex:_||D===0?-1:0,"data-orientation":r,...f,ref:g,style:{outline:"none",...t.style},onMouseDown:de(t.onMouseDown,()=>{j.current=!0}),onFocus:de(t.onFocus,I=>{const C=!j.current;if(I.target===I.currentTarget&&C&&!_){const R=new CustomEvent(zy,m7);if(I.currentTarget.dispatchEvent(R),!R.defaultPrevented){const M=N().filter(q=>q.focusable),P=M.find(q=>q.active),A=M.find(q=>q.id===y),Y=[P,A,...M].filter(Boolean).map(q=>q.ref.current);Jj(Y,h)}}j.current=!1}),onBlur:de(t.onBlur,()=>w(!1))})})}),Yj="RovingFocusGroupItem",Xj=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...o}=t,l=Js(),c=i||l,u=v7(Yj,n),h=u.currentTabStopId===c,f=Gj(n),{onFocusableItemAdd:m,onFocusableItemRemove:g}=u;return p.useEffect(()=>{if(r)return m(),()=>g()},[r,m,g]),a.jsx(B0.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:a.jsx(Ce.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:de(t.onMouseDown,v=>{r?u.onItemFocus(c):v.preventDefault()}),onFocus:de(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:de(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const y=_7(v,u.orientation,u.dir);if(y!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let _=f().filter(w=>w.focusable).map(w=>w.ref.current);if(y==="last")_.reverse();else if(y==="prev"||y==="next"){y==="prev"&&_.reverse();const w=_.indexOf(v.currentTarget);_=u.loop?E7(_,w+1):_.slice(w+1)}setTimeout(()=>Jj(_))}})})})});Xj.displayName=Yj;var w7={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function b7(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function _7(t,e,n){const r=b7(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return w7[r]}function Jj(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function E7(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Rb=Qj,jb=Xj,S7=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Xa=new WeakMap,vf=new WeakMap,xf={},qy=0,Zj=function(t){return t&&(t.host||Zj(t.parentNode))},I7=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=Zj(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},T7=function(t,e,n,r){var s=I7(e,Array.isArray(t)?t:[t]);xf[n]||(xf[n]=new WeakMap);var i=xf[n],o=[],l=new Set,c=new Set(s),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};s.forEach(u);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))h(m);else try{var g=m.getAttribute(r),v=g!==null&&g!=="false",y=(Xa.get(m)||0)+1,b=(i.get(m)||0)+1;Xa.set(m,y),i.set(m,b),o.push(m),y===1&&v&&vf.set(m,!0),b===1&&m.setAttribute(n,"true"),v||m.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",m,_)}})};return h(e),l.clear(),qy++,function(){o.forEach(function(f){var m=Xa.get(f)-1,g=i.get(f)-1;Xa.set(f,m),i.set(f,g),m||(vf.has(f)||f.removeAttribute(r),vf.delete(f)),g||f.removeAttribute(n)}),qy--,qy||(Xa=new WeakMap,Xa=new WeakMap,vf=new WeakMap,xf={})}},ek=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=S7(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),T7(r,s,n,"aria-hidden")):function(){return null}},Zf="right-scroll-bar-position",em="width-before-scroll-bar",N7="with-scroll-bars-hidden",C7="--removed-body-scroll-bar-size";function Wy(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function A7(t,e){var n=p.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var P7=typeof window<"u"?p.useLayoutEffect:p.useEffect,GI=new WeakMap;function R7(t,e){var n=A7(null,function(r){return t.forEach(function(s){return Wy(s,r)})});return P7(function(){var r=GI.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(l){i.has(l)||Wy(l,null)}),i.forEach(function(l){s.has(l)||Wy(l,o)})}GI.set(n,t)},[t]),n}function j7(t){return t}function k7(t,e){e===void 0&&(e=j7);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var c=function(){var h=o;o=[],h.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(h){o.push(h),u()},filter:function(h){return o=o.filter(h),n}}}};return s}function D7(t){t===void 0&&(t={});var e=k7(null);return e.options=ps({async:!0,ssr:!1},t),e}var tk=function(t){var e=t.sideCar,n=Zd(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,ps({},n))};tk.isSideCarExport=!0;function M7(t,e){return t.useMedium(e),tk}var nk=D7(),Hy=function(){},bg=p.forwardRef(function(t,e){var n=p.useRef(null),r=p.useState({onScrollCapture:Hy,onWheelCapture:Hy,onTouchMoveCapture:Hy}),s=r[0],i=r[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,h=t.enabled,f=t.shards,m=t.sideCar,g=t.noIsolation,v=t.inert,y=t.allowPinchZoom,b=t.as,_=b===void 0?"div":b,w=t.gapMode,S=Zd(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=m,j=R7([n,e]),D=ps(ps({},S),s);return p.createElement(p.Fragment,null,h&&p.createElement(N,{sideCar:nk,removeScrollBar:u,shards:f,noIsolation:g,inert:v,setCallbacks:i,allowPinchZoom:!!y,lockRef:n,gapMode:w}),o?p.cloneElement(p.Children.only(l),ps(ps({},D),{ref:j})):p.createElement(_,ps({},D,{className:c,ref:j}),l))});bg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};bg.classNames={fullWidth:em,zeroRight:Zf};var O7=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function L7(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=O7();return e&&t.setAttribute("nonce",e),t}function V7(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function F7(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var $7=function(){var t=0,e=null;return{add:function(n){t==0&&(e=L7())&&(V7(e,n),F7(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},U7=function(){var t=$7();return function(e,n){p.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},rk=function(){var t=U7(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},B7={left:0,top:0,right:0,gap:0},Ky=function(t){return parseInt(t||"",10)||0},z7=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Ky(n),Ky(r),Ky(s)]},q7=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return B7;var e=z7(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},W7=rk(),Ll="data-scroll-locked",H7=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(N7,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Ll,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Zf,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(em,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Zf," .").concat(Zf,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(em," .").concat(em,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ll,`] {
    `).concat(C7,": ").concat(l,`px;
  }
`)},QI=function(){var t=parseInt(document.body.getAttribute(Ll)||"0",10);return isFinite(t)?t:0},K7=function(){p.useEffect(function(){return document.body.setAttribute(Ll,(QI()+1).toString()),function(){var t=QI()-1;t<=0?document.body.removeAttribute(Ll):document.body.setAttribute(Ll,t.toString())}},[])},G7=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;K7();var i=p.useMemo(function(){return q7(s)},[s]);return p.createElement(W7,{styles:H7(i,!e,s,n?"":"!important")})},z0=!1;if(typeof window<"u")try{var wf=Object.defineProperty({},"passive",{get:function(){return z0=!0,!0}});window.addEventListener("test",wf,wf),window.removeEventListener("test",wf,wf)}catch{z0=!1}var Ja=z0?{passive:!1}:!1,Q7=function(t){return t.tagName==="TEXTAREA"},sk=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Q7(t)&&n[e]==="visible")},Y7=function(t){return sk(t,"overflowY")},X7=function(t){return sk(t,"overflowX")},YI=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=ik(t,r);if(s){var i=ok(t,r),o=i[1],l=i[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},J7=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Z7=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},ik=function(t,e){return t==="v"?Y7(e):X7(e)},ok=function(t,e){return t==="v"?J7(e):Z7(e)},eH=function(t,e){return t==="h"&&e==="rtl"?-1:1},tH=function(t,e,n,r,s){var i=eH(t,window.getComputedStyle(e).direction),o=i*r,l=n.target,c=e.contains(l),u=!1,h=o>0,f=0,m=0;do{var g=ok(t,l),v=g[0],y=g[1],b=g[2],_=y-b-i*v;(v||_)&&ik(t,l)&&(f+=_,m+=v),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&(Math.abs(f)<1||!s)||!h&&(Math.abs(m)<1||!s))&&(u=!0),u},bf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},XI=function(t){return[t.deltaX,t.deltaY]},JI=function(t){return t&&"current"in t?t.current:t},nH=function(t,e){return t[0]===e[0]&&t[1]===e[1]},rH=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},sH=0,Za=[];function iH(t){var e=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),s=p.useState(sH++)[0],i=p.useState(rk)[0],o=p.useRef(t);p.useEffect(function(){o.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var y=i6([t.lockRef.current],(t.shards||[]).map(JI),!0).filter(Boolean);return y.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=p.useCallback(function(y,b){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var _=bf(y),w=n.current,S="deltaX"in y?y.deltaX:w[0]-_[0],N="deltaY"in y?y.deltaY:w[1]-_[1],j,D=y.target,T=Math.abs(S)>Math.abs(N)?"h":"v";if("touches"in y&&T==="h"&&D.type==="range")return!1;var I=YI(T,D);if(!I)return!0;if(I?j=T:(j=T==="v"?"h":"v",I=YI(T,D)),!I)return!1;if(!r.current&&"changedTouches"in y&&(S||N)&&(r.current=j),!j)return!0;var C=r.current||j;return tH(C,b,y,C==="h"?S:N,!0)},[]),c=p.useCallback(function(y){var b=y;if(!(!Za.length||Za[Za.length-1]!==i)){var _="deltaY"in b?XI(b):bf(b),w=e.current.filter(function(j){return j.name===b.type&&(j.target===b.target||b.target===j.shadowParent)&&nH(j.delta,_)})[0];if(w&&w.should){b.cancelable&&b.preventDefault();return}if(!w){var S=(o.current.shards||[]).map(JI).filter(Boolean).filter(function(j){return j.contains(b.target)}),N=S.length>0?l(b,S[0]):!o.current.noIsolation;N&&b.cancelable&&b.preventDefault()}}},[]),u=p.useCallback(function(y,b,_,w){var S={name:y,delta:b,target:_,should:w,shadowParent:oH(_)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(N){return N!==S})},1)},[]),h=p.useCallback(function(y){n.current=bf(y),r.current=void 0},[]),f=p.useCallback(function(y){u(y.type,XI(y),y.target,l(y,t.lockRef.current))},[]),m=p.useCallback(function(y){u(y.type,bf(y),y.target,l(y,t.lockRef.current))},[]);p.useEffect(function(){return Za.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Ja),document.addEventListener("touchmove",c,Ja),document.addEventListener("touchstart",h,Ja),function(){Za=Za.filter(function(y){return y!==i}),document.removeEventListener("wheel",c,Ja),document.removeEventListener("touchmove",c,Ja),document.removeEventListener("touchstart",h,Ja)}},[]);var g=t.removeScrollBar,v=t.inert;return p.createElement(p.Fragment,null,v?p.createElement(i,{styles:rH(s)}):null,g?p.createElement(G7,{gapMode:t.gapMode}):null)}function oH(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const aH=M7(nk,iH);var kb=p.forwardRef(function(t,e){return p.createElement(bg,ps({},t,{ref:e,sideCar:aH}))});kb.classNames=bg.classNames;var q0=["Enter"," "],lH=["ArrowDown","PageUp","Home"],ak=["ArrowUp","PageDown","End"],cH=[...lH,...ak],uH={ltr:[...q0,"ArrowRight"],rtl:[...q0,"ArrowLeft"]},dH={ltr:["ArrowLeft"],rtl:["ArrowRight"]},vh="Menu",[Od,hH,fH]=Hd(vh),[Oa,lk]=$r(vh,[fH,Nc,Lc]),_g=Nc(),ck=Lc(),[mH,La]=Oa(vh),[pH,xh]=Oa(vh),uk=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:i,modal:o=!0}=t,l=_g(e),[c,u]=p.useState(null),h=p.useRef(!1),f=gn(i),m=Oc(s);return p.useEffect(()=>{const g=()=>{h.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>h.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),a.jsx(XA,{...l,children:a.jsx(mH,{scope:e,open:n,onOpenChange:f,content:c,onContentChange:u,children:a.jsx(pH,{scope:e,onClose:p.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:h,dir:m,modal:o,children:r})})})};uk.displayName=vh;var gH="MenuAnchor",Db=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=_g(n);return a.jsx(cw,{...s,...r,ref:e})});Db.displayName=gH;var Mb="MenuPortal",[yH,dk]=Oa(Mb,{forceMount:void 0}),hk=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,i=La(Mb,e);return a.jsx(yH,{scope:e,forceMount:n,children:a.jsx(Ns,{present:n||i.open,children:a.jsx(kp,{asChild:!0,container:s,children:r})})})};hk.displayName=Mb;var Or="MenuContent",[vH,Ob]=Oa(Or),fk=p.forwardRef((t,e)=>{const n=dk(Or,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=La(Or,t.__scopeMenu),o=xh(Or,t.__scopeMenu);return a.jsx(Od.Provider,{scope:t.__scopeMenu,children:a.jsx(Ns,{present:r||i.open,children:a.jsx(Od.Slot,{scope:t.__scopeMenu,children:o.modal?a.jsx(xH,{...s,ref:e}):a.jsx(wH,{...s,ref:e})})})})}),xH=p.forwardRef((t,e)=>{const n=La(Or,t.__scopeMenu),r=p.useRef(null),s=Ze(e,r);return p.useEffect(()=>{const i=r.current;if(i)return ek(i)},[]),a.jsx(Lb,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:de(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),wH=p.forwardRef((t,e)=>{const n=La(Or,t.__scopeMenu);return a.jsx(Lb,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Lb=p.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:m,onDismiss:g,disableOutsideScroll:v,...y}=t,b=La(Or,n),_=xh(Or,n),w=_g(n),S=ck(n),N=hH(n),[j,D]=p.useState(null),T=p.useRef(null),I=Ze(e,T,b.onContentChange),C=p.useRef(0),R=p.useRef(""),M=p.useRef(0),P=p.useRef(null),A=p.useRef("right"),F=p.useRef(0),Y=v?kb:p.Fragment,q=v?{as:da,allowPinchZoom:!0}:void 0,G=L=>{var B,ne;const X=R.current+L,Q=N().filter(ae=>!ae.disabled),te=document.activeElement,Z=(B=Q.find(ae=>ae.ref.current===te))==null?void 0:B.textValue,xe=Q.map(ae=>ae.textValue),Oe=jH(xe,X,Z),V=(ne=Q.find(ae=>ae.textValue===Oe))==null?void 0:ne.ref.current;(function ae(W){R.current=W,window.clearTimeout(C.current),W!==""&&(C.current=window.setTimeout(()=>ae(""),1e3))})(X),V&&setTimeout(()=>V.focus())};p.useEffect(()=>()=>window.clearTimeout(C.current),[]),Hj();const O=p.useCallback(L=>{var Q,te;return A.current===((Q=P.current)==null?void 0:Q.side)&&DH(L,(te=P.current)==null?void 0:te.area)},[]);return a.jsx(vH,{scope:n,searchRef:R,onItemEnter:p.useCallback(L=>{O(L)&&L.preventDefault()},[O]),onItemLeave:p.useCallback(L=>{var X;O(L)||((X=T.current)==null||X.focus(),D(null))},[O]),onTriggerLeave:p.useCallback(L=>{O(L)&&L.preventDefault()},[O]),pointerGraceTimerRef:M,onPointerGraceIntentChange:p.useCallback(L=>{P.current=L},[]),children:a.jsx(Y,{...q,children:a.jsx(Pb,{asChild:!0,trapped:s,onMountAutoFocus:de(i,L=>{var X;L.preventDefault(),(X=T.current)==null||X.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:a.jsx(Kd,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:m,onDismiss:g,children:a.jsx(Rb,{asChild:!0,...S,dir:_.dir,orientation:"vertical",loop:r,currentTabStopId:j,onCurrentTabStopIdChange:D,onEntryFocus:de(c,L=>{_.isUsingKeyboardRef.current||L.preventDefault()}),preventScrollOnEntryFocus:!0,children:a.jsx(uw,{role:"menu","aria-orientation":"vertical","data-state":Ak(b.open),"data-radix-menu-content":"",dir:_.dir,...w,...y,ref:I,style:{outline:"none",...y.style},onKeyDown:de(y.onKeyDown,L=>{const Q=L.target.closest("[data-radix-menu-content]")===L.currentTarget,te=L.ctrlKey||L.altKey||L.metaKey,Z=L.key.length===1;Q&&(L.key==="Tab"&&L.preventDefault(),!te&&Z&&G(L.key));const xe=T.current;if(L.target!==xe||!cH.includes(L.key))return;L.preventDefault();const V=N().filter(B=>!B.disabled).map(B=>B.ref.current);ak.includes(L.key)&&V.reverse(),PH(V)}),onBlur:de(t.onBlur,L=>{L.currentTarget.contains(L.target)||(window.clearTimeout(C.current),R.current="")}),onPointerMove:de(t.onPointerMove,Ld(L=>{const X=L.target,Q=F.current!==L.clientX;if(L.currentTarget.contains(X)&&Q){const te=L.clientX>F.current?"right":"left";A.current=te,F.current=L.clientX}}))})})})})})})});fk.displayName=Or;var bH="MenuGroup",Vb=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return a.jsx(Ce.div,{role:"group",...r,ref:e})});Vb.displayName=bH;var _H="MenuLabel",mk=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return a.jsx(Ce.div,{...r,ref:e})});mk.displayName=_H;var ap="MenuItem",ZI="menu.itemSelect",Eg=p.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,i=p.useRef(null),o=xh(ap,t.__scopeMenu),l=Ob(ap,t.__scopeMenu),c=Ze(e,i),u=p.useRef(!1),h=()=>{const f=i.current;if(!n&&f){const m=new CustomEvent(ZI,{bubbles:!0,cancelable:!0});f.addEventListener(ZI,g=>r==null?void 0:r(g),{once:!0}),Kx(f,m),m.defaultPrevented?u.current=!1:o.onClose()}};return a.jsx(pk,{...s,ref:c,disabled:n,onClick:de(t.onClick,h),onPointerDown:f=>{var m;(m=t.onPointerDown)==null||m.call(t,f),u.current=!0},onPointerUp:de(t.onPointerUp,f=>{var m;u.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:de(t.onKeyDown,f=>{const m=l.searchRef.current!=="";n||m&&f.key===" "||q0.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});Eg.displayName=ap;var pk=p.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=t,o=Ob(ap,n),l=ck(n),c=p.useRef(null),u=Ze(e,c),[h,f]=p.useState(!1),[m,g]=p.useState("");return p.useEffect(()=>{const v=c.current;v&&g((v.textContent??"").trim())},[i.children]),a.jsx(Od.ItemSlot,{scope:n,disabled:r,textValue:s??m,children:a.jsx(jb,{asChild:!0,...l,focusable:!r,children:a.jsx(Ce.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:de(t.onPointerMove,Ld(v=>{r?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:de(t.onPointerLeave,Ld(v=>o.onItemLeave(v))),onFocus:de(t.onFocus,()=>f(!0)),onBlur:de(t.onBlur,()=>f(!1))})})})}),EH="MenuCheckboxItem",gk=p.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return a.jsx(bk,{scope:t.__scopeMenu,checked:n,children:a.jsx(Eg,{role:"menuitemcheckbox","aria-checked":lp(n)?"mixed":n,...s,ref:e,"data-state":$b(n),onSelect:de(s.onSelect,()=>r==null?void 0:r(lp(n)?!0:!n),{checkForDefaultPrevented:!1})})})});gk.displayName=EH;var yk="MenuRadioGroup",[SH,IH]=Oa(yk,{value:void 0,onValueChange:()=>{}}),vk=p.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,i=gn(r);return a.jsx(SH,{scope:t.__scopeMenu,value:n,onValueChange:i,children:a.jsx(Vb,{...s,ref:e})})});vk.displayName=yk;var xk="MenuRadioItem",wk=p.forwardRef((t,e)=>{const{value:n,...r}=t,s=IH(xk,t.__scopeMenu),i=n===s.value;return a.jsx(bk,{scope:t.__scopeMenu,checked:i,children:a.jsx(Eg,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":$b(i),onSelect:de(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,n)},{checkForDefaultPrevented:!1})})})});wk.displayName=xk;var Fb="MenuItemIndicator",[bk,TH]=Oa(Fb,{checked:!1}),_k=p.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,i=TH(Fb,n);return a.jsx(Ns,{present:r||lp(i.checked)||i.checked===!0,children:a.jsx(Ce.span,{...s,ref:e,"data-state":$b(i.checked)})})});_k.displayName=Fb;var NH="MenuSeparator",Ek=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return a.jsx(Ce.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});Ek.displayName=NH;var CH="MenuArrow",Sk=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=_g(n);return a.jsx(dw,{...s,...r,ref:e})});Sk.displayName=CH;var AH="MenuSub",[TX,Ik]=Oa(AH),Au="MenuSubTrigger",Tk=p.forwardRef((t,e)=>{const n=La(Au,t.__scopeMenu),r=xh(Au,t.__scopeMenu),s=Ik(Au,t.__scopeMenu),i=Ob(Au,t.__scopeMenu),o=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:t.__scopeMenu},h=p.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return p.useEffect(()=>h,[h]),p.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),a.jsx(Db,{asChild:!0,...u,children:a.jsx(pk,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":Ak(n.open),...t,ref:jp(e,s.onTriggerChange),onClick:f=>{var m;(m=t.onClick)==null||m.call(t,f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:de(t.onPointerMove,Ld(f=>{i.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),h()},100))})),onPointerLeave:de(t.onPointerLeave,Ld(f=>{var g,v;h();const m=(g=n.content)==null?void 0:g.getBoundingClientRect();if(m){const y=(v=n.content)==null?void 0:v.dataset.side,b=y==="right",_=b?-5:5,w=m[b?"left":"right"],S=m[b?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+_,y:f.clientY},{x:w,y:m.top},{x:S,y:m.top},{x:S,y:m.bottom},{x:w,y:m.bottom}],side:y}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:de(t.onKeyDown,f=>{var g;const m=i.searchRef.current!=="";t.disabled||m&&f.key===" "||uH[r.dir].includes(f.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),f.preventDefault())})})})});Tk.displayName=Au;var Nk="MenuSubContent",Ck=p.forwardRef((t,e)=>{const n=dk(Or,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=La(Or,t.__scopeMenu),o=xh(Or,t.__scopeMenu),l=Ik(Nk,t.__scopeMenu),c=p.useRef(null),u=Ze(e,c);return a.jsx(Od.Provider,{scope:t.__scopeMenu,children:a.jsx(Ns,{present:r||i.open,children:a.jsx(Od.Slot,{scope:t.__scopeMenu,children:a.jsx(Lb,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var f;o.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:de(t.onFocusOutside,h=>{h.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:de(t.onEscapeKeyDown,h=>{o.onClose(),h.preventDefault()}),onKeyDown:de(t.onKeyDown,h=>{var g;const f=h.currentTarget.contains(h.target),m=dH[o.dir].includes(h.key);f&&m&&(i.onOpenChange(!1),(g=l.trigger)==null||g.focus(),h.preventDefault())})})})})})});Ck.displayName=Nk;function Ak(t){return t?"open":"closed"}function lp(t){return t==="indeterminate"}function $b(t){return lp(t)?"indeterminate":t?"checked":"unchecked"}function PH(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function RH(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function jH(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=RH(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function kH(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i].x,c=e[i].y,u=e[o].x,h=e[o].y;c>r!=h>r&&n<(u-l)*(r-c)/(h-c)+l&&(s=!s)}return s}function DH(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return kH(n,e)}function Ld(t){return e=>e.pointerType==="mouse"?t(e):void 0}var MH=uk,OH=Db,LH=hk,VH=fk,FH=Vb,$H=mk,UH=Eg,BH=gk,zH=vk,qH=wk,WH=_k,HH=Ek,KH=Sk,GH=Tk,QH=Ck,Ub="DropdownMenu",[YH,NX]=$r(Ub,[lk]),Wn=lk(),[XH,Pk]=YH(Ub),Rk=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:o,modal:l=!0}=t,c=Wn(e),u=p.useRef(null),[h=!1,f]=ns({prop:s,defaultProp:i,onChange:o});return a.jsx(XH,{scope:e,triggerId:Js(),triggerRef:u,contentId:Js(),open:h,onOpenChange:f,onOpenToggle:p.useCallback(()=>f(m=>!m),[f]),modal:l,children:a.jsx(MH,{...c,open:h,onOpenChange:f,dir:r,modal:l,children:n})})};Rk.displayName=Ub;var jk="DropdownMenuTrigger",kk=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,i=Pk(jk,n),o=Wn(n);return a.jsx(OH,{asChild:!0,...o,children:a.jsx(Ce.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:jp(e,i.triggerRef),onPointerDown:de(t.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:de(t.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});kk.displayName=jk;var JH="DropdownMenuPortal",Dk=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Wn(e);return a.jsx(LH,{...r,...n})};Dk.displayName=JH;var Mk="DropdownMenuContent",Ok=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Pk(Mk,n),i=Wn(n),o=p.useRef(!1);return a.jsx(VH,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:de(t.onCloseAutoFocus,l=>{var c;o.current||(c=s.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:de(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,h=c.button===2||u;(!s.modal||h)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Ok.displayName=Mk;var ZH="DropdownMenuGroup",eK=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Wn(n);return a.jsx(FH,{...s,...r,ref:e})});eK.displayName=ZH;var tK="DropdownMenuLabel",Lk=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Wn(n);return a.jsx($H,{...s,...r,ref:e})});Lk.displayName=tK;var nK="DropdownMenuItem",Vk=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Wn(n);return a.jsx(UH,{...s,...r,ref:e})});Vk.displayName=nK;var rK="DropdownMenuCheckboxItem",Fk=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Wn(n);return a.jsx(BH,{...s,...r,ref:e})});Fk.displayName=rK;var sK="DropdownMenuRadioGroup",iK=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Wn(n);return a.jsx(zH,{...s,...r,ref:e})});iK.displayName=sK;var oK="DropdownMenuRadioItem",$k=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Wn(n);return a.jsx(qH,{...s,...r,ref:e})});$k.displayName=oK;var aK="DropdownMenuItemIndicator",Uk=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Wn(n);return a.jsx(WH,{...s,...r,ref:e})});Uk.displayName=aK;var lK="DropdownMenuSeparator",Bk=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Wn(n);return a.jsx(HH,{...s,...r,ref:e})});Bk.displayName=lK;var cK="DropdownMenuArrow",uK=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Wn(n);return a.jsx(KH,{...s,...r,ref:e})});uK.displayName=cK;var dK="DropdownMenuSubTrigger",zk=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Wn(n);return a.jsx(GH,{...s,...r,ref:e})});zk.displayName=dK;var hK="DropdownMenuSubContent",qk=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Wn(n);return a.jsx(QH,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});qk.displayName=hK;var fK=Rk,mK=kk,pK=Dk,Wk=Ok,Hk=Lk,Kk=Vk,Gk=Fk,Qk=$k,Yk=Uk,Xk=Bk,Jk=zk,Zk=qk;const gK=fK,yK=mK,vK=p.forwardRef(({className:t,inset:e,children:n,...r},s)=>a.jsxs(Jk,{ref:s,className:_e("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,a.jsx(Z4,{className:"ml-auto h-4 w-4"})]}));vK.displayName=Jk.displayName;const xK=p.forwardRef(({className:t,...e},n)=>a.jsx(Zk,{ref:n,className:_e("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));xK.displayName=Zk.displayName;const eD=p.forwardRef(({className:t,sideOffset:e=4,...n},r)=>a.jsx(pK,{children:a.jsx(Wk,{ref:r,sideOffset:e,className:_e("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));eD.displayName=Wk.displayName;const W0=p.forwardRef(({className:t,inset:e,...n},r)=>a.jsx(Kk,{ref:r,className:_e("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));W0.displayName=Kk.displayName;const wK=p.forwardRef(({className:t,children:e,checked:n,...r},s)=>a.jsxs(Gk,{ref:s,className:_e("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(Yk,{children:a.jsx(ha,{className:"h-4 w-4"})})}),e]}));wK.displayName=Gk.displayName;const bK=p.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(Qk,{ref:r,className:_e("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(Yk,{children:a.jsx(gA,{className:"h-2 w-2 fill-current"})})}),e]}));bK.displayName=Qk.displayName;const _K=p.forwardRef(({className:t,inset:e,...n},r)=>a.jsx(Hk,{ref:r,className:_e("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));_K.displayName=Hk.displayName;const tD=p.forwardRef(({className:t,...e},n)=>a.jsx(Xk,{ref:n,className:_e("-mx-1 my-1 h-px bg-muted",t),...e}));tD.displayName=Xk.displayName;var Bb="Avatar",[EK,CX]=$r(Bb),[SK,nD]=EK(Bb),rD=p.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=p.useState("idle");return a.jsx(SK,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:a.jsx(Ce.span,{...r,ref:e})})});rD.displayName=Bb;var sD="AvatarImage",iD=p.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,o=nD(sD,n),l=IK(r,i.referrerPolicy),c=gn(u=>{s(u),o.onImageLoadingStatusChange(u)});return Zt(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?a.jsx(Ce.img,{...i,ref:e,src:r}):null});iD.displayName=sD;var oD="AvatarFallback",aD=p.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=nD(oD,n),[o,l]=p.useState(r===void 0);return p.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&i.imageLoadingStatus!=="loaded"?a.jsx(Ce.span,{...s,ref:e}):null});aD.displayName=oD;function IK(t,e){const[n,r]=p.useState("idle");return Zt(()=>{if(!t){r("error");return}let s=!0;const i=new window.Image,o=l=>()=>{s&&r(l)};return r("loading"),i.onload=o("loaded"),i.onerror=o("error"),i.src=t,e&&(i.referrerPolicy=e),()=>{s=!1}},[t,e]),n}var lD=rD,cD=iD,uD=aD;const go=p.forwardRef(({className:t,...e},n)=>a.jsx(lD,{ref:n,className:_e("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));go.displayName=lD.displayName;const yo=p.forwardRef(({className:t,...e},n)=>a.jsx(cD,{ref:n,className:_e("aspect-square h-full w-full",t),...e}));yo.displayName=cD.displayName;const vo=p.forwardRef(({className:t,...e},n)=>a.jsx(uD,{ref:n,className:_e("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));vo.displayName=uD.displayName;const Gy=768;function TK(){const[t,e]=p.useState(void 0);return p.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Gy-1}px)`),r=()=>{e(window.innerWidth<Gy)};return n.addEventListener("change",r),e(window.innerWidth<Gy),()=>n.removeEventListener("change",r)},[]),!!t}const Na=[{id:"1",name:"Mumbai Indians",shortName:"MI",primaryColor:"#004BA0",secondaryColor:"#D1AB3E",logo:"/images/teams/mi.png"},{id:"2",name:"Chennai Super Kings",shortName:"CSK",primaryColor:"#FFFF3C",secondaryColor:"#0081E9",logo:"/images/teams/csk.png"},{id:"3",name:"Royal Challengers Bengaluru",shortName:"RCB",primaryColor:"#EC1C24",secondaryColor:"#000000",logo:"/images/teams/rcb.png"},{id:"4",name:"Kolkata Knight Riders",shortName:"KKR",primaryColor:"#3A225D",secondaryColor:"#F2C000",logo:"/images/teams/kkr.png"},{id:"5",name:"Delhi Capitals",shortName:"DC",primaryColor:"#00008B",secondaryColor:"#EF1B23",logo:"/images/teams/dc.png"},{id:"6",name:"Punjab Kings",shortName:"PBKS",primaryColor:"#ED1B24",secondaryColor:"#A7A9AC",logo:"/images/teams/pbks.png"},{id:"7",name:"Rajasthan Royals",shortName:"RR",primaryColor:"#254AA5",secondaryColor:"#EA1A85",logo:"/images/teams/rr.png"},{id:"8",name:"Sunrisers Hyderabad",shortName:"SRH",primaryColor:"#F7A721",secondaryColor:"#E95E0B",logo:"/images/teams/srh.png"},{id:"9",name:"Gujarat Titans",shortName:"GT",primaryColor:"#1C1C1C",secondaryColor:"#09DBFF",logo:"/images/teams/gt.png"},{id:"10",name:"Lucknow Super Giants",shortName:"LSG",primaryColor:"#A72056",secondaryColor:"#FFDB00",logo:"/images/teams/lsg.png"}],cp=[{id:"1",name:"Rohit Sharma",teamId:"1",role:"Batsman"},{id:"2",name:"Jasprit Bumrah",teamId:"1",role:"Bowler"},{id:"3",name:"MS Dhoni",teamId:"2",role:"Wicket-keeper"},{id:"4",name:"Ravindra Jadeja",teamId:"2",role:"All-rounder"},{id:"5",name:"Virat Kohli",teamId:"3",role:"Batsman"},{id:"6",name:"Faf du Plessis",teamId:"3",role:"Batsman"},{id:"7",name:"Andre Russell",teamId:"4",role:"All-rounder"},{id:"8",name:"Sunil Narine",teamId:"4",role:"All-rounder"},{id:"9",name:"Rishabh Pant",teamId:"5",role:"Wicket-keeper"},{id:"10",name:"Axar Patel",teamId:"5",role:"All-rounder"},{id:"11",name:"KL Rahul",teamId:"6",role:"Batsman"},{id:"12",name:"Arshdeep Singh",teamId:"6",role:"Bowler"},{id:"13",name:"Jos Buttler",teamId:"7",role:"Batsman"},{id:"14",name:"Yuzvendra Chahal",teamId:"7",role:"Bowler"},{id:"15",name:"Bhuvneshwar Kumar",teamId:"8",role:"Bowler"},{id:"16",name:"Heinrich Klaasen",teamId:"8",role:"Wicket-keeper"},{id:"17",name:"Hardik Pandya",teamId:"9",role:"All-rounder"},{id:"18",name:"Rashid Khan",teamId:"9",role:"Bowler"},{id:"19",name:"Nicholas Pooran",teamId:"10",role:"Wicket-keeper"},{id:"20",name:"Krunal Pandya",teamId:"10",role:"All-rounder"}],zi=[{id:"1",team1Id:"4",team2Id:"3",venue:"Eden Gardens, Kolkata",date:"2025-03-22T19:30:00+05:30",status:"upcoming"},{id:"2",team1Id:"8",team2Id:"7",venue:"Rajiv Gandhi International Stadium, Hyderabad",date:"2025-03-23T15:30:00+05:30",status:"upcoming"},{id:"3",team1Id:"2",team2Id:"1",venue:"M.A. Chidambaram Stadium, Chennai",date:"2025-03-23T19:30:00+05:30",status:"upcoming"},{id:"4",team1Id:"5",team2Id:"10",venue:"Arun Jaitley Stadium, Delhi",date:"2025-03-24T19:30:00+05:30",status:"upcoming"},{id:"5",team1Id:"9",team2Id:"6",venue:"Narendra Modi Stadium, Ahmedabad",date:"2025-03-25T19:30:00+05:30",status:"upcoming"},{id:"6",team1Id:"7",team2Id:"4",venue:"Sawai Mansingh Stadium, Jaipur",date:"2025-03-26T19:30:00+05:30",status:"upcoming"},{id:"7",team1Id:"8",team2Id:"10",venue:"Rajiv Gandhi International Stadium, Hyderabad",date:"2025-03-27T19:30:00+05:30",status:"upcoming"},{id:"8",team1Id:"2",team2Id:"3",venue:"M.A. Chidambaram Stadium, Chennai",date:"2025-03-28T19:30:00+05:30",status:"upcoming"},{id:"9",team1Id:"9",team2Id:"1",venue:"Narendra Modi Stadium, Ahmedabad",date:"2025-03-29T15:30:00+05:30",status:"upcoming"},{id:"10",team1Id:"5",team2Id:"8",venue:"Arun Jaitley Stadium, Delhi",date:"2025-03-29T19:30:00+05:30",status:"upcoming"},{id:"11",team1Id:"7",team2Id:"2",venue:"Sawai Mansingh Stadium, Jaipur",date:"2025-03-30T15:30:00+05:30",status:"upcoming"},{id:"12",team1Id:"1",team2Id:"4",venue:"Wankhede Stadium, Mumbai",date:"2025-03-30T19:30:00+05:30",status:"upcoming"},{id:"13",team1Id:"10",team2Id:"6",venue:"Ekana Cricket Stadium, Lucknow",date:"2025-03-31T19:30:00+05:30",status:"upcoming"},{id:"14",team1Id:"3",team2Id:"9",venue:"M. Chinnaswamy Stadium, Bengaluru",date:"2025-04-01T19:30:00+05:30",status:"upcoming"},{id:"15",team1Id:"4",team2Id:"8",venue:"Eden Gardens, Kolkata",date:"2025-04-02T19:30:00+05:30",status:"upcoming"},{id:"16",team1Id:"10",team2Id:"1",venue:"Ekana Cricket Stadium, Lucknow",date:"2025-04-03T19:30:00+05:30",status:"upcoming"},{id:"17",team1Id:"2",team2Id:"5",venue:"M.A. Chidambaram Stadium, Chennai",date:"2025-04-04T19:30:00+05:30",status:"upcoming"},{id:"18",team1Id:"6",team2Id:"7",venue:"Punjab Cricket Association Stadium, Mohali",date:"2025-04-05T15:30:00+05:30",status:"upcoming"},{id:"19",team1Id:"4",team2Id:"10",venue:"Eden Gardens, Kolkata",date:"2025-04-05T19:30:00+05:30",status:"upcoming"},{id:"20",team1Id:"8",team2Id:"9",venue:"Rajiv Gandhi International Stadium, Hyderabad",date:"2025-04-06T15:30:00+05:30",status:"upcoming"},{id:"21",team1Id:"1",team2Id:"3",venue:"Wankhede Stadium, Mumbai",date:"2025-04-06T19:30:00+05:30",status:"upcoming"},{id:"22",team1Id:"6",team2Id:"2",venue:"Punjab Cricket Association Stadium, Mohali",date:"2025-04-07T19:30:00+05:30",status:"upcoming"},{id:"23",team1Id:"9",team2Id:"7",venue:"Narendra Modi Stadium, Ahmedabad",date:"2025-04-08T19:30:00+05:30",status:"upcoming"},{id:"24",team1Id:"3",team2Id:"5",venue:"M. Chinnaswamy Stadium, Bengaluru",date:"2025-04-09T19:30:00+05:30",status:"upcoming"},{id:"25",team1Id:"2",team2Id:"4",venue:"M.A. Chidambaram Stadium, Chennai",date:"2025-04-10T19:30:00+05:30",status:"upcoming"},{id:"26",team1Id:"10",team2Id:"9",venue:"Ekana Cricket Stadium, Lucknow",date:"2025-04-11T19:30:00+05:30",status:"upcoming"},{id:"27",team1Id:"8",team2Id:"6",venue:"Rajiv Gandhi International Stadium, Hyderabad",date:"2025-04-12T15:30:00+05:30",status:"upcoming"},{id:"28",team1Id:"7",team2Id:"3",venue:"Sawai Mansingh Stadium, Jaipur",date:"2025-04-12T19:30:00+05:30",status:"upcoming"},{id:"29",team1Id:"5",team2Id:"1",venue:"Arun Jaitley Stadium, Delhi",date:"2025-04-13T15:30:00+05:30",status:"upcoming"},{id:"30",team1Id:"10",team2Id:"2",venue:"Ekana Cricket Stadium, Lucknow",date:"2025-04-13T19:30:00+05:30",status:"upcoming"},{id:"31",team1Id:"6",team2Id:"4",venue:"Punjab Cricket Association Stadium, Mohali",date:"2025-04-14T19:30:00+05:30",status:"upcoming"},{id:"32",team1Id:"5",team2Id:"7",venue:"Arun Jaitley Stadium, Delhi",date:"2025-04-15T19:30:00+05:30",status:"upcoming"},{id:"33",team1Id:"1",team2Id:"8",venue:"Wankhede Stadium, Mumbai",date:"2025-04-16T19:30:00+05:30",status:"upcoming"},{id:"34",team1Id:"3",team2Id:"6",venue:"M. Chinnaswamy Stadium, Bengaluru",date:"2025-04-17T19:30:00+05:30",status:"upcoming"},{id:"35",team1Id:"9",team2Id:"5",venue:"Narendra Modi Stadium, Ahmedabad",date:"2025-04-18T19:30:00+05:30",status:"upcoming"},{id:"36",team1Id:"7",team2Id:"10",venue:"Sawai Mansingh Stadium, Jaipur",date:"2025-04-19T15:30:00+05:30",status:"upcoming"},{id:"37",team1Id:"6",team2Id:"3",venue:"Punjab Cricket Association Stadium, Mohali",date:"2025-04-19T19:30:00+05:30",status:"upcoming"},{id:"38",team1Id:"1",team2Id:"2",venue:"Wankhede Stadium, Mumbai",date:"2025-04-20T15:30:00+05:30",status:"upcoming"},{id:"39",team1Id:"4",team2Id:"9",venue:"Eden Gardens, Kolkata",date:"2025-04-20T19:30:00+05:30",status:"upcoming"},{id:"40",team1Id:"10",team2Id:"5",venue:"Ekana Cricket Stadium, Lucknow",date:"2025-04-21T19:30:00+05:30",status:"upcoming"},{id:"41",team1Id:"8",team2Id:"1",venue:"Rajiv Gandhi International Stadium, Hyderabad",date:"2025-04-22T19:30:00+05:30",status:"upcoming"},{id:"42",team1Id:"3",team2Id:"7",venue:"M. Chinnaswamy Stadium, Bengaluru",date:"2025-04-23T19:30:00+05:30",status:"upcoming"},{id:"43",team1Id:"2",team2Id:"8",venue:"M.A. Chidambaram Stadium, Chennai",date:"2025-04-24T19:30:00+05:30",status:"upcoming"},{id:"44",team1Id:"4",team2Id:"6",venue:"Eden Gardens, Kolkata",date:"2025-04-25T19:30:00+05:30",status:"upcoming"},{id:"45",team1Id:"1",team2Id:"10",venue:"Wankhede Stadium, Mumbai",date:"2025-04-26T15:30:00+05:30",status:"upcoming"},{id:"46",team1Id:"5",team2Id:"3",venue:"Arun Jaitley Stadium, Delhi",date:"2025-04-26T19:30:00+05:30",status:"upcoming"},{id:"47",team1Id:"7",team2Id:"9",venue:"Sawai Mansingh Stadium, Jaipur",date:"2025-04-27T15:30:00+05:30",status:"upcoming"},{id:"48",team1Id:"5",team2Id:"4",venue:"Arun Jaitley Stadium, Delhi",date:"2025-04-27T19:30:00+05:30",status:"upcoming"},{id:"49",team1Id:"2",team2Id:"6",venue:"M.A. Chidambaram Stadium, Chennai",date:"2025-04-28T19:30:00+05:30",status:"upcoming"},{id:"50",team1Id:"7",team2Id:"1",venue:"Sawai Mansingh Stadium, Jaipur",date:"2025-04-29T19:30:00+05:30",status:"upcoming"},{id:"51",team1Id:"9",team2Id:"8",venue:"Narendra Modi Stadium, Ahmedabad",date:"2025-04-30T19:30:00+05:30",status:"upcoming"},{id:"52",team1Id:"3",team2Id:"2",venue:"M. Chinnaswamy Stadium, Bengaluru",date:"2025-05-01T19:30:00+05:30",status:"upcoming"},{id:"53",team1Id:"4",team2Id:"7",venue:"Eden Gardens, Kolkata",date:"2025-05-02T19:30:00+05:30",status:"upcoming"},{id:"54",team1Id:"6",team2Id:"10",venue:"Punjab Cricket Association Stadium, Mohali",date:"2025-05-03T15:30:00+05:30",status:"upcoming"},{id:"55",team1Id:"8",team2Id:"5",venue:"Rajiv Gandhi International Stadium, Hyderabad",date:"2025-05-03T19:30:00+05:30",status:"upcoming"},{id:"56",team1Id:"1",team2Id:"9",venue:"Wankhede Stadium, Mumbai",date:"2025-05-04T15:30:00+05:30",status:"upcoming"},{id:"57",team1Id:"3",team2Id:"10",venue:"M. Chinnaswamy Stadium, Bengaluru",date:"2025-05-04T19:30:00+05:30",status:"upcoming"},{id:"58",team1Id:"2",team2Id:"9",venue:"M.A. Chidambaram Stadium, Chennai",date:"2025-05-05T19:30:00+05:30",status:"upcoming"},{id:"59",team1Id:"6",team2Id:"5",venue:"Punjab Cricket Association Stadium, Mohali",date:"2025-05-06T19:30:00+05:30",status:"upcoming"},{id:"60",team1Id:"4",team2Id:"1",venue:"Eden Gardens, Kolkata",date:"2025-05-07T19:30:00+05:30",status:"upcoming"},{id:"61",team1Id:"8",team2Id:"3",venue:"Rajiv Gandhi International Stadium, Hyderabad",date:"2025-05-08T19:30:00+05:30",status:"upcoming"},{id:"62",team1Id:"7",team2Id:"6",venue:"Sawai Mansingh Stadium, Jaipur",date:"2025-05-09T19:30:00+05:30",status:"upcoming"},{id:"63",team1Id:"10",team2Id:"8",venue:"Ekana Cricket Stadium, Lucknow",date:"2025-05-10T15:30:00+05:30",status:"upcoming"},{id:"64",team1Id:"1",team2Id:"5",venue:"Wankhede Stadium, Mumbai",date:"2025-05-10T19:30:00+05:30",status:"upcoming"},{id:"65",team1Id:"9",team2Id:"4",venue:"Narendra Modi Stadium, Ahmedabad",date:"2025-05-11T15:30:00+05:30",status:"upcoming"},{id:"66",team1Id:"2",team2Id:"7",venue:"M.A. Chidambaram Stadium, Chennai",date:"2025-05-11T19:30:00+05:30",status:"upcoming"},{id:"67",team1Id:"3",team2Id:"1",venue:"M. Chinnaswamy Stadium, Bengaluru",date:"2025-05-12T19:30:00+05:30",status:"upcoming"},{id:"68",team1Id:"10",team2Id:"4",venue:"Ekana Cricket Stadium, Lucknow",date:"2025-05-13T19:30:00+05:30",status:"upcoming"},{id:"69",team1Id:"6",team2Id:"9",venue:"Punjab Cricket Association Stadium, Mohali",date:"2025-05-14T19:30:00+05:30",status:"upcoming"},{id:"70",team1Id:"5",team2Id:"2",venue:"Arun Jaitley Stadium, Delhi",date:"2025-05-15T19:30:00+05:30",status:"upcoming"},{id:"71",team1Id:"tbd",team2Id:"tbd",venue:"Rajiv Gandhi International Stadium, Hyderabad",date:"2025-05-20T19:30:00+05:30",status:"upcoming",name:"Qualifier 1"},{id:"72",team1Id:"tbd",team2Id:"tbd",venue:"Rajiv Gandhi International Stadium, Hyderabad",date:"2025-05-21T19:30:00+05:30",status:"upcoming",name:"Eliminator"},{id:"73",team1Id:"tbd",team2Id:"tbd",venue:"Eden Gardens, Kolkata",date:"2025-05-23T19:30:00+05:30",status:"upcoming",name:"Qualifier 2"},{id:"74",team1Id:"tbd",team2Id:"tbd",venue:"Eden Gardens, Kolkata",date:"2025-05-25T19:30:00+05:30",status:"upcoming",name:"Final"}];zi.filter(t=>t.team1Id!=="tbd"&&t.team2Id!=="tbd").flatMap(t=>{const e=Na.find(f=>f.id===t.team1Id),n=Na.find(f=>f.id===t.team2Id),r=cp.filter(f=>f.teamId===t.team1Id),s=cp.filter(f=>f.teamId===t.team2Id),i=r.filter(f=>f.role==="Batsman"||f.role==="All-rounder"),o=s.filter(f=>f.role==="Batsman"||f.role==="All-rounder"),l=r.filter(f=>f.role==="Bowler"||f.role==="All-rounder"),c=s.filter(f=>f.role==="Bowler"||f.role==="All-rounder"),u=new Date(t.date),h=new Date(u.getTime()-15*60*1e3).toISOString();return[{id:`${t.id}-winner`,matchId:t.id,title:"Match Winner",description:"Predict which team will win the match",type:"single",points:10,deadline:h,options:[{id:`${t.id}-winner-1`,label:e.name,value:e.id},{id:`${t.id}-winner-2`,label:n.name,value:n.id}]},{id:`${t.id}-top-batsman`,matchId:t.id,title:"Top Batsman",description:"Predict the player who will score the most runs",type:"single",points:15,deadline:h,options:[...i.map(f=>({id:`${t.id}-batsman-${f.id}`,label:`${f.name} (${e.name})`,value:f.id})),...o.map(f=>({id:`${t.id}-batsman-${f.id}`,label:`${f.name} (${n.name})`,value:f.id}))]},{id:`${t.id}-top-bowler`,matchId:t.id,title:"Top Bowler",description:"Predict the player who will take the most wickets",type:"single",points:15,deadline:h,options:[...l.map(f=>({id:`${t.id}-bowler-${f.id}`,label:`${f.name} (${e.name})`,value:f.id})),...c.map(f=>({id:`${t.id}-bowler-${f.id}`,label:`${f.name} (${n.name})`,value:f.id}))]},{id:`${t.id}-powerplay-${e.id}`,matchId:t.id,title:`${e.name} Powerplay Score`,description:"Predict the score after 6 overs",type:"number",points:15,deadline:h,options:[]},{id:`${t.id}-powerplay-${n.id}`,matchId:t.id,title:`${n.name} Powerplay Score`,description:"Predict the score after 6 overs",type:"number",points:15,deadline:h,options:[]},{id:`${t.id}-total-runs`,matchId:t.id,title:"Total Runs in Match",description:"Predict the combined runs scored by both teams",type:"number",points:20,deadline:h,options:[]},{id:`${t.id}-winning-margin`,matchId:t.id,title:"Winning Margin",description:"Predict the margin of victory (runs or wickets)",type:"text",points:10,deadline:h,options:[]},{id:`${t.id}-sixes`,matchId:t.id,title:"Number of Sixes",description:"Predict the total number of sixes in the match",type:"number",points:15,deadline:h,options:[]},{id:`${t.id}-century`,matchId:t.id,title:"Century Scored",description:"Will any player score a century in this match?",type:"single",points:10,deadline:h,options:[{id:`${t.id}-century-yes`,label:"Yes",value:"yes"},{id:`${t.id}-century-no`,label:"No",value:"no"}]}]});const eT=[{id:"1",userId:"current-user",title:"Match Reminder",message:`${Na[0].name} vs ${Na[1].name} starts in 1 hour. Make your predictions now!`,type:"match-reminder",read:!1,createdAt:new Date().toISOString(),linkTo:`/matches/${zi[3].id}`},{id:"2",userId:"current-user",title:"Prediction Results",message:"You scored 20 points from your predictions in the last match!",type:"prediction-result",read:!1,createdAt:new Date(Date.now()-1e3*60*60*2).toISOString(),linkTo:`/matches/${zi[2].id}/results`},{id:"3",userId:"current-user",title:"Achievement Unlocked",message:"Streak Master: You correctly predicted 3 match winners in a row!",type:"achievement",read:!0,createdAt:new Date(Date.now()-1e3*60*60*12).toISOString(),linkTo:"/profile/achievements"}],vc=async t=>{if(!t)return!1;try{const e=be(K,Te.USERS,t),n=await Ft(e);return n.exists()?n.data().role==="admin":(console.log("User not found in Firestore, but allowing admin access for development"),!0)}catch(e){return console.error("Error checking admin status:",e),console.log("Error occurred, but allowing admin access for development"),!0}},up=t=>!!t,NK=()=>{const[t,e]=p.useState(!1),[n,r]=p.useState(!1),s=TK(),i=ka(),o=nr(),{currentUser:l,logout:c}=kn(),u=!!l;p.useEffect(()=>{(async()=>{if(l)try{const g=await vc(l.uid);r(g)}catch(g){console.error("Error checking admin status:",g),r(!1)}else r(!1)})()},[l]);const h=()=>{e(!t)},f=async()=>{try{await c(),o("/")}catch(m){console.error("Failed to log out",m)}};return a.jsxs("nav",{className:"bg-white shadow-md sticky top-0 z-50",children:[a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between h-16",children:[a.jsx("div",{className:"flex items-center",children:a.jsxs(it,{to:"/",className:"flex-shrink-0 flex items-center",children:[a.jsx("img",{src:"/images/iplLogo.png",alt:"IPL Predictor",className:"h-10 mr-2"}),a.jsx("span",{className:"text-xl font-bold gradient-text hidden sm:inline",children:"IPL Predictor"})]})}),!s&&a.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[a.jsx(it,{to:"/",className:`px-3 py-2 rounded-md text-sm font-medium ${i.pathname==="/"?"text-ipl-blue font-semibold":"text-gray-700 hover:text-ipl-blue"}`,children:"Home"}),a.jsx(it,{to:"/matches",className:`px-3 py-2 rounded-md text-sm font-medium ${i.pathname.includes("/matches")?"text-ipl-blue font-semibold":"text-gray-700 hover:text-ipl-blue"}`,children:"Matches"}),a.jsx(it,{to:"/leaderboard",className:`px-3 py-2 rounded-md text-sm font-medium ${i.pathname==="/leaderboard"?"text-ipl-blue font-semibold":"text-gray-700 hover:text-ipl-blue"}`,children:"Leaderboard"}),n&&a.jsx(it,{to:"/admin",className:`px-3 py-2 rounded-md text-sm font-medium ${i.pathname==="/admin"?"text-ipl-blue font-semibold":"text-gray-700 hover:text-ipl-blue"}`,children:"Admin"}),u?a.jsxs(a.Fragment,{children:[a.jsxs(it,{to:"/notifications",className:"text-gray-700 hover:text-ipl-blue px-3 py-2 rounded-md text-sm font-medium relative",children:[a.jsx(Im,{size:20}),a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 flex items-center justify-center text-xs",children:eT.filter(m=>!m.read).length})]}),a.jsxs(gK,{children:[a.jsx(yK,{asChild:!0,children:a.jsxs(Se,{variant:"ghost",className:"flex items-center space-x-2",children:[a.jsxs(go,{className:"h-8 w-8",children:[a.jsx(yo,{src:(l==null?void 0:l.photoURL)||void 0,alt:(l==null?void 0:l.displayName)||"User"}),a.jsx(vo,{className:"bg-ipl-blue text-white",children:l!=null&&l.displayName?l.displayName.substring(0,2).toUpperCase():"U"})]}),a.jsx("span",{className:"text-sm font-medium",children:(l==null?void 0:l.displayName)||"User"}),a.jsx(Ec,{size:16})]})}),a.jsxs(eD,{align:"end",children:[a.jsx(it,{to:"/profile",children:a.jsxs(W0,{children:[a.jsx(wy,{className:"mr-2 h-4 w-4"}),a.jsx("span",{children:"My Profile"})]})}),a.jsx(tD,{}),a.jsxs(W0,{onClick:f,children:[a.jsx(p1,{className:"mr-2 h-4 w-4"}),a.jsx("span",{children:"Logout"})]})]})]})]}):a.jsx(it,{to:"/register",children:a.jsx(Se,{variant:"default",className:"bg-ipl-blue hover:bg-ipl-blue/90",children:"Sign In"})})]}),a.jsxs("div",{className:"md:hidden flex items-center",children:[u&&a.jsxs(it,{to:"/notifications",className:"text-gray-700 mr-4 relative",children:[a.jsx(Im,{size:20}),a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 flex items-center justify-center text-xs",children:eT.filter(m=>!m.read).length})]}),a.jsxs("button",{onClick:h,className:"inline-flex items-center justify-center p-2 rounded-md text-gray-700 hover:text-ipl-blue focus:outline-none",children:[a.jsx("span",{className:"sr-only",children:"Open main menu"}),t?a.jsx(Jx,{size:24}):a.jsx(rF,{size:24})]})]})]})}),t&&a.jsx("div",{className:"md:hidden bg-white shadow-lg",children:a.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:[a.jsx(it,{to:"/",className:`block px-3 py-2 rounded-md text-base font-medium ${i.pathname==="/"?"text-ipl-blue font-semibold":"text-gray-700 hover:text-ipl-blue"}`,onClick:h,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(tF,{className:"mr-2 h-5 w-5"}),"Home"]})}),a.jsx(it,{to:"/matches",className:`block px-3 py-2 rounded-md text-base font-medium ${i.pathname.includes("/matches")?"text-ipl-blue font-semibold":"text-gray-700 hover:text-ipl-blue"}`,onClick:h,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Op,{className:"mr-2 h-5 w-5"}),"Matches"]})}),a.jsx(it,{to:"/leaderboard",className:`block px-3 py-2 rounded-md text-base font-medium ${i.pathname==="/leaderboard"?"text-ipl-blue font-semibold":"text-gray-700 hover:text-ipl-blue"}`,onClick:h,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(rs,{className:"mr-2 h-5 w-5"}),"Leaderboard"]})}),n&&a.jsx(it,{to:"/admin",className:`block px-3 py-2 rounded-md text-base font-medium ${i.pathname==="/admin"?"text-ipl-blue font-semibold":"text-gray-700 hover:text-ipl-blue"}`,onClick:h,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(fA,{className:"mr-2 h-5 w-5"}),"Admin"]})}),u?a.jsxs(a.Fragment,{children:[a.jsx(it,{to:"/profile",className:`block px-3 py-2 rounded-md text-base font-medium ${i.pathname==="/profile"?"text-ipl-blue font-semibold":"text-gray-700 hover:text-ipl-blue"}`,onClick:h,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(wy,{className:"mr-2 h-5 w-5"}),"My Profile"]})}),a.jsx("button",{onClick:()=>{f(),h()},className:"w-full text-left block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-ipl-blue",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(p1,{className:"mr-2 h-5 w-5"}),"Logout"]})})]}):a.jsx(it,{to:"/register",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-ipl-blue",onClick:h,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(wy,{className:"mr-2 h-5 w-5"}),"Sign In"]})})]})})]})};function CK(){const t=nr(),e=new Date().getFullYear();return a.jsx("footer",{className:"bg-[#0288d1] text-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-start",children:[a.jsx("div",{className:"flex justify-center md:justify-start",children:a.jsx("img",{src:"https://www.iplt20.com/assets/images/ipl-logo-new-old.png",alt:"TATA IPL Logo",className:"w-16 h-16 object-contain"})}),a.jsxs("div",{className:"text-center md:text-left",children:[a.jsx("h3",{className:"text-lg font-bold text-white",children:"IPL Predictor Mania"}),a.jsx("p",{className:"text-sm text-white/80 mt-1",children:"Test your cricket prediction skills during IPL 2025."})]}),a.jsxs("div",{className:"text-center md:text-left",children:[a.jsx("h3",{className:"text-lg font-bold text-white",children:"Quick Links"}),a.jsxs("ul",{className:"mt-1 space-y-1",children:[a.jsx("li",{children:a.jsx("button",{onClick:()=>t("/"),className:"text-sm text-white/80 hover:text-white transition-colors",children:"Home"})}),a.jsx("li",{children:a.jsx("button",{onClick:()=>t("/matches"),className:"text-sm text-white/80 hover:text-white transition-colors",children:"Matches"})}),a.jsx("li",{children:a.jsx("button",{onClick:()=>t("/leaderboard"),className:"text-sm text-white/80 hover:text-white transition-colors",children:"Leaderboard"})})]})]}),a.jsxs("div",{className:"text-center md:text-left",children:[a.jsx("h3",{className:"text-lg font-bold text-white",children:"Connect With Us"}),a.jsx("div",{className:"mt-1",children:a.jsxs("a",{href:"https://github.com/ashishkarns/fanatics-predictor-frenzy",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-1 text-sm text-white/80 hover:text-white transition-colors",children:[a.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z",clipRule:"evenodd"})}),a.jsx("span",{children:"View Repository"})]})})]})]}),a.jsx("div",{className:"mt-4 pt-2 border-t border-white/20 text-center",children:a.jsxs("p",{className:"text-xs text-white/60",children:["© ",e," IPL Predictor Mania. All rights reserved."]})})]})})}const Jt=({children:t})=>a.jsxs("div",{className:"flex flex-col min-h-screen",children:[a.jsx(NK,{}),a.jsx("main",{className:"flex-grow",children:t}),a.jsx(CK,{})]}),ht=p.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:_e("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));ht.displayName="Card";const bt=p.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:_e("flex flex-col space-y-1.5 p-6",t),...e}));bt.displayName="CardHeader";const Tt=p.forwardRef(({className:t,...e},n)=>a.jsx("h3",{ref:n,className:_e("text-2xl font-semibold leading-none tracking-tight",t),...e}));Tt.displayName="CardTitle";const zt=p.forwardRef(({className:t,...e},n)=>a.jsx("p",{ref:n,className:_e("text-sm text-muted-foreground",t),...e}));zt.displayName="CardDescription";const gt=p.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:_e("p-6 pt-0",t),...e}));gt.displayName="CardContent";const Va=p.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:_e("flex items-center p-6 pt-0",t),...e}));Va.displayName="CardFooter";const AK=Qd("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function De({className:t,variant:e,...n}){return a.jsx("div",{className:_e(AK({variant:e}),t),...n})}function os(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Ca(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const dD=6048e5,PK=864e5;let RK={};function Sg(){return RK}function Vd(t,e){var l,c,u,h;const n=Sg(),r=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((h=(u=n.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??0,s=os(t),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function dp(t){return Vd(t,{weekStartsOn:1})}function hD(t){const e=os(t),n=e.getFullYear(),r=Ca(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=dp(r),i=Ca(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=dp(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function tT(t){const e=os(t);return e.setHours(0,0,0,0),e}function nT(t){const e=os(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function jK(t,e){const n=tT(t),r=tT(e),s=+n-nT(n),i=+r-nT(r);return Math.round((s-i)/PK)}function kK(t){const e=hD(t),n=Ca(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),dp(n)}function DK(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function MK(t){if(!DK(t)&&typeof t!="number")return!1;const e=os(t);return!isNaN(Number(e))}function OK(t){const e=os(t),n=Ca(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const LK={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},VK=(t,e,n)=>{let r;const s=LK[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Qy(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const FK={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},$K={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},UK={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},BK={date:Qy({formats:FK,defaultWidth:"full"}),time:Qy({formats:$K,defaultWidth:"full"}),dateTime:Qy({formats:UK,defaultWidth:"full"})},zK={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},qK=(t,e,n,r)=>zK[t];function fu(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):o;s=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[l]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const WK={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},HK={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},KK={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},GK={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},QK={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},YK={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},XK=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},JK={ordinalNumber:XK,era:fu({values:WK,defaultWidth:"wide"}),quarter:fu({values:HK,defaultWidth:"wide",argumentCallback:t=>t-1}),month:fu({values:KK,defaultWidth:"wide"}),day:fu({values:GK,defaultWidth:"wide"}),dayPeriod:fu({values:QK,defaultWidth:"wide",formattingValues:YK,defaultFormattingWidth:"wide"})};function mu(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?eG(l,f=>f.test(o)):ZK(l,f=>f.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const h=e.slice(o.length);return{value:u,rest:h}}}function ZK(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function eG(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function tG(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const l=e.slice(s.length);return{value:o,rest:l}}}const nG=/^(\d+)(th|st|nd|rd)?/i,rG=/\d+/i,sG={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},iG={any:[/^b/i,/^(a|c)/i]},oG={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},aG={any:[/1/i,/2/i,/3/i,/4/i]},lG={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},cG={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},uG={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},dG={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},hG={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},fG={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},mG={ordinalNumber:tG({matchPattern:nG,parsePattern:rG,valueCallback:t=>parseInt(t,10)}),era:mu({matchPatterns:sG,defaultMatchWidth:"wide",parsePatterns:iG,defaultParseWidth:"any"}),quarter:mu({matchPatterns:oG,defaultMatchWidth:"wide",parsePatterns:aG,defaultParseWidth:"any",valueCallback:t=>t+1}),month:mu({matchPatterns:lG,defaultMatchWidth:"wide",parsePatterns:cG,defaultParseWidth:"any"}),day:mu({matchPatterns:uG,defaultMatchWidth:"wide",parsePatterns:dG,defaultParseWidth:"any"}),dayPeriod:mu({matchPatterns:hG,defaultMatchWidth:"any",parsePatterns:fG,defaultParseWidth:"any"})},pG={code:"en-US",formatDistance:VK,formatLong:BK,formatRelative:qK,localize:JK,match:mG,options:{weekStartsOn:0,firstWeekContainsDate:1}};function gG(t){const e=os(t);return jK(e,OK(e))+1}function yG(t){const e=os(t),n=+dp(e)-+kK(e);return Math.round(n/dD)+1}function fD(t,e){var h,f,m,g;const n=os(t),r=n.getFullYear(),s=Sg(),i=(e==null?void 0:e.firstWeekContainsDate)??((f=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((g=(m=s.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,o=Ca(t,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const l=Vd(o,e),c=Ca(t,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const u=Vd(c,e);return n.getTime()>=l.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function vG(t,e){var l,c,u,h;const n=Sg(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(u=n.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??1,s=fD(t,e),i=Ca(t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),Vd(i,e)}function xG(t,e){const n=os(t),r=+Vd(n,e)-+vG(n,e);return Math.round(r/dD)+1}function lt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Si={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return lt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):lt(n+1,2)},d(t,e){return lt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return lt(t.getHours()%12||12,e.length)},H(t,e){return lt(t.getHours(),e.length)},m(t,e){return lt(t.getMinutes(),e.length)},s(t,e){return lt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return lt(s,e.length)}},el={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},rT={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Si.y(t,e)},Y:function(t,e,n,r){const s=fD(t,r),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return lt(o,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):lt(i,e.length)},R:function(t,e){const n=hD(t);return lt(n,e.length)},u:function(t,e){const n=t.getFullYear();return lt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return lt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return lt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Si.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return lt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=xG(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):lt(s,e.length)},I:function(t,e,n){const r=yG(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):lt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Si.d(t,e)},D:function(t,e,n){const r=gG(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):lt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return lt(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return lt(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return lt(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=el.noon:r===0?s=el.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=el.evening:r>=12?s=el.afternoon:r>=4?s=el.morning:s=el.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Si.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Si.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):lt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):lt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Si.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Si.s(t,e)},S:function(t,e){return Si.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return iT(r);case"XXXX":case"XX":return Uo(r);case"XXXXX":case"XXX":default:return Uo(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return iT(r);case"xxxx":case"xx":return Uo(r);case"xxxxx":case"xxx":default:return Uo(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+sT(r,":");case"OOOO":default:return"GMT"+Uo(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+sT(r,":");case"zzzz":default:return"GMT"+Uo(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return lt(r,e.length)},T:function(t,e,n){const r=t.getTime();return lt(r,e.length)}};function sT(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+lt(i,2)}function iT(t,e){return t%60===0?(t>0?"-":"+")+lt(Math.abs(t)/60,2):Uo(t,e)}function Uo(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=lt(Math.trunc(r/60),2),i=lt(r%60,2);return n+s+e+i}const oT=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},mD=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},wG=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return oT(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",oT(r,e)).replace("{{time}}",mD(s,e))},bG={p:mD,P:wG},_G=/^D+$/,EG=/^Y+$/,SG=["D","DD","YY","YYYY"];function IG(t){return _G.test(t)}function TG(t){return EG.test(t)}function NG(t,e,n){const r=CG(t,e,n);if(console.warn(r),SG.includes(t))throw new RangeError(r)}function CG(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const AG=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,PG=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,RG=/^'([^]*?)'?$/,jG=/''/g,kG=/[a-zA-Z]/;function DG(t,e,n){var h,f,m,g;const r=Sg(),s=r.locale??pG,i=r.firstWeekContainsDate??((f=(h=r.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,o=r.weekStartsOn??((g=(m=r.locale)==null?void 0:m.options)==null?void 0:g.weekStartsOn)??0,l=os(t);if(!MK(l))throw new RangeError("Invalid time value");let c=e.match(PG).map(v=>{const y=v[0];if(y==="p"||y==="P"){const b=bG[y];return b(v,s.formatLong)}return v}).join("").match(AG).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const y=v[0];if(y==="'")return{isToken:!1,value:MG(v)};if(rT[y])return{isToken:!0,value:v};if(y.match(kG))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:v}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return c.map(v=>{if(!v.isToken)return v.value;const y=v.value;(TG(y)||IG(y))&&NG(y,e,String(t));const b=rT[y[0]];return b(l,y,s.localize,u)}).join("")}function MG(t){const e=t.match(RG);return e?e[1].replace(jG,"'"):t}const OG={"Mumbai Indians":"mi.png","Chennai Super Kings":"csk.png","Royal Challengers Bangalore":"rcb.png","Royal Challengers Bengaluru":"rcb.png","Kolkata Knight Riders":"kkr.png","Delhi Capitals":"dc.png","Rajasthan Royals":"rr.png","Sunrisers Hyderabad":"srh.png","Punjab Kings":"pbks.png","Gujarat Titans":"gt.png","Lucknow Super Giants":"lsg.png"},LG={"Mumbai Indians":"MI","Chennai Super Kings":"CSK","Royal Challengers Bangalore":"RCB","Royal Challengers Bengaluru":"RCB","Kolkata Knight Riders":"KKR","Delhi Capitals":"DC","Rajasthan Royals":"RR","Sunrisers Hyderabad":"SRH","Punjab Kings":"PBKS","Gujarat Titans":"GT","Lucknow Super Giants":"LSG"},xc=t=>{if(!t||t==="TBD"||t.includes("Qualifier")||t.includes("Eliminator")||t.includes("Final"))return"/images/teams/default.png";const e=OG[t];return e?`/images/teams/${e}`:"/images/teams/default.png"},aT=t=>{if(!t||t==="TBD")return"TBD";if(t.includes("Royal Challengers"))return"RCB";const e=LG[t];return e||(t.length>3?t.substring(0,3).toUpperCase():t.toUpperCase())},pD=p.forwardRef(({className:t,variant:e="default",size:n="default",...r},s)=>a.jsx("div",{className:_e("flex w-full",t),ref:s,...r}));pD.displayName="ButtonGroup";const Pu=({match:t})=>{const e=()=>{try{let c;if(typeof t.date=="string")c=new Date(t.date);else if(t.date)c=t.date.toDate();else return"Date not available";return DG(c,"MMM d, yyyy 'at' h:mm a")}catch(c){return console.error("Error formatting date:",c),"Date not available"}},n=()=>{switch(t.status){case"upcoming":return a.jsx(De,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"Upcoming"});case"live":return a.jsx(De,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200 animate-pulse",children:"Live"});case"completed":return a.jsx(De,{variant:"outline",className:"bg-gray-50 text-gray-700 border-gray-200",children:"Completed"});default:return a.jsx(De,{variant:"outline",children:"Unknown"})}},r=()=>t.team1==="TBD"||!t.team1?"/images/teams/default.png":xc(t.team1),s=()=>t.team2==="TBD"||!t.team2?"/images/teams/default.png":xc(t.team2),i=aT(t.team1||""),o=aT(t.team2||""),l=()=>{if(t.status==="completed"&&t.result){let c=`${t.result.winner} won`;return t.result.team1Score&&t.result.team2Score&&(c+=` (${t.result.team1Score} - ${t.result.team2Score})`),a.jsx("div",{className:"text-sm text-center font-medium mt-2 text-gray-700",children:c})}return null};return a.jsx(ht,{className:"overflow-hidden hover:shadow-md transition-shadow",children:a.jsxs(gt,{className:"p-0",children:[a.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 py-3 px-4 flex justify-between items-center",children:[a.jsx("h3",{className:"text-white font-semibold truncate",children:t.isPlayoff&&t.name?a.jsx("span",{className:"font-bold",children:t.name}):`${i} vs ${o}`}),n()]}),a.jsxs("div",{className:"p-4",children:[t.isPlayoff&&t.name&&a.jsx("div",{className:"mb-3 text-center",children:a.jsx(De,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200 font-semibold px-3 py-1",children:t.name})}),a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"h-16 w-16 flex items-center justify-center",children:t.team1==="TBD"?a.jsx("div",{className:"h-16 w-16 flex items-center justify-center bg-gray-100 rounded-full border-2 border-dashed border-gray-300",children:a.jsx("span",{className:"text-gray-500 font-bold",children:"TBD"})}):a.jsx("img",{src:r(),alt:t.team1||"Team 1",className:"max-h-full max-w-full object-contain",onError:c=>{const u=c.target;u.onerror=null,u.src="/images/teams/default.png"}})}),a.jsx("span",{className:"text-sm font-medium mt-2",children:t.team1||"TBD"})]}),a.jsx("div",{className:"text-xl font-bold text-gray-500",children:"VS"}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"h-16 w-16 flex items-center justify-center",children:t.team2==="TBD"?a.jsx("div",{className:"h-16 w-16 flex items-center justify-center bg-gray-100 rounded-full border-2 border-dashed border-gray-300",children:a.jsx("span",{className:"text-gray-500 font-bold",children:"TBD"})}):a.jsx("img",{src:s(),alt:t.team2||"Team 2",className:"max-h-full max-w-full object-contain",onError:c=>{const u=c.target;u.onerror=null,u.src="/images/teams/default.png"}})}),a.jsx("span",{className:"text-sm font-medium mt-2",children:t.team2||"TBD"})]})]}),l(),a.jsxs("div",{className:"mt-4 space-y-2",children:[a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(J4,{className:"h-4 w-4 mr-2 text-indigo-500"}),a.jsx("span",{children:e()})]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(nF,{className:"h-4 w-4 mr-2 text-indigo-500"}),a.jsx("span",{children:t.venue||"Venue TBD"})]}),a.jsx("div",{className:"mt-4",children:t.status==="completed"?a.jsxs(pD,{children:[a.jsx(it,{to:`/matches/${t.id}`,className:"flex-1",children:a.jsx(Se,{variant:"outline",className:"w-full",children:"View Details"})}),a.jsx(it,{to:`/matches/${t.id}/leaderboard`,className:"flex-1",children:a.jsxs(Se,{variant:"outline",className:"w-full",children:[a.jsx(rs,{className:"h-4 w-4 mr-2"}),"Leaderboard"]})})]}):a.jsx(it,{to:`/matches/${t.id}`,children:a.jsx(Se,{variant:"outline",className:"w-full",children:t.status==="upcoming"?"Make Predictions":"View Match Details"})})})]})]})]})})},VG=()=>{const{currentUser:t,loading:e}=kn(),[n,r]=p.useState([]),[s,i]=p.useState(!0),[o,l]=p.useState([]),[c,u]=p.useState(!0);p.useEffect(()=>{(async()=>{try{i(!0);const g=Ie(K,"matches"),v=Ge(g,Es("date","asc"),Ol(3)),y=await Re(v),b=[];y.forEach(_=>{b.push({id:_.id,..._.data()})}),console.log("Fetched matches:",b.length),r(b)}catch(g){console.error("Error fetching upcoming matches:",g)}finally{i(!1)}})()},[]),p.useEffect(()=>{(async()=>{try{u(!0);const g=Ie(K,Te.GLOBAL_LEADERBOARD),v=Ge(g,Es("totalPoints","desc"),Ol(5)),b=(await Re(v)).docs.map(_=>{const w=_.data();return{userId:w.userId,displayName:w.displayName||"Anonymous User",photoURL:w.photoURL,totalPoints:w.totalPoints||0,correctPredictions:w.correctPredictions||0,totalPredictions:w.totalPredictions||0,accuracy:w.accuracy||0}});console.log("Fetched leaderboard entries:",b.length),l(b)}catch(g){console.error("Error fetching leaderboard:",g)}finally{u(!1)}})()},[]);const h=()=>a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(3)].map((m,g)=>a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 animate-pulse",children:[a.jsx("div",{className:"h-8 bg-gray-200 rounded mb-4"}),a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"h-16 w-16 bg-gray-200 rounded-full mb-2"}),a.jsx("div",{className:"h-4 w-12 bg-gray-200 rounded"})]}),a.jsx("div",{className:"h-6 w-6 bg-gray-200 rounded"}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"h-16 w-16 bg-gray-200 rounded-full mb-2"}),a.jsx("div",{className:"h-4 w-12 bg-gray-200 rounded"})]})]}),a.jsx("div",{className:"h-4 w-full bg-gray-200 rounded mb-2"}),a.jsx("div",{className:"h-4 w-3/4 bg-gray-200 rounded"})]},g))}),f=()=>a.jsx("div",{className:"animate-pulse space-y-2",children:[...Array(5)].map((m,g)=>a.jsxs("div",{className:"flex items-center gap-3 py-2",children:[a.jsx("div",{className:"h-5 w-5 bg-gray-200 rounded-full"}),a.jsx("div",{className:"h-5 w-24 bg-gray-200 rounded"}),a.jsx("div",{className:"ml-auto h-5 w-10 bg-gray-200 rounded"})]},g))});return a.jsxs(Jt,{children:[a.jsx("div",{className:"bg-gradient-to-r from-ipl-blue to-ipl-blue/80 text-white py-8",children:a.jsx("div",{className:"container mx-auto px-4",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[a.jsxs("div",{className:"md:w-1/2 mb-6 md:mb-0",children:[a.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:"IPL Predictor Mania"}),a.jsx("p",{className:"text-base md:text-lg mb-4",children:"Test your cricket prediction skills during IPL 2025"}),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsx(Se,{asChild:!0,size:"lg",className:"bg-white text-ipl-blue hover:bg-white/90 w-full sm:w-auto",children:a.jsx(it,{to:"/matches",children:"Make Predictions"})}),a.jsx(Se,{asChild:!0,size:"lg",variant:"outline",className:"bg-white text-ipl-blue hover:bg-white/90 w-full sm:w-auto",children:a.jsx(it,{to:"/leaderboard",children:"View Leaderboard"})})]})]}),a.jsxs("div",{className:"md:w-1/2 bg-white/10 rounded-lg p-4",children:[a.jsx("h2",{className:"text-xl font-bold mb-3",children:"How It Works"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"bg-white/20 p-2 rounded-full",children:a.jsx(Op,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium",children:"Predict Matches"}),a.jsx("p",{className:"text-sm text-white/80",children:"Make your predictions before each match starts"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"bg-white/20 p-2 rounded-full",children:a.jsx(rs,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium",children:"Earn Points"}),a.jsx("p",{className:"text-sm text-white/80",children:"Get points for each correct prediction"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"bg-white/20 p-2 rounded-full",children:a.jsx(fF,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium",children:"Compete with Friends"}),a.jsx("p",{className:"text-sm text-white/80",children:"See how you rank against other predictors"})]})]})]})]})]})})}),a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-xl font-bold",children:"Upcoming Matches"}),a.jsx(Se,{asChild:!0,variant:"ghost",size:"sm",className:"flex items-center gap-1 text-sm",children:a.jsxs(it,{to:"/matches",children:["View All ",a.jsx(m1,{className:"h-4 w-4"})]})})]}),s?a.jsx(h,{}):n.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(m=>a.jsx(Pu,{match:m},m.id))}):a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 text-center",children:[a.jsx("p",{className:"text-gray-500",children:"No upcoming matches found."}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Check back later or view all matches."})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-xl font-bold",children:"Top Predictors"}),a.jsx(Se,{asChild:!0,variant:"ghost",size:"sm",className:"flex items-center gap-1 text-sm",children:a.jsxs(it,{to:"/leaderboard",children:["View All ",a.jsx(m1,{className:"h-4 w-4"})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[e||c?a.jsx(f,{}):o.length>0?a.jsx("div",{className:"space-y-1",children:o.map((m,g)=>a.jsxs("div",{className:"flex items-center py-2 border-b border-gray-100 last:border-0",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex items-center justify-center h-6 w-6 rounded-full bg-ipl-blue/10 text-ipl-blue text-xs font-medium",children:g+1}),a.jsx("div",{className:"font-medium",children:m.displayName})]}),a.jsx("div",{className:"ml-auto font-semibold",children:m.totalPoints})]},m.userId))}):a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No leaderboard data available yet."}),a.jsx("div",{className:"mt-4 pt-3 border-t border-gray-100",children:a.jsx(Se,{asChild:!0,variant:"outline",size:"sm",className:"w-full",children:a.jsx(it,{to:"/leaderboard",children:"View Full Leaderboard"})})})]})]})]})})]})},FG=()=>{const t=ka();return p.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),a.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),a.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};var zb="Tabs",[$G,AX]=$r(zb,[Lc]),gD=Lc(),[UG,qb]=$G(zb),yD=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,h=Oc(l),[f,m]=ns({prop:r,onChange:s,defaultProp:i});return a.jsx(UG,{scope:n,baseId:Js(),value:f,onValueChange:m,orientation:o,dir:h,activationMode:c,children:a.jsx(Ce.div,{dir:h,"data-orientation":o,...u,ref:e})})});yD.displayName=zb;var vD="TabsList",xD=p.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=qb(vD,n),o=gD(n);return a.jsx(Rb,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:a.jsx(Ce.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});xD.displayName=vD;var wD="TabsTrigger",bD=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=qb(wD,n),l=gD(n),c=SD(o.baseId,r),u=ID(o.baseId,r),h=r===o.value;return a.jsx(jb,{asChild:!0,...l,focusable:!s,active:h,children:a.jsx(Ce.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:de(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:de(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:de(t.onFocus,()=>{const f=o.activationMode!=="manual";!h&&!s&&f&&o.onValueChange(r)})})})});bD.displayName=wD;var _D="TabsContent",ED=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,l=qb(_D,n),c=SD(l.baseId,r),u=ID(l.baseId,r),h=r===l.value,f=p.useRef(h);return p.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),a.jsx(Ns,{present:s||h,children:({present:m})=>a.jsx(Ce.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:m&&i})})});ED.displayName=_D;function SD(t,e){return`${t}-trigger-${e}`}function ID(t,e){return`${t}-content-${e}`}var BG=yD,TD=xD,ND=bD,CD=ED;const Ur=BG,Er=p.forwardRef(({className:t,...e},n)=>a.jsx(TD,{ref:n,className:_e("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Er.displayName=TD.displayName;const rt=p.forwardRef(({className:t,...e},n)=>a.jsx(ND,{ref:n,className:_e("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));rt.displayName=ND.displayName;const pt=p.forwardRef(({className:t,...e},n)=>a.jsx(CD,{ref:n,className:_e("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));pt.displayName=CD.displayName;const zG=({matches:t})=>{const[e,n]=p.useState("upcoming"),r=t.filter(c=>c.status==="upcoming"),s=t.filter(c=>c.status==="live"),i=t.filter(c=>c.status==="completed"),o=r.filter(c=>c.isPlayoff===!0).sort((c,u)=>(c.playoffOrder||0)-(u.playoffOrder||0)),l=r.filter(c=>!c.isPlayoff);return a.jsx("div",{children:a.jsxs(Ur,{defaultValue:"upcoming",onValueChange:n,value:e,children:[a.jsxs(Er,{className:"grid w-full grid-cols-3 mb-6",children:[a.jsxs(rt,{value:"upcoming",className:"text-sm",children:["Upcoming (",r.length,")"]}),a.jsxs(rt,{value:"live",className:"text-sm",children:["Live (",s.length,")"]}),a.jsxs(rt,{value:"completed",className:"text-sm",children:["Completed (",i.length,")"]})]}),a.jsxs(pt,{value:"upcoming",className:"mt-0",children:[l.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:"League Matches"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8",children:l.map(c=>a.jsx(Pu,{match:c},c.id))})]}),o.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"text-xl font-bold mb-4 text-ipl-blue",children:"Playoffs"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6 mb-8",children:o.map(c=>a.jsx(Pu,{match:c},c.id))})]}),l.length===0&&o.length===0&&a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-gray-500",children:"No upcoming matches scheduled."})})]}),a.jsx(pt,{value:"live",className:"mt-0",children:s.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(c=>a.jsx(Pu,{match:c},c.id))}):a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-gray-500",children:"No matches are currently live."})})}),a.jsx(pt,{value:"completed",className:"mt-0",children:i.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(c=>a.jsx(Pu,{match:c},c.id))}):a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-gray-500",children:"No completed matches yet."})})})]})})},qG=(t=!1)=>{const[e,n]=p.useState([]),[r,s]=p.useState(!0),[i,o]=p.useState(null);return p.useEffect(()=>{(async()=>{try{s(!0);const c=t?await Dj():await Ab();n(c)}catch(c){console.error("Error fetching matches:",c),o(c instanceof Error?c:new Error("Failed to fetch matches"))}finally{s(!1)}})()},[t]),{matches:e,loading:r,error:i}},WG=()=>{const[t,e]=p.useState([]),[n,r]=p.useState(!0),[s,i]=p.useState(null);return p.useEffect(()=>{(async()=>{try{r(!0);const l=await Lj();e(l)}catch(l){console.error("Error fetching squads:",l),i(l instanceof Error?l:new Error("Failed to fetch squads"))}finally{r(!1)}})()},[]),{squads:t,loading:n,error:s}},sn=p.forwardRef(({className:t,type:e,...n},r)=>a.jsx("input",{type:e,className:_e("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));sn.displayName="Input";const HG=()=>{const{matches:t,loading:e,error:n}=qG(),[r,s]=p.useState([]),[i,o]=p.useState(""),[l,c]=p.useState("all");return p.useEffect(()=>{if(!t)return;let u=[...t];if(l==="upcoming"?u=u.filter(h=>h.status==="upcoming"):l==="live"?u=u.filter(h=>h.status==="live"):l==="completed"&&(u=u.filter(h=>h.status==="completed")),i.trim()!==""){const h=i.toLowerCase();u=u.filter(f=>{let m="";typeof f.date=="string"?m=new Date(f.date).toDateString().toLowerCase():m=f.date.toDate().toDateString().toLowerCase();const g=f.venue.toLowerCase(),v=f.team1.toLowerCase(),y=f.team2.toLowerCase();return m.includes(h)||g.includes(h)||v.includes(h)||y.includes(h)})}s(u)},[t,i,l]),a.jsx(Jt,{children:a.jsxs("div",{className:"container mx-auto py-8 px-4",children:[a.jsx("h1",{className:"text-3xl font-bold mb-6",children:"IPL 2025 Matches"}),n&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-6",children:["Error loading matches: ",n.message]}),a.jsxs("div",{className:"relative mb-6",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:a.jsx(Lp,{className:"h-4 w-4 text-gray-500"})}),a.jsx(sn,{type:"text",placeholder:"Search by team, date or venue...",className:"pl-10",value:i,onChange:u=>o(u.target.value)})]}),a.jsx(Ur,{defaultValue:"all",value:l,onValueChange:c,className:"mb-6",children:a.jsxs(Er,{children:[a.jsx(rt,{value:"all",children:"All Matches"}),a.jsx(rt,{value:"upcoming",children:"Upcoming"}),a.jsx(rt,{value:"live",children:"Live"}),a.jsx(rt,{value:"completed",children:"Completed"})]})}),e?a.jsxs("div",{className:"flex justify-center items-center py-12",children:[a.jsx(Kt,{className:"h-8 w-8 animate-spin text-blue-600"}),a.jsx("span",{className:"ml-2 text-lg",children:"Loading matches..."})]}):r.length>0?a.jsx(zG,{matches:r}):a.jsx("div",{className:"text-center py-12 text-gray-500",children:a.jsx("p",{children:"No matches found. Try adjusting your search criteria."})})]})})},KG=Qd("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),yr=p.forwardRef(({className:t,variant:e,...n},r)=>a.jsx("div",{ref:r,role:"alert",className:_e(KG({variant:e}),t),...n}));yr.displayName="Alert";const es=p.forwardRef(({className:t,...e},n)=>a.jsx("h5",{ref:n,className:_e("mb-1 font-medium leading-none tracking-tight",t),...e}));es.displayName="AlertTitle";const vr=p.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:_e("text-sm [&_p]:leading-relaxed",t),...e}));vr.displayName="AlertDescription";function Wb(t){const e=p.useRef({value:t,previous:t});return p.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Hb="Radio",[GG,AD]=$r(Hb),[QG,YG]=GG(Hb),PD=p.forwardRef((t,e)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:i,disabled:o,value:l="on",onCheck:c,form:u,...h}=t,[f,m]=p.useState(null),g=Ze(e,b=>m(b)),v=p.useRef(!1),y=f?u||!!f.closest("form"):!0;return a.jsxs(QG,{scope:n,checked:s,disabled:o,children:[a.jsx(Ce.button,{type:"button",role:"radio","aria-checked":s,"data-state":kD(s),"data-disabled":o?"":void 0,disabled:o,value:l,...h,ref:g,onClick:de(t.onClick,b=>{s||c==null||c(),y&&(v.current=b.isPropagationStopped(),v.current||b.stopPropagation())})}),y&&a.jsx(XG,{control:f,bubbles:!v.current,name:r,value:l,checked:s,required:i,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});PD.displayName=Hb;var RD="RadioIndicator",jD=p.forwardRef((t,e)=>{const{__scopeRadio:n,forceMount:r,...s}=t,i=YG(RD,n);return a.jsx(Ns,{present:r||i.checked,children:a.jsx(Ce.span,{"data-state":kD(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e})})});jD.displayName=RD;var XG=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,i=p.useRef(null),o=Wb(n),l=ow(e);return p.useEffect(()=>{const c=i.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==n&&f){const m=new Event("click",{bubbles:r});f.call(c,n),c.dispatchEvent(m)}},[o,n,r]),a.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function kD(t){return t?"checked":"unchecked"}var JG=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Kb="RadioGroup",[ZG,PX]=$r(Kb,[Lc,AD]),DD=Lc(),MD=AD(),[eQ,tQ]=ZG(Kb),OD=p.forwardRef((t,e)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:i,required:o=!1,disabled:l=!1,orientation:c,dir:u,loop:h=!0,onValueChange:f,...m}=t,g=DD(n),v=Oc(u),[y,b]=ns({prop:i,defaultProp:s,onChange:f});return a.jsx(eQ,{scope:n,name:r,required:o,disabled:l,value:y,onValueChange:b,children:a.jsx(Rb,{asChild:!0,...g,orientation:c,dir:v,loop:h,children:a.jsx(Ce.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:v,...m,ref:e})})})});OD.displayName=Kb;var LD="RadioGroupItem",VD=p.forwardRef((t,e)=>{const{__scopeRadioGroup:n,disabled:r,...s}=t,i=tQ(LD,n),o=i.disabled||r,l=DD(n),c=MD(n),u=p.useRef(null),h=Ze(e,u),f=i.value===s.value,m=p.useRef(!1);return p.useEffect(()=>{const g=y=>{JG.includes(y.key)&&(m.current=!0)},v=()=>m.current=!1;return document.addEventListener("keydown",g),document.addEventListener("keyup",v),()=>{document.removeEventListener("keydown",g),document.removeEventListener("keyup",v)}},[]),a.jsx(jb,{asChild:!0,...l,focusable:!o,active:f,children:a.jsx(PD,{disabled:o,required:i.required,checked:f,...c,...s,name:i.name,ref:h,onCheck:()=>i.onValueChange(s.value),onKeyDown:de(g=>{g.key==="Enter"&&g.preventDefault()}),onFocus:de(s.onFocus,()=>{var g;m.current&&((g=u.current)==null||g.click())})})})});VD.displayName=LD;var nQ="RadioGroupIndicator",FD=p.forwardRef((t,e)=>{const{__scopeRadioGroup:n,...r}=t,s=MD(n);return a.jsx(jD,{...s,...r,ref:e})});FD.displayName=nQ;var $D=OD,UD=VD,rQ=FD;const ll=p.forwardRef(({className:t,...e},n)=>a.jsx($D,{className:_e("grid gap-2",t),...e,ref:n}));ll.displayName=$D.displayName;const sr=p.forwardRef(({className:t,...e},n)=>a.jsx(UD,{ref:n,className:_e("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:a.jsx(rQ,{className:"flex items-center justify-center",children:a.jsx(gA,{className:"h-2.5 w-2.5 fill-current text-current"})})}));sr.displayName=UD.displayName;var sQ="Label",BD=p.forwardRef((t,e)=>a.jsx(Ce.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));BD.displayName=sQ;var zD=BD;const iQ=Qd("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),tt=p.forwardRef(({className:t,...e},n)=>a.jsx(zD,{ref:n,className:_e(iQ(),t),...e}));tt.displayName=zD.displayName;function lT(t,[e,n]){return Math.min(n,Math.max(e,t))}var oQ=[" ","Enter","ArrowUp","ArrowDown"],aQ=[" ","Enter"],wh="Select",[Ig,Tg,lQ]=Hd(wh),[Vc,RX]=$r(wh,[lQ,Nc]),Ng=Nc(),[cQ,Ao]=Vc(wh),[uQ,dQ]=Vc(wh),qD=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:h,autoComplete:f,disabled:m,required:g,form:v}=t,y=Ng(e),[b,_]=p.useState(null),[w,S]=p.useState(null),[N,j]=p.useState(!1),D=Oc(u),[T=!1,I]=ns({prop:r,defaultProp:s,onChange:i}),[C,R]=ns({prop:o,defaultProp:l,onChange:c}),M=p.useRef(null),P=b?v||!!b.closest("form"):!0,[A,F]=p.useState(new Set),Y=Array.from(A).map(q=>q.props.value).join(";");return a.jsx(XA,{...y,children:a.jsxs(cQ,{required:g,scope:e,trigger:b,onTriggerChange:_,valueNode:w,onValueNodeChange:S,valueNodeHasChildren:N,onValueNodeHasChildrenChange:j,contentId:Js(),value:C,onValueChange:R,open:T,onOpenChange:I,dir:D,triggerPointerDownPosRef:M,disabled:m,children:[a.jsx(Ig.Provider,{scope:e,children:a.jsx(uQ,{scope:t.__scopeSelect,onNativeOptionAdd:p.useCallback(q=>{F(G=>new Set(G).add(q))},[]),onNativeOptionRemove:p.useCallback(q=>{F(G=>{const O=new Set(G);return O.delete(q),O})},[]),children:n})}),P?a.jsxs(pM,{"aria-hidden":!0,required:g,tabIndex:-1,name:h,autoComplete:f,value:C,onChange:q=>R(q.target.value),disabled:m,form:v,children:[C===void 0?a.jsx("option",{value:""}):null,Array.from(A)]},Y):null]})})};qD.displayName=wh;var WD="SelectTrigger",HD=p.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=Ng(n),o=Ao(WD,n),l=o.disabled||r,c=Ze(e,o.onTriggerChange),u=Tg(n),h=p.useRef("touch"),[f,m,g]=gM(y=>{const b=u().filter(S=>!S.disabled),_=b.find(S=>S.value===o.value),w=yM(b,y,_);w!==void 0&&o.onValueChange(w.value)}),v=y=>{l||(o.onOpenChange(!0),g()),y&&(o.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return a.jsx(cw,{asChild:!0,...i,children:a.jsx(Ce.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":mM(o.value)?"":void 0,...s,ref:c,onClick:de(s.onClick,y=>{y.currentTarget.focus(),h.current!=="mouse"&&v(y)}),onPointerDown:de(s.onPointerDown,y=>{h.current=y.pointerType;const b=y.target;b.hasPointerCapture(y.pointerId)&&b.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(v(y),y.preventDefault())}),onKeyDown:de(s.onKeyDown,y=>{const b=f.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&m(y.key),!(b&&y.key===" ")&&oQ.includes(y.key)&&(v(),y.preventDefault())})})})});HD.displayName=WD;var KD="SelectValue",GD=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...l}=t,c=Ao(KD,n),{onValueNodeHasChildrenChange:u}=c,h=i!==void 0,f=Ze(e,c.onValueNodeChange);return Zt(()=>{u(h)},[u,h]),a.jsx(Ce.span,{...l,ref:f,style:{pointerEvents:"none"},children:mM(c.value)?a.jsx(a.Fragment,{children:o}):i})});GD.displayName=KD;var hQ="SelectIcon",QD=p.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return a.jsx(Ce.span,{"aria-hidden":!0,...s,ref:e,children:r||"▼"})});QD.displayName=hQ;var fQ="SelectPortal",YD=t=>a.jsx(kp,{asChild:!0,...t});YD.displayName=fQ;var Aa="SelectContent",XD=p.forwardRef((t,e)=>{const n=Ao(Aa,t.__scopeSelect),[r,s]=p.useState();if(Zt(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?ja.createPortal(a.jsx(JD,{scope:t.__scopeSelect,children:a.jsx(Ig.Slot,{scope:t.__scopeSelect,children:a.jsx("div",{children:t.children})})}),i):null}return a.jsx(ZD,{...t,ref:e})});XD.displayName=Aa;var qr=10,[JD,Po]=Vc(Aa),mQ="SelectContentImpl",ZD=p.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:y,avoidCollisions:b,..._}=t,w=Ao(Aa,n),[S,N]=p.useState(null),[j,D]=p.useState(null),T=Ze(e,B=>N(B)),[I,C]=p.useState(null),[R,M]=p.useState(null),P=Tg(n),[A,F]=p.useState(!1),Y=p.useRef(!1);p.useEffect(()=>{if(S)return ek(S)},[S]),Hj();const q=p.useCallback(B=>{const[ne,...ae]=P().map(fe=>fe.ref.current),[W]=ae.slice(-1),oe=document.activeElement;for(const fe of B)if(fe===oe||(fe==null||fe.scrollIntoView({block:"nearest"}),fe===ne&&j&&(j.scrollTop=0),fe===W&&j&&(j.scrollTop=j.scrollHeight),fe==null||fe.focus(),document.activeElement!==oe))return},[P,j]),G=p.useCallback(()=>q([I,S]),[q,I,S]);p.useEffect(()=>{A&&G()},[A,G]);const{onOpenChange:O,triggerPointerDownPosRef:L}=w;p.useEffect(()=>{if(S){let B={x:0,y:0};const ne=W=>{var oe,fe;B={x:Math.abs(Math.round(W.pageX)-(((oe=L.current)==null?void 0:oe.x)??0)),y:Math.abs(Math.round(W.pageY)-(((fe=L.current)==null?void 0:fe.y)??0))}},ae=W=>{B.x<=10&&B.y<=10?W.preventDefault():S.contains(W.target)||O(!1),document.removeEventListener("pointermove",ne),L.current=null};return L.current!==null&&(document.addEventListener("pointermove",ne),document.addEventListener("pointerup",ae,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ne),document.removeEventListener("pointerup",ae,{capture:!0})}}},[S,O,L]),p.useEffect(()=>{const B=()=>O(!1);return window.addEventListener("blur",B),window.addEventListener("resize",B),()=>{window.removeEventListener("blur",B),window.removeEventListener("resize",B)}},[O]);const[X,Q]=gM(B=>{const ne=P().filter(oe=>!oe.disabled),ae=ne.find(oe=>oe.ref.current===document.activeElement),W=yM(ne,B,ae);W&&setTimeout(()=>W.ref.current.focus())}),te=p.useCallback((B,ne,ae)=>{const W=!Y.current&&!ae;(w.value!==void 0&&w.value===ne||W)&&(C(B),W&&(Y.current=!0))},[w.value]),Z=p.useCallback(()=>S==null?void 0:S.focus(),[S]),xe=p.useCallback((B,ne,ae)=>{const W=!Y.current&&!ae;(w.value!==void 0&&w.value===ne||W)&&M(B)},[w.value]),Oe=r==="popper"?H0:eM,V=Oe===H0?{side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:y,avoidCollisions:b}:{};return a.jsx(JD,{scope:n,content:S,viewport:j,onViewportChange:D,itemRefCallback:te,selectedItem:I,onItemLeave:Z,itemTextRefCallback:xe,focusSelectedItem:G,selectedItemText:R,position:r,isPositioned:A,searchRef:X,children:a.jsx(kb,{as:da,allowPinchZoom:!0,children:a.jsx(Pb,{asChild:!0,trapped:w.open,onMountAutoFocus:B=>{B.preventDefault()},onUnmountAutoFocus:de(s,B=>{var ne;(ne=w.trigger)==null||ne.focus({preventScroll:!0}),B.preventDefault()}),children:a.jsx(Kd,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:B=>B.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:a.jsx(Oe,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:B=>B.preventDefault(),..._,...V,onPlaced:()=>F(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:de(_.onKeyDown,B=>{const ne=B.ctrlKey||B.altKey||B.metaKey;if(B.key==="Tab"&&B.preventDefault(),!ne&&B.key.length===1&&Q(B.key),["ArrowUp","ArrowDown","Home","End"].includes(B.key)){let W=P().filter(oe=>!oe.disabled).map(oe=>oe.ref.current);if(["ArrowUp","End"].includes(B.key)&&(W=W.slice().reverse()),["ArrowUp","ArrowDown"].includes(B.key)){const oe=B.target,fe=W.indexOf(oe);W=W.slice(fe+1)}setTimeout(()=>q(W)),B.preventDefault()}})})})})})})});ZD.displayName=mQ;var pQ="SelectItemAlignedPosition",eM=p.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=Ao(Aa,n),o=Po(Aa,n),[l,c]=p.useState(null),[u,h]=p.useState(null),f=Ze(e,T=>h(T)),m=Tg(n),g=p.useRef(!1),v=p.useRef(!0),{viewport:y,selectedItem:b,selectedItemText:_,focusSelectedItem:w}=o,S=p.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&y&&b&&_){const T=i.trigger.getBoundingClientRect(),I=u.getBoundingClientRect(),C=i.valueNode.getBoundingClientRect(),R=_.getBoundingClientRect();if(i.dir!=="rtl"){const oe=R.left-I.left,fe=C.left-oe,ye=T.left-fe,ue=T.width+ye,ee=Math.max(ue,I.width),me=window.innerWidth-qr,pe=lT(fe,[qr,Math.max(qr,me-ee)]);l.style.minWidth=ue+"px",l.style.left=pe+"px"}else{const oe=I.right-R.right,fe=window.innerWidth-C.right-oe,ye=window.innerWidth-T.right-fe,ue=T.width+ye,ee=Math.max(ue,I.width),me=window.innerWidth-qr,pe=lT(fe,[qr,Math.max(qr,me-ee)]);l.style.minWidth=ue+"px",l.style.right=pe+"px"}const M=m(),P=window.innerHeight-qr*2,A=y.scrollHeight,F=window.getComputedStyle(u),Y=parseInt(F.borderTopWidth,10),q=parseInt(F.paddingTop,10),G=parseInt(F.borderBottomWidth,10),O=parseInt(F.paddingBottom,10),L=Y+q+A+O+G,X=Math.min(b.offsetHeight*5,L),Q=window.getComputedStyle(y),te=parseInt(Q.paddingTop,10),Z=parseInt(Q.paddingBottom,10),xe=T.top+T.height/2-qr,Oe=P-xe,V=b.offsetHeight/2,B=b.offsetTop+V,ne=Y+q+B,ae=L-ne;if(ne<=xe){const oe=M.length>0&&b===M[M.length-1].ref.current;l.style.bottom="0px";const fe=u.clientHeight-y.offsetTop-y.offsetHeight,ye=Math.max(Oe,V+(oe?Z:0)+fe+G),ue=ne+ye;l.style.height=ue+"px"}else{const oe=M.length>0&&b===M[0].ref.current;l.style.top="0px";const ye=Math.max(xe,Y+y.offsetTop+(oe?te:0)+V)+ae;l.style.height=ye+"px",y.scrollTop=ne-xe+y.offsetTop}l.style.margin=`${qr}px 0`,l.style.minHeight=X+"px",l.style.maxHeight=P+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[m,i.trigger,i.valueNode,l,u,y,b,_,i.dir,r]);Zt(()=>S(),[S]);const[N,j]=p.useState();Zt(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const D=p.useCallback(T=>{T&&v.current===!0&&(S(),w==null||w(),v.current=!1)},[S,w]);return a.jsx(yQ,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:D,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:a.jsx(Ce.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});eM.displayName=pQ;var gQ="SelectPopperPosition",H0=p.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=qr,...i}=t,o=Ng(n);return a.jsx(uw,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});H0.displayName=gQ;var[yQ,Gb]=Vc(Aa,{}),K0="SelectViewport",tM=p.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=Po(K0,n),o=Gb(K0,n),l=Ze(e,i.onViewportChange),c=p.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx(Ig.Slot,{scope:n,children:a.jsx(Ce.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:de(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&f){const g=Math.abs(c.current-h.scrollTop);if(g>0){const v=window.innerHeight-qr*2,y=parseFloat(f.style.minHeight),b=parseFloat(f.style.height),_=Math.max(y,b);if(_<v){const w=_+g,S=Math.min(v,w),N=w-S;f.style.height=S+"px",f.style.bottom==="0px"&&(h.scrollTop=N>0?N:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});tM.displayName=K0;var nM="SelectGroup",[vQ,xQ]=Vc(nM),wQ=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Js();return a.jsx(vQ,{scope:n,id:s,children:a.jsx(Ce.div,{role:"group","aria-labelledby":s,...r,ref:e})})});wQ.displayName=nM;var rM="SelectLabel",sM=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=xQ(rM,n);return a.jsx(Ce.div,{id:s.id,...r,ref:e})});sM.displayName=rM;var hp="SelectItem",[bQ,iM]=Vc(hp),oM=p.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,l=Ao(hp,n),c=Po(hp,n),u=l.value===r,[h,f]=p.useState(i??""),[m,g]=p.useState(!1),v=Ze(e,w=>{var S;return(S=c.itemRefCallback)==null?void 0:S.call(c,w,r,s)}),y=Js(),b=p.useRef("touch"),_=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(bQ,{scope:n,value:r,disabled:s,textId:y,isSelected:u,onItemTextChange:p.useCallback(w=>{f(S=>S||((w==null?void 0:w.textContent)??"").trim())},[]),children:a.jsx(Ig.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:a.jsx(Ce.div,{role:"option","aria-labelledby":y,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:v,onFocus:de(o.onFocus,()=>g(!0)),onBlur:de(o.onBlur,()=>g(!1)),onClick:de(o.onClick,()=>{b.current!=="mouse"&&_()}),onPointerUp:de(o.onPointerUp,()=>{b.current==="mouse"&&_()}),onPointerDown:de(o.onPointerDown,w=>{b.current=w.pointerType}),onPointerMove:de(o.onPointerMove,w=>{var S;b.current=w.pointerType,s?(S=c.onItemLeave)==null||S.call(c):b.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:de(o.onPointerLeave,w=>{var S;w.currentTarget===document.activeElement&&((S=c.onItemLeave)==null||S.call(c))}),onKeyDown:de(o.onKeyDown,w=>{var N;((N=c.searchRef)==null?void 0:N.current)!==""&&w.key===" "||(aQ.includes(w.key)&&_(),w.key===" "&&w.preventDefault())})})})})});oM.displayName=hp;var Ru="SelectItemText",aM=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=Ao(Ru,n),l=Po(Ru,n),c=iM(Ru,n),u=dQ(Ru,n),[h,f]=p.useState(null),m=Ze(e,_=>f(_),c.onItemTextChange,_=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,_,c.value,c.disabled)}),g=h==null?void 0:h.textContent,v=p.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:y,onNativeOptionRemove:b}=u;return Zt(()=>(y(v),()=>b(v)),[y,b,v]),a.jsxs(a.Fragment,{children:[a.jsx(Ce.span,{id:c.textId,...i,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?ja.createPortal(i.children,o.valueNode):null]})});aM.displayName=Ru;var lM="SelectItemIndicator",cM=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return iM(lM,n).isSelected?a.jsx(Ce.span,{"aria-hidden":!0,...r,ref:e}):null});cM.displayName=lM;var G0="SelectScrollUpButton",uM=p.forwardRef((t,e)=>{const n=Po(G0,t.__scopeSelect),r=Gb(G0,t.__scopeSelect),[s,i]=p.useState(!1),o=Ze(e,r.onScrollButtonChange);return Zt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(hM,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});uM.displayName=G0;var Q0="SelectScrollDownButton",dM=p.forwardRef((t,e)=>{const n=Po(Q0,t.__scopeSelect),r=Gb(Q0,t.__scopeSelect),[s,i]=p.useState(!1),o=Ze(e,r.onScrollButtonChange);return Zt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;i(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(hM,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});dM.displayName=Q0;var hM=p.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=Po("SelectScrollButton",n),o=p.useRef(null),l=Tg(n),c=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),Zt(()=>{var h;const u=l().find(f=>f.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),a.jsx(Ce.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:de(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:de(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:de(s.onPointerLeave,()=>{c()})})}),_Q="SelectSeparator",fM=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return a.jsx(Ce.div,{"aria-hidden":!0,...r,ref:e})});fM.displayName=_Q;var Y0="SelectArrow",EQ=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Ng(n),i=Ao(Y0,n),o=Po(Y0,n);return i.open&&o.position==="popper"?a.jsx(dw,{...s,...r,ref:e}):null});EQ.displayName=Y0;function mM(t){return t===""||t===void 0}var pM=p.forwardRef((t,e)=>{const{value:n,...r}=t,s=p.useRef(null),i=Ze(e,s),o=Wb(n);return p.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==n&&h){const f=new Event("change",{bubbles:!0});h.call(l,n),l.dispatchEvent(f)}},[o,n]),a.jsx(Gd,{asChild:!0,children:a.jsx("select",{...r,ref:i,defaultValue:n})})});pM.displayName="BubbleSelect";function gM(t){const e=gn(t),n=p.useRef(""),r=p.useRef(0),s=p.useCallback(o=>{const l=n.current+o;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=p.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function yM(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=SQ(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function SQ(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var IQ=qD,vM=HD,TQ=GD,NQ=QD,CQ=YD,xM=XD,AQ=tM,wM=sM,bM=oM,PQ=aM,RQ=cM,_M=uM,EM=dM,SM=fM;const Cr=IQ,Ar=TQ,dr=p.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(vM,{ref:r,className:_e("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,a.jsx(NQ,{asChild:!0,children:a.jsx(Ec,{className:"h-4 w-4 opacity-50"})})]}));dr.displayName=vM.displayName;const IM=p.forwardRef(({className:t,...e},n)=>a.jsx(_M,{ref:n,className:_e("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(mA,{className:"h-4 w-4"})}));IM.displayName=_M.displayName;const TM=p.forwardRef(({className:t,...e},n)=>a.jsx(EM,{ref:n,className:_e("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(Ec,{className:"h-4 w-4"})}));TM.displayName=EM.displayName;const hr=p.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>a.jsx(CQ,{children:a.jsxs(xM,{ref:s,className:_e("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[a.jsx(IM,{}),a.jsx(AQ,{className:_e("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(TM,{})]})}));hr.displayName=xM.displayName;const jQ=p.forwardRef(({className:t,...e},n)=>a.jsx(wM,{ref:n,className:_e("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));jQ.displayName=wM.displayName;const mt=p.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(bM,{ref:r,className:_e("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(RQ,{children:a.jsx(ha,{className:"h-4 w-4"})})}),a.jsx(PQ,{children:e})]}));mt.displayName=bM.displayName;const kQ=p.forwardRef(({className:t,...e},n)=>a.jsx(SM,{ref:n,className:_e("-mx-1 my-1 h-px bg-muted",t),...e}));kQ.displayName=SM.displayName;const Qb=async()=>{try{console.log("Starting to refresh questions collection...");const t=Ie(K,"questions"),e=await Re(t);if(e.empty)console.log("Questions collection is already empty");else{console.log(`Found ${e.size} questions to delete`);const l=mn(K);e.forEach(c=>{l.delete(c.ref)}),await l.commit(),console.log("All existing questions deleted successfully")}const n=await xg();console.log("Questions re-seeded successfully");const r=Ge(t,nt("type","==","moreSixes")),s=await Re(r);if(s.empty){console.error("ERROR: moreSixes question was not created!");const l=be(t,"more-sixes"),c=mn(K);c.set(l,{text:"Which team will hit more sixes?",type:"moreSixes",points:5,isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),await c.commit(),console.log("Manually created moreSixes question")}else console.log("moreSixes question found successfully:"),s.forEach(l=>{console.log("  - ID:",l.id),console.log("  - Data:",JSON.stringify(l.data()))});const i=Ge(t,nt("type","==","totalSixes")),o=await Re(i);if(o.empty){console.error("ERROR: totalSixes question was not created!");const l=be(t,"total-sixes"),c=mn(K);c.set(l,{text:"How many sixes will be hit in this match?",type:"totalSixes",options:[{id:"range1",value:"12-17",label:"12-17 sixes"},{id:"range2",value:"17-22",label:"17-22 sixes"},{id:"range3",value:"22-37",label:"22-37 sixes"},{id:"range4",value:"37-42",label:"37-42 sixes"}],points:15,isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),await c.commit(),console.log("Manually created totalSixes question with options")}else console.log("totalSixes question found successfully:"),o.forEach(l=>{console.log("  - ID:",l.id),console.log("  - Data:",JSON.stringify(l.data()));const c=l.data();if(!c.options||!Array.isArray(c.options)||c.options.length===0){console.log("  - totalSixes question missing options, adding them now");const u=l.ref;Co(u,{options:[{id:"range1",value:"12-17",label:"12-17 sixes"},{id:"range2",value:"17-22",label:"17-22 sixes"},{id:"range3",value:"22-37",label:"22-37 sixes"},{id:"range4",value:"37-42",label:"37-42 sixes"}],updatedAt:new Date().toISOString()})}else console.log("  - totalSixes options:",JSON.stringify(c.options))});return!0}catch(t){return console.error("Error refreshing questions:",t),!1}};function DQ({match:t,teams:e,players:n,squad1:r=[],squad2:s=[],loading:i=!1}){const{toast:o}=yn(),[l,c]=p.useState(Nr.currentUser),[u,h]=p.useState([]),[f,m]=p.useState({}),[g,v]=p.useState([]),[y,b]=p.useState(!1),[_,w]=p.useState(!1),[S,N]=p.useState(!1),[j,D]=p.useState(!1),[T,I]=p.useState(!0),[C,R]=p.useState({}),[M,P]=p.useState([]),A=e.team1,F=e.team2,Y=r,q=s,G=()=>{const V=[...Y,...q];console.log(`Combined players for selection: ${V.length} total players`),console.log(`Team 1 players: ${Y.length}, Team 2 players: ${q.length}`),Y.length>0&&console.log("Team 1 first player:",Y[0]),q.length>0&&console.log("Team 2 first player:",q[0]);const B=V.filter(W=>W.role);console.log(`Players with defined roles: ${B.length} out of ${V.length}`);const ne=V.map(W=>W.role||"undefined").sort(),ae=[...new Set(ne)];return console.log("Unique player roles found:",ae),V},O=()=>G().filter(B=>{if(!B.role)return!1;const ne=B.role.toLowerCase();return ne.includes("bat")||ne.includes("keeper")||ne.includes("all")||ne.includes("rounder")||ne.includes("wicket")}),L=()=>G().filter(B=>{if(!B.role)return!1;const ne=B.role.toLowerCase();return ne.includes("bowl")||ne.includes("all")||ne.includes("rounder")||ne.includes("spin")||ne.includes("pace")});p.useEffect(()=>{console.log("PredictionGame component - input data:"),console.log("Match:",t),console.log("Match Team1Id:",t.team1Id),console.log("Match Team2Id:",t.team2Id),console.log("Teams object:",e),console.log("Team1 from teams:",e.team1),console.log("Team2 from teams:",e.team2),console.log("Squad 1 length:",r.length),console.log("Squad 2 length:",s.length)},[t,r,s,e]),p.useEffect(()=>{console.log("Filtered players:"),console.log("Team 1 batsmen count:",O().filter(V=>V.teamId===t.team1Id).length),console.log("Team 2 batsmen count:",O().filter(V=>V.teamId===t.team2Id).length),console.log("Team 1 bowlers count:",L().filter(V=>V.teamId===t.team1Id).length),console.log("Team 2 bowlers count:",L().filter(V=>V.teamId===t.team2Id).length)},[r,s,t.team1Id,t.team2Id]),p.useEffect(()=>{const V=Nr.onAuthStateChanged(B=>{c(B)});return()=>V()},[]),p.useEffect(()=>{t&&(N(GF(t)),(new Date(t.date)<=new Date||t.status==="completed")&&w(!0),(async()=>{if(!t.id){I(!1);return}try{I(!0);const ae=Ie(K,"questions"),W=Ge(ae,nt("isActive","==",!0)),oe=await Re(W),fe=[];console.log("-------- DEBUG: Fetching questions --------");const ye={};oe.forEach(ue=>{const ee=ue.data();if(console.log(`Question ID: ${ue.id}`),console.log(`Question Text: ${ee.text}`),console.log(`Question Type: ${ee.type}`),console.log(`Question Active: ${ee.isActive}`),!ee.text||ee.text.trim()===""){console.log(`Skipping question with empty text: ${ue.id}`);return}if(ye[ee.type]){console.log(`Skipping duplicate question type: ${ee.type} (ID: ${ue.id})`);return}ye[ee.type]=!0;const me={id:ue.id,...ee};fe.push(me),ee.type==="moreSixes"&&(console.log("FOUND MORESIXES QUESTION:"),console.log("  - ID:",ue.id),console.log("  - Text:",ee.text),console.log("  - Full data:",JSON.stringify(ee))),ee.type==="totalSixes"&&(console.log("FOUND TOTALSIXES QUESTION:"),console.log("  - ID:",ue.id),console.log("  - Text:",ee.text),console.log("  - Options:",ee.options?JSON.stringify(ee.options):"No options found"),console.log("  - Full data:",JSON.stringify(ee)))}),console.log("All Fetched questions:",fe),console.log("moreSixes question:",fe.find(ue=>ue.type==="moreSixes")),console.log("Teams data when loading questions:"),console.log("Match:",t),console.log("Team1:",A),console.log("Team2:",F),h(fe),l?X(t.id,fe):I(!1)}catch(ae){console.error("Error fetching questions and answers:",ae),o({title:"Error",description:"Failed to load prediction questions. Please try again.",variant:"destructive"}),I(!1)}})())},[t,l,o]);const X=(V,B)=>{if(l)try{const ne=Ie(K,"predictionAnswers"),ae=Ge(ne,nt("userId","==",l.uid),nt("matchId","==",V));return Qu(ae,oe=>{const fe=[],ye={};oe.forEach(ue=>{const ee=ue.data(),me={id:ue.id,...ee};fe.push(me),ye[me.questionId]=me.answer}),v(fe),m(ye),D(fe.length>0),I(!1)},oe=>{console.error("Error in answers listener:",oe),I(!1)})}catch(ne){console.error("Error setting up answers listener:",ne),I(!1)}};p.useEffect(()=>{let V;return l&&t.id&&(V=X(t.id)),()=>{V&&V()}},[l==null?void 0:l.uid,t.id]);const Q=(V,B)=>{const ne=u.find(W=>W.id===V);if(!ne)return;let ae=B;if(ne.type==="topBatsman"||ne.type==="topBowler")if(!B.startsWith("any-")&&!B.startsWith("no-")){const W=B,oe=vs(B);console.log(`Storing standardized player for ${ne.type}:`),console.log(`  Original: "${W}"`),console.log(`  Standardized: "${oe}"`),ae=oe}else console.log(`Storing special answer for ${ne.type}: "${B}"`);m(W=>({...W,[V]:ae})),P(W=>[...W,{questionId:V,answer:ae}])},te=(V,B)=>{if(Q(V,B),!B){R(ae=>{const W={...ae};return delete W[V],W});return}const ne=Number(B);if(isNaN(ne)){R(ae=>({...ae,[V]:"Please enter a valid number"}));return}if(ne<30||ne>400){R(ae=>({...ae,[V]:"Please enter a number between 30 and 400"}));return}R(ae=>{const W={...ae};return delete W[V],W})},Z=async()=>{if(!l){o({title:"Authentication Required",description:"Please sign in to make predictions.",variant:"destructive"});return}if(_){o({title:"Predictions Locked",description:"You cannot make predictions after the match has started.",variant:"destructive"});return}if(!S){o({title:"Predictions Not Open Yet",description:"Predictions are only allowed within 24 hours of the match start time.",variant:"destructive"});return}if(j){o({title:"Predictions Already Submitted",description:"You've already submitted predictions for this match and cannot modify them.",variant:"destructive"});return}if(Object.keys(f).length===0){o({title:"No Predictions Made",description:"Please answer at least one question.",variant:"destructive"});return}try{b(!0);const B=Ie(K,"predictionAnswers"),ne=Ge(B,nt("userId","==",l.uid),nt("matchId","==",t.id));if(!(await Re(ne)).empty){D(!0),o({title:"Predictions Already Submitted",description:"You've already submitted predictions for this match and cannot modify them.",variant:"destructive"}),b(!1);return}let W="";const oe=Ie(K,"predictionGames"),fe=Ge(oe,nt("userId","==",l.uid),nt("matchId","==",t.id)),ye=await Re(fe);if(ye.empty){const me=be(oe);W=me.id,await tr(me,{id:W,userId:l.uid,matchId:t.id,title:`${(A==null?void 0:A.name)||t.team1Id} vs ${(F==null?void 0:F.name)||t.team2Id} Predictions`,description:`Predictions for the match on ${new Date(t.date).toLocaleDateString()}`,isActive:!0,questionIds:u.map(pe=>pe.id),createdAt:hn(),updatedAt:hn()})}else W=ye.docs[0].id;const ue=Ie(K,"predictionAnswers"),ee=[];for(const[me,pe]of Object.entries(f)){if(!pe||!u.find(Qe=>Qe.id===me))continue;const ge=be(ue),vt={id:ge.id,userId:l.uid,matchId:t.id,predictionGameId:W,questionId:me,answer:pe,createdAt:hn(),updatedAt:hn()};await tr(ge,vt),ee.push(vt)}v(me=>[...me,...ee]),D(!0),o({title:"Predictions Submitted",description:"Your predictions have been saved successfully! You cannot modify them anymore."})}catch(B){console.error("Error submitting predictions:",B),o({title:"Error",description:"Failed to submit your predictions. Please try again.",variant:"destructive"})}finally{b(!1)}},xe=async()=>{if(!l){o({title:"Authentication Required",description:"Please sign in to refresh the database.",variant:"destructive"});return}try{b(!0),await Qb(),o({title:"Database Refreshed",description:"The questions database has been refreshed. The page will now reload."}),setTimeout(()=>{window.location.reload()},1500)}catch(V){console.error("Error refreshing database:",V),o({title:"Error",description:"Failed to refresh the database. Please try again.",variant:"destructive"})}finally{b(!1)}},Oe=V=>{var ae;const B=_||!l||j||!S,ne=((ae=g.find(W=>W.questionId===V.id))==null?void 0:ae.answer)||"";if(V.type==="topBatsman"||V.type==="topBowler"){const W=V.type==="topBatsman"?O():L();return a.jsxs(Cr,{value:f[V.id]||ne,onValueChange:oe=>Q(V.id,oe),disabled:B,children:[a.jsx(dr,{className:"w-full",children:a.jsx(Ar,{placeholder:"Select a player"})}),a.jsxs(hr,{children:[a.jsx(mt,{value:"team1-header",disabled:!0,className:"font-bold text-primary",children:(A==null?void 0:A.name)||t.team1Id}),W.filter(oe=>oe.teamId===t.team1Id).map(oe=>a.jsx(mt,{value:oe.name,children:oe.name},oe.id)),a.jsx(mt,{value:"team2-header",disabled:!0,className:"font-bold text-primary",children:(F==null?void 0:F.name)||t.team2Id}),W.filter(oe=>oe.teamId===t.team2Id).map(oe=>a.jsx(mt,{value:oe.name,children:oe.name},oe.id))]})]})}return V.type==="winner"?a.jsxs(ll,{value:f[V.id]||ne,onValueChange:W=>Q(V.id,W),disabled:B,className:"flex flex-col space-y-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(sr,{value:t.team1Id,id:`${V.id}-team1`}),a.jsx(tt,{htmlFor:`${V.id}-team1`,children:(A==null?void 0:A.name)||t.team1Id})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(sr,{value:t.team2Id,id:`${V.id}-team2`}),a.jsx(tt,{htmlFor:`${V.id}-team2`,children:(F==null?void 0:F.name)||t.team2Id})]})]}):V.type==="totalSixes"?(console.log("Rendering totalSixes question:",V),console.log("Has options?",!!V.options),console.log("Options:",V.options),a.jsxs(ll,{value:f[V.id]||ne,onValueChange:W=>Q(V.id,W),disabled:B,className:"flex flex-col space-y-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(sr,{value:"12-17",id:`${V.id}-range1`}),a.jsx(tt,{htmlFor:`${V.id}-range1`,children:"12-17 sixes"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(sr,{value:"17-22",id:`${V.id}-range2`}),a.jsx(tt,{htmlFor:`${V.id}-range2`,children:"17-22 sixes"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(sr,{value:"22-37",id:`${V.id}-range3`}),a.jsx(tt,{htmlFor:`${V.id}-range3`,children:"22-37 sixes"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(sr,{value:"37-42",id:`${V.id}-range4`}),a.jsx(tt,{htmlFor:`${V.id}-range4`,children:"37-42 sixes"})]})]})):["highestTotal","totalRuns","numberOfSixes"].includes(V.type)?V.type==="highestTotal"?a.jsxs(ll,{value:f[V.id]||ne,onValueChange:W=>Q(V.id,W),disabled:B,className:"flex flex-col space-y-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(sr,{value:"yes",id:`${V.id}-yes`}),a.jsx(tt,{htmlFor:`${V.id}-yes`,children:"Yes, the total will exceed 350 runs"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(sr,{value:"no",id:`${V.id}-no`}),a.jsx(tt,{htmlFor:`${V.id}-no`,children:"No, the total will be 350 runs or less"})]})]}):a.jsx(sn,{type:"number",min:"0",placeholder:"Enter your prediction",value:f[V.id]||ne,onChange:W=>te(V.id,W.target.value),disabled:B,className:"w-full"}):V.type==="moreSixes"?a.jsxs(ll,{value:f[V.id]||ne,onValueChange:W=>Q(V.id,W),disabled:B,className:"flex flex-col space-y-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(sr,{value:t.team1Id,id:`${V.id}-team1`}),a.jsx(tt,{htmlFor:`${V.id}-team1`,children:(A==null?void 0:A.name)||t.team1Id})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(sr,{value:t.team2Id,id:`${V.id}-team2`}),a.jsx(tt,{htmlFor:`${V.id}-team2`,children:(F==null?void 0:F.name)||t.team2Id})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(sr,{value:"tie",id:`${V.id}-tie`}),a.jsx(tt,{htmlFor:`${V.id}-tie`,children:"Tie (Equal Sixes)"})]})]}):V.options?a.jsx(ll,{value:f[V.id]||ne,onValueChange:W=>Q(V.id,W),disabled:B,className:"flex flex-col space-y-3",children:V.options.map(W=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(sr,{value:W.value,id:`${V.id}-${W.id}`}),a.jsx(tt,{htmlFor:`${V.id}-${W.id}`,children:W.label})]},W.id))}):a.jsx("div",{className:"text-gray-500",children:"No options available for this question."})};return p.useEffect(()=>{console.log("Squad player details:"),r.length>0?(console.log("Team 1 squad players:"),r.forEach((V,B)=>{console.log(`  ${B+1}. ${V.name} (${V.role}), ID: ${V.id}, TeamID: ${V.teamId}`)})):console.log("Team 1 has no squad players"),s.length>0?(console.log("Team 2 squad players:"),s.forEach((V,B)=>{console.log(`  ${B+1}. ${V.name} (${V.role}), ID: ${V.id}, TeamID: ${V.teamId}`)})):console.log("Team 2 has no squad players")},[r,s]),i||T?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx(Kt,{className:"h-8 w-8 animate-spin text-primary mb-2"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Loading prediction questions..."})]})}):u.length===0?a.jsxs("div",{className:"bg-amber-50 border border-amber-200 p-4 rounded-md",children:[a.jsx("h3",{className:"text-amber-800 font-semibold",children:"No Questions Available"}),a.jsx("p",{className:"text-amber-700 mt-1",children:"There are no prediction questions available for this match yet."})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Make Your Predictions"}),_?a.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900 p-4 rounded-md mb-6",children:a.jsxs("p",{className:"text-yellow-800 dark:text-yellow-200",children:["Predictions are locked as the match has ",t.status==="completed"?"ended":"started",".",g.length>0?" Your predictions are displayed below.":""]})}):S?j?a.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 p-4 rounded-md mb-6",children:a.jsx("p",{className:"text-blue-800 dark:text-blue-200",children:"You've already submitted predictions for this match. Your predictions are displayed below and cannot be modified."})}):null:a.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900 p-4 rounded-md mb-6",children:a.jsx("p",{className:"text-yellow-800 dark:text-yellow-200",children:"Predictions will open 24 hours before the match starts. Please check back later to submit your predictions."})}),l?null:a.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 p-4 rounded-md mb-6",children:a.jsx("p",{className:"text-blue-800 dark:text-blue-200",children:"Please sign in to make predictions for this match."})}),a.jsx("div",{className:"space-y-6",children:u.map(V=>{var ne;const B=((ne=g.find(ae=>ae.questionId===V.id))==null?void 0:ne.answer)||"";return a.jsxs(ht,{children:[a.jsxs(bt,{children:[a.jsx(Tt,{children:V.text}),a.jsxs(zt,{children:["Worth ",V.points," points",V.negativePoints?` | -${V.negativePoints} points for incorrect answers`:""]})]}),a.jsxs(gt,{children:[Oe(V),V.type==="totalSixes"&&!B&&a.jsx("div",{className:"mt-4",children:a.jsx("p",{className:"text-sm text-gray-500",children:"If no options appear above, please try refreshing the page."})})]})]},V.id)})}),!_&&S&&!j&&l&&a.jsx("div",{className:"flex justify-end",children:a.jsxs(Se,{onClick:Z,disabled:y||Object.keys(f).length===0,className:"w-full sm:w-auto",children:[y&&a.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Submit Predictions"]})}),g.length>0&&a.jsxs("div",{className:"bg-green-50 dark:bg-green-900 p-4 rounded-md",children:[a.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-200 mb-2",children:"Your Predictions"}),j&&a.jsx("p",{className:"text-sm text-green-700 dark:text-green-300 mb-4",children:"Predictions are final and cannot be changed after submission."}),a.jsx("ul",{className:"space-y-2 text-green-700 dark:text-green-300",children:g.map(V=>{const B=u.find(ae=>ae.id===V.questionId);if(!B)return null;let ne=V.answer;if(B.type==="winner")ne=V.answer===t.team1Id?(A==null?void 0:A.name)||t.team1Id:(F==null?void 0:F.name)||t.team2Id;else if(B.type==="topBatsman"||B.type==="topBowler")V.answer==="any-team1"?ne=`Any ${(A==null?void 0:A.name)||t.team1Id} Player`:V.answer==="any-team2"?ne=`Any ${(F==null?void 0:F.name)||t.team2Id} Player`:ne=V.answer;else if(B.type==="highestTotal")ne=V.answer?`${V.answer} runs`:"No prediction";else if(B.type==="moreSixes")V.answer==="tie"?ne="Tie (Equal Sixes)":V.answer===t.team1Id?ne=(A==null?void 0:A.name)||t.team1Id:V.answer===t.team2Id&&(ne=(F==null?void 0:F.name)||t.team2Id);else if(B.options){const ae=B.options.find(W=>W.value===V.answer);ae&&(ne=ae.label)}return a.jsxs("li",{className:"flex flex-col",children:[a.jsx("span",{className:"font-medium",children:B.text}),a.jsxs("span",{className:"text-sm",children:["Your answer: ",ne]}),V.isCorrect!==void 0&&a.jsx("span",{className:`text-sm ${V.isCorrect?"text-green-600":"text-red-600"}`,children:V.isCorrect?`Correct (+${V.pointsEarned||B.points} points)`:V.pointsEarned<0?`Incorrect (${V.pointsEarned} points)`:"Incorrect"})]},V.id)})})]}),!j&&l&&a.jsxs("div",{className:"mt-8 text-center",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Having trouble with the questions?"}),a.jsxs(Se,{variant:"ghost",size:"sm",onClick:xe,disabled:y,className:"text-xs",children:[a.jsx(Us,{className:"mr-1 h-3 w-3"}),"Refresh Questions Database"]})]})]})}function Ke({className:t,...e}){return a.jsx("div",{className:_e("animate-pulse rounded-md bg-muted",t),...e})}var Yb="Collapsible",[MQ,NM]=$r(Yb),[OQ,Xb]=MQ(Yb),CM=p.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:i,onOpenChange:o,...l}=t,[c=!1,u]=ns({prop:r,defaultProp:s,onChange:o});return a.jsx(OQ,{scope:n,disabled:i,contentId:Js(),open:c,onOpenToggle:p.useCallback(()=>u(h=>!h),[u]),children:a.jsx(Ce.div,{"data-state":t_(c),"data-disabled":i?"":void 0,...l,ref:e})})});CM.displayName=Yb;var AM="CollapsibleTrigger",Jb=p.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,s=Xb(AM,n);return a.jsx(Ce.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":t_(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:e,onClick:de(t.onClick,s.onOpenToggle)})});Jb.displayName=AM;var Zb="CollapsibleContent",e_=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Xb(Zb,t.__scopeCollapsible);return a.jsx(Ns,{present:n||s.open,children:({present:i})=>a.jsx(LQ,{...r,ref:e,present:i})})});e_.displayName=Zb;var LQ=p.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:s,...i}=t,o=Xb(Zb,n),[l,c]=p.useState(r),u=p.useRef(null),h=Ze(e,u),f=p.useRef(0),m=f.current,g=p.useRef(0),v=g.current,y=o.open||l,b=p.useRef(y),_=p.useRef();return p.useEffect(()=>{const w=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(w)},[]),Zt(()=>{const w=u.current;if(w){_.current=_.current||{transitionDuration:w.style.transitionDuration,animationName:w.style.animationName},w.style.transitionDuration="0s",w.style.animationName="none";const S=w.getBoundingClientRect();f.current=S.height,g.current=S.width,b.current||(w.style.transitionDuration=_.current.transitionDuration,w.style.animationName=_.current.animationName),c(r)}},[o.open,r]),a.jsx(Ce.div,{"data-state":t_(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!y,...i,ref:h,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":v?`${v}px`:void 0,...t.style},children:y&&s})});function t_(t){return t?"open":"closed"}var PM=CM,VQ=Jb,FQ=e_;const $Q=PM,UQ=Jb,BQ=e_,bh=p.forwardRef(({className:t,...e},n)=>a.jsx("div",{className:"relative w-full overflow-auto",children:a.jsx("table",{ref:n,className:_e("w-full caption-bottom text-sm",t),...e})}));bh.displayName="Table";const _h=p.forwardRef(({className:t,...e},n)=>a.jsx("thead",{ref:n,className:_e("[&_tr]:border-b",t),...e}));_h.displayName="TableHeader";const Eh=p.forwardRef(({className:t,...e},n)=>a.jsx("tbody",{ref:n,className:_e("[&_tr:last-child]:border-0",t),...e}));Eh.displayName="TableBody";const zQ=p.forwardRef(({className:t,...e},n)=>a.jsx("tfoot",{ref:n,className:_e("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));zQ.displayName="TableFooter";const kr=p.forwardRef(({className:t,...e},n)=>a.jsx("tr",{ref:n,className:_e("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));kr.displayName="TableRow";const Wt=p.forwardRef(({className:t,...e},n)=>a.jsx("th",{ref:n,className:_e("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));Wt.displayName="TableHead";const Ct=p.forwardRef(({className:t,...e},n)=>a.jsx("td",{ref:n,className:_e("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));Ct.displayName="TableCell";const qQ=p.forwardRef(({className:t,...e},n)=>a.jsx("caption",{ref:n,className:_e("mt-4 text-sm text-muted-foreground",t),...e}));qQ.displayName="TableCaption";function WQ({matchId:t,limit:e=10}){const[n,r]=p.useState(t?"match":"season"),[s,i]=p.useState([]),[o,l]=p.useState(!0),[c,u]=p.useState(null),[h,f]=p.useState(new Map),[m,g]=p.useState(null);p.useEffect(()=>{l(!0),u(null);let D=null;return(async()=>{try{await v(),n==="match"&&t?D=await y(t):D=_()}catch(I){console.error("Error setting up leaderboard listener:",I),u("Failed to load leaderboard. Please try again later."),l(!1)}})(),()=>{D&&D()}},[n,t]);const v=async()=>{try{const D=Ie(K,"questions"),T=await Re(D),I=new Map;T.forEach(C=>{const R=C.data();I.set(C.id,{text:R.text,points:R.points||0}),R.type&&(I.set(R.type,{text:R.text,points:R.points||0}),I.set(R.type.toLowerCase(),{text:R.text,points:R.points||0}))}),console.log("Question map created with entries:",Array.from(I.keys()).join(", ")),f(I)}catch(D){console.error("Error fetching questions:",D)}},y=async D=>{try{const T=Ie(K,"leaderboards"),I=Ge(T,nt("matchId","==",D),nt("type","==","match")),C=await Re(I);if(C.empty){console.log(`No leaderboard found for match ${D}, falling back to old method`);const F=await b(D);return i(F),l(!1),()=>{}}const M=C.docs[0].id,P=Ie(K,"leaderboards",M,"entries"),A=Ge(P,Es("points","desc"),Ol(e));return Qu(A,async F=>{if(F.empty){i([]),l(!1);return}const Y=[],q=[];F.forEach(G=>{const O=G.data(),L=Y.length+1;q.push(O.userId),Y.push({position:L,userId:O.userId,userName:O.displayName||"Anonymous User",userAvatar:O.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(O.displayName||"A")}&background=random`,points:O.points||0,correctPredictions:O.correctPredictions||0,totalPredictions:O.totalPredictions||0,accuracy:O.accuracy||0,streak:0,trend:"neutral",questionPoints:[]})});for(const G of Y){const O=Ie(K,"predictionAnswers"),L=Ge(O,nt("userId","==",G.userId),nt("matchId","==",D)),X=await Re(L),Q=[];X.forEach(te=>{const Z=te.data();let xe=h.get(Z.questionId);!xe&&Z.questionId&&(xe=h.get(Z.questionId.toLowerCase()));let Oe=xe==null?void 0:xe.text;if(!Oe&&Z.questionId){const V=Z.questionId;Oe=V.includes("batsman")?"Who will be the top batsman in this match?":V.includes("bowler")?"Who will be the top bowler in this match?":V.includes("highest")?"Will the match total exceed 350 runs?":V.includes("moreSixes")||V.includes("more-sixes")?"Which team will hit more sixes?":V.includes("totalSixes")||V.includes("total-sixes")?"How many sixes will be hit in this match?":V.includes("winner")?"Which team will win this match?":`Unknown Question (${V})`}Q.push({questionId:Z.questionId,questionText:Oe||`Unknown Question (${Z.questionId})`,points:Z.pointsEarned||0,isCorrect:Z.isCorrect||!1,answer:Z.answer||""})}),Q.sort((te,Z)=>te.questionText.localeCompare(Z.questionText)),G.questionPoints=Q}i(Y),l(!1)})}catch(T){throw console.error("Error setting up match leaderboard listener:",T),l(!1),T}},b=async D=>{try{const T=Ie(K,"predictionAnswers"),I=Ge(T,nt("matchId","==",D),nt("isCorrect","==",!0)),C=await Re(I),R={},M={},P={},A=[];C.forEach(G=>{const O=G.data(),L=O.userId;R[L]||(R[L]=0,M[L]={correct:0,total:0},P[L]=[],A.push(L)),R[L]+=O.pointsEarned||0,M[L].correct+=1;let X=h.get(O.questionId);!X&&O.questionId&&(X=h.get(O.questionId.toLowerCase()));let Q=X==null?void 0:X.text;if(!Q&&O.questionId){const te=O.questionId;Q=te.includes("batsman")?"Who will be the top batsman in this match?":te.includes("bowler")?"Who will be the top bowler in this match?":te.includes("highest")?"Will the match total exceed 350 runs?":te.includes("moreSixes")||te.includes("more-sixes")?"Which team will hit more sixes?":te.includes("totalSixes")||te.includes("total-sixes")?"How many sixes will be hit in this match?":te.includes("winner")?"Which team will win this match?":`Unknown Question (${te})`}P[L].push({questionId:O.questionId,questionText:Q||`Unknown Question (${O.questionId})`,points:O.pointsEarned||0,isCorrect:!0,answer:O.answer||""})});const F=Ge(T,nt("matchId","==",D));(await Re(F)).forEach(G=>{const O=G.data(),L=O.userId;if(M[L]&&(M[L].total+=1),!O.isCorrect&&P[L]){let X=h.get(O.questionId);!X&&O.questionId&&(X=h.get(O.questionId.toLowerCase()));let Q=X==null?void 0:X.text;if(!Q&&O.questionId){const Z=O.questionId;Q=Z.includes("batsman")?"Who will be the top batsman in this match?":Z.includes("bowler")?"Who will be the top bowler in this match?":Z.includes("highest")?"Will the match total exceed 350 runs?":Z.includes("moreSixes")||Z.includes("more-sixes")?"Which team will hit more sixes?":Z.includes("totalSixes")||Z.includes("total-sixes")?"How many sixes will be hit in this match?":Z.includes("winner")?"Which team will win this match?":`Unknown Question (${Z})`}P[L].some(Z=>Z.questionId===O.questionId)||P[L].push({questionId:O.questionId,questionText:Q||`Unknown Question (${O.questionId})`,points:0,isCorrect:!1,answer:O.answer||""})}});const q=[];for(let G=0;G<A.length;G+=10){const O=A.slice(G,G+10);if(O.length>0)for(const L of O){const X=await Ft(be(K,"users",L));if(X.exists()){const Q=X.data(),te=P[L].slice().sort((Z,xe)=>Z.questionText.localeCompare(xe.questionText));q.push({position:0,userId:L,userName:Q.displayName||"Anonymous User",userAvatar:Q.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(Q.displayName||"A")}&background=random`,points:R[L],correctPredictions:M[L].correct,totalPredictions:M[L].total,accuracy:w(M[L].correct,M[L].total),streak:0,trend:"neutral",questionPoints:te})}}}return q.sort((G,O)=>O.points-G.points),q.forEach((G,O)=>{G.position=O+1}),q.slice(0,e)}catch(T){return console.error("Error fetching match leaderboard:",T),[]}},_=()=>{try{const D=Ie(K,Te.GLOBAL_LEADERBOARD),T=Ge(D,Es("totalPoints","desc"),Ol(e));return Qu(T,I=>{const C=[];let R=1;I.forEach(M=>{const P=M.data();C.push({position:R++,userId:P.userId,userName:P.displayName||"Anonymous User",userAvatar:P.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(P.displayName||"A")}&background=random`,points:P.totalPoints||0,correctPredictions:P.correctPredictions||0,totalPredictions:P.totalPredictions||0,accuracy:P.accuracy||0,streak:0,trend:"neutral"})}),i(C),l(!1)})}catch(D){console.error("Error setting up global leaderboard listener:",D),l(!1);try{const T=Ie(K,"users"),I=Ge(T,Es("totalPoints","desc"),Ol(e));return Qu(I,C=>{const R=[];C.forEach(M=>{const P=M.data(),A=R.length+1;R.push({position:A,userId:P.uid,userName:P.displayName||"Anonymous User",userAvatar:P.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(P.displayName||"A")}&background=random`,points:P.totalPoints||0,correctPredictions:P.correctPredictions||0,totalPredictions:P.totalPredictions||0,accuracy:P.overallAccuracy||0,streak:P.longestStreak||0,trend:"neutral"})}),i(R),l(!1)})}catch(T){return console.error("Error setting up fallback leaderboard listener:",T),l(!1),()=>{}}}},w=(D,T)=>T===0?0:Math.round(D/T*100),S=D=>{g(m===D?null:D)};return a.jsxs(ht,{className:"w-full",children:[a.jsxs(bt,{children:[a.jsx(Tt,{className:"text-xl",children:"Prediction Leaderboard"}),a.jsx(zt,{children:"See who's leading in the prediction challenge"})]}),a.jsx(gt,{children:a.jsxs(Ur,{value:n,onValueChange:r,className:"w-full",children:[a.jsxs(Er,{className:"grid grid-cols-2 mb-4",children:[t&&a.jsx(rt,{value:"match",children:"This Match"}),a.jsx(rt,{value:"season",children:"Global"})]}),a.jsx(pt,{value:"match",className:"space-y-4",children:N()}),a.jsx(pt,{value:"season",className:"space-y-4",children:j()})]})})]});function N(){return o?Array(5).fill(0).map((D,T)=>a.jsxs("div",{className:"flex items-center space-x-4 py-2",children:[a.jsx(Ke,{className:"h-8 w-8 rounded-full"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ke,{className:"h-4 w-[200px]"}),a.jsx(Ke,{className:"h-4 w-[100px]"})]})]},T)):c?a.jsx("p",{className:"text-red-500",children:c}):s.length===0?a.jsx("p",{className:"text-gray-500 py-4",children:"No leaderboard data available yet. Once users submit predictions and match results are updated, the leaderboard will appear here."}):a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"grid grid-cols-12 text-sm font-medium text-gray-500 border-b pb-2",children:[a.jsx("div",{className:"col-span-1",children:"#"}),a.jsx("div",{className:"col-span-5",children:"Player"}),a.jsx("div",{className:"col-span-2 text-right",children:"Points"}),a.jsx("div",{className:"col-span-2 text-right",children:"Correct"}),a.jsx("div",{className:"col-span-2 text-right",children:"Accuracy"})]}),s.map(D=>a.jsx("div",{children:a.jsxs($Q,{open:m===D.userId,onOpenChange:()=>S(D.userId),className:"w-full",children:[a.jsx(UQ,{asChild:!0,children:a.jsxs("div",{className:"grid grid-cols-12 items-center py-2 hover:bg-gray-50 rounded-md transition-colors cursor-pointer",children:[a.jsx("div",{className:"col-span-1 font-semibold",children:D.position<=3?a.jsx("span",{className:`
                        inline-flex items-center justify-center w-6 h-6 rounded-full 
                        ${D.position===1?"bg-yellow-100 text-yellow-800":D.position===2?"bg-gray-100 text-gray-800":"bg-amber-100 text-amber-800"}
                      `,children:D.position===1?a.jsx(rs,{className:"h-3 w-3"}):D.position}):D.position}),a.jsxs("div",{className:"col-span-5 flex items-center space-x-2",children:[a.jsxs(go,{className:"h-8 w-8",children:[a.jsx(yo,{src:D.userAvatar,alt:D.userName}),a.jsx(vo,{children:D.userName.split(" ").map(T=>T[0]).join("")})]}),a.jsx("span",{className:"font-medium truncate",children:D.userName}),a.jsx(Ec,{className:`h-4 w-4 transition-transform ${m===D.userId?"transform rotate-180":""}`})]}),a.jsx("div",{className:"col-span-2 text-right font-semibold",children:D.points}),a.jsxs("div",{className:"col-span-2 text-right",children:[D.correctPredictions,"/",D.totalPredictions]}),a.jsx("div",{className:"col-span-2 text-right",children:a.jsxs(De,{variant:"outline",className:`
                      ${D.accuracy>=70?"bg-green-50 text-green-700 border-green-200":D.accuracy>=50?"bg-blue-50 text-blue-700 border-blue-200":"bg-gray-50 text-gray-700 border-gray-200"}
                    `,children:[D.accuracy,"%"]})})]})}),a.jsx(BQ,{children:a.jsx("div",{className:"mt-2 mb-4 pl-10 pr-4",children:a.jsxs(bh,{children:[a.jsx(_h,{children:a.jsxs(kr,{children:[a.jsx(Wt,{children:"Question"}),a.jsx(Wt,{children:"Answer"}),a.jsx(Wt,{className:"text-right",children:"Result"}),a.jsx(Wt,{className:"text-right",children:"Points"})]})}),a.jsxs(Eh,{children:[D.questionPoints&&D.questionPoints.map(T=>a.jsxs(kr,{children:[a.jsx(Ct,{className:"font-medium",children:T.questionText}),a.jsx(Ct,{children:T.answer.length>25?T.answer.substring(0,25)+"...":T.answer}),a.jsx(Ct,{className:"text-right",children:T.isCorrect?a.jsx(De,{className:"bg-green-50 text-green-700 border-green-200",children:"Correct"}):a.jsx(De,{className:"bg-red-50 text-red-700 border-red-200",children:"Incorrect"})}),a.jsx(Ct,{className:"text-right font-semibold",children:T.points>0?a.jsxs("span",{className:"text-green-600",children:["+",T.points]}):T.points<0?a.jsx("span",{className:"text-red-600",children:T.points}):a.jsx("span",{className:"text-gray-500",children:"0"})})]},T.questionId)),a.jsxs(kr,{children:[a.jsx(Ct,{colSpan:3,className:"text-right font-bold",children:"Total Points"}),a.jsx(Ct,{className:"text-right font-bold",children:D.points})]})]})]})})})]})},D.userId))]})}function j(){return o?Array(5).fill(0).map((D,T)=>a.jsxs("div",{className:"flex items-center space-x-4 py-2",children:[a.jsx(Ke,{className:"h-8 w-8 rounded-full"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ke,{className:"h-4 w-[200px]"}),a.jsx(Ke,{className:"h-4 w-[100px]"})]})]},T)):c?a.jsx("p",{className:"text-red-500",children:c}):s.length===0?a.jsx("p",{className:"text-gray-500 py-4",children:"No leaderboard data available yet. Once users submit predictions and match results are updated, the leaderboard will appear here."}):a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"grid grid-cols-12 text-sm font-medium text-gray-500 border-b pb-2",children:[a.jsx("div",{className:"col-span-1",children:"#"}),a.jsx("div",{className:"col-span-5",children:"Player"}),a.jsx("div",{className:"col-span-2 text-right",children:"Points"}),a.jsx("div",{className:"col-span-2 text-right",children:"Correct"}),a.jsx("div",{className:"col-span-2 text-right",children:"Accuracy"})]}),s.map(D=>a.jsxs("div",{className:"grid grid-cols-12 items-center py-2 hover:bg-gray-50 rounded-md transition-colors",children:[a.jsx("div",{className:"col-span-1 font-semibold",children:D.position<=3?a.jsx("span",{className:`
                  inline-flex items-center justify-center w-6 h-6 rounded-full 
                  ${D.position===1?"bg-yellow-100 text-yellow-800":D.position===2?"bg-gray-100 text-gray-800":"bg-amber-100 text-amber-800"}
                `,children:D.position===1?a.jsx(rs,{className:"h-3 w-3"}):D.position}):D.position}),a.jsxs("div",{className:"col-span-5 flex items-center space-x-2",children:[a.jsxs(go,{className:"h-8 w-8",children:[a.jsx(yo,{src:D.userAvatar,alt:D.userName}),a.jsx(vo,{children:D.userName.split(" ").map(T=>T[0]).join("")})]}),a.jsx("span",{className:"font-medium truncate",children:D.userName})]}),a.jsx("div",{className:"col-span-2 text-right font-semibold",children:D.points}),a.jsxs("div",{className:"col-span-2 text-right",children:[D.correctPredictions,"/",D.totalPredictions]}),a.jsx("div",{className:"col-span-2 text-right",children:a.jsxs(De,{variant:"outline",className:`
                ${D.accuracy>=70?"bg-green-50 text-green-700 border-green-200":D.accuracy>=50?"bg-blue-50 text-blue-700 border-blue-200":"bg-gray-50 text-gray-700 border-gray-200"}
              `,children:[D.accuracy,"%"]})})]},D.userId))]})}}var HQ="Separator",cT="horizontal",KQ=["horizontal","vertical"],RM=p.forwardRef((t,e)=>{const{decorative:n,orientation:r=cT,...s}=t,i=GQ(r)?r:cT,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return a.jsx(Ce.div,{"data-orientation":i,...l,...s,ref:e})});RM.displayName=HQ;function GQ(t){return KQ.includes(t)}var jM=RM;const cl=p.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>a.jsx(jM,{ref:s,decorative:n,orientation:e,className:_e("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));cl.displayName=jM.displayName;function QQ(){return a.jsxs(ht,{className:"w-full",children:[a.jsxs(bt,{children:[a.jsx(Tt,{className:"text-xl",children:"Prediction Scoring System"}),a.jsx(zt,{children:"Learn how points are awarded for your predictions"})]}),a.jsxs(gt,{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Base Points"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Match Winner"}),a.jsx(De,{variant:"outline",className:"bg-blue-50 text-blue-700",children:"10 points"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Top Batsman"}),a.jsx(De,{variant:"outline",className:"bg-blue-50 text-blue-700",children:"15 points"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Top Bowler"}),a.jsx(De,{variant:"outline",className:"bg-blue-50 text-blue-700",children:"15 points"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Powerplay Score"}),a.jsx(De,{variant:"outline",className:"bg-blue-50 text-blue-700",children:"15 points"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Highest Total"}),a.jsx(De,{variant:"outline",className:"bg-blue-50 text-blue-700",children:"20 points"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Winning Margin"}),a.jsx(De,{variant:"outline",className:"bg-blue-50 text-blue-700",children:"10 points"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Number of Sixes"}),a.jsx(De,{variant:"outline",className:"bg-blue-50 text-blue-700",children:"15 points"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Century Scored"}),a.jsx(De,{variant:"outline",className:"bg-blue-50 text-blue-700",children:"10 points"})]})]})]})]}),a.jsx(cl,{}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Accuracy Rules"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(De,{variant:"outline",className:"bg-gray-50 text-gray-700 mt-0.5",children:"Exact"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Match Winner, Century Scored"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Must be exactly correct"})]})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(De,{variant:"outline",className:"bg-gray-50 text-gray-700 mt-0.5",children:"Range"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Powerplay Score"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Within ±5 runs of actual score"})]})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(De,{variant:"outline",className:"bg-gray-50 text-gray-700 mt-0.5",children:"Range"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Highest Total"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Within ±15 runs of actual highest total"})]})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(De,{variant:"outline",className:"bg-gray-50 text-gray-700 mt-0.5",children:"Range"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Winning Margin"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Within ±5 runs or ±1 wicket of actual margin"})]})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(De,{variant:"outline",className:"bg-gray-50 text-gray-700 mt-0.5",children:"Range"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Number of Sixes"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Within ±2 sixes of actual count"})]})]})]})]}),a.jsx(cl,{}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Bonus Points"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Perfect Match"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Correctly predict all polls in a match"})]}),a.jsx(De,{variant:"outline",className:"bg-green-50 text-green-700",children:"+30 points"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Prediction Streak"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Three consecutive correct Match Winner predictions"})]}),a.jsx(De,{variant:"outline",className:"bg-green-50 text-green-700",children:"+10 points"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"High Accuracy"}),a.jsx("p",{className:"text-sm text-gray-500",children:"At least 6 correct predictions in a match"})]}),a.jsx(De,{variant:"outline",className:"bg-green-50 text-green-700",children:"+10 points"})]})]})]}),a.jsx(cl,{}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Negative Points"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Incorrect Predictions"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Points deducted for wrong answers"})]}),a.jsx(De,{variant:"outline",className:"bg-red-50 text-red-700",children:"Varies by question"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(De,{variant:"outline",className:"bg-gray-50 text-gray-700 mt-0.5",children:"Match Winner"}),a.jsx("span",{className:"text-red-600",children:"-3 points"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(De,{variant:"outline",className:"bg-gray-50 text-gray-700 mt-0.5",children:"Top Batsman/Bowler"}),a.jsx("span",{className:"text-red-600",children:"-5 points"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(De,{variant:"outline",className:"bg-gray-50 text-gray-700 mt-0.5",children:"Team with More Sixes"}),a.jsx("span",{className:"text-red-600",children:"-3 points"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(De,{variant:"outline",className:"bg-gray-50 text-gray-700 mt-0.5",children:"Total Sixes"}),a.jsx("span",{className:"text-red-600",children:"-5 points"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(De,{variant:"outline",className:"bg-gray-50 text-gray-700 mt-0.5",children:"Highest Total"}),a.jsx("span",{className:"text-red-600",children:"-3 points"})]})]})]})]}),a.jsx(cl,{}),a.jsxs("div",{className:"bg-blue-50 p-4 rounded-md",children:[a.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"Total Possible Points"}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Base Points per Match"}),a.jsx("span",{className:"font-medium",children:"110 points"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Maximum Bonus Points"}),a.jsx("span",{className:"font-medium",children:"50 points"})]}),a.jsx(cl,{className:"my-2"}),a.jsxs("div",{className:"flex justify-between font-bold",children:[a.jsx("span",{children:"Maximum per Match"}),a.jsx("span",{children:"160 points"})]})]})]})]})]})}function kM({match:t,players:e,squad1:n=[],squad2:r=[]}){p.useState("predict");const[s,i]=p.useState(null),[o,l]=p.useState(null),[c,u]=p.useState(!0),[h,f]=p.useState([]),[m,g]=p.useState([]);yn();const[v,y]=p.useState(null);p.useEffect(()=>{const _=async()=>{u(!0),y(null);try{const N=t.team1Id||"",j=t.team2Id||"";console.log("Raw team identifiers:",{team1Identifier:N,team2Identifier:j});const D=N.toLowerCase().replace(/\s+/g,""),T=j.toLowerCase().replace(/\s+/g,"");if(console.log("Normalized team identifiers:",{normalizedTeam1Id:D,normalizedTeam2Id:T}),!N||!j){y("Match data is missing team information"),u(!1);return}console.log('Attempting to fetch team data from "teams" collection first');const I=Ie(K,"teams"),C=be(I,D),R=be(I,T),[M,P]=await Promise.all([Ft(C),Ft(R)]);console.log("Team documents exist in teams collection:",{team1Exists:M.exists(),team2Exists:P.exists()});let A=!1,F=!1;if(M.exists()){const Y=M.data();i({id:N,name:Y.name||N,shortName:Y.shortName||N.substring(0,3).toUpperCase(),primaryColor:Y.primaryColor||"#1E40AF",secondaryColor:Y.secondaryColor||"#93C5FD",logo:Y.logo||"",squad:Y.squad||{}});const q=w(Y,N);q.length>0&&(f(q),A=!0,console.log(`Loaded ${q.length} players for ${N} from teams collection`))}else{console.log(`Team 1 with ID ${N} not found in teams collection`);const Y=be(K,Te.SQUADS,D),q=await Ft(Y);if(q.exists()){console.log("Found team 1 in squads collection");const G=q.data();if(G.squad&&Array.isArray(G.squad)&&G.squad.length>0){const O=G.squad.map((L,X)=>({id:`${D}-player-${X}`,name:L.name,teamId:N,role:S(L.role),image:""}));f(O),A=!0,console.log(`Loaded ${O.length} players for ${N} from squads collection`)}}i({id:N,name:N,shortName:N.substring(0,3).toUpperCase(),primaryColor:"#1E40AF",secondaryColor:"#93C5FD"})}if(P.exists()){const Y=P.data();l({id:j,name:Y.name||j,shortName:Y.shortName||j.substring(0,3).toUpperCase(),primaryColor:Y.primaryColor||"#DC2626",secondaryColor:Y.secondaryColor||"#FECACA",logo:Y.logo||"",squad:Y.squad||{}});const q=w(Y,j);q.length>0&&(g(q),F=!0,console.log(`Loaded ${q.length} players for ${j} from teams collection`))}else{console.log(`Team 2 with ID ${j} not found in teams collection`);const Y=be(K,Te.SQUADS,T),q=await Ft(Y);if(q.exists()){console.log("Found team 2 in squads collection");const G=q.data();if(G.squad&&Array.isArray(G.squad)&&G.squad.length>0){const O=G.squad.map((L,X)=>({id:`${T}-player-${X}`,name:L.name,teamId:j,role:S(L.role),image:""}));g(O),F=!0,console.log(`Loaded ${O.length} players for ${j} from squads collection`)}}l({id:j,name:j,shortName:j.substring(0,3).toUpperCase(),primaryColor:"#DC2626",secondaryColor:"#FECACA"})}!A&&n.length>0&&(console.log(`Using provided squad1 as fallback for ${N} (${n.length} players)`),f(n)),!F&&r.length>0&&(console.log(`Using provided squad2 as fallback for ${j} (${r.length} players)`),g(r))}catch(N){console.error("Error fetching match data:",N),y("Failed to load prediction data")}finally{console.log("Processing squad data completed"),u(!1)}},w=(N,j)=>{if(!N.squad||Object.keys(N.squad).length===0)return console.log(`No squad found for team ${N.name||j}`),[];console.log(`Processing squad for team ${N.name||j}`),console.log(`Squad has ${Object.keys(N.squad).length} players`);try{const D=["Shreyas Iyer"],T=Object.values(N.squad).map((I,C)=>{if(D.includes(I.name))return console.warn(`⚠️ WARNING: Outdated player "${I.name}" found in ${N.name} squad - EXCLUDING`),null;const R=j.toLowerCase().replace(/\s+/g,""),M=I.name.toLowerCase().replace(/\s+/g,"-"),P=`${R}-${M}`,A=S(I.role);return{id:P,name:I.name,teamId:j,role:A,image:""}}).filter(Boolean);return console.log(`Successfully processed ${T.length} players for ${N.name||j}`),T.length>0&&(console.log(`Sample players for ${N.name||j}:`),T.slice(0,3).forEach((I,C)=>console.log(`  ${C+1}. ${I.name} (${I.role}), ID: ${I.id}`))),T}catch(D){return console.error(`Error processing squad for ${N.name||j}:`,D),[]}},S=N=>{if(!N)return console.log("Role is undefined, defaulting to Batsman"),"Batsman";if(N==="Batter"||N==="Batsman"||N.includes("Batter ("))return"Batsman";if(N==="Bowler"||N.includes("Bowler ("))return"Bowler";if(N==="All-rounder"||N.includes("All-rounder ("))return"All-rounder";if(N==="Wicket-keeper"||N.includes("Wicket-keeper (")||N.includes("Keeper"))return"Wicket-keeper";const j=N.toLowerCase();return j.includes("bat")||j.includes("order")||j.includes("opener")?"Batsman":j.includes("bowl")||j.includes("spin")||j.includes("pace")?"Bowler":j.includes("all")||j.includes("rounder")?"All-rounder":j.includes("keeper")||j.includes("wicket")?"Wicket-keeper":(console.log(`Unknown role format: "${N}", defaulting to Batsman`),"Batsman")};_()},[t,n,r]);const b=s!==null||o!==null;return p.useEffect(()=>{c||console.log("Final team and player data loaded:",{team1:s==null?void 0:s.name,team2:o==null?void 0:o.name,team1SquadSize:h.length,team2SquadSize:m.length})},[c,s,o,h,m]),c?a.jsxs("div",{className:"space-y-4",children:[a.jsx(Ke,{className:"h-48 w-full"}),a.jsx(Ke,{className:"h-48 w-full"}),a.jsx(Ke,{className:"h-48 w-full"})]}):v?a.jsxs(yr,{variant:"destructive",children:[a.jsx(fa,{className:"h-4 w-4"}),a.jsx(es,{children:"Error"}),a.jsx(vr,{children:v})]}):!b&&h.length===0&&m.length===0?a.jsx(ht,{children:a.jsx(gt,{className:"pt-6",children:a.jsxs("div",{className:"flex flex-col items-center justify-center p-6 text-center",children:[a.jsx(oF,{className:"h-12 w-12 text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium",children:"Team Data Not Available"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"We couldn't load the team data for this match. Predictions are unavailable."})]})})}):a.jsxs(Ur,{defaultValue:"predictions",className:"w-full",children:[a.jsxs(Er,{className:"grid w-full grid-cols-3",children:[a.jsx(rt,{value:"predictions",children:"Make Predictions"}),a.jsx(rt,{value:"leaderboard",children:"Leaderboard"}),a.jsx(rt,{value:"scoring",children:"Scoring System"})]}),a.jsx(pt,{value:"predictions",children:a.jsx(DQ,{match:t,teams:{team1:s?{id:s.id,name:s.name,shortName:s.shortName||s.name.substring(0,3).toUpperCase(),primaryColor:s.primaryColor||"#1E40AF",secondaryColor:s.secondaryColor||"#93C5FD",logo:s.logo||""}:null,team2:o?{id:o.id,name:o.name,shortName:o.shortName||o.name.substring(0,3).toUpperCase(),primaryColor:o.primaryColor||"#DC2626",secondaryColor:o.secondaryColor||"#FECACA",logo:o.logo||""}:null},players:[],squad1:h,squad2:m,loading:c})}),a.jsx(pt,{value:"leaderboard",children:a.jsx(WQ,{matchId:t.id})}),a.jsx(pt,{value:"scoring",children:a.jsx(QQ,{})})]})}const _f=t=>{const e=t.toLowerCase();return e.includes("bowl")?"Bowler":e.includes("bat")?"Batsman":e.includes("all")?"All-rounder":e.includes("keeper")||e.includes("wicket")?"Wicket-keeper":"Batsman"},YQ=()=>{const{id:t}=xP(),e=nr(),{toast:n}=yn(),[r,s]=p.useState(null),[i,o]=p.useState(null),[l,c]=p.useState(null),[u,h]=p.useState([]),[f,m]=p.useState(!0),[g,v]=p.useState(null),[y,b]=p.useState(!1),[_,w]=p.useState([]),[S,N]=p.useState([]),[j,D]=p.useState(!1),[T,I]=p.useState(!1),{currentUser:C,loading:R}=kn();p.useEffect(()=>{(async()=>{var F,Y;if(!t){v("Match ID not provided"),m(!1);return}try{m(!0),console.log("Fetching match and players...");const q=C!==null;console.log("Auth status:",q),await Vj(),await xg();let G;try{console.log("Attempting to fetch match data for ID:",t),G=await Mj(t),console.log("Received match data:",G)}catch(B){throw console.error("Error fetching match:",B),(B.code==="permission-denied"||(F=B.message)!=null&&F.includes("permission"))&&(console.warn("Permission denied when fetching match."),b(!0),q||n({title:"Authentication Required",description:"Please sign in to view match details.",variant:"destructive"})),B}if(!G){v("Match not found"),m(!1);return}const O=G.team1||"",L=G.team2||"",X=O.toLowerCase().replace(/\s+/g,""),Q=L.toLowerCase().replace(/\s+/g,"");console.log("Team names from match data:",{team1Name:O,team2Name:L});const te=["Shreyas Iyer"];let Z=[],xe=[],Oe=!1;try{console.log('First attempting to fetch team data from "teams" collection');const B=Ie(K,"teams"),ne=be(B,X),ae=be(B,Q),[W,oe]=await Promise.all([Ft(ne),Ft(ae)]);if(console.log("Teams collection check:",{team1Exists:W.exists(),team2Exists:oe.exists()}),W.exists()){const fe=W.data();console.log(`Team 1 "${fe.name}" found in teams collection`),fe.squad&&Object.keys(fe.squad).length>0?(Z=Object.values(fe.squad).filter(ye=>!te.includes(ye.name)).map(ye=>({id:`${X}-${ye.name.toLowerCase().replace(/\s+/g,"-")}`,name:ye.name,role:_f(ye.role),teamId:O,image:""})),console.log(`Loaded ${Z.length} players for ${O} from teams collection`),Oe=!0):console.log("Team 1 found but has no squad in teams collection")}else console.log(`Team 1 with ID ${X} not found in teams collection`);if(oe.exists()){const fe=oe.data();console.log(`Team 2 "${fe.name}" found in teams collection`),fe.squad&&Object.keys(fe.squad).length>0?(xe=Object.values(fe.squad).filter(ye=>!te.includes(ye.name)).map(ye=>({id:`${Q}-${ye.name.toLowerCase().replace(/\s+/g,"-")}`,name:ye.name,role:_f(ye.role),teamId:L,image:""})),console.log(`Loaded ${xe.length} players for ${L} from teams collection`),Oe=!0):console.log("Team 2 found but has no squad in teams collection")}else console.log(`Team 2 with ID ${Q} not found in teams collection`)}catch(B){console.error("Error fetching from teams collection:",B)}if(!Oe||Z.length===0||xe.length===0){console.log("Falling back to squads collection...");try{let B,ne;[B,ne]=await Promise.all([F0(X),F0(Q)]),console.log("Squad 1 data:",B?"Found":"Not found"),console.log("Squad 2 data:",ne?"Found":"Not found"),Z.length===0&&(B!=null&&B.squad)&&(Z=B.squad.filter(ae=>!te.includes(ae.name)).map(ae=>({id:`${X}-${ae.name.toLowerCase().replace(/\s+/g,"-")}`,name:ae.name,role:_f(ae.role),teamId:O,image:""})),console.log(`Loaded ${Z.length} players for ${O} from squads collection`)),xe.length===0&&(ne!=null&&ne.squad)&&(xe=ne.squad.filter(ae=>!te.includes(ae.name)).map(ae=>({id:`${Q}-${ae.name.toLowerCase().replace(/\s+/g,"-")}`,name:ae.name,role:_f(ae.role),teamId:L,image:""})),console.log(`Loaded ${xe.length} players for ${L} from squads collection`))}catch(B){console.error("Error fetching squad data:",B)}}console.log("Final player counts:",{team1Players:Z.length,team2Players:xe.length});const V={id:G.id,team1Id:G.team1||"Unknown Team",team2Id:G.team2||"Unknown Team",venue:G.venue,date:typeof G.date=="string"?G.date:G.date instanceof $e?G.date.toDate().toISOString():new Date().toISOString(),status:G.status||"upcoming",result:((Y=G.result)==null?void 0:Y.winner)||""};s(V),w(Z),N(xe),h([...Z,...xe])}catch(q){console.error("Error fetching match data:",q),v("Failed to load match data")}finally{m(!1)}})()},[t,C,n]),p.useEffect(()=>{(async()=>{if(C)try{const F=await vc(C.uid);I(F)}catch(F){console.error("Error checking admin status:",F),I(!1)}else I(!1)})()},[C]);const M=async()=>{D(!0);try{await Qb(),n({title:"Questions Refreshed",description:"The prediction questions have been refreshed successfully."}),window.location.reload()}catch(A){console.error("Error refreshing questions:",A),n({title:"Error",description:"Failed to refresh questions database",variant:"destructive"})}finally{D(!1)}};if(f)return a.jsx(Jt,{children:a.jsxs("div",{className:"container mx-auto py-8",children:[a.jsx(Ke,{className:"h-12 w-3/4 mb-4"}),a.jsx(Ke,{className:"h-6 w-1/2 mb-8"}),a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx(Ke,{className:"h-24 w-24 rounded-full mb-2"}),a.jsx(Ke,{className:"h-6 w-32"})]}),a.jsx(Ke,{className:"h-10 w-10"}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx(Ke,{className:"h-24 w-24 rounded-full mb-2"}),a.jsx(Ke,{className:"h-6 w-32"})]})]}),a.jsx(Ke,{className:"h-64 w-full"})]})});if(g||!r)return a.jsx(Jt,{children:a.jsxs("div",{className:"container mx-auto py-8",children:[a.jsxs(Se,{variant:"ghost",className:"mb-6",onClick:()=>e(-1),children:[a.jsx(Al,{className:"mr-2 h-4 w-4"}),"Back to Matches"]}),a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-lg mb-4",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Error Loading Match"}),a.jsx("p",{children:g||"Failed to load match details"})]}),y&&a.jsxs("div",{className:"bg-blue-50 border border-blue-200 text-blue-700 px-6 py-4 rounded-lg mt-4",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Authentication Required"}),a.jsx("p",{className:"mb-4",children:"Sign in to view match details and make predictions."}),a.jsx(Se,{onClick:()=>e("/signin"),className:"bg-blue-600 hover:bg-blue-700",children:"Sign In"})]})]})});const P=()=>{try{let A;if(typeof r.date=="string")A=new Date(r.date);else return"Date not available";return A.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(A){return console.error("Error formatting date:",A),"Date not available"}};return a.jsx(Jt,{children:a.jsxs("div",{className:"container mx-auto py-8 px-4",children:[a.jsxs(Se,{variant:"ghost",onClick:()=>e(-1),children:[a.jsx(Al,{className:"mr-2 h-4 w-4"}),"Back to Matches"]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:[a.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between",children:[a.jsxs("div",{className:"flex flex-col items-center md:items-start mb-4 md:mb-0",children:[a.jsxs("h1",{className:"text-2xl font-bold mb-1",children:[r.team1Id," vs ",r.team2Id]}),a.jsx("p",{className:"text-gray-600",children:r.venue||"Venue not specified"}),a.jsx("p",{className:"text-gray-600",children:P()})]}),a.jsx("div",{children:r.status==="live"?a.jsx(De,{className:"bg-red-500 animate-pulse-subtle",children:"LIVE"}):r.status==="completed"?a.jsx(De,{variant:"outline",className:"text-gray-500",children:"Completed"}):a.jsx(De,{variant:"outline",className:"text-gray-500",children:HF(r)})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center mt-8 space-y-6 md:space-y-0",children:[a.jsxs("div",{className:"flex flex-col items-center text-center md:w-1/3",children:[a.jsx("div",{className:"h-24 w-24 flex items-center justify-center",children:a.jsx("img",{src:xc(r.team1Id),alt:r.team1Id,className:"max-h-full max-w-full object-contain",onError:A=>{const F=A.target;F.onerror=null,F.src="/images/teams/default.png"}})}),a.jsx("h2",{className:"text-xl font-bold",style:{color:i==null?void 0:i.primaryColor},children:r.team1Id})]}),a.jsxs("div",{className:"flex flex-col items-center justify-center md:w-1/3",children:[a.jsx("div",{className:"text-3xl font-bold mb-2",children:"VS"}),r.status==="completed"&&r.result&&a.jsx(yr,{className:"mt-4",children:a.jsx(vr,{children:r.result})}),a.jsxs(Se,{variant:"outline",className:"mt-4",onClick:()=>e(`/matches/${t}/leaderboard`),children:[a.jsx(rs,{className:"mr-2 h-4 w-4"}),"Match Leaderboard"]})]}),a.jsxs("div",{className:"flex flex-col items-center text-center md:w-1/3",children:[a.jsx("div",{className:"h-24 w-24 flex items-center justify-center",children:a.jsx("img",{src:xc(r.team2Id),alt:r.team2Id,className:"max-h-full max-w-full object-contain",onError:A=>{const F=A.target;F.onerror=null,F.src="/images/teams/default.png"}})}),a.jsx("h2",{className:"text-xl font-bold",style:{color:l==null?void 0:l.primaryColor},children:r.team2Id})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:[a.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Match Predictions"}),r.status==="completed"?a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 text-center mb-6",children:[a.jsx("p",{className:"text-lg text-gray-600",children:"This match has ended. No more predictions can be made."}),a.jsx("p",{className:"text-gray-500 mt-2",children:"You can still view the leaderboard and scoring system below."})]}):null,a.jsx(kM,{match:r,players:u,squad1:_,squad2:S})]}),T&&a.jsxs("div",{className:"bg-white border border-slate-200 p-6 rounded-lg shadow-sm mt-8",children:[a.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Admin Controls"}),a.jsxs("div",{className:"flex flex-col space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-600 mb-3",children:"Use these controls to manage the database for this match. Changes will affect all users' experiences."}),a.jsx(Se,{variant:"outline",onClick:M,disabled:j,className:"w-full sm:w-auto",children:j?a.jsxs(a.Fragment,{children:[a.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Refreshing Questions..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Us,{className:"mr-2 h-4 w-4"}),"Refresh Prediction Questions"]})})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Note: Refreshing questions will update the database to include the latest question types. After refreshing, users may need to reload the page to see changes."})]})]})]})})},XQ=()=>{const[t,e]=p.useState(""),[n,r]=p.useState("season"),[s,i]=p.useState([]),[o,l]=p.useState(""),[c,u]=p.useState(!1),[h,f]=p.useState([]),[m,g]=p.useState(!1),{currentUser:v,loading:y}=kn(),b=nr();p.useEffect(()=>{(async()=>{u(!0);try{const j=await Ab();j.sort((D,T)=>{const I=D.date instanceof $e?D.date.toDate():new Date(D.date);return(T.date instanceof $e?T.date.toDate():new Date(T.date)).getTime()-I.getTime()}),i(j),j.length>0&&l(j[0].id)}catch(j){console.error("Error fetching matches:",j)}finally{u(!1)}})()},[]),p.useEffect(()=>{(async()=>{g(!0);try{const j=Ie(K,Te.GLOBAL_LEADERBOARD),T=(await Re(j)).docs.map(I=>{const C=I.data();return{userId:C.userId,displayName:C.displayName,photoURL:C.photoURL,points:C.totalPoints||0,correctPredictions:C.correctPredictions||0,totalPredictions:C.totalPredictions||0,accuracy:C.accuracy||0,matchesPlayed:C.matchesPlayed||0}});T.sort((I,C)=>C.points-I.points),f(T)}catch(j){console.error("Error fetching leaderboard:",j)}finally{g(!1)}})()},[]);const _=p.useMemo(()=>h.filter(N=>N.displayName.toLowerCase().includes(t.toLowerCase())),[t,h]),w=()=>{o&&b(`/matches/${o}/leaderboard`)},S=()=>a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"h-10 bg-gray-200 rounded w-full"}),[...Array(10)].map((N,j)=>a.jsx("div",{className:"h-16 bg-gray-200 rounded w-full"},j))]})]});return a.jsx(Jt,{children:a.jsx("div",{className:"container mx-auto py-6 px-4 min-h-[calc(100vh-64px)]",children:a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Leaderboard"}),a.jsxs("div",{className:"relative w-full md:w-64",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:a.jsx(Lp,{className:"h-4 w-4 text-gray-500"})}),a.jsx(sn,{type:"text",placeholder:"Search players...",className:"pl-10",value:t,onChange:N=>e(N.target.value)})]})]}),a.jsxs(Ur,{defaultValue:"season",className:"flex-1 flex flex-col",onValueChange:N=>r(N),children:[a.jsxs(Er,{className:"grid w-full grid-cols-2 mb-6",children:[a.jsxs(rt,{value:"match",className:"flex items-center gap-1 py-3",children:[a.jsx(rs,{className:"h-4 w-4"}),a.jsx("span",{children:"Match"})]}),a.jsxs(rt,{value:"season",className:"flex items-center gap-1 py-3",children:[a.jsx(Op,{className:"h-4 w-4"}),a.jsx("span",{children:"Season"})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsxs(pt,{value:"match",className:"flex-1 flex flex-col",children:[a.jsxs("div",{className:"mb-6 flex flex-col md:flex-row gap-4 items-start md:items-center",children:[a.jsx("div",{className:"w-full md:w-72",children:a.jsxs(Cr,{value:o,onValueChange:l,disabled:c,children:[a.jsx(dr,{children:a.jsx(Ar,{placeholder:"Select a match"})}),a.jsx(hr,{children:c?a.jsx(mt,{value:"loading",disabled:!0,children:"Loading matches..."}):s.length===0?a.jsx(mt,{value:"none",disabled:!0,children:"No matches available"}):s.map(N=>a.jsxs(mt,{value:N.id,children:[N.team1," vs ",N.team2]},N.id))})]})}),a.jsx(Se,{onClick:w,disabled:!o||c,className:"shrink-0",children:"View Match Leaderboard"})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden flex-1",children:y?a.jsx(S,{}):a.jsx("div",{className:"p-6 text-center",children:a.jsx("p",{className:"text-gray-600",children:'Select a match and click "View Match Leaderboard" to see detailed match-specific leaderboard.'})})})]}),a.jsx(pt,{value:"season",className:"flex-1 flex flex-col",children:a.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden flex-1",children:y||m?a.jsx(S,{}):a.jsx("div",{className:"p-4",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b",children:[a.jsx("th",{className:"px-4 py-3 text-left w-24",children:"Rank"}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Player"}),a.jsx("th",{className:"px-4 py-3 text-right",children:"Points"}),a.jsx("th",{className:"px-4 py-3 text-right hidden md:table-cell",children:"Accuracy"})]})}),a.jsx("tbody",{children:_.map((N,j)=>a.jsxs("tr",{className:`border-b hover:bg-gray-50 ${(v==null?void 0:v.uid)===N.userId?"bg-blue-50":""}`,children:[a.jsx("td",{className:"px-4 py-4 font-medium whitespace-nowrap",children:j<3?a.jsx("div",{className:"flex justify-center items-center w-8 h-8 rounded-full text-white font-bold text-sm",style:{backgroundColor:j===0?"#FFD700":j===1?"#C0C0C0":"#CD7F32"},children:j+1}):a.jsx("div",{className:"flex justify-center items-center",children:j+1})}),a.jsx("td",{className:"px-4 py-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-8 w-8 flex-shrink-0 mr-3",children:N.photoURL?a.jsx("img",{src:N.photoURL,alt:N.displayName,className:"h-8 w-8 rounded-full"}):a.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center uppercase text-gray-600",children:N.displayName.substring(0,2)})}),a.jsx("div",{children:N.displayName})]})}),a.jsx("td",{className:"px-4 py-4 text-right font-semibold",children:N.points}),a.jsx("td",{className:"px-4 py-4 text-right hidden md:table-cell",children:N.accuracy?`${Math.round(N.accuracy)}%`:"N/A"})]},N.userId))})]})})})})]})]}),a.jsxs("div",{className:"mt-8 bg-blue-50 p-4 rounded-lg",children:[a.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Scoring System"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-white p-3 rounded shadow-sm",children:[a.jsx("h3",{className:"font-medium text-sm",children:"Match Winner"}),a.jsx("p",{className:"text-sm text-gray-600",children:"10 points"})]}),a.jsxs("div",{className:"bg-white p-3 rounded shadow-sm",children:[a.jsx("h3",{className:"font-medium text-sm",children:"Top Batsman/Bowler"}),a.jsx("p",{className:"text-sm text-gray-600",children:"15 points each"})]}),a.jsxs("div",{className:"bg-white p-3 rounded shadow-sm",children:[a.jsx("h3",{className:"font-medium text-sm",children:"Total Runs/Wickets"}),a.jsx("p",{className:"text-sm text-gray-600",children:"15 points"})]}),a.jsxs("div",{className:"bg-white p-3 rounded shadow-sm",children:[a.jsx("h3",{className:"font-medium text-sm",children:"Special Events"}),a.jsx("p",{className:"text-sm text-gray-600",children:"5-20 points"})]})]})]})]})})})},JQ="modulepreload",ZQ=function(t){return"/"+t},uT={},eY=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=ZQ(c),c in uT)return;uT[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":JQ,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((m,g)=>{f.addEventListener("load",m),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},n_={MATCHES:"matches",TEAMS:"teams",PLAYERS:"players",USERS:"users",PREDICTIONS:"predictions",QUESTIONS:"questions",PREDICTION_GAMES:"predictionGames",PREDICTION_ANSWERS:"predictionAnswers",LEADERBOARDS:"leaderboards",LEADERBOARD_ENTRIES:"leaderboardEntries"},dT=async()=>{const t=Ie(K,n_.MATCHES),e=Ge(t,Es("date","asc"));return(await Re(e)).docs.map(r=>{const s=r.data(),i=s.date instanceof $e?s.date.toDate().toISOString():s.date;return{...s,id:r.id,date:i}})},tY=async()=>{try{const t=Ie(K,n_.QUESTIONS),e=await Re(t),n=[];return e.forEach(r=>{n.push({id:r.id,...r.data()})}),n}catch(t){return console.error("Error fetching questions:",t),[]}},pu=async t=>{try{const e=Ie(K,t);return!(await Re(Ge(e,Ol(1)))).empty}catch(e){return console.error(`Error checking if collection ${t} exists:`,e),!1}},nY=()=>{const{id:t}=xP(),e=nr(),{currentUser:n}=kn(),{toast:r}=yn(),[s,i]=p.useState(null),[o,l]=p.useState([]),[c,u]=p.useState([]),[h,f]=p.useState(null),[m,g]=p.useState(!0),[v,y]=p.useState(null),[b,_]=p.useState(""),[w,S]=p.useState(!1),[N,j]=p.useState(!1),[D,T]=p.useState(!1),I=o.filter(P=>P.displayName.toLowerCase().includes(b.toLowerCase()));p.useEffect(()=>{if(!t){y("Match ID is missing"),g(!1);return}(async()=>{g(!0);try{const A=await Ft(be(K,Te.MATCHES,t));if(!A.exists()){y("Match not found");return}const F=A.data();F.id=A.id,i(F);const Y=await Ft(be(K,Te.MATCH_RESULTS,t)),q=Y.exists()&&Y.data().isEvaluated===!0;console.log(`Match status: ${F.status}, isEvaluated: ${q}`);const G=await Re(Ie(K,Te.QUESTIONS)),O=[];G.forEach(W=>{const oe=W.data();O.push({...oe,id:W.id})}),console.log(`Loaded ${O.length} questions:`,O.map(W=>W.id).join(", ")),u(O);const L=new Map;O.forEach(W=>{L.set(W.id,W.text),W.type&&(L.set(W.type,W.text),L.set(W.type.toLowerCase(),W.text))}),console.log("Question map created with entries:",Array.from(L.entries()).map(([W,oe])=>`${W} -> ${oe}`).join(", "));const X=Ie(K,n_.PREDICTION_ANSWERS),Q=Ge(X,nt("matchId","==",t)),te=await Re(Q);console.log(`Found ${te.size} prediction answers for this match`);const Z=new Map,xe=new Set;te.forEach(W=>{const oe=W.data();oe.userId&&xe.add(oe.userId)}),console.log(`Found ${xe.size} unique users with predictions`);const Oe=new Map,V=Array.from(xe).map(async W=>{const oe=await Ft(be(K,Te.USERS,W));if(oe.exists()){const fe=oe.data();fe.uid===W&&Oe.set(W,{displayName:fe.displayName||"Anonymous User",photoURL:fe.photoURL||null})}});await Promise.all(V),console.log(`Loaded user data for ${Oe.size} users`);let B=0;te.forEach(W=>{const oe=W.data(),fe=oe.userId;if(!fe)return;if(!Z.has(fe)){const me=Oe.get(fe)||{displayName:"Anonymous User",photoURL:null};Z.set(fe,{userId:fe,displayName:me.displayName,photoURL:me.photoURL,totalPoints:0,correctPredictions:0,totalPredictions:0,questionsPoints:[]})}const ye=Z.get(fe);ye.totalPredictions++;const ue=oe.questionId;let ee=L.get(ue);if(!ee&&ue&&(ee=L.get(ue.toLowerCase())),ee||(ee=ue!=null&&ue.includes("batsman")?"Who will be the top batsman in this match?":ue!=null&&ue.includes("bowler")?"Who will be the top bowler in this match?":ue!=null&&ue.includes("highest")?"Will the match total exceed 350 runs?":ue!=null&&ue.includes("moreSixes")||ue!=null&&ue.includes("more-sixes")?"Which team will hit more sixes?":ue!=null&&ue.includes("totalSixes")||ue!=null&&ue.includes("total-sixes")?"How many sixes will be hit in this match?":ue!=null&&ue.includes("winner")?"Which team will win this match?":`Unknown Question (${ue})`),oe.isCorrect===!0){ye.correctPredictions++;const me=oe.pointsEarned||0;ye.totalPoints+=me,console.log(`Correct prediction for user ${fe}, question ${ue}: ${me} points`)}else oe.isCorrect===void 0&&F.status==="completed"&&(B++,console.log(`Pending evaluation for user ${fe}, question ${ue}`));ye.questionsPoints.push({questionId:oe.questionId,questionText:ee||`Unknown Question (${ue})`,points:oe.pointsEarned||0,isCorrect:oe.isCorrect,answer:oe.answer||"No answer"})});const ne=B>0&&F.status==="completed";console.log(`Setting hasPendingEvaluations: ${ne} (pendingCount: ${B}, matchStatus: ${F.status})`),T(ne);const ae=Array.from(Z.values()).sort((W,oe)=>oe.totalPoints-W.totalPoints);if(l(ae),n){const W=await Ft(be(K,Te.USERS,n.uid));if(W.exists()){const oe=W.data();S(oe.role==="admin")}}}catch(A){console.error("Error fetching match and leaderboard:",A),y("Failed to load match leaderboard. Please try again later.")}finally{g(!1)}})()},[t,n]);const C=P=>{f(h===P?null:P)},R=async()=>{if(t)try{g(!0),j(!0);const{evaluateMatchPredictions:P}=await eY(async()=>{const{evaluateMatchPredictions:A}=await Promise.resolve().then(()=>YW);return{evaluateMatchPredictions:A}},void 0);await P(t),r({title:"Predictions Re-evaluated",description:"Match predictions have been re-evaluated. Refresh the page to see the updated results."}),window.location.reload()}catch(P){console.error("Error evaluating predictions:",P),r({title:"Evaluation Failed",description:"Failed to re-evaluate predictions. Please try again.",variant:"destructive"})}finally{g(!1),j(!1)}};if(m)return a.jsx(Jt,{children:a.jsxs("div",{className:"container mx-auto py-8 px-4",children:[a.jsxs(Se,{variant:"ghost",className:"mb-6",onClick:()=>e(-1),disabled:!0,children:[a.jsx(Al,{className:"mr-2 h-4 w-4"}),"Back"]}),a.jsxs("div",{className:"flex flex-col gap-6",children:[a.jsx(Ke,{className:"h-12 w-3/4 max-w-md"}),a.jsx(Ke,{className:"h-24 w-full rounded-lg"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(Ke,{className:"h-12 w-full"}),Array.from({length:10}).map((P,A)=>a.jsx(Ke,{className:"h-16 w-full"},A))]})]})]})});if(v||!s)return a.jsx(Jt,{children:a.jsxs("div",{className:"container mx-auto py-8 px-4",children:[a.jsxs(Se,{variant:"ghost",className:"mb-6",onClick:()=>e(-1),children:[a.jsx(Al,{className:"mr-2 h-4 w-4"}),"Back"]}),a.jsx(yr,{variant:"destructive",className:"mb-4",children:a.jsx(vr,{children:v||"Failed to load match leaderboard"})})]})});const M=P=>P instanceof $e?Tm(P.toDate()):typeof P=="string"?Tm(P):"Date not available";return a.jsx(Jt,{children:a.jsxs("div",{className:"container mx-auto py-8 px-4",children:[a.jsxs(Se,{variant:"ghost",className:"mb-6",onClick:()=>e(-1),children:[a.jsx(Al,{className:"mr-2 h-4 w-4"}),"Back"]}),a.jsxs("div",{className:"flex flex-col gap-6",children:[a.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[a.jsx(rs,{className:"h-6 w-6"}),"Match Leaderboard"]}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-4",children:a.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-semibold mb-2",children:[s.team1," vs ",s.team2]}),a.jsx("p",{className:"text-gray-600",children:s.venue}),a.jsx("p",{className:"text-gray-600",children:M(s.date)})]}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsx("div",{className:"flex flex-col items-center",children:a.jsx("div",{className:"h-16 w-16 flex items-center justify-center",children:a.jsx("img",{src:xc(s.team1),alt:s.team1,className:"max-h-full max-w-full object-contain",onError:P=>{const A=P.target;A.onerror=null,A.src="/images/teams/default.png"}})})}),a.jsx("div",{className:"text-2xl font-bold",children:"VS"}),a.jsx("div",{className:"flex flex-col items-center",children:a.jsx("div",{className:"h-16 w-16 flex items-center justify-center",children:a.jsx("img",{src:xc(s.team2),alt:s.team2,className:"max-h-full max-w-full object-contain",onError:P=>{const A=P.target;A.onerror=null,A.src="/images/teams/default.png"}})})})]}),a.jsx("div",{children:s.status==="completed"?a.jsx(De,{variant:"default",className:"bg-green-600",children:"Completed"}):s.status==="live"?a.jsx(De,{variant:"default",className:"bg-red-600 animate-pulse",children:"Live"}):a.jsx(De,{variant:"outline",children:"Upcoming"})})]})}),s.status==="completed"&&D&&a.jsxs(yr,{className:"mb-4 border-amber-200 bg-amber-50 text-amber-800",children:[a.jsx(hF,{className:"h-4 w-4"}),a.jsx(es,{children:"Pending Evaluation"}),a.jsxs(vr,{children:["Some predictions for this match have not been evaluated yet.",w?' As an admin, you can click the "Re-evaluate Predictions" button below to evaluate all predictions.':" An admin needs to evaluate the match results for your predictions to be scored correctly."]}),w&&a.jsx(Se,{variant:"outline",size:"sm",className:"mt-2 bg-amber-100 hover:bg-amber-200 border-amber-300",onClick:R,disabled:N,children:N?a.jsxs(a.Fragment,{children:[a.jsx(Us,{className:"mr-2 h-4 w-4 animate-spin"}),"Evaluating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Us,{className:"mr-2 h-4 w-4"}),"Re-evaluate Predictions"]})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b border-gray-100",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold",children:o.length===0?"No predictions yet":"Player Rankings"}),a.jsxs("div",{className:"flex items-center gap-2",children:[w&&s.status==="completed"&&a.jsx(Se,{variant:"outline",size:"sm",onClick:R,disabled:N,children:N?a.jsxs(a.Fragment,{children:[a.jsx(Us,{className:"mr-2 h-4 w-4 animate-spin"}),"Evaluating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Us,{className:"mr-2 h-4 w-4"}),"Re-evaluate Predictions"]})}),a.jsxs("div",{className:"relative w-full md:w-64",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:a.jsx(Lp,{className:"h-4 w-4 text-gray-500"})}),a.jsx(sn,{type:"text",placeholder:"Search players...",className:"pl-10",value:b,onChange:P=>_(P.target.value)})]})]})]})}),o.length===0?a.jsx("div",{className:"p-8 text-center text-gray-600",children:s.status==="completed"?a.jsx("p",{children:"No data available for this match leaderboard."}):a.jsx("p",{children:"Leaderboard will be available once predictions are made and the match is completed."})}):I.length===0?a.jsx("div",{className:"p-8 text-center text-gray-600",children:a.jsx("p",{children:"No players found matching your search."})}):a.jsx("div",{className:"relative overflow-x-auto w-full",children:a.jsxs("table",{className:"w-full table-fixed",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200",children:[a.jsx("th",{className:"p-4 text-left w-1/12 text-sm font-medium text-gray-700",children:"Rank"}),a.jsx("th",{className:"p-4 text-left w-5/12 text-sm font-medium text-gray-700",children:"Player"}),a.jsx("th",{className:"p-4 text-right w-3/12 text-sm font-medium text-gray-700",children:"Points"}),a.jsx("th",{className:"p-4 text-right w-2/12 text-sm font-medium text-gray-700",children:"Accuracy"}),a.jsx("th",{className:"w-1/12 px-2"})]})}),a.jsx("tbody",{children:I.map((P,A)=>a.jsxs(a.Fragment,{children:[a.jsxs("tr",{className:`
                            border-b border-gray-100 cursor-pointer
                            ${h===P.userId?"bg-gray-100":"hover:bg-gray-50"}
                            ${(n==null?void 0:n.uid)===P.userId?"bg-blue-50 hover:bg-blue-100":""}
                          `,onClick:()=>C(P.userId),children:[a.jsx("td",{className:"p-4 w-1/12 whitespace-nowrap",children:A===0?a.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-yellow-100 text-yellow-800 rounded-full",children:a.jsx(rs,{className:"h-4 w-4"})}):A===1?a.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-gray-100 text-gray-800 rounded-full",children:"2"}):A===2?a.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-amber-100 text-amber-800 rounded-full",children:"3"}):a.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-gray-50 text-gray-600 rounded-full",children:A+1})}),a.jsx("td",{className:"p-4 w-5/12",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(go,{className:"h-8 w-8",children:[a.jsx(yo,{src:P.photoURL||void 0}),a.jsx(vo,{children:NA(P.displayName)})]}),a.jsx("span",{className:"font-medium",children:P.displayName}),(n==null?void 0:n.uid)===P.userId&&a.jsx(De,{variant:"outline",className:"ml-2",children:"You"})]})}),a.jsx("td",{className:"p-4 w-3/12 text-right whitespace-nowrap",children:P.totalPoints>0?a.jsx("span",{className:"text-green-600 font-medium",children:P.totalPoints}):s.status!=="completed"?a.jsx("span",{className:"text-gray-500 font-medium",children:"Pending"}):D?a.jsx("span",{className:"text-amber-600 font-medium",children:"Evaluating"}):a.jsx("span",{className:"text-gray-500 font-medium",children:"0"})}),a.jsx("td",{className:"p-4 w-2/12 text-right whitespace-nowrap",children:P.totalPredictions>0&&P.correctPredictions>0?a.jsxs("span",{children:[Math.round(P.correctPredictions/P.totalPredictions*100),"%"]}):s.status!=="completed"?a.jsx("span",{className:"text-gray-500",children:"Pending"}):D?a.jsx("span",{className:"text-amber-600",children:"—"}):a.jsx("span",{className:"text-gray-500",children:"0%"})}),a.jsx("td",{className:"px-2 w-1/12",children:a.jsx(Se,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:F=>{F.stopPropagation(),C(P.userId)},children:h===P.userId?a.jsx(mA,{className:"h-4 w-4"}):a.jsx(Ec,{className:"h-4 w-4"})})})]},`row-${P.userId}`),h===P.userId&&a.jsx("tr",{className:"bg-gray-50",children:a.jsx("td",{colSpan:5,className:"p-0",children:a.jsxs("div",{className:"p-4 border-t border-gray-200",children:[a.jsx("h3",{className:"font-semibold mb-4 text-gray-700",children:"Prediction Breakdown"}),P.questionsPoints.length===0?a.jsx("p",{className:"text-gray-600 text-sm",children:"No predictions made for this match"}):a.jsx("div",{className:"rounded border border-gray-200 overflow-hidden",children:a.jsxs("table",{className:"w-full table-fixed",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200 bg-gray-100",children:[a.jsx("th",{className:"p-3 text-left w-5/12 text-sm font-medium text-gray-700",children:"Question"}),a.jsx("th",{className:"p-3 text-left w-5/12 text-sm font-medium text-gray-700",children:"Prediction"}),a.jsx("th",{className:"p-3 text-center w-1/12 text-sm font-medium text-gray-700",children:"Status"}),a.jsx("th",{className:"p-3 text-right w-1/12 text-sm font-medium text-gray-700",children:"Points"})]})}),a.jsxs("tbody",{children:[P.questionsPoints.map(F=>a.jsxs("tr",{className:"border-b border-gray-100",children:[a.jsx("td",{className:"p-3 font-medium w-5/12",children:F.questionText}),a.jsx("td",{className:"p-3 w-5/12",children:F.answer}),a.jsx("td",{className:"p-3 text-center w-1/12",children:F.isCorrect===!0?a.jsx(De,{className:"bg-green-50 text-green-700 border-green-200",children:"Correct"}):F.isCorrect===!1?a.jsx(De,{className:"bg-red-50 text-red-700 border-red-200",children:"Incorrect"}):a.jsx(De,{variant:"outline",className:"text-amber-600",children:s.status==="completed"?"Pending Evaluation":"Awaiting Result"})}),a.jsx("td",{className:"p-3 text-right w-1/12",children:F.points>0?a.jsxs("span",{className:"text-green-600 font-medium",children:["+",F.points]}):F.points<0?a.jsx("span",{className:"text-red-500 font-medium",children:F.points}):F.isCorrect===!1?a.jsx("span",{className:"text-red-500 font-medium",children:"0"}):a.jsx("span",{className:"text-gray-500 font-medium",children:s.status==="completed"?"0":"—"})})]},F.questionId)),a.jsxs("tr",{className:"bg-gray-50 border-t border-gray-200",children:[a.jsx("td",{colSpan:3,className:"p-3 text-right font-bold",children:"Total Points"}),a.jsx("td",{className:"p-3 text-right font-bold w-1/12",children:P.totalPoints>0?a.jsx("span",{className:"text-green-600",children:P.totalPoints}):s.status!=="completed"?a.jsx("span",{className:"text-gray-500",children:"Pending"}):D?a.jsx("span",{className:"text-amber-600",children:"Evaluating"}):a.jsx("span",{className:"text-gray-500",children:"0"})})]})]})]})})]})})})]}))})]})})]})]})]})})};var DM={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},hT=re.createContext&&re.createContext(DM),rY=["attr","size","title"];function sY(t,e){if(t==null)return{};var n=iY(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function iY(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function fp(){return fp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fp.apply(this,arguments)}function fT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function mp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fT(Object(n),!0).forEach(function(r){oY(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oY(t,e,n){return e=aY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aY(t){var e=lY(t,"string");return typeof e=="symbol"?e:e+""}function lY(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function MM(t){return t&&t.map((e,n)=>re.createElement(e.tag,mp({key:n},e.attr),MM(e.child)))}function cY(t){return e=>re.createElement(uY,fp({attr:mp({},t.attr)},e),MM(t.child))}function uY(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=sY(t,rY),l=s||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),re.createElement("svg",fp({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:c,style:mp(mp({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&re.createElement("title",null,i),t.children)};return hT!==void 0?re.createElement(hT.Consumer,null,n=>e(n)):e(DM)}function OM(t){return cY({tag:"svg",attr:{viewBox:"0 0 488 512"},child:[{tag:"path",attr:{d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"},child:[]}]})(t)}const dY=()=>{const[t,e]=p.useState(!1),n=nr(),{toast:r}=yn(),{googleSignIn:s}=kn(),i=async()=>{try{e(!0),await s(),r({title:"Sign up successful!",description:"You've successfully signed up with Google."}),n("/")}catch(o){console.error(o);const l=o;let c="There was an error signing up. Please try again.";l.code==="auth/popup-closed-by-user"?c="Sign-in popup was closed before completing the sign in.":l.code==="auth/cancelled-popup-request"&&(c="The sign-in popup was cancelled."),r({title:"Google Sign up failed",description:c,variant:"destructive"})}finally{e(!1)}};return a.jsxs("div",{className:"w-full max-w-md mx-auto p-6 space-y-6 bg-white rounded-xl shadow-lg",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Create Account"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Join the IPL Prediction community"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"text-center mb-4",children:a.jsx("p",{className:"text-sm text-gray-500",children:"Sign up with your Google account"})}),a.jsxs(Se,{type:"button",variant:"outline",className:"w-full flex items-center justify-center gap-2 py-5",onClick:i,disabled:t,children:[a.jsx(OM,{className:"h-5 w-5 text-red-500"}),a.jsx("span",{children:t?"Signing up...":"Continue with Google"})]})]}),a.jsx("div",{className:"text-center text-sm",children:a.jsxs("p",{className:"text-gray-600",children:["Already have an account?"," ",a.jsx(it,{to:"/login",className:"text-ipl-blue hover:underline font-semibold",children:"Sign in"})]})})]})},hY=()=>{const[t,e]=p.useState(!1),n=nr(),{toast:r}=yn(),{googleSignIn:s}=kn(),i=async()=>{try{e(!0),await s(),r({title:"Login successful!",description:"You've successfully logged in with Google."}),n("/")}catch(o){console.error(o);const l=o;let c="There was an error logging in. Please try again.";l.code==="auth/popup-closed-by-user"?c="Sign-in popup was closed before completing the sign in.":l.code==="auth/cancelled-popup-request"&&(c="The sign-in popup was cancelled."),r({title:"Google Login failed",description:c,variant:"destructive"})}finally{e(!1)}};return a.jsxs("div",{className:"w-full max-w-md mx-auto p-6 space-y-6 bg-white rounded-xl shadow-lg",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Welcome Back"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to continue your prediction journey"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"text-center mb-4",children:a.jsx("p",{className:"text-sm text-gray-500",children:"Sign in with your Google account"})}),a.jsxs(Se,{type:"button",variant:"outline",className:"w-full flex items-center justify-center gap-2 py-5",onClick:i,disabled:t,children:[a.jsx(OM,{className:"h-5 w-5 text-red-500"}),a.jsx("span",{children:t?"Signing in...":"Continue with Google"})]})]}),a.jsx("div",{className:"text-center text-sm",children:a.jsxs("p",{className:"text-gray-600",children:["Don't have an account?"," ",a.jsx(it,{to:"/register",className:"text-ipl-blue hover:underline font-semibold",children:"Sign up"})]})})]})},fY=()=>{const[t,e]=p.useState("register"),{currentUser:n}=kn();return n?a.jsx(dU,{to:"/"}):a.jsx(Jt,{children:a.jsx("div",{className:"container mx-auto py-8 px-4",children:a.jsxs("div",{className:"max-w-md mx-auto bg-white rounded-lg shadow-sm p-6",children:[a.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:t==="register"?"Create an Account":"Welcome Back"}),a.jsxs(Ur,{defaultValue:"register",className:"w-full",onValueChange:r=>e(r),children:[a.jsxs(Er,{className:"grid w-full grid-cols-2 mb-6",children:[a.jsx(rt,{value:"register",children:"Register"}),a.jsx(rt,{value:"login",children:"Login"})]}),a.jsx(pt,{value:"register",children:a.jsx(dY,{})}),a.jsx(pt,{value:"login",children:a.jsx(hY,{})})]}),a.jsx("div",{className:"mt-6 text-center text-sm text-gray-500",children:t==="register"?a.jsxs("p",{children:["By creating an account, you agree to our"," ",a.jsx(it,{to:"/terms",className:"text-ipl-blue hover:underline",children:"Terms of Service"})," ","and"," ",a.jsx(it,{to:"/privacy",className:"text-ipl-blue hover:underline",children:"Privacy Policy"})]}):a.jsx("p",{children:a.jsx(it,{to:"/forgot-password",className:"text-ipl-blue hover:underline",children:"Forgot your password?"})})})]})})})},LM=({children:t,requireAdmin:e=!1})=>{const{currentUser:n,loading:r}=kn(),s=nr(),[i,o]=p.useState(null),[l,c]=p.useState(!0);return p.useEffect(()=>{(async()=>{try{if(r)return;if(!n){s("/login");return}if(e){const h=await vc(n.uid);if(o(h),!h){s("/");return}}c(!1)}catch(h){console.error("Error checking access:",h),s("/")}})()},[n,r,s,e]),r||e&&l?a.jsxs("div",{className:"flex justify-center items-center min-h-screen",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"}),a.jsx("span",{className:"ml-3",children:"Verifying access..."})]}):!n||e&&!i?null:a.jsx(a.Fragment,{children:t})},mY=()=>{const{currentUser:t,logout:e}=kn(),n=nr(),{toast:r}=yn(),[s,i]=p.useState(!1),o=async()=>{try{i(!0),await e(),r({title:"Logged out",description:"You have been successfully logged out."}),n("/register")}catch(c){console.error("Logout error:",c),r({title:"Logout failed",description:"There was an error logging out. Please try again.",variant:"destructive"})}finally{i(!1)}};if(!t)return null;const l=()=>t.displayName?t.displayName.split(" ").map(c=>c[0]).join("").toUpperCase():"U";return a.jsxs(ht,{className:"w-full max-w-md mx-auto",children:[a.jsxs(bt,{className:"flex flex-row items-center gap-4",children:[a.jsxs(go,{className:"h-16 w-16",children:[a.jsx(yo,{src:t.photoURL||"",alt:t.displayName||"User"}),a.jsx(vo,{className:"text-lg bg-ipl-blue text-white",children:l()})]}),a.jsxs("div",{children:[a.jsx(Tt,{children:t.displayName||"User"}),a.jsx(zt,{children:t.email})]})]}),a.jsx(gt,{className:"space-y-4",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"text-sm font-medium",children:"Account Information"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Email"}),a.jsx("span",{children:t.email}),a.jsx("span",{className:"text-muted-foreground",children:"Email Verified"}),a.jsx("span",{children:t.emailVerified?"Yes":"No"}),a.jsx("span",{className:"text-muted-foreground",children:"User ID"}),a.jsx("span",{className:"truncate",children:t.uid})]})]})}),a.jsx(Va,{children:a.jsx(Se,{variant:"destructive",onClick:o,disabled:s,className:"w-full",children:s?"Logging out...":"Sign Out"})})]})},pY=()=>{kn();const t=[{id:"1",match:"MI vs CSK",prediction:"MI to win",result:"Correct",points:10,date:"Mar 10, 2025"},{id:"2",match:"RCB vs KKR",prediction:"RCB to win",result:"Incorrect",points:0,date:"Mar 12, 2025"},{id:"3",match:"DC vs PBKS",prediction:"DC to win",result:"Correct",points:10,date:"Mar 14, 2025"}],e=[{id:"1",title:"First Blood",description:"Made your first prediction",date:"Mar 10, 2025",icon:"🏆"},{id:"2",title:"Streak Master",description:"Correctly predicted 3 matches in a row",date:"Mar 14, 2025",icon:"🔥"}];return a.jsx(Jt,{children:a.jsx(LM,{children:a.jsxs("div",{className:"container mx-auto py-8 px-4",children:[a.jsx(mY,{}),a.jsx("div",{className:"mt-8",children:a.jsxs(Ur,{defaultValue:"predictions",children:[a.jsxs(Er,{className:"grid w-full grid-cols-2",children:[a.jsx(rt,{value:"predictions",children:"Predictions"}),a.jsx(rt,{value:"achievements",children:"Achievements"})]}),a.jsx(pt,{value:"predictions",className:"mt-6",children:a.jsxs(ht,{children:[a.jsxs(bt,{children:[a.jsx(Tt,{children:"Your Predictions"}),a.jsx(zt,{children:"Track your prediction history and performance"})]}),a.jsx(gt,{children:t.length===0?a.jsx("p",{className:"text-center text-gray-500 py-8",children:"You haven't made any predictions yet."}):a.jsx("div",{className:"space-y-4",children:t.map(n=>a.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium",children:n.match}),a.jsx("p",{className:"text-sm text-gray-600",children:n.prediction}),a.jsx("p",{className:"text-xs text-gray-400",children:n.date})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(De,{variant:n.result==="Correct"?"default":"destructive",children:n.result}),n.result==="Correct"&&a.jsxs("span",{className:"text-green-600 font-semibold",children:["+",n.points]})]})]},n.id))})})]})}),a.jsx(pt,{value:"achievements",className:"mt-6",children:a.jsxs(ht,{children:[a.jsxs(bt,{children:[a.jsx(Tt,{children:"Your Achievements"}),a.jsx(zt,{children:"Badges and rewards you've earned"})]}),a.jsx(gt,{children:e.length===0?a.jsx("p",{className:"text-center text-gray-500 py-8",children:"You haven't earned any achievements yet."}):a.jsx("div",{className:"space-y-4",children:e.map(n=>a.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[a.jsx("div",{className:"flex-shrink-0 h-12 w-12 flex items-center justify-center bg-blue-100 rounded-full text-2xl mr-4",children:n.icon}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium",children:n.title}),a.jsx("p",{className:"text-sm text-gray-600",children:n.description}),a.jsxs("p",{className:"text-xs text-gray-400",children:["Earned on ",n.date]})]})]},n.id))})})]})})]})})]})})})},gY=[{id:"1",userId:"user1",title:"Match Reminder",message:"CSK vs MI match starts in 2 hours. Don't forget to make your predictions!",type:"match-reminder",read:!1,createdAt:"2025-03-15T10:30:00Z",linkTo:"/matches/1"},{id:"2",userId:"user1",title:"Prediction Results",message:"You earned 35 points for your predictions in the RCB vs KKR match!",type:"prediction-result",read:!1,createdAt:"2025-03-14T18:45:00Z",linkTo:"/matches/2"},{id:"3",userId:"user1",title:"Leaderboard Update",message:"You've moved up 5 positions on the weekly leaderboard!",type:"leaderboard-update",read:!0,createdAt:"2025-03-13T09:15:00Z",linkTo:"/leaderboard"},{id:"4",userId:"user1",title:"Achievement Unlocked",message:"Congratulations! You've earned the 'Perfect Match' badge for correctly predicting all polls in a match.",type:"achievement",read:!0,createdAt:"2025-03-12T14:20:00Z",linkTo:"/profile"},{id:"5",userId:"user1",title:"Match Reminder",message:"SRH vs PBKS match starts tomorrow. Make your predictions now!",type:"match-reminder",read:!0,createdAt:"2025-03-11T11:00:00Z",linkTo:"/matches/3"}],yY=()=>{const[t,e]=p.useState(gY),n=l=>{e(c=>c.map(u=>u.id===l?{...u,read:!0}:u))},r=()=>{e(l=>l.map(c=>({...c,read:!0})))},s=l=>{switch(l){case"match-reminder":return a.jsx(Op,{className:"h-5 w-5 text-blue-500"});case"prediction-result":return a.jsx(ha,{className:"h-5 w-5 text-green-500"});case"leaderboard-update":return a.jsx(fA,{className:"h-5 w-5 text-purple-500"});case"achievement":return a.jsx(rs,{className:"h-5 w-5 text-yellow-500"});default:return a.jsx(Im,{className:"h-5 w-5 text-gray-500"})}},i=l=>{const c=new Date(l);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(c)},o=t.filter(l=>!l.read).length;return a.jsx(Jt,{children:a.jsx("div",{className:"container mx-auto py-8 px-4",children:a.jsxs("div",{className:"max-w-3xl mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Notifications"}),a.jsx("p",{className:"text-gray-600",children:o>0?`You have ${o} unread notification${o>1?"s":""}`:"All caught up!"})]}),o>0&&a.jsxs(Se,{variant:"outline",onClick:r,className:"flex items-center gap-1",children:[a.jsx(ha,{className:"h-4 w-4"}),a.jsx("span",{children:"Mark all as read"})]})]}),a.jsx(ht,{children:a.jsx(gt,{className:"p-0",children:t.length===0?a.jsxs("div",{className:"p-6 text-center",children:[a.jsx(Im,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-500",children:"No notifications yet"})]}):a.jsx("div",{className:"divide-y",children:t.map(l=>a.jsxs("div",{className:`p-4 flex gap-3 ${l.read?"":"bg-blue-50"}`,children:[a.jsx("div",{className:"mt-1",children:s(l.type)}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("h3",{className:`font-medium ${l.read?"":"text-blue-800"}`,children:l.title}),a.jsx("span",{className:"text-xs text-gray-500",children:i(l.createdAt)})]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:l.message}),a.jsxs("div",{className:"flex justify-between mt-2",children:[a.jsx(Se,{variant:"link",className:"h-auto p-0 text-ipl-blue",asChild:!0,children:a.jsx("a",{href:l.linkTo,children:"View Details"})}),!l.read&&a.jsx(Se,{variant:"ghost",size:"sm",className:"h-auto py-1 px-2 text-xs",onClick:()=>n(l.id),children:"Mark as read"})]})]})]},l.id))})})})]})})})},r_=p.forwardRef(({className:t,...e},n)=>a.jsx("textarea",{className:_e("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));r_.displayName="Textarea";const VM=async t=>{try{const e=Ie(K,"teams"),n=t.team.replace(/\s+/g,"").toLowerCase(),r=be(e,n);await tr(r,{name:t.team,id:n,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),squad:t.squad}),console.log(`Team ${t.team} uploaded successfully!`)}catch(e){throw console.error("Error uploading team data:",e),e}},vY=async t=>{try{for(const e of t)await VM(e);console.log(`All ${t.length} teams uploaded successfully!`)}catch(e){throw console.error("Error uploading multiple teams:",e),e}},xY=()=>{const[t,e]=p.useState(""),[n,r]=p.useState("idle"),[s,i]=p.useState(""),[o,l]=p.useState(0),c=g=>{e(g.target.value),r("idle")},u=g=>{try{const v=JSON.parse(g);return v.team&&Array.isArray(v.squad)?{valid:!0,data:[v],multiple:!1}:Array.isArray(v)?{valid:v.every(b=>b.team&&Array.isArray(b.squad)),data:v,multiple:!0}:{valid:!1,data:null,multiple:!1}}catch{return{valid:!1,data:null,multiple:!1}}},h=async()=>{if(!t.trim()){r("error"),i("Please enter JSON data");return}const g=u(t);if(!g.valid){r("error"),i("Invalid JSON format. Please check your input.");return}r("loading"),i("Uploading team data...");try{if(!navigator.onLine){r("offline"),i("You are currently offline. Team data will be uploaded when you reconnect."),setTimeout(()=>{r("success"),l(g.multiple?g.data.length:1),i(`Development mode: Simulated upload of ${g.multiple?g.data.length:1} team(s).`)},2e3);return}g.multiple?(await vY(g.data),l(g.data.length)):(await VM(g.data[0]),l(1)),r("success"),i(`Successfully uploaded ${g.multiple?g.data.length:1} team(s) to Firestore!`)}catch(v){console.error("Upload error:",v),r("success"),l(g.multiple?g.data.length:1),i(`Development mode: Simulated upload of ${g.multiple?g.data.length:1} team(s).`)}},f=()=>{e(""),r("idle"),i("")},m=()=>{e(JSON.stringify({team:"Chennai Super Kings",squad:[{name:"Ruturaj Gaikwad",role:"Batter (Captain)",age:"27y 274d"},{name:"MS Dhoni",role:"Wicketkeeper",age:"42y 274d"},{name:"Ravindra Jadeja",role:"All-rounder",age:"35y 274d"}]},null,2)),r("idle")};return a.jsxs(ht,{className:"w-full max-w-3xl mx-auto",children:[a.jsxs(bt,{children:[a.jsx(Tt,{children:"Team Data Uploader"}),a.jsx(zt,{children:"Upload team data in JSON format to Firebase Firestore"})]}),a.jsxs(gt,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("label",{htmlFor:"json-input",className:"text-sm font-medium",children:"Paste JSON Team Data"}),a.jsx(Se,{variant:"ghost",size:"sm",onClick:m,className:"text-xs",children:"Load Example"})]}),a.jsx(r_,{id:"json-input",placeholder:`{
  "team": "Team Name",
  "squad": [
    {
      "name": "Player Name",
      "role": "Player Role",
      "age": "Player Age"
    }
  ]
}`,className:"min-h-[300px] font-mono text-sm",value:t,onChange:c})]}),n==="success"&&a.jsxs(yr,{className:"bg-green-50 border-green-200",children:[a.jsx(pA,{className:"h-4 w-4 text-green-600"}),a.jsx(es,{className:"text-green-800",children:"Success"}),a.jsx(vr,{className:"text-green-700",children:s})]}),n==="error"&&a.jsxs(yr,{className:"bg-red-50 border-red-200",children:[a.jsx(fa,{className:"h-4 w-4 text-red-600"}),a.jsx(es,{className:"text-red-800",children:"Error"}),a.jsx(vr,{className:"text-red-700",children:s})]}),n==="offline"&&a.jsxs(yr,{className:"bg-amber-50 border-amber-200",children:[a.jsx(yA,{className:"h-4 w-4 text-amber-600"}),a.jsx(es,{className:"text-amber-800",children:"Offline Mode"}),a.jsx(vr,{className:"text-amber-700",children:s})]})]}),a.jsxs(Va,{className:"flex justify-between",children:[a.jsx(Se,{variant:"outline",onClick:f,disabled:n==="loading",children:"Clear"}),a.jsx(Se,{onClick:h,disabled:n==="loading"||!t.trim(),className:"flex items-center gap-2",children:n==="loading"?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Uploading..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Xx,{className:"h-4 w-4"}),"Upload Team Data"]})})]})]})};var di="Accordion",wY=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[s_,bY,_Y]=Hd(di),[Cg,jX]=$r(di,[_Y,NM]),i_=NM(),FM=re.forwardRef((t,e)=>{const{type:n,...r}=t,s=r,i=r;return a.jsx(s_.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?a.jsx(TY,{...i,ref:e}):a.jsx(IY,{...s,ref:e})})});FM.displayName=di;var[$M,EY]=Cg(di),[UM,SY]=Cg(di,{collapsible:!1}),IY=re.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},collapsible:i=!1,...o}=t,[l,c]=ns({prop:n,defaultProp:r,onChange:s});return a.jsx($M,{scope:t.__scopeAccordion,value:l?[l]:[],onItemOpen:c,onItemClose:re.useCallback(()=>i&&c(""),[i,c]),children:a.jsx(UM,{scope:t.__scopeAccordion,collapsible:i,children:a.jsx(BM,{...o,ref:e})})})}),TY=re.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...i}=t,[o=[],l]=ns({prop:n,defaultProp:r,onChange:s}),c=re.useCallback(h=>l((f=[])=>[...f,h]),[l]),u=re.useCallback(h=>l((f=[])=>f.filter(m=>m!==h)),[l]);return a.jsx($M,{scope:t.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:a.jsx(UM,{scope:t.__scopeAccordion,collapsible:!0,children:a.jsx(BM,{...i,ref:e})})})}),[NY,Ag]=Cg(di),BM=re.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:s,orientation:i="vertical",...o}=t,l=re.useRef(null),c=Ze(l,e),u=bY(n),f=Oc(s)==="ltr",m=de(t.onKeyDown,g=>{var I;if(!wY.includes(g.key))return;const v=g.target,y=u().filter(C=>{var R;return!((R=C.ref.current)!=null&&R.disabled)}),b=y.findIndex(C=>C.ref.current===v),_=y.length;if(b===-1)return;g.preventDefault();let w=b;const S=0,N=_-1,j=()=>{w=b+1,w>N&&(w=S)},D=()=>{w=b-1,w<S&&(w=N)};switch(g.key){case"Home":w=S;break;case"End":w=N;break;case"ArrowRight":i==="horizontal"&&(f?j():D());break;case"ArrowDown":i==="vertical"&&j();break;case"ArrowLeft":i==="horizontal"&&(f?D():j());break;case"ArrowUp":i==="vertical"&&D();break}const T=w%_;(I=y[T].ref.current)==null||I.focus()});return a.jsx(NY,{scope:n,disabled:r,direction:s,orientation:i,children:a.jsx(s_.Slot,{scope:n,children:a.jsx(Ce.div,{...o,"data-orientation":i,ref:c,onKeyDown:r?void 0:m})})})}),pp="AccordionItem",[CY,o_]=Cg(pp),zM=re.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...s}=t,i=Ag(pp,n),o=EY(pp,n),l=i_(n),c=Js(),u=r&&o.value.includes(r)||!1,h=i.disabled||t.disabled;return a.jsx(CY,{scope:n,open:u,disabled:h,triggerId:c,children:a.jsx(PM,{"data-orientation":i.orientation,"data-state":QM(u),...l,...s,ref:e,disabled:h,open:u,onOpenChange:f=>{f?o.onItemOpen(r):o.onItemClose(r)}})})});zM.displayName=pp;var qM="AccordionHeader",WM=re.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=Ag(di,n),i=o_(qM,n);return a.jsx(Ce.h3,{"data-orientation":s.orientation,"data-state":QM(i.open),"data-disabled":i.disabled?"":void 0,...r,ref:e})});WM.displayName=qM;var X0="AccordionTrigger",HM=re.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=Ag(di,n),i=o_(X0,n),o=SY(X0,n),l=i_(n);return a.jsx(s_.ItemSlot,{scope:n,children:a.jsx(VQ,{"aria-disabled":i.open&&!o.collapsible||void 0,"data-orientation":s.orientation,id:i.triggerId,...l,...r,ref:e})})});HM.displayName=X0;var KM="AccordionContent",GM=re.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=Ag(di,n),i=o_(KM,n),o=i_(n);return a.jsx(FQ,{role:"region","aria-labelledby":i.triggerId,"data-orientation":s.orientation,...o,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});GM.displayName=KM;function QM(t){return t?"open":"closed"}var AY=FM,PY=zM,RY=WM,YM=HM,XM=GM;const jY=AY,JM=p.forwardRef(({className:t,...e},n)=>a.jsx(PY,{ref:n,className:_e("border-b",t),...e}));JM.displayName="AccordionItem";const ZM=p.forwardRef(({className:t,children:e,...n},r)=>a.jsx(RY,{className:"flex",children:a.jsxs(YM,{ref:r,className:_e("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...n,children:[e,a.jsx(Ec,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));ZM.displayName=YM.displayName;const eO=p.forwardRef(({className:t,children:e,...n},r)=>a.jsx(XM,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:a.jsx("div",{className:_e("pb-4 pt-0",t),children:e})}));eO.displayName=XM.displayName;const kY=()=>{const[t,e]=p.useState([]),[n,r]=p.useState([]),[s,i]=p.useState(!0),[o,l]=p.useState(null),[c,u]=p.useState(!1);p.useEffect(()=>{(async()=>{var v,y,b,_,w,S,N,j,D,T;try{i(!0),l(null),u(!1);const I=Ie(K,"teams"),C=await Re(I);let R=[],M=[];for(const P of C.docs){const A=P.data(),F=P.id;let Y=A.shortName||"";Y||((v=A.name)!=null&&v.includes("Mumbai Indians")?Y="MI":(y=A.name)!=null&&y.includes("Chennai Super Kings")?Y="CSK":(b=A.name)!=null&&b.includes("Royal Challengers")?Y="RCB":(_=A.name)!=null&&_.includes("Kolkata Knight Riders")?Y="KKR":(w=A.name)!=null&&w.includes("Delhi Capitals")?Y="DC":(S=A.name)!=null&&S.includes("Punjab Kings")?Y="PBKS":(N=A.name)!=null&&N.includes("Rajasthan Royals")?Y="RR":(j=A.name)!=null&&j.includes("Sunrisers Hyderabad")?Y="SRH":(D=A.name)!=null&&D.includes("Gujarat Titans")?Y="GT":(T=A.name)!=null&&T.includes("Lucknow Super Giants")?Y="LSG":Y=F.toUpperCase().substring(0,3)),R.push({id:F,name:A.name||"",shortName:Y,primaryColor:A.primaryColor||"#1E40AF",secondaryColor:A.secondaryColor||"#FFFFFF",logo:A.logo||`/images/teams/${Y.toLowerCase()}.png`}),A.squad&&Array.isArray(A.squad)&&A.squad.forEach((q,G)=>{M.push({id:`${F}_player_${G}`,name:q.name,teamId:F,role:h(q.role)})})}console.log("Fetched from Firestore:",{teams:R.length,players:M.length,teamsData:R,playersData:M}),R.length===0&&M.length===0&&(console.log("No data found in Firestore, using mock data"),R=Na,M=cp,u(!0)),e(R),r(M)}catch(I){console.error("Error fetching teams and players:",I),e(Na),r(cp),u(!0),l("Error loading from Firestore. Using mock data instead.")}finally{i(!1)}})()},[]);const h=g=>{const v=g.toLowerCase();return v.includes("bat")?"Batsman":v.includes("bowl")?"Bowler":v.includes("all")||v.includes("round")?"All-rounder":v.includes("keep")||v.includes("wicket")?"Wicket-keeper":"Batsman"},f=n.reduce((g,v)=>(v.teamId&&(g[v.teamId]||(g[v.teamId]=[]),g[v.teamId].push(v)),g),{}),m=(g=[])=>{const v={Batsman:0,Bowler:0,"All-rounder":0,"Wicket-keeper":0};return g==null||g.forEach(y=>{y.role&&v.hasOwnProperty(y.role)&&v[y.role]++}),v};return s?a.jsxs(ht,{children:[a.jsxs(bt,{children:[a.jsx(Tt,{className:"flex justify-between items-center",children:a.jsx(Ke,{className:"h-8 w-40"})}),a.jsx("div",{className:"text-sm text-muted-foreground",children:a.jsx("span",{children:a.jsx(Ke,{className:"h-4 w-60 inline-block"})})})]}),a.jsx(gt,{children:a.jsx("div",{className:"space-y-4",children:[1,2,3].map(g=>a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ke,{className:"h-10 w-full"}),a.jsx("div",{className:"pl-6 space-y-2",children:[1,2,3].map(v=>a.jsx(Ke,{className:"h-8 w-full"},v))})]},g))})})]}):o?a.jsx(ht,{children:a.jsxs(bt,{children:[a.jsx(Tt,{className:"text-red-500",children:"Error Loading Teams"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:o})]})}):a.jsxs(ht,{children:[a.jsxs(bt,{children:[a.jsxs(Tt,{className:"flex justify-between items-center",children:["Teams & Squad Members",a.jsxs(De,{variant:"outline",className:"ml-2",children:[t.length," Teams"]})]}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:["View all teams and their squad members in the IPL 2025 season",c&&a.jsx("span",{className:"ml-1 text-amber-600",children:"(Using mock data)"})]})]}),a.jsx(gt,{children:a.jsxs(Ur,{defaultValue:"list",className:"w-full",children:[a.jsxs(Er,{className:"grid w-full grid-cols-2 mb-4",children:[a.jsx(rt,{value:"list",children:"List View"}),a.jsx(rt,{value:"accordion",children:"Detailed View"})]}),a.jsx(pt,{value:"list",className:"space-y-4",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:t.map(g=>{const v=`${g.shortName.toLowerCase()}.png`;return a.jsxs("div",{className:"border rounded-md p-3 hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"h-12 w-12 flex items-center justify-center",children:a.jsx("img",{src:`/images/teams/${v}`,alt:g.name,className:"max-h-full max-w-full object-contain"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("h3",{className:"font-medium text-base truncate",children:g.name}),a.jsx("p",{className:"text-xs text-gray-500",children:g.shortName})]})]}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(m(f[g.id]||[])).map(([y,b])=>a.jsxs("div",{className:"flex items-center justify-between text-xs border rounded px-2 py-1 bg-gray-50",children:[a.jsxs("span",{className:"font-medium",children:[y,"s"]}),a.jsx("span",{className:"ml-1 bg-gray-200 text-gray-800 rounded-full h-5 w-5 flex items-center justify-center",children:b})]},y))})]},g.id)})})}),a.jsx(pt,{value:"accordion",children:a.jsx(jY,{type:"single",collapsible:!0,className:"w-full",children:t.map(g=>{const v=`${g.shortName.toLowerCase()}.png`,y=f[g.id]||[],b={Batsman:[],Bowler:[],"All-rounder":[],"Wicket-keeper":[]};return y.forEach(_=>{_.role&&b.hasOwnProperty(_.role)&&b[_.role].push(_)}),a.jsxs(JM,{value:g.id,children:[a.jsx(ZM,{className:"hover:bg-gray-50 px-2 rounded-md",children:a.jsxs("div",{className:"flex items-center gap-2 w-full",children:[a.jsx("div",{className:"h-10 w-10 flex items-center justify-center",children:a.jsx("img",{src:`/images/teams/${v}`,alt:g.name,className:"max-h-full max-w-full object-contain"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("span",{className:"font-medium truncate block",children:g.name}),a.jsxs(De,{variant:"outline",className:"ml-1 text-xs",children:[y.length," Players"]})]})]})}),a.jsx(eO,{children:a.jsxs("div",{className:"pl-12 pr-3 pt-2 pb-3",children:[Object.entries(b).map(([_,w])=>a.jsxs("div",{className:"mb-3",children:[a.jsxs("h4",{className:"text-xs font-semibold mb-1 text-gray-500 uppercase tracking-wider",children:[_,"s (",w.length,")"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-1",children:w.map(S=>{let N="";return _==="Batsman"&&(N="bg-blue-50 text-blue-700 text-xs"),_==="Bowler"&&(N="bg-green-50 text-green-700 text-xs"),_==="All-rounder"&&(N="bg-purple-50 text-purple-700 text-xs"),_==="Wicket-keeper"&&(N="bg-amber-50 text-amber-700 text-xs"),a.jsxs("div",{className:"flex items-center justify-between border rounded-md p-1.5 hover:bg-gray-50 transition-colors",children:[a.jsx("span",{className:"font-medium text-sm truncate mr-1",children:S.name}),a.jsx("span",{className:`px-1.5 py-0.5 rounded whitespace-nowrap ${N}`,children:S.role})]},S.id)})})]},_)),y.length===0&&a.jsx("p",{className:"text-gray-500 italic text-sm",children:"No players found for this team"})]})})]},g.id)})})})]})})]})},tl={team1:"Mumbai Indians",team2:"Chennai Super Kings",venue:"Wankhede Stadium, Mumbai",date:new Date("2025-04-10T19:30:00"),status:"upcoming"},DY=()=>{const{currentUser:t}=kn(),{toast:e}=yn(),[n,r]=p.useState(!1),[s,i]=p.useState(""),[o,l]=p.useState(""),[c,u]=p.useState(""),[h,f]=p.useState(""),[m,g]=p.useState(""),[v,y]=p.useState("upcoming"),b=["Mumbai Indians","Chennai Super Kings","Royal Challengers Bangalore","Kolkata Knight Riders","Delhi Capitals","Rajasthan Royals","Sunrisers Hyderabad","Punjab Kings","Gujarat Titans","Lucknow Super Giants","Qualifier 1","Qualifier 2","Eliminator"],_=async N=>{if(N.preventDefault(),!s||!o||!c||!h||!m){e({title:"Missing Fields",description:"Please fill in all required fields",variant:"destructive"});return}if(s===o){e({title:"Invalid Teams",description:"Team 1 and Team 2 cannot be the same",variant:"destructive"});return}try{r(!0);const j=await up(t==null?void 0:t.uid);if(!j.isAdmin){e({title:"Permission Denied",description:"You do not have permission to upload matches",variant:"destructive"}),r(!1);return}const D=`${h}T${m}:00`,T=new Date(D),I={team1:s,team2:o,venue:c,date:$e.fromDate(T),status:v};if(j.isDevelopment){setTimeout(()=>{e({title:"Match Added (Development Mode)",description:"Match has been successfully added in development mode"}),r(!1),w()},1e3);return}const C=await Oj(I);e({title:"Match Added",description:`Match has been successfully added with ID: ${C}`}),w()}catch(j){console.error("Error uploading match:",j),e({title:"Upload Failed",description:j instanceof Error?j.message:"An unknown error occurred",variant:"destructive"})}finally{r(!1)}},w=()=>{i(""),l(""),u(""),f(""),g(""),y("upcoming")},S=()=>{i(tl.team1),l(tl.team2),u(tl.venue),f(tl.date.toISOString().split("T")[0]),g(tl.date.toISOString().split("T")[1].substring(0,5)),y(tl.status)};return a.jsxs(ht,{className:"w-full",children:[a.jsxs(bt,{children:[a.jsx(Tt,{children:"Add New Match"}),a.jsx(zt,{children:"Create a new match in the IPL 2025 schedule"})]}),a.jsx(gt,{children:a.jsxs("form",{onSubmit:_,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(tt,{htmlFor:"team1",children:"Team 1"}),a.jsxs(Cr,{value:s,onValueChange:i,children:[a.jsx(dr,{id:"team1",children:a.jsx(Ar,{placeholder:"Select team"})}),a.jsx(hr,{children:b.map(N=>a.jsx(mt,{value:N,children:N},N))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(tt,{htmlFor:"team2",children:"Team 2"}),a.jsxs(Cr,{value:o,onValueChange:l,children:[a.jsx(dr,{id:"team2",children:a.jsx(Ar,{placeholder:"Select team"})}),a.jsx(hr,{children:b.map(N=>a.jsx(mt,{value:N,children:N},N))})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(tt,{htmlFor:"venue",children:"Venue"}),a.jsx(r_,{id:"venue",placeholder:"Enter match venue",value:c,onChange:N=>u(N.target.value)})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(tt,{htmlFor:"date",children:"Date"}),a.jsx(sn,{id:"date",type:"date",value:h,onChange:N=>f(N.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(tt,{htmlFor:"time",children:"Time"}),a.jsx(sn,{id:"time",type:"time",value:m,onChange:N=>g(N.target.value)})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(tt,{htmlFor:"status",children:"Match Status"}),a.jsxs(Cr,{value:v,onValueChange:y,children:[a.jsx(dr,{id:"status",children:a.jsx(Ar,{placeholder:"Select status"})}),a.jsxs(hr,{children:[a.jsx(mt,{value:"upcoming",children:"Upcoming"}),a.jsx(mt,{value:"live",children:"Live"}),a.jsx(mt,{value:"completed",children:"Completed"})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx(Se,{type:"button",variant:"outline",onClick:S,disabled:n,children:"Load Example"}),a.jsx(Se,{type:"button",variant:"outline",onClick:w,disabled:n,children:"Reset"}),a.jsx(Se,{type:"submit",disabled:n,children:n?a.jsxs(a.Fragment,{children:[a.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Uploading..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Xx,{className:"mr-2 h-4 w-4"}),"Upload Match"]})})]})]})})]})};function MY(){const{currentUser:t}=kn(),{toast:e}=yn(),[n,r]=p.useState(!1),[s,i]=p.useState(!0),[o,l]=p.useState([]),[c,u]=p.useState([]),[h,f]=p.useState(""),[m,g]=p.useState([]),[v,y]=p.useState([]),[b,_]=p.useState([]),[w,S]=p.useState(""),[N,j]=p.useState(""),[D,T]=p.useState(""),[I,C]=p.useState(""),[R,M]=p.useState(""),[P,A]=p.useState(""),[F,Y]=p.useState(""),[q,G]=p.useState(""),[O,L]=p.useState(!1),[X,Q]=p.useState(!1),[te,Z]=p.useState(!1);p.useEffect(()=>{(async()=>{try{i(!0);const pe=(await dT()).sort((Ye,Xe)=>{const Hn=typeof Ye.date=="string"?new Date(Ye.date):Ye.date.toDate();return(typeof Xe.date=="string"?new Date(Xe.date):Xe.date.toDate()).getTime()-Hn.getTime()}),Ae=await tY(),ge=await Re(Ie(K,Te.TEAMS)),vt=[];ge.forEach(Ye=>{const Xe=Ye.data();console.log("Loaded team data:",{id:Ye.id,...Xe}),vt.push({id:Ye.id,name:Xe.name,squad:Xe.squad})});const Qe=pe.map(Ye=>{const Xe=Ye;return{...Xe,team1:Xe.team1||Xe.team1Id,team2:Xe.team2||Xe.team2Id,team1Id:Xe.team1Id||Xe.team1,team2Id:Xe.team2Id||Xe.team2}});console.log("Normalized matches:",Qe.map(Ye=>({id:Ye.id,team1:Ye.team1,team2:Ye.team2,team1Id:Ye.team1Id,team2Id:Ye.team2Id}))),l(Qe),u(Ae),g(vt),console.log("Loaded teams with squads:",vt.map(Ye=>({id:Ye.id,name:Ye.name,hasSquad:!!Ye.squad,squadSize:Ye.squad?Object.keys(Ye.squad).length:0})))}catch(me){console.error("Error fetching data:",me),e({title:"Failed to fetch data",description:"An error occurred while fetching matches and questions.",variant:"destructive"})}finally{i(!1)}})()},[e]),p.useEffect(()=>{D&&(console.log(`Winner selected: ${D}`),console.log(`Current team1Players: ${v.length} players`),console.log(`Current team2Players: ${b.length} players`))},[D]),p.useEffect(()=>{xe()},[]);const xe=async()=>{try{const me=(await dT()).map(pe=>{const Ae=pe;return{...Ae,team1:Ae.team1||Ae.team1Id,team2:Ae.team2||Ae.team2Id,team1Id:Ae.team1Id||Ae.team1,team2Id:Ae.team2Id||Ae.team2}});l(me)}catch(ee){console.error("Error fetching matches:",ee),e({title:"Error",description:"Failed to load matches. Please try again.",variant:"destructive"})}},Oe=()=>{T(""),C(""),M(""),A(""),Y(""),G("")},V=()=>{S(""),j(""),Oe()},B=async ee=>{var pe,Ae;f(ee);const me=o.find(ge=>ge.id===ee);if(me){console.log("Full selected match:",me);const ge=me.team1||me.team1Id,vt=me.team2||me.team2Id;console.log("Team identifiers from match:",{team1Identifier:ge,team2Identifier:vt});const Qe=je=>{if(!je)return null;let Qt=m.find(vn=>vn.id.toLowerCase()===je.toLowerCase());return Qt||(Qt=m.find(vn=>vn.name.toLowerCase()===je.toLowerCase())),Qt||(Qt=m.find(vn=>vn.name.toLowerCase().includes(je.toLowerCase())||je.toLowerCase().includes(vn.name.toLowerCase()))),Qt},Ye=Qe(ge),Xe=Qe(vt);console.log("Selected match details:",{team1Identifier:ge,team2Identifier:vt,foundTeam1:!!Ye,foundTeam2:!!Xe,team1Data:Ye==null?void 0:Ye.name,team2Data:Xe==null?void 0:Xe.name});const Hn=je=>{if(!(je!=null&&je.squad))return[];try{return Object.values(je.squad).map(Qt=>({name:Qt.name,role:Qt.role,age:Qt.age}))}catch(Qt){return console.error("Error processing squad:",Qt),[]}},Kn=Hn(Ye);y(Kn),console.log("Team 1 squad loaded:",Kn),console.log("Team 1 roles:",Kn.map(je=>je.role));const xt=Hn(Xe);_(xt),console.log("Team 2 squad loaded:",xt),console.log("Team 2 roles:",xt.map(je=>je.role))}try{const ge=await yh(ee);ge?(T(ge.winner||""),S(ge.team1Score||""),j(ge.team2Score||""),A(((pe=ge.highestTotal)==null?void 0:pe.toString())||""),C(ge.topBatsmanId||""),M(ge.topBowlerId||""),Y(ge.moreSixes||""),G(((Ae=ge.totalSixes)==null?void 0:Ae.toString())||""),Q(!0),e({title:"Existing Results Loaded",description:`Loaded previous results for match ${oe(me)}.${ge.isEvaluated?" Results have been evaluated.":" Results have not been evaluated yet."}`})):me&&me.result?(T(me.result.winner||""),S(me.result.team1Score||""),j(me.result.team2Score||""),Q(!0),Oe()):(Q(!1),V())}catch(ge){console.error("Error fetching match result:",ge),Q(!1),V()}},ne=async ee=>{if(ee.preventDefault(),!h){e({title:"No Match Selected",description:"Please select a match to update its results.",variant:"destructive"});return}if(!D){e({title:"Missing Winner",description:"Please select the winner of the match.",variant:"destructive"});return}if(!t){e({title:"Authentication Required",description:"You must be signed in to update match results.",variant:"destructive"});return}try{if(r(!0),!await up(t.uid)){e({title:"Permission Denied",description:"You do not have permission to update match results",variant:"destructive"}),r(!1);return}const pe={status:"completed",result:{winner:D,team1Score:w,team2Score:N}},Ae=o.find(Qe=>Qe.id===h);if(!Ae)throw new Error("Selected match not found");const ge={};if(ge.winner=D,ge["winner-question"]=D,ge[`${h}-winner`]=D,I){const Qe=vs(I);console.log(`Setting top batsman: Original="${I}", Standardized="${Qe}"`),ge["top-batsman"]=Qe,ge[`${h}-top-batsman`]=Qe}if(R){const Qe=vs(R);console.log(`Setting top bowler: Original="${R}", Standardized="${Qe}"`),ge["top-bowler"]=Qe,ge[`${h}-top-bowler`]=Qe}P&&(ge["highest-total"]=P,ge[`${h}-highest-total`]=P),F&&(ge["more-sixes"]=F,ge[`${h}-more-sixes`]=F),q&&(ge["total-sixes"]=q,ge[`${h}-total-sixes`]=q);const vt={winner:D,team1Score:w,team2Score:N,highestTotal:P?parseInt(P):void 0,topBatsmanId:I?vs(I):void 0,topBowlerId:R?vs(R):void 0,moreSixes:F,totalSixes:q?parseInt(q):void 0,predictionResults:ge,isEvaluated:!1};console.log("Submitting match data:",pe),console.log("Submitting result data:",vt),console.log("Prediction results:",ge),await $j(h,t.uid,pe,vt),e({title:"Results Updated",description:"Match results have been updated and stored successfully."});try{L(!0);const Qe=Ie(K,Te.ANSWERS),Ye=Ge(Qe,nt("matchId","==",Ae.id)),Hn=(await Re(Ye)).docs.map(je=>({userId:je.data().userId,matchId:je.data().matchId,...je.data()}));console.log(`Found ${Hn.length} predictions to evaluate for match ${Ae.id}`),await $0(Ae.id),console.log(`Successfully evaluated predictions for match ${Ae.id}`);const Kn=new Set(Hn.map(je=>je.userId));console.log(`Updating global leaderboard for ${Kn.size} users`);const xt=Array.from(Kn).map(je=>(console.log(`Updating global leaderboard for user: ${je}`),Md(je,Ae.id)));await Promise.all(xt),e({title:"Success",description:`Evaluated ${Hn.length} predictions and updated leaderboards for ${Kn.size} users.`})}catch(Qe){console.error("Error during automatic prediction evaluation:",Qe),e({title:"Evaluation Note",description:"Results saved, but automatic prediction evaluation failed. Please try manual evaluation.",variant:"destructive"})}finally{L(!1)}}catch(me){console.error("Error updating match results:",me),e({title:"Update Failed",description:me instanceof Error?me.message:"An unknown error occurred",variant:"destructive"})}finally{r(!1)}},ae=async()=>{if(ye)try{L(!0);const ee=Ie(K,Te.ANSWERS),me=Ge(ee,nt("matchId","==",ye.id)),Ae=(await Re(me)).docs.map(Qe=>Qe.data());console.log(`Found ${Ae.length} predictions to evaluate for match ${ye.id}`),await $0(ye.id),console.log(`Successfully evaluated predictions for match ${ye.id}`);const ge=new Set(Ae.map(Qe=>Qe.userId));console.log(`Updating global leaderboard for ${ge.size} users`);const vt=Array.from(ge).map(Qe=>(console.log(`Updating global leaderboard for user: ${Qe}`),Md(Qe,ye.id)));await Promise.all(vt),e({title:"Success",description:`Evaluated ${Ae.length} predictions and updated leaderboards for ${ge.size} users.`}),await xe()}catch(ee){console.error("Error saving match results:",ee),e({title:"Error",description:"Failed to save match results. Please try again.",variant:"destructive"})}finally{L(!1)}},W=async()=>{Z(!0);try{if(!t){e({title:"Authentication Required",description:"You must be logged in to reset match results",variant:"destructive"});return}if(!await up(t.uid)){e({title:"Permission Denied",description:"You do not have permission to reset match results",variant:"destructive"});return}if(!window.confirm(`Are you sure you want to reset this match? This will:

• Change match status from "completed" to "upcoming"
• Delete all prediction results
• Reset all user predictions

This action cannot be undone.`))return;const pe={status:"upcoming"},Ae=be(K,Te.MATCHES,h);await Co(Ae,{...pe,result:HW(),updatedAt:hn()}),await Uj(h),await Bj(h),V(),e({title:"Match Reset",description:"Match has been reset to upcoming status and all predictions have been cleared."}),xe()}catch(ee){console.error("Error resetting match:",ee),e({title:"Reset Failed",description:ee instanceof Error?ee.message:"An unknown error occurred",variant:"destructive"})}finally{Z(!1)}},oe=ee=>ee.team1&&ee.team2?`${ee.team1} vs ${ee.team2}`:ee.team1Id&&ee.team2Id?`${ee.team1Id} vs ${ee.team2Id}`:`Match ${ee.id}`,fe=ee=>{try{return ee.date?(typeof ee.date=="string"?new Date(ee.date):ee.date.toDate?ee.date.toDate():new Date).toLocaleDateString():"Date not available"}catch(me){return console.error("Error formatting date:",me),"Date not available"}},ye=o.find(ee=>ee.id===h),ue=()=>{const ee=[...v||[],...b||[]],me=ee.filter(pe=>pe&&pe.role);return console.log(`getAllPlayers: combined ${(v==null?void 0:v.length)||0} team 1 players and ${(b==null?void 0:b.length)||0} team 2 players`),console.log(`Total ${ee.length} players, ${me.length} have roles defined`),ee};return s?a.jsxs(ht,{className:"w-full",children:[a.jsxs(bt,{children:[a.jsx(Tt,{children:"Update Match Results"}),a.jsx(zt,{children:"Loading match data..."})]}),a.jsx(gt,{children:a.jsxs("div",{className:"flex justify-center items-center py-12",children:[a.jsx(Kt,{className:"mr-2 h-6 w-6 animate-spin"}),a.jsx("span",{children:"Loading matches and prediction questions..."})]})})]}):a.jsxs(ht,{className:"w-full",children:[a.jsxs(bt,{children:[a.jsx(Tt,{children:"Update Match Results"}),a.jsx(zt,{children:"Enter match results and evaluate predictions"})]}),a.jsx(gt,{children:a.jsxs("form",{onSubmit:ne,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(tt,{htmlFor:"match",children:["Select Match (",o.length," available)"]}),a.jsxs(Cr,{value:h,onValueChange:B,children:[a.jsx(dr,{id:"match",children:a.jsx(Ar,{placeholder:"Select a match"})}),a.jsx(hr,{children:o.map(ee=>a.jsxs(mt,{value:ee.id,children:[oe(ee)," (",fe(ee),")"]},ee.id))})]})]}),ye&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(tt,{htmlFor:"team1Score",children:[ye.team1||ye.team1Id," Score"]}),a.jsx(sn,{id:"team1Score",placeholder:"e.g. 186/4",value:w,onChange:ee=>S(ee.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(tt,{htmlFor:"team2Score",children:[ye.team2||ye.team2Id," Score"]}),a.jsx(sn,{id:"team2Score",placeholder:"e.g. 172/8",value:N,onChange:ee=>j(ee.target.value)})]})]}),a.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[a.jsx("h3",{className:"font-medium text-lg mb-4",children:"Prediction Results"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(tt,{htmlFor:"winner",children:"Match Winner (10 points)"}),a.jsxs(Cr,{value:D,onValueChange:T,children:[a.jsx(dr,{id:"winner",children:a.jsx(Ar,{placeholder:"Select winner"})}),a.jsxs(hr,{children:[a.jsx(mt,{value:ye.team1Id,children:ye.team1||ye.team1Id}),a.jsx(mt,{value:ye.team2Id,children:ye.team2||ye.team2Id})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(tt,{htmlFor:"topBatsmanId",children:"Top Batsman"}),a.jsx("div",{className:"relative",children:a.jsxs(Cr,{value:I,onValueChange:ee=>C(ee),children:[a.jsx(dr,{children:a.jsx(Ar,{placeholder:"Select top batsman"})}),a.jsx(hr,{children:(()=>{console.log("Total players for batsman selection:",ue().length);const ee=ue().filter(pe=>{if(!pe||!pe.role)return!1;const Ae=pe.role.toLowerCase(),ge=Ae.includes("bat")||Ae.includes("order")||Ae.includes("wicket")||Ae.includes("keeper")||Ae.includes("captain")||Ae==="opener"||Ae.startsWith("top")||Ae.startsWith("middle")||Ae==="batter"||Ae==="batsman";return console.log(ge?`Included batsman: ${pe.name} (${pe.role})`:`Excluded from batsman: ${pe.name} (${pe.role})`),ge});console.log(`Found ${ee.length} batters after filtering`);const me=ee.length>0?ee:ue();return ue().length>0&&ue().filter(pe=>pe.role).length===0?(console.log("No players with roles defined, showing all players"),ue().map(pe=>a.jsxs(mt,{value:pe.name,children:[pe.name," (",pe.role||"Unknown role",")"]},pe.name))):me.length>0?me.map(pe=>a.jsxs(mt,{value:pe.name,children:[pe.name," (",pe.role||"Unknown role",")"]},pe.name)):a.jsx(mt,{value:"none",disabled:!0,children:"No players available"})})()})]})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(tt,{htmlFor:"topBowlerId",children:"Top Bowler"}),a.jsx("div",{className:"relative",children:a.jsxs(Cr,{value:R,onValueChange:ee=>M(ee),children:[a.jsx(dr,{children:a.jsx(Ar,{placeholder:"Select top bowler"})}),a.jsx(hr,{children:(()=>{console.log("Total players for bowler selection:",ue().length);const ee=ue().filter(pe=>{if(!pe||!pe.role)return!1;const Ae=pe.role.toLowerCase(),ge=Ae.includes("bowl")||Ae.includes("all")||Ae==="bowler"||Ae.includes("spinner")||Ae.includes("pacer")||Ae.includes("fast")||Ae.includes("medium");return console.log(ge?`Included bowler: ${pe.name} (${pe.role})`:`Excluded from bowler: ${pe.name} (${pe.role})`),ge});console.log(`Found ${ee.length} bowlers after filtering`);const me=ee.length>0?ee:ue();return ue().length>0&&ue().filter(pe=>pe.role).length===0?(console.log("No players with roles defined, showing all players"),ue().map(pe=>a.jsxs(mt,{value:pe.name,children:[pe.name," (",pe.role||"Unknown role",")"]},pe.name))):me.length>0?me.map(pe=>a.jsxs(mt,{value:pe.name,children:[pe.name," (",pe.role||"Unknown role",")"]},pe.name)):a.jsx(mt,{value:"none",disabled:!0,children:"No players available"})})()})]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(tt,{htmlFor:"highestTotal",children:"Highest Total (10 points)"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Did the match total exceed 350 runs?"}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"radio",id:"highestTotal-yes",name:"highestTotal-exceed",checked:P!==""&&parseInt(P)>350,onChange:()=>{P?parseInt(P)<=350&&A("351"):A("351")},className:"h-4 w-4 border-gray-300 text-primary focus:ring-primary"}),a.jsxs(tt,{htmlFor:"highestTotal-yes",className:"text-sm font-normal",children:["Yes (",">","350)"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"radio",id:"highestTotal-no",name:"highestTotal-exceed",checked:P!==""&&parseInt(P)<=350,onChange:()=>{P?parseInt(P)>350&&A("350"):A("350")},className:"h-4 w-4 border-gray-300 text-primary focus:ring-primary"}),a.jsx(tt,{htmlFor:"highestTotal-no",className:"text-sm font-normal",children:"No (≤350)"})]})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Enter the actual highest team total:"}),a.jsx(sn,{id:"highestTotal",type:"number",placeholder:"Enter the highest team total",value:P,onChange:ee=>A(ee.target.value)})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(tt,{htmlFor:"moreSixes",children:"Team with More Sixes (5 points)"}),a.jsxs(Cr,{value:F,onValueChange:Y,children:[a.jsx(dr,{id:"moreSixes",children:a.jsx(Ar,{placeholder:"Which team hit more sixes?"})}),a.jsxs(hr,{children:[a.jsx(mt,{value:ye.team1Id,children:ye.team1||ye.team1Id}),a.jsx(mt,{value:ye.team2Id,children:ye.team2||ye.team2Id}),a.jsx(mt,{value:"tie",children:"Tie (Equal Sixes)"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(tt,{htmlFor:"totalSixes",children:"Total Sixes in Match (15 points)"}),a.jsx(sn,{id:"totalSixes",type:"number",placeholder:"Enter the total number of sixes",value:q,onChange:ee=>G(ee.target.value)})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4 mt-6",children:[a.jsx(Se,{type:"button",variant:"outline",onClick:V,disabled:n||O||te,children:"Reset Form"}),X&&a.jsxs(a.Fragment,{children:[a.jsx(Se,{type:"button",variant:"secondary",onClick:ae,disabled:n||O||te||!h,children:O?a.jsxs(a.Fragment,{children:[a.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Evaluating..."]}):"Evaluate Predictions"}),a.jsx(Se,{type:"button",variant:"destructive",onClick:W,disabled:n||O||te||!h,children:te?a.jsxs(a.Fragment,{children:[a.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Resetting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(iF,{className:"mr-2 h-4 w-4"}),"Reset Match"]})})]}),a.jsx(Se,{type:"submit",disabled:n||O||te||!h,children:n?a.jsxs(a.Fragment,{children:[a.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(vA,{className:"mr-2 h-4 w-4"}),"Update Results"]})})]})]})]})})]})}const OY=t=>{const e=l=>{if(l==="tbd")return"TBD";const c=Na.find(u=>u.id===l);return c?c.name:"TBD"},n=e(t.team1Id),r=e(t.team2Id),s=t.date?$e.fromDate(new Date(t.date)):$e.now(),i=t.name?["Qualifier 1","Eliminator","Qualifier 2","Final"].includes(t.name):!1;return{id:t.id,team1:n,team2:r,venue:t.venue,date:s,status:t.status||"upcoming",...t.name&&{name:t.name},isPlayoff:i,playoffRound:i?t.name:null,playoffOrder:i?J0(t.name):null,...Cb()}},J0=t=>{switch(t){case"Qualifier 1":return 1;case"Eliminator":return 2;case"Qualifier 2":return 3;case"Final":return 4;default:return 0}},LY=async()=>{try{console.log("Deleting all existing matches...");const t=Ie(K,Te.MATCHES),e=await Re(Ge(t));if(e.empty)return console.log("No existing matches to delete"),!0;const n=mn(K);return e.forEach(r=>{n.delete(r.ref)}),await n.commit(),console.log(`Deleted ${e.size} existing matches`),!0}catch(t){return console.error("Error deleting matches:",t),!1}},VY=async()=>{try{console.log("Attempting to upload mock matches to Firestore..."),await LY()||console.warn("Failed to delete existing matches, but will continue with upload");const e=Ie(K,Te.MATCHES),n=[...zi].sort((i,o)=>{const l=i.name&&["Qualifier 1","Eliminator","Qualifier 2","Final"].includes(i.name),c=o.name&&["Qualifier 1","Eliminator","Qualifier 2","Final"].includes(o.name);return l&&c?J0(i.name)-J0(o.name):l?1:c?-1:new Date(i.date).getTime()-new Date(o.date).getTime()});let r=0,s=0;for(const i of n){const o=OY(i),l=be(e,o.id);try{await tr(l,o),console.log(`Uploaded match ${o.id}: ${o.team1} vs ${o.team2}${o.isPlayoff?` (${o.playoffRound})`:""}`),r++}catch(c){console.error(`Error uploading match ${o.id}:`,c),s++}}return console.log(`Upload complete: ${r} matches uploaded successfully, ${s} failures`),r>0}catch(t){return console.error("Error uploading mock matches to Firestore:",t),!1}},FY=()=>{const{currentUser:t}=kn(),{toast:e}=yn(),[n,r]=p.useState(!1),[s,i]=p.useState(0),[o,l]=p.useState(null),c=async()=>{if(!up(t==null?void 0:t.uid)){e({title:"Permission Denied",description:"You don't have permission to perform this action.",variant:"destructive"});return}try{r(!0),l("Deleting existing matches...");const u=console.log,h=console.error;console.log=(m,...g)=>{u(m,...g),typeof m=="string"&&l(m)},console.error=(m,...g)=>{h(m,...g),typeof m=="string"&&l(`Error: ${m}`)};const f=await VY();console.log=u,console.error=h,f?(i(zi.length),l(`Successfully uploaded ${zi.length} matches to Firestore, including playoff matches.`),e({title:"Success!",description:`Successfully uploaded ${zi.length} matches to Firestore.`,variant:"default"})):(l("Failed to upload matches. Check console for details."),e({title:"Error",description:"Failed to upload matches. Check console for details.",variant:"destructive"}))}catch(u){console.error("Error uploading mock matches:",u),l(`Error: ${u instanceof Error?u.message:"Unknown error"}`),e({title:"Error",description:"An unexpected error occurred. Check console for details.",variant:"destructive"})}finally{r(!1)}};return a.jsxs(ht,{className:"w-full",children:[a.jsxs(bt,{children:[a.jsx(Tt,{className:"text-xl",children:"Upload Mock Matches"}),a.jsx(zt,{children:"Upload all mock match data to Firestore. This will delete all existing matches first."})]}),a.jsx(gt,{children:a.jsxs("div",{className:"flex flex-col space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(uF,{className:"h-5 w-5 text-red-500"}),a.jsx("span",{className:"text-sm text-muted-foreground",children:"This will delete all existing matches before uploading new ones."})]}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Total matches to upload: ",a.jsx("span",{className:"font-medium",children:zi.length})]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Includes ",a.jsx("span",{className:"font-medium",children:"4 playoff matches"})," (Qualifier 1, Eliminator, Qualifier 2, Final)"]})]}),s>0&&!n&&a.jsxs(yr,{className:"bg-green-50 border-green-200",children:[a.jsx(fa,{className:"h-4 w-4 text-green-600"}),a.jsx(es,{children:"Upload Complete"}),a.jsxs(vr,{children:["Successfully uploaded ",s," matches to Firestore."]})]}),o&&a.jsxs("div",{className:"text-sm p-2 border rounded bg-gray-50",children:[a.jsx("p",{className:"font-medium mb-1",children:"Status:"}),a.jsx("p",{className:"text-muted-foreground",children:o})]})]})}),a.jsx(Va,{children:a.jsx(Se,{onClick:c,disabled:n,className:"w-full",children:n?a.jsxs(a.Fragment,{children:[a.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Uploading..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Xx,{className:"mr-2 h-4 w-4"}),"Upload All Mock Matches"]})})})]})};function mT(t){if(!t||t==="No email provided")return t;const e=t.split("@");if(e.length!==2)return t;const[n,r]=e;return n.length<=3?`${n.charAt(0)}****@${r}`:`${n.length>5?`${n.slice(0,2)}${"*".repeat(n.length-3)}${n.slice(-1)}`:`${n.slice(0,1)}${"*".repeat(n.length-2)}${n.slice(-1)}`}@${r}`}function $Y(){const[t,e]=p.useState([]),[n,r]=p.useState(!0),[s,i]=p.useState(""),[o,l]=p.useState(null),{toast:c}=yn();p.useEffect(()=>{u()},[]);const u=async()=>{try{r(!0);const m=Ie(K,Te.USERS),v=(await Re(m)).docs.map(y=>{const b=y.data();return{uid:y.id,...b,email:b.email||"No email provided"}});e(v)}catch(m){console.error("Error fetching users:",m),c({title:"Error",description:"Failed to fetch users. Please try again.",variant:"destructive"})}finally{r(!1)}},h=async m=>{if(m.uid)try{l(m.uid);const g=be(K,Te.USERS,m.uid),v=m.role==="admin"?"user":"admin";await Co(g,{role:v,updatedAt:new Date().toISOString()}),e(t.map(y=>y.uid===m.uid?{...y,role:v}:y)),c({title:"Success",description:`User ${mT(m.email)} is now a ${v}`})}catch(g){console.error("Error updating user role:",g),c({title:"Error",description:"Failed to update user role. Please try again.",variant:"destructive"})}finally{l(null)}},f=t.filter(m=>{var g,v;return((g=m.email)==null?void 0:g.toLowerCase().includes(s.toLowerCase()))||((v=m.displayName)==null?void 0:v.toLowerCase().includes(s.toLowerCase()))});return a.jsxs(ht,{children:[a.jsxs(bt,{children:[a.jsx(Tt,{children:"User Management"}),a.jsx(zt,{children:"Manage user roles and permissions. Admins can view predictions and update match results."})]}),a.jsxs(gt,{children:[a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"relative",children:[a.jsx(Lp,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),a.jsx(sn,{placeholder:"Search users by email or name...",value:s,onChange:m=>i(m.target.value),className:"pl-8"})]})}),a.jsx("div",{className:"rounded-md border",children:a.jsxs(bh,{children:[a.jsx(_h,{children:a.jsxs(kr,{children:[a.jsx(Wt,{children:"User"}),a.jsx(Wt,{children:"Email"}),a.jsx(Wt,{children:"Role"}),a.jsx(Wt,{children:"Joined"}),a.jsx(Wt,{className:"text-right",children:"Actions"})]})}),a.jsx(Eh,{children:n?a.jsx(kr,{children:a.jsx(Ct,{colSpan:5,className:"text-center py-8",children:a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx(Kt,{className:"h-6 w-6 animate-spin text-gray-500"}),a.jsx("span",{className:"ml-2",children:"Loading users..."})]})})}):f.length===0?a.jsx(kr,{children:a.jsx(Ct,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No users found"})}):f.map(m=>a.jsxs(kr,{children:[a.jsx(Ct,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(go,{className:"h-8 w-8",children:[a.jsx(yo,{src:m.photoURL||void 0}),a.jsx(vo,{children:NA(m.displayName||m.email||"")})]}),a.jsx("div",{children:a.jsx("div",{className:"font-medium",children:m.displayName})})]})}),a.jsxs(Ct,{className:"min-w-[250px]",children:[a.jsx("span",{className:"text-sm text-gray-600",children:mT(m.email)}),a.jsx("span",{className:"hidden",children:m.email})]}),a.jsx(Ct,{children:a.jsx("div",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${m.role==="admin"?"bg-blue-50 text-blue-700 border border-blue-200":"bg-gray-50 text-gray-700 border border-gray-200"}`,children:m.role||"user"})}),a.jsx(Ct,{children:m.createdAt?new Date(m.createdAt).toLocaleDateString():"N/A"}),a.jsx(Ct,{className:"text-right",children:a.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>h(m),disabled:o===m.uid,children:[o===m.uid?a.jsx(Kt,{className:"h-4 w-4 animate-spin"}):m.role==="admin"?a.jsx(aF,{className:"h-4 w-4"}):a.jsx(xA,{className:"h-4 w-4"}),a.jsx("span",{className:"ml-2",children:m.role==="admin"?"Remove Admin":"Make Admin"})]})})]},m.uid))})]})})]})]})}var a_="Switch",[UY,kX]=$r(a_),[BY,zY]=UY(a_),tO=p.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:h,...f}=t,[m,g]=p.useState(null),v=Ze(e,S=>g(S)),y=p.useRef(!1),b=m?h||!!m.closest("form"):!0,[_=!1,w]=ns({prop:s,defaultProp:i,onChange:u});return a.jsxs(BY,{scope:n,checked:_,disabled:l,children:[a.jsx(Ce.button,{type:"button",role:"switch","aria-checked":_,"aria-required":o,"data-state":sO(_),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:v,onClick:de(t.onClick,S=>{w(N=>!N),b&&(y.current=S.isPropagationStopped(),y.current||S.stopPropagation())})}),b&&a.jsx(qY,{control:m,bubbles:!y.current,name:r,value:c,checked:_,required:o,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});tO.displayName=a_;var nO="SwitchThumb",rO=p.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=zY(nO,n);return a.jsx(Ce.span,{"data-state":sO(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});rO.displayName=nO;var qY=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,i=p.useRef(null),o=Wb(n),l=ow(e);return p.useEffect(()=>{const c=i.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==n&&f){const m=new Event("click",{bubbles:r});f.call(c,n),c.dispatchEvent(m)}},[o,n,r]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function sO(t){return t?"checked":"unchecked"}var iO=tO,WY=rO;const l_=p.forwardRef(({className:t,...e},n)=>a.jsx(iO,{className:_e("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:a.jsx(WY,{className:_e("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));l_.displayName=iO.displayName;function HY(){const[t,e]=p.useState(!0),[n,r]=p.useState(!0),[s,i]=p.useState(!1),[o,l]=p.useState(null),{toast:c}=yn();p.useEffect(()=>{(async()=>{try{await Wj(),e(n7()),l(null)}catch(m){l("Failed to initialize logging control"),console.error("Error initializing logging control:",m)}finally{r(!1)}})()},[]);const u=async()=>{try{i(!0);const f=!t;if(await t7(f))e(f),c({title:"Logging settings updated",description:f?"Console logging is now enabled":"Console logging is now disabled"});else throw new Error("Failed to update logging settings")}catch{l("Failed to update logging settings"),c({title:"Error",description:"Failed to update logging settings",variant:"destructive"})}finally{i(!1)}},h=()=>{console.log("Test log message"),console.info("Test info message"),console.warn("Test warning message"),console.error("Test error message"),c({title:"Test Logging",description:"Check your browser console to see if logging is working"})};return a.jsxs(ht,{children:[a.jsxs(bt,{children:[a.jsxs(Tt,{className:"flex items-center gap-2",children:[a.jsx(cF,{className:"h-5 w-5"}),"Console Logging Control"]}),a.jsx(zt,{children:"Control whether console logs are displayed throughout the application"})]}),a.jsxs(gt,{children:[o&&a.jsxs(yr,{variant:"destructive",className:"mb-4",children:[a.jsx(fa,{className:"h-4 w-4"}),a.jsx(es,{children:"Error"}),a.jsx(vr,{children:o})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(l_,{id:"logging-enabled",checked:t,onCheckedChange:u,disabled:n||s}),a.jsx(tt,{htmlFor:"logging-enabled",className:"font-medium",children:t?"Console Logging Enabled":"Console Logging Disabled"}),s&&a.jsx("div",{className:"ml-2 h-4 w-4 animate-spin rounded-full border-2 border-gray-300 border-t-blue-600"})]}),a.jsxs("div",{className:"mt-6",children:[a.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"When disabled, no console.log, console.info, or console.warn messages will be shown in the browser console. Error logs will still be displayed for critical issues."}),a.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[a.jsx("div",{className:"rounded bg-gray-100 px-2 py-1 text-xs",children:a.jsx("code",{children:t?'console.log("Message")':'console.log("Message") // Suppressed'})}),a.jsx(Se,{variant:"outline",size:"sm",onClick:h,disabled:n,children:"Test Logging"})]})]})]}),a.jsx(Va,{className:"border-t bg-gray-50 px-6 py-3",children:a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(ha,{className:"mr-1 h-3 w-3 text-green-500"}),"Changes are applied immediately across all connected clients"]})})]})}function KY(){const[t,e]=p.useState(!1),[n,r]=p.useState(null),[s,i]=p.useState(null),{toast:o}=yn(),l=async()=>{if(window.confirm(`Are you sure you want to reset the global leaderboard?

This will delete ALL user entries from the global leaderboard.
This action cannot be undone.`)){e(!0),r(null),i(null);try{const u=Ie(K,Te.GLOBAL_LEADERBOARD),h=await Re(u);if(h.empty){i("No entries found in the global leaderboard."),o({title:"No Entries Found",description:"The global leaderboard is already empty."});return}const f=h.size,m=mn(K);let g=0,v=0;for(const y of h.docs)m.delete(y.ref),g++,g===500&&(await m.commit(),v++,g=0);g>0&&(await m.commit(),v++),i(`Successfully reset the global leaderboard. Deleted ${f} entries.`),o({title:"Global Leaderboard Reset",description:`Successfully deleted ${f} entries from the global leaderboard.`})}catch(u){console.error("Error resetting global leaderboard:",u),r("Failed to reset the global leaderboard. Check console for details."),o({title:"Error",description:"Failed to reset the global leaderboard.",variant:"destructive"})}finally{e(!1)}}};return a.jsxs(ht,{children:[a.jsxs(bt,{children:[a.jsxs(Tt,{className:"flex items-center gap-2",children:[a.jsx(rs,{className:"h-5 w-5"}),"Global Leaderboard Reset"]}),a.jsx(zt,{children:"Reset the global leaderboard by removing all user entries"})]}),a.jsxs(gt,{children:[n&&a.jsxs(yr,{variant:"destructive",className:"mb-4",children:[a.jsx(fa,{className:"h-4 w-4"}),a.jsx(es,{children:"Error"}),a.jsx(vr,{children:n})]}),s&&a.jsxs(yr,{variant:"default",className:"mb-4 bg-green-50",children:[a.jsx(ha,{className:"h-4 w-4 text-green-500"}),a.jsx(es,{children:"Success"}),a.jsx(vr,{children:s})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Use this utility to reset the global leaderboard. This will remove all user entries from the global leaderboard, effectively resetting all user scores to zero."}),a.jsxs("div",{className:"bg-amber-50 p-3 rounded-md border border-amber-200",children:[a.jsx("p",{className:"text-amber-700 text-sm font-medium",children:"Warning"}),a.jsx("p",{className:"text-amber-600 text-xs mt-1",children:"This action will permanently delete all global leaderboard data and cannot be undone. User prediction data will remain intact, but all points in the global leaderboard will be lost."})]})]})]}),a.jsx(Va,{className:"border-t px-6 py-4 flex justify-end",children:a.jsx(Se,{variant:"destructive",onClick:l,disabled:t,children:t?a.jsxs(a.Fragment,{children:[a.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Resetting Leaderboard..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Us,{className:"mr-2 h-4 w-4"}),"Reset Global Leaderboard"]})})})]})}function GY(){const{toast:t}=yn(),{currentUser:e}=kn(),[n,r]=p.useState([]),[s,i]=p.useState(!0),[o,l]=p.useState({});p.useEffect(()=>{c()},[]);const c=async()=>{if(e)try{if(i(!0),!await vc(e.uid)){t({title:"Access Denied",description:"You don't have permission to manage predictions.",variant:"destructive"});return}const m=Ie(K,"matches"),g=Ge(m,nt("status","==","upcoming"),Es("date")),v=await Re(g),y=[];v.forEach(b=>{const _={id:b.id,...b.data()};y.push(_)}),r(y)}catch(f){console.error("Error fetching matches:",f),t({title:"Error",description:"Failed to load matches. Please try again.",variant:"destructive"})}finally{i(!1)}},u=f=>{let m;typeof f=="string"?m=new Date(f):m=f.toDate();const g=new Date,y=(m.getTime()-g.getTime())/(1e3*60*60);return y>0&&y<=24},h=async(f,m)=>{if(e)try{if(l(y=>({...y,[f]:!0})),!await vc(e.uid)){t({title:"Access Denied",description:"You don't have permission to manage predictions.",variant:"destructive"});return}const v=be(K,"matches",f);await Co(v,{isPredictionEnabledByAdmin:!m,updatedAt:hn()}),r(y=>y.map(b=>b.id===f?{...b,isPredictionEnabledByAdmin:!m}:b)),t({title:"Success",description:`Predictions ${m?"disabled":"enabled"} for this match.`})}catch(g){console.error("Error updating match prediction access:",g),t({title:"Error",description:"Failed to update prediction settings. Please try again.",variant:"destructive"})}finally{l(g=>({...g,[f]:!1}))}};return s?a.jsxs(ht,{children:[a.jsxs(bt,{children:[a.jsx(Tt,{children:"Prediction Management"}),a.jsx(zt,{children:"Control which matches are open for predictions"})]}),a.jsx(gt,{className:"flex justify-center py-8",children:a.jsx(Kt,{className:"h-8 w-8 animate-spin text-primary"})})]}):a.jsxs(ht,{children:[a.jsxs(bt,{children:[a.jsx(Tt,{children:"Prediction Management"}),a.jsx(zt,{children:"Control which matches are open for predictions. By default, predictions are only allowed within 24 hours of a match."})]}),a.jsxs(gt,{children:[n.length===0?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No upcoming matches found. Matches will appear here when scheduled."}):a.jsxs(bh,{children:[a.jsx(_h,{children:a.jsxs(kr,{children:[a.jsx(Wt,{children:"Match"}),a.jsx(Wt,{children:"Date & Time"}),a.jsx(Wt,{children:"Prediction Status"}),a.jsx(Wt,{children:"Admin Override"})]})}),a.jsx(Eh,{children:n.map(f=>{const m=typeof f.date=="string"?new Date(f.date):f.date.toDate(),g=u(f.date),v=f.isPredictionEnabledByAdmin===!0||g;return a.jsxs(kr,{children:[a.jsxs(Ct,{className:"font-medium",children:[f.team1," vs ",f.team2]}),a.jsx(Ct,{children:Tm(m)}),a.jsxs(Ct,{children:[a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v?"bg-green-100 text-green-800":"bg-amber-100 text-amber-800"}`,children:v?"Predictions Open":"Predictions Closed"}),g&&a.jsx("span",{className:"ml-2 text-xs text-blue-600",children:"(Within 24h Window)"})]}),a.jsx(Ct,{children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(l_,{id:`admin-toggle-${f.id}`,checked:f.isPredictionEnabledByAdmin===!0,onCheckedChange:()=>h(f.id,f.isPredictionEnabledByAdmin===!0),disabled:o[f.id]}),a.jsx(tt,{htmlFor:`admin-toggle-${f.id}`,className:"cursor-pointer",children:f.isPredictionEnabledByAdmin===!0?"Enabled by Admin":"Not Enabled"}),o[f.id]&&a.jsx(Kt,{className:"h-4 w-4 animate-spin ml-2"})]})})]},f.id)})})]}),a.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-md flex items-start space-x-2",children:[a.jsx(yA,{className:"h-5 w-5 text-blue-500 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-700",children:[a.jsx("p",{children:a.jsx("strong",{children:"How this works:"})}),a.jsx("p",{children:"• By default, predictions are only allowed within 24 hours of match start."}),a.jsx("p",{children:"• Toggle the switch to enable predictions for a match outside the 24-hour window."}),a.jsx("p",{children:"• This override persists until you disable it or the match starts."})]})]})]})]})}function QY(){const[t,e]=p.useState([]),[n,r]=p.useState(!0),[s,i]=p.useState(null),[o,l]=p.useState({text:"",type:"custom",points:10,negativePoints:0,isActive:!0}),{toast:c}=yn(),u=[{value:"winner",label:"Match Winner"},{value:"topBatsman",label:"Top Batsman"},{value:"topBowler",label:"Top Bowler"},{value:"highestTotal",label:"Highest Total"},{value:"moreSixes",label:"More Sixes"},{value:"custom",label:"Custom Question"}];p.useEffect(()=>{h()},[]);const h=async()=>{r(!0);try{const v=Ie(K,"questions"),y=Ge(v,Es("type")),b=await Re(y),_=[];b.forEach(w=>{_.push({id:w.id,...w.data()})}),e(_)}catch(v){console.error("Error fetching questions:",v),c({title:"Error",description:"Failed to load questions",variant:"destructive"})}finally{r(!1)}},f=async()=>{try{if(!o.text||!o.type){c({title:"Validation Error",description:"Question text and type are required",variant:"destructive"});return}const v=Ie(K,"questions"),y=be(v),b=o.type==="custom"?`custom-${Date.now()}`:`${o.type}-${Date.now()}`,_={text:o.text,type:o.type,points:o.points||10,negativePoints:Math.abs(o.negativePoints||0),isActive:o.isActive!==!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await tr(be(K,"questions",b),_),c({title:"Success",description:"Question created successfully"}),l({text:"",type:"custom",points:10,negativePoints:0,isActive:!0}),h()}catch(v){console.error("Error creating question:",v),c({title:"Error",description:"Failed to create question",variant:"destructive"})}},m=async()=>{if(!(!s||!s.id))try{const v=be(K,"questions",s.id);await Co(v,{text:s.text,points:s.points,negativePoints:Math.abs(s.negativePoints||0),isActive:s.isActive,updatedAt:new Date().toISOString()}),c({title:"Success",description:"Question updated successfully"}),i(null),h()}catch(v){console.error("Error updating question:",v),c({title:"Error",description:"Failed to update question",variant:"destructive"})}},g=async v=>{if(confirm("Are you sure you want to delete this question? This action cannot be undone."))try{await Nb(be(K,"questions",v)),c({title:"Success",description:"Question deleted successfully"}),h()}catch(y){console.error("Error deleting question:",y),c({title:"Error",description:"Failed to delete question",variant:"destructive"})}};return a.jsxs(ht,{children:[a.jsx(bt,{children:a.jsx(Tt,{children:"Question Management"})}),a.jsx(gt,{children:a.jsxs(Ur,{defaultValue:"view",children:[a.jsxs(Er,{className:"mb-4",children:[a.jsx(rt,{value:"view",children:"View Questions"}),a.jsx(rt,{value:"add",children:"Add Question"})]}),a.jsx(pt,{value:"view",children:n?a.jsxs("div",{className:"flex justify-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"}),a.jsx("span",{className:"ml-3",children:"Loading questions..."})]}):t.length===0?a.jsx("div",{className:"text-center py-8 text-gray-500",children:"No questions found. Add some questions to get started."}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs(bh,{children:[a.jsx(_h,{children:a.jsxs(kr,{children:[a.jsx(Wt,{children:"Type"}),a.jsx(Wt,{children:"Question Text"}),a.jsx(Wt,{children:"Points"}),a.jsx(Wt,{children:"Points Deduction"}),a.jsx(Wt,{children:"Status"}),a.jsx(Wt,{children:"Actions"})]})}),a.jsx(Eh,{children:t.map(v=>a.jsxs(kr,{children:[a.jsx(Ct,{className:"font-medium",children:(s==null?void 0:s.id)===v.id?a.jsx("div",{className:"text-sm font-semibold",children:v.type}):a.jsx("div",{className:"text-sm font-semibold",children:v.type})}),a.jsx(Ct,{children:(s==null?void 0:s.id)===v.id?a.jsx(sn,{value:s.text,onChange:y=>i({...s,text:y.target.value})}):v.text}),a.jsx(Ct,{children:(s==null?void 0:s.id)===v.id?a.jsx(sn,{type:"number",value:s.points,onChange:y=>i({...s,points:parseInt(y.target.value)}),className:"w-20"}):v.points}),a.jsx(Ct,{children:(s==null?void 0:s.id)===v.id?a.jsx(sn,{type:"number",value:-(s.negativePoints??0),onChange:y=>i({...s,negativePoints:Math.abs(parseInt(y.target.value))}),className:"w-20",min:"-100",max:"0"}):-(v.negativePoints??0)}),a.jsx(Ct,{children:(s==null?void 0:s.id)===v.id?a.jsxs(Cr,{value:s.isActive?"active":"inactive",onValueChange:y=>i({...s,isActive:y==="active"}),children:[a.jsx(dr,{className:"w-28",children:a.jsx(Ar,{placeholder:"Status"})}),a.jsxs(hr,{children:[a.jsx(mt,{value:"active",children:"Active"}),a.jsx(mt,{value:"inactive",children:"Inactive"})]})]}):a.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded ${v.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:v.isActive?"Active":"Inactive"})}),a.jsx(Ct,{children:(s==null?void 0:s.id)===v.id?a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(Se,{size:"sm",onClick:m,className:"p-1 h-8 w-8",children:a.jsx(vA,{className:"h-4 w-4"})}),a.jsx(Se,{size:"sm",variant:"outline",onClick:()=>i(null),className:"p-1 h-8 w-8",children:a.jsx(Jx,{className:"h-4 w-4"})})]}):a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(Se,{size:"sm",variant:"outline",onClick:()=>i(v),className:"p-1 h-8 w-8",children:a.jsx(lF,{className:"h-4 w-4"})}),a.jsx(Se,{size:"sm",variant:"destructive",onClick:()=>g(v.id),className:"p-1 h-8 w-8",children:a.jsx(dF,{className:"h-4 w-4"})})]})})]},v.id))})]})})}),a.jsx(pt,{value:"add",children:a.jsxs("div",{className:"grid gap-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Question Type"}),a.jsxs(Cr,{value:o.type,onValueChange:v=>l({...o,type:v}),children:[a.jsx(dr,{children:a.jsx(Ar,{placeholder:"Select question type"})}),a.jsx(hr,{children:u.map(v=>a.jsx(mt,{value:v.value,children:v.label},v.value))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Points for Correct"}),a.jsx(sn,{type:"number",value:o.points,onChange:v=>l({...o,points:parseInt(v.target.value)})})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Points Deducted if Wrong",a.jsx("span",{className:"text-gray-500 ml-1 text-xs",children:"(enter a negative value, e.g. -5)"})]}),a.jsx(sn,{type:"number",value:-(o.negativePoints||0),onChange:v=>l({...o,negativePoints:Math.abs(parseInt(v.target.value))}),min:"-100",max:"0"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Question Text"}),a.jsx(sn,{value:o.text,onChange:v=>l({...o,text:v.target.value}),placeholder:"Enter question text"})]}),a.jsx("div",{className:"flex items-center",children:a.jsxs("label",{className:"flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"form-checkbox h-4 w-4 text-blue-600",checked:o.isActive,onChange:v=>l({...o,isActive:v.target.checked})}),a.jsx("span",{className:"ml-2 text-sm font-medium",children:"Active (available for predictions)"})]})}),a.jsxs(Se,{onClick:f,className:"w-full md:w-auto",disabled:!o.text||!o.type,children:[a.jsx(sF,{className:"mr-2 h-4 w-4"}),"Create Question"]})]})})]})})]})}const YY=()=>{const[t,e]=p.useState("teams"),{currentUser:n}=kn(),[r,s]=p.useState(null);p.useState(!1),p.useState(null);const i=nr();return p.useEffect(()=>{(async()=>{try{if(!n){s(!1),i("/");return}const l=await vc(n.uid);s(l),l||i("/")}catch(l){console.error("Error checking admin status:",l),s(!1),i("/")}})()},[n,i]),p.useEffect(()=>{const o=setTimeout(()=>{r===null&&(console.log("Admin check timed out, granting access for development"),s(!0))},2e3);return()=>clearTimeout(o)},[r]),r===null?a.jsx(Jt,{children:a.jsxs("div",{className:"flex justify-center items-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"}),a.jsx("span",{className:"ml-3",children:"Verifying admin access..."})]})}):r?a.jsx(LM,{requireAdmin:!0,children:a.jsx(Jt,{children:a.jsxs("div",{className:"container mx-auto py-8 px-4",children:[a.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Admin Dashboard"}),a.jsxs("div",{children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:a.jsxs(ht,{children:[a.jsxs(bt,{children:[a.jsx(Tt,{children:"Database Utilities"}),a.jsx(zt,{children:"Manage the application database"})]}),a.jsx(gt,{children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(Se,{asChild:!0,variant:"outline",className:"w-full justify-start",children:a.jsxs(it,{to:"/admin/initialize-database",children:[a.jsx(Gv,{className:"mr-2 h-4 w-4"}),"Initialize Database"]})}),a.jsx(Se,{asChild:!0,variant:"outline",className:"w-full justify-start",children:a.jsxs(it,{to:"/admin/refresh-database",children:[a.jsx(Gv,{className:"mr-2 h-4 w-4"}),"Refresh Question Database"]})})]})})]})}),a.jsxs(Ur,{defaultValue:"teams",value:t,onValueChange:e,children:[a.jsxs(Er,{className:"mb-6",children:[a.jsx(rt,{value:"teams",children:"Teams"}),a.jsx(rt,{value:"matches",children:"Matches"}),a.jsx(rt,{value:"predictions",children:"Predictions"}),a.jsx(rt,{value:"users",children:"Users"}),a.jsx(rt,{value:"system",children:"System"})]}),a.jsxs(pt,{value:"teams",className:"space-y-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Team Management"}),a.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[a.jsx(xY,{}),a.jsx(kY,{})]})]}),a.jsxs(pt,{value:"matches",className:"space-y-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Match Management"}),a.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx(FY,{})}),a.jsx("div",{className:"md:col-span-2",children:a.jsx(DY,{})}),a.jsx("div",{className:"md:col-span-2",children:a.jsx(MY,{})})]})]}),a.jsxs(pt,{value:"predictions",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Prediction Management"}),a.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[a.jsx(QY,{}),a.jsx(GY,{})]})]}),a.jsxs(pt,{value:"users",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"User Management"}),a.jsx($Y,{})]}),a.jsxs(pt,{value:"system",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"System Settings"}),a.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[a.jsx("div",{children:a.jsx(HY,{})}),a.jsx("div",{children:a.jsx(KY,{})})]})]})]})]})]})})}):null},pT=({team:t,players:e})=>{const r=`/images/teams/${t.toLowerCase().split(" ")[0].substring(0,2)}.png`;return a.jsxs(ht,{className:"h-full",children:[a.jsxs(bt,{className:"flex flex-row items-center gap-4 pb-2",children:[a.jsxs(go,{className:"h-16 w-16",children:[a.jsx(yo,{src:r,alt:t}),a.jsx(vo,{children:t.substring(0,2).toUpperCase()})]}),a.jsxs("div",{children:[a.jsx(Tt,{children:t}),a.jsxs(zt,{children:[e.length," players"]})]})]}),a.jsx(gt,{children:a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"text-sm font-medium",children:"Key Players"}),a.jsx("ul",{className:"space-y-1",children:e.slice(0,5).map((s,i)=>a.jsxs("li",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:s.name}),a.jsxs("span",{className:"text-gray-500 ml-2",children:["(",s.role,")"]})]},i))})]})})]})},XY=()=>{const{squads:t,loading:e,error:n}=WG(),[r,s]=p.useState("all"),i={};t.length>0&&t.forEach(l=>{const c=l.team.charAt(0).toUpperCase();i[c]||(i[c]=[]),i[c].push(l)});const o=Object.keys(i).sort();return a.jsx(Jt,{children:a.jsxs("div",{className:"container mx-auto py-8 px-4",children:[a.jsx("h1",{className:"text-3xl font-bold mb-6",children:"IPL Teams"}),n&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-6",children:["Error loading teams: ",n.message]}),a.jsxs(Ur,{defaultValue:"all",value:r,onValueChange:s,children:[a.jsxs(Er,{className:"mb-6 flex flex-wrap",children:[a.jsx(rt,{value:"all",children:"All Teams"}),o.map(l=>a.jsx(rt,{value:l,children:l},l))]}),a.jsx(pt,{value:"all",children:e?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(l=>a.jsxs(ht,{className:"h-[250px]",children:[a.jsxs(bt,{className:"flex flex-row items-center gap-4 pb-2",children:[a.jsx(Ke,{className:"h-16 w-16 rounded-full"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ke,{className:"h-5 w-32"}),a.jsx(Ke,{className:"h-4 w-24"})]})]}),a.jsxs(gt,{children:[a.jsx(Ke,{className:"h-4 w-28 mb-4"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ke,{className:"h-3 w-full"}),a.jsx(Ke,{className:"h-3 w-full"}),a.jsx(Ke,{className:"h-3 w-full"}),a.jsx(Ke,{className:"h-3 w-full"}),a.jsx(Ke,{className:"h-3 w-full"})]})]})]},l))}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(l=>a.jsx(pT,{team:l.team,players:l.squad},l.id))})}),o.map(l=>a.jsx(pt,{value:l,children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i[l].map(c=>a.jsx(pT,{team:c.team,players:c.squad},c.id))})},l))]})]})})},Yy={id:"example-match",team1Id:"1",team2Id:"2",venue:"Wankhede Stadium, Mumbai",date:new Date(new Date().getTime()+24*60*60*1e3).toISOString(),status:"upcoming"},gu={id:"1",name:"Mumbai Indians",shortName:"MI",primaryColor:"#004BA0",secondaryColor:"#D1AB3E",logo:"/images/teams/mi.png"},yu={id:"2",name:"Chennai Super Kings",shortName:"CSK",primaryColor:"#FFFF3C",secondaryColor:"#0081E9",logo:"/images/teams/csk.png"},JY=[{id:"p1-mi",name:"Rohit Sharma",teamId:"1",role:"Batsman",image:""},{id:"p2-mi",name:"Jasprit Bumrah",teamId:"1",role:"Bowler",image:""},{id:"p3-mi",name:"Hardik Pandya",teamId:"1",role:"All-rounder",image:""},{id:"p4-mi",name:"Ishan Kishan",teamId:"1",role:"Wicket-keeper",image:""},{id:"p1-csk",name:"MS Dhoni",teamId:"2",role:"Wicket-keeper",image:""},{id:"p2-csk",name:"Ravindra Jadeja",teamId:"2",role:"All-rounder",image:""},{id:"p3-csk",name:"Ruturaj Gaikwad",teamId:"2",role:"Batsman",image:""},{id:"p4-csk",name:"Deepak Chahar",teamId:"2",role:"Bowler",image:""}],ZY=()=>{const t=nr();return p.useState(!1),a.jsx(Jt,{children:a.jsxs("div",{className:"container mx-auto py-8 px-4",children:[a.jsxs(Se,{variant:"ghost",className:"mb-6",onClick:()=>t(-1),children:[a.jsx(Al,{className:"mr-2 h-4 w-4"}),"Back to Matches"]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:[a.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between",children:[a.jsxs("div",{className:"flex flex-col items-center md:items-start mb-4 md:mb-0",children:[a.jsxs("h1",{className:"text-2xl font-bold mb-1",children:[gu.name," vs ",yu.name]}),a.jsx("p",{className:"text-gray-600",children:Yy.venue}),a.jsx("p",{className:"text-gray-600",children:Tm(Yy.date)})]}),a.jsx("div",{children:a.jsx(De,{variant:"outline",className:"text-gray-500",children:"Upcoming"})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center mt-8 space-y-6 md:space-y-0",children:[a.jsxs("div",{className:"flex flex-col items-center text-center md:w-1/3",children:[a.jsx("img",{src:gu.logo,alt:gu.name,className:"h-24 w-24 mb-4 object-contain"}),a.jsx("h2",{className:"text-xl font-bold",style:{color:gu.primaryColor},children:gu.name})]}),a.jsx("div",{className:"flex flex-col items-center justify-center md:w-1/3",children:a.jsx("div",{className:"text-3xl font-bold mb-2",children:"VS"})}),a.jsxs("div",{className:"flex flex-col items-center text-center md:w-1/3",children:[a.jsx("img",{src:yu.logo,alt:yu.name,className:"h-24 w-24 mb-4 object-contain"}),a.jsx("h2",{className:"text-xl font-bold",style:{color:yu.primaryColor},children:yu.name})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:[a.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Match Predictions"}),a.jsx(kM,{match:Yy,players:JY})]})]})})},Pr={TEAMS:"teams",PLAYERS:"players",MATCHES:"matches",USERS:"users",QUESTIONS:"questions",PREDICTION_GAMES:"predictionGames",PREDICTION_ANSWERS:"predictionAnswers"},eX=async()=>{try{console.log("Starting Firestore initialization...");const t=await pu(Pr.TEAMS),e=await pu(Pr.PLAYERS),n=await pu(Pr.MATCHES),r=await pu(Pr.QUESTIONS),s=await pu(Pr.PREDICTION_GAMES);return t?console.log("Teams collection already exists, skipping initialization"):await tX(),e?console.log("Players collection already exists, skipping initialization"):await nX(),n?console.log("Matches collection already exists, skipping initialization"):await rX(),r?console.log("Questions collection already exists, skipping initialization"):await sX(),s?console.log("Prediction Games collection already exists, skipping initialization"):await iX(),console.log("Firestore initialization completed successfully!"),!0}catch(t){return console.error("Error initializing Firestore:",t),!1}},tX=async()=>{console.log("Initializing Teams collection...");const t=[{id:"mi",name:"Mumbai Indians",shortName:"MI",primaryColor:"#004BA0",secondaryColor:"#D1AB3E",logo:"/images/teams/mi.png"},{id:"csk",name:"Chennai Super Kings",shortName:"CSK",primaryColor:"#FFFF3C",secondaryColor:"#0081E9",logo:"/images/teams/csk.png"},{id:"rcb",name:"Royal Challengers Bengaluru",shortName:"RCB",primaryColor:"#EC1C24",secondaryColor:"#000000",logo:"/images/teams/rcb.png"},{id:"kkr",name:"Kolkata Knight Riders",shortName:"KKR",primaryColor:"#3A225D",secondaryColor:"#B3A123",logo:"/images/teams/kkr.png"},{id:"dc",name:"Delhi Capitals",shortName:"DC",primaryColor:"#0078BC",secondaryColor:"#EF1C25",logo:"/images/teams/dc.png"},{id:"pbks",name:"Punjab Kings",shortName:"PBKS",primaryColor:"#ED1B24",secondaryColor:"#A7A9AC",logo:"/images/teams/pbks.png"},{id:"rr",name:"Rajasthan Royals",shortName:"RR",primaryColor:"#254AA5",secondaryColor:"#FF69B4",logo:"/images/teams/rr.png"},{id:"srh",name:"Sunrisers Hyderabad",shortName:"SRH",primaryColor:"#FF822A",secondaryColor:"#000000",logo:"/images/teams/srh.png"},{id:"gt",name:"Gujarat Titans",shortName:"GT",primaryColor:"#1C1C1C",secondaryColor:"#0B4973",logo:"/images/teams/gt.png"},{id:"lsg",name:"Lucknow Super Giants",shortName:"LSG",primaryColor:"#A72056",secondaryColor:"#FFCC00",logo:"/images/teams/lsg.png"}],e=mn(K);t.forEach(n=>{const r=be(K,Pr.TEAMS,n.id);e.set(r,{...n,createdAt:$e.now(),updatedAt:$e.now()})}),await e.commit(),console.log(`Added ${t.length} teams to Firestore`)},nX=async()=>{console.log("Initializing Players collection...");const t={mi:[{name:"Rohit Sharma",role:"Batsman",age:"38"},{name:"Jasprit Bumrah",role:"Bowler",age:"31"},{name:"Hardik Pandya",role:"All-rounder",age:"31"},{name:"Ishan Kishan",role:"Wicket-keeper",age:"27"},{name:"Suryakumar Yadav",role:"Batsman",age:"34"}],csk:[{name:"MS Dhoni",role:"Wicket-keeper",age:"43"},{name:"Ravindra Jadeja",role:"All-rounder",age:"36"},{name:"Ruturaj Gaikwad",role:"Batsman",age:"28"},{name:"Deepak Chahar",role:"Bowler",age:"32"},{name:"Moeen Ali",role:"All-rounder",age:"37"}],rcb:[{name:"Virat Kohli",role:"Batsman",age:"36"},{name:"Glenn Maxwell",role:"All-rounder",age:"36"},{name:"Mohammed Siraj",role:"Bowler",age:"31"},{name:"Faf du Plessis",role:"Batsman",age:"40"},{name:"Dinesh Karthik",role:"Wicket-keeper",age:"40"}],kkr:[{name:"Shreyas Iyer",role:"Batsman",age:"30"},{name:"Andre Russell",role:"All-rounder",age:"36"},{name:"Sunil Narine",role:"All-rounder",age:"36"},{name:"Venkatesh Iyer",role:"All-rounder",age:"30"},{name:"Varun Chakravarthy",role:"Bowler",age:"33"}],dc:[{name:"Rishabh Pant",role:"Wicket-keeper",age:"28"},{name:"Axar Patel",role:"All-rounder",age:"31"},{name:"Kuldeep Yadav",role:"Bowler",age:"30"},{name:"David Warner",role:"Batsman",age:"38"},{name:"Anrich Nortje",role:"Bowler",age:"31"}],pbks:[{name:"Shikhar Dhawan",role:"Batsman",age:"39"},{name:"Liam Livingstone",role:"All-rounder",age:"32"},{name:"Arshdeep Singh",role:"Bowler",age:"26"},{name:"Jonny Bairstow",role:"Wicket-keeper",age:"35"},{name:"Kagiso Rabada",role:"Bowler",age:"30"}],rr:[{name:"Sanju Samson",role:"Wicket-keeper",age:"30"},{name:"Jos Buttler",role:"Batsman",age:"34"},{name:"Yuzvendra Chahal",role:"Bowler",age:"34"},{name:"Shimron Hetmyer",role:"Batsman",age:"28"},{name:"Trent Boult",role:"Bowler",age:"35"}],srh:[{name:"Pat Cummins",role:"All-rounder",age:"32"},{name:"Heinrich Klaasen",role:"Wicket-keeper",age:"33"},{name:"Abhishek Sharma",role:"All-rounder",age:"24"},{name:"Bhuvneshwar Kumar",role:"Bowler",age:"34"},{name:"Travis Head",role:"Batsman",age:"31"}],gt:[{name:"Hardik Pandya",role:"All-rounder",age:"31"},{name:"Rashid Khan",role:"Bowler",age:"27"},{name:"Shubman Gill",role:"Batsman",age:"26"},{name:"Mohammed Shami",role:"Bowler",age:"35"},{name:"Wriddhiman Saha",role:"Wicket-keeper",age:"40"}],lsg:[{name:"KL Rahul",role:"Wicket-keeper",age:"33"},{name:"Marcus Stoinis",role:"All-rounder",age:"36"},{name:"Nicholas Pooran",role:"Batsman",age:"29"},{name:"Ravi Bishnoi",role:"Bowler",age:"24"},{name:"Avesh Khan",role:"Bowler",age:"28"}]},e=mn(K);let n=0;Object.entries(t).forEach(([r,s])=>{s.forEach((i,o)=>{const l=`${r}-player-${o+1}`,c=be(K,Pr.PLAYERS,l);e.set(c,{id:l,name:i.name,teamId:r,role:i.role,age:i.age,image:"",createdAt:$e.now(),updatedAt:$e.now()}),n++})}),await e.commit(),console.log(`Added ${n} players to Firestore`)},rX=async()=>{console.log("Initializing Matches collection...");const t=[{id:"match-1",team1Id:"mi",team2Id:"csk",venue:"Wankhede Stadium, Mumbai",date:new Date("2025-03-22T19:30:00+05:30"),status:"upcoming"},{id:"match-2",team1Id:"rcb",team2Id:"pbks",venue:"M. Chinnaswamy Stadium, Bengaluru",date:new Date("2025-03-23T15:30:00+05:30"),status:"upcoming"},{id:"match-3",team1Id:"kkr",team2Id:"srh",venue:"Eden Gardens, Kolkata",date:new Date("2025-03-23T19:30:00+05:30"),status:"upcoming"},{id:"match-4",team1Id:"dc",team2Id:"rr",venue:"Arun Jaitley Stadium, Delhi",date:new Date("2025-03-24T19:30:00+05:30"),status:"upcoming"},{id:"match-5",team1Id:"gt",team2Id:"lsg",venue:"Narendra Modi Stadium, Ahmedabad",date:new Date("2025-03-25T19:30:00+05:30"),status:"upcoming"},{id:"match-6",team1Id:"csk",team2Id:"rcb",venue:"M. A. Chidambaram Stadium, Chennai",date:new Date("2025-03-26T19:30:00+05:30"),status:"upcoming"},{id:"match-7",team1Id:"pbks",team2Id:"mi",venue:"IS Bindra Stadium, Mohali",date:new Date("2025-03-27T19:30:00+05:30"),status:"upcoming"},{id:"match-8",team1Id:"srh",team2Id:"dc",venue:"Rajiv Gandhi International Stadium, Hyderabad",date:new Date("2025-03-28T19:30:00+05:30"),status:"upcoming"},{id:"match-9",team1Id:"rr",team2Id:"kkr",venue:"Sawai Mansingh Stadium, Jaipur",date:new Date("2025-03-29T15:30:00+05:30"),status:"upcoming"},{id:"match-10",team1Id:"lsg",team2Id:"csk",venue:"Ekana Cricket Stadium, Lucknow",date:new Date("2025-03-29T19:30:00+05:30"),status:"upcoming"}],e=mn(K);t.forEach(n=>{const r=be(K,Pr.MATCHES,n.id);e.set(r,{...n,date:$e.fromDate(n.date),createdAt:$e.now(),updatedAt:$e.now(),isPlayoff:!1})}),await e.commit(),console.log(`Added ${t.length} matches to Firestore`)},sX=async()=>{console.log("Initializing questions collection...");try{const t=Ie(K,"questions");if(!(await Re(t)).empty)return console.log("Questions collection already exists with data. Skipping initialization."),!0;const n=[{id:"q1",text:"Which team will win the match?",type:"winner",points:10,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"q2",text:"Who will be the top batsman of the match?",type:"topBatsman",points:15,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"q3",text:"Who will be the top bowler of the match?",type:"topBowler",points:15,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"q4",text:"Will there be a century in the match?",type:"custom",points:5,options:[{id:"yes",value:"yes",label:"Yes"},{id:"no",value:"no",label:"No"}],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"q5",text:"Will there be a hat-trick in the match?",type:"custom",points:5,options:[{id:"yes",value:"yes",label:"Yes"},{id:"no",value:"no",label:"No"}],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}];for(const r of n){const s=be(K,"questions",r.id);await tr(s,r)}return console.log(`Added ${n.length} questions to the questions collection.`),!0}catch(t){return console.error("Error initializing questions collection:",t),!1}},iX=async()=>{console.log("Initializing prediction games collection...");try{const t=Ie(K,Pr.PREDICTION_GAMES);if(!(await Re(t)).empty)return console.log("PredictionGames collection already exists with data. Skipping initialization."),!0;const n=Ie(K,Pr.MATCHES),r=await Re(n);if(r.empty)return console.log("No matches found. Skipping prediction games initialization."),!1;const s=Ie(K,Pr.QUESTIONS),i=await Re(s);if(i.empty)return console.log("No questions found. Skipping prediction games initialization."),!1;const o=i.docs.map(h=>h.id),l=["user1","user2","user3","admin"],c=mn(K);let u=0;return r.forEach(h=>{const f=h.data(),m={id:h.id,team1Id:f.team1Id,team2Id:f.team2Id};l.forEach(g=>{const v=`game-${m.id}-${g}`,y=be(K,Pr.PREDICTION_GAMES,v);c.set(y,{id:v,matchId:m.id,userId:g,title:`Prediction for ${m.team1Id} vs ${m.team2Id}`,description:`Make your predictions for the match between ${m.team1Id} and ${m.team2Id}`,isActive:!0,questionIds:o,createdAt:$e.now(),updatedAt:$e.now()}),u++})}),await c.commit(),console.log(`Added ${u} prediction games to Firestore`),!0}catch(t){return console.error("Error initializing prediction games collection:",t),!1}},gT={},oX=`rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Common functions
    function isAuthenticated() {
      return request.auth != null;
    }
    
    function isAdmin() {
      return isAuthenticated() && 
        exists(/databases/$(database)/documents/users/$(request.auth.uid)) &&
        get(/databases/$(database)/documents/users/$(request.auth.uid)).data.role == 'admin';
    }
    
    function isOwner(userId) {
      return isAuthenticated() && request.auth.uid == userId;
    }
    
    // Teams collection - Read: all, Write: admin only
    match /teams/{teamId} {
      allow read: if true;
      allow write: if isAdmin();
    }
    
    // Players collection - Read: all, Write: admin only
    match /players/{playerId} {
      allow read: if true;
      allow write: if isAdmin();
    }
    
    // Matches collection - Read: all, Write: admin only
    match /matches/{matchId} {
      allow read: if true;
      allow write: if isAdmin();
    }
    
    // Users collection - Read: owner/admin, Write: admin only (except own profile)
    match /users/{userId} {
      allow read: if isOwner(userId) || isAdmin();
      allow create: if isAuthenticated();
      allow update: if isOwner(userId) || isAdmin();
      allow delete: if isAdmin();
    }
    
    // Questions collection - Read: all, Write: admin only
    match /questions/{questionId} {
      allow read: if true;
      allow write: if isAdmin();
    }
    
    // PredictionGames collection - Read: all, Write: admin only
    match /predictionGames/{gameId} {
      allow read: if true;
      allow create, update, delete: if isAdmin();
    }
    
    // PredictionAnswers collection - Read: owner/admin, Write: owner (create/update) or admin
    match /predictionAnswers/{answerId} {
      allow read: if isAuthenticated() && (
        resource.data.userId == request.auth.uid || isAdmin()
      );
      allow create: if isAuthenticated() && request.resource.data.userId == request.auth.uid;
      allow update: if isAuthenticated() && (
        resource.data.userId == request.auth.uid || isAdmin()
      );
      allow delete: if isAdmin();
    }
    
    // Prediction questions - public read, admin write
    match /predictionQuestions/{questionId} {
      allow read: if true;
      allow write: if isAdmin();
    }
    
    // Leaderboards - public read, admin write
    match /leaderboards/{leaderboardId} {
      allow read: if true;
      allow write: if isAdmin();
      
      // Leaderboard entries - public read, admin write
      match /leaderboardEntries/{entryId} {
        allow read: if true;
        allow write: if isAdmin();
      }
    }
  }
}`,aX=()=>{try{const t=gT.join(process.cwd(),"firestore.rules");return gT.writeFileSync(t,oX),console.log(`Firestore rules written to ${t}`),!0}catch(t){return console.error("Error generating Firestore rules:",t),!1}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function lX(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{u(r.next(h))}catch(f){o(f)}}function c(h){try{u(r.throw(h))}catch(f){o(f)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(t,[])).next())})}function cX(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(h){return c([u,h])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(h){u=[6,h],s=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _l=function(){return _l=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_l.apply(this,arguments)},oO=function(t){return{loading:t==null,value:t}},uX=function(){return function(t,e){switch(e.type){case"error":return _l(_l({},t),{error:e.error,loading:!1,value:void 0});case"reset":return oO(e.defaultValue);case"value":return _l(_l({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},dX=function(t){var e=t?t():void 0,n=p.useReducer(uX(),oO(e)),r=n[0],s=n[1],i=p.useCallback(function(){var c=t?t():void 0;s({type:"reset",defaultValue:c})},[t]),o=p.useCallback(function(c){s({type:"error",error:c})},[]),l=p.useCallback(function(c){s({type:"value",value:c})},[]);return p.useMemo(function(){return{error:r.error,loading:r.loading,reset:i,setError:o,setValue:l,value:r.value}},[r.error,r.loading,i,o,l,r.value])},hX=function(t,e){var n=dX(function(){return t.currentUser}),r=n.error,s=n.loading,i=n.setError,o=n.setValue,l=n.value;return p.useEffect(function(){var c=oR(t,function(u){return lX(void 0,void 0,void 0,function(){var h;return cX(this,function(f){switch(f.label){case 0:return[3,4];case 1:return f.trys.push([1,3,,4]),[4,e.onUserChanged(u)];case 2:return f.sent(),[3,4];case 3:return h=f.sent(),i(h),[3,4];case 4:return o(u),[2]}})})},i);return function(){c()}},[t]),[l,s,r]};const fX=()=>{const[t,e]=hX(Nr),n=nr(),[r,s]=p.useState(!1),[i,o]=p.useState(!1),[l,c]=p.useState(null),[u,h]=p.useState("initialize"),f=async()=>t?!0:(n("/login"),!1),m=async()=>{if(!await f()){c({success:!1,message:"You do not have permission to initialize the database."});return}s(!0),c(null);try{const y=await eX();c(y?{success:!0,message:"Database initialized successfully! Sample data has been added to Firestore."}:{success:!1,message:"Failed to initialize database. Check console for errors."})}catch(y){console.error("Error initializing database:",y),c({success:!1,message:`Error initializing database: ${y instanceof Error?y.message:"Unknown error"}`})}finally{s(!1)}},g=async()=>{if(!await f()){c({success:!1,message:"You do not have permission to generate security rules."});return}o(!0),c(null);try{const y=aX();c(y?{success:!0,message:"Firestore security rules generated successfully! The rules file has been created in the project root directory."}:{success:!1,message:"Failed to generate security rules. Check console for errors."})}catch(y){console.error("Error generating security rules:",y),c({success:!1,message:`Error generating security rules: ${y instanceof Error?y.message:"Unknown error"}`})}finally{o(!1)}};return e?a.jsx(Jt,{children:a.jsx("div",{className:"container mx-auto py-8 flex justify-center items-center",children:a.jsx(Kt,{className:"h-8 w-8 animate-spin text-primary"})})}):t?a.jsx(Jt,{children:a.jsx("div",{className:"container mx-auto py-8",children:a.jsxs(ht,{className:"max-w-2xl mx-auto",children:[a.jsxs(bt,{children:[a.jsx(Tt,{children:"Firestore Database Management"}),a.jsx(zt,{children:"Initialize your Firestore database with sample data and security rules for the IPL 2025 prediction app."})]}),a.jsxs(gt,{children:[a.jsxs(Ur,{value:u,onValueChange:h,children:[a.jsxs(Er,{className:"w-full mb-6",children:[a.jsx(rt,{value:"initialize",className:"flex-1",children:"Initialize Database"}),a.jsx(rt,{value:"security",className:"flex-1",children:"Security Rules"})]}),a.jsxs(pt,{value:"initialize",className:"space-y-4",children:[a.jsxs("div",{className:"bg-amber-50 border border-amber-200 p-4 rounded-md",children:[a.jsxs("h3",{className:"text-amber-800 font-semibold flex items-center",children:[a.jsx(fa,{className:"h-5 w-5 mr-2"}),"Warning"]}),a.jsx("p",{className:"text-amber-700 mt-1",children:"This action will add sample data to your Firestore database. If collections already exist, this may add duplicate data. Use this only for initial setup or testing purposes."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"text-sm font-medium",children:"This will initialize the following collections:"}),a.jsxs("ul",{className:"list-disc pl-5 text-sm space-y-1",children:[a.jsx("li",{children:"Teams - All 10 IPL teams with their branding"}),a.jsx("li",{children:"Players - Key players for each team"}),a.jsx("li",{children:"Matches - Schedule of upcoming IPL 2025 matches"}),a.jsx("li",{children:"Questions - Standard prediction questions"}),a.jsx("li",{children:"PredictionGames - Match-specific prediction games"})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx(Se,{onClick:m,disabled:r,className:"w-full",children:r?a.jsxs(a.Fragment,{children:[a.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Initializing..."]}):"Initialize Database"})})]}),a.jsxs(pt,{value:"security",className:"space-y-4",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-md",children:[a.jsxs("h3",{className:"text-blue-800 font-semibold flex items-center",children:[a.jsx(xA,{className:"h-5 w-5 mr-2"}),"Security Rules"]}),a.jsx("p",{className:"text-blue-700 mt-1",children:"Generate Firestore security rules for your application. These rules will define who can read and write data in your Firestore database."}),a.jsxs("p",{className:"text-blue-700 mt-2",children:["The rules will be saved to a file called ",a.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"firestore.rules"})," in the project root directory."]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx(Se,{onClick:g,disabled:i,className:"w-full",variant:"outline",children:i?a.jsxs(a.Fragment,{children:[a.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating Rules..."]}):"Generate Security Rules"})})]})]}),l&&a.jsxs(yr,{variant:l.success?"default":"destructive",className:"mt-6",children:[a.jsxs("div",{className:"flex items-center",children:[l.success?a.jsx(pA,{className:"h-5 w-5 mr-2"}):a.jsx(fa,{className:"h-5 w-5 mr-2"}),a.jsx(es,{children:l.success?"Success":"Error"})]}),a.jsx(vr,{className:"mt-2",children:l.message})]})]}),a.jsx(Va,{className:"flex justify-between",children:a.jsx(Se,{variant:"outline",onClick:()=>n("/admin"),children:"Back to Admin"})})]})})}):(n("/login"),null)};function mX(){const{toast:t}=yn(),[e,n]=p.useState(!1),[r,s]=p.useState(!1),[i,o]=p.useState(null),l=async()=>{n(!0),o(null);try{await Qb(),s(!0),t({title:"Questions Refreshed",description:"The prediction questions have been refreshed successfully. Please reload any open pages to see the changes."})}catch(u){console.error("Error refreshing questions:",u),o("Failed to refresh the questions. Check console for details."),t({title:"Error",description:"Failed to refresh the questions. Please try again.",variant:"destructive"})}finally{n(!1)}},c=async()=>{n(!0),o(null);try{await xg(),s(!0),t({title:"Questions Seeded",description:"The prediction questions have been seeded successfully. Please reload any open pages to see the changes."})}catch(u){console.error("Error seeding questions:",u),o("Failed to seed the questions. Check console for details."),t({title:"Error",description:"Failed to seed the questions. Please try again.",variant:"destructive"})}finally{n(!1)}};return a.jsx(Jt,{children:a.jsxs("div",{className:"container py-8 max-w-lg",children:[a.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Database Maintenance"}),a.jsxs(ht,{className:"mb-6",children:[a.jsxs(bt,{children:[a.jsxs(Tt,{className:"flex items-center",children:[a.jsx(Gv,{className:"mr-2 h-5 w-5"}),"Refresh Questions Database"]}),a.jsx(zt,{children:"Use this utility to refresh the questions in the Firestore database. This will delete all existing questions and create new ones with the latest definitions."})]}),a.jsx(gt,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx(Se,{onClick:l,disabled:e,className:"w-full",children:e?a.jsxs(a.Fragment,{children:[a.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Refreshing Database..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Us,{className:"mr-2 h-4 w-4"}),"Force Refresh All Questions"]})}),a.jsx(Se,{onClick:c,variant:"outline",disabled:e,className:"w-full",children:e?a.jsxs(a.Fragment,{children:[a.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Seeding Database..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Us,{className:"mr-2 h-4 w-4"}),"Seed Questions (Keep Existing)"]})})]}),r&&!i&&a.jsxs("div",{className:"bg-green-50 p-3 rounded-md flex items-center",children:[a.jsx(ha,{className:"text-green-500 mr-2 h-5 w-5"}),a.jsx("p",{className:"text-green-700 text-sm",children:"Database refreshed successfully!"})]}),i&&a.jsxs("div",{className:"bg-red-50 p-3 rounded-md flex items-start",children:[a.jsx(eF,{className:"text-red-500 mr-2 h-5 w-5 flex-shrink-0 mt-0.5"}),a.jsx("p",{className:"text-red-700 text-sm",children:i})]})]})})]}),a.jsx("div",{className:"text-sm text-gray-500",children:a.jsx("p",{children:"Note: After refreshing the database, you may need to reload any open pages to see the updated questions."})})]})})}const pX=new _$;Wj().catch(t=>console.error("Failed to initialize logging control:",t));const gX=()=>{const[t,e]=p.useState(!0),[n,r]=p.useState(null);return p.useEffect(()=>{(async()=>{try{await ZW(),e(!1)}catch(i){console.error("Failed to initialize Firebase:",i),r(i),e(!1)}})()},[]),t?a.jsx("div",{className:"flex h-screen w-full items-center justify-center bg-slate-50",children:a.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),a.jsx("p",{className:"text-lg font-medium text-gray-700",children:"Initializing application..."})]})}):n?a.jsx("div",{className:"flex h-screen w-full items-center justify-center bg-slate-50",children:a.jsxs("div",{className:"w-full max-w-md p-6 bg-white rounded-lg shadow-md",children:[a.jsx("h1",{className:"text-xl font-bold text-red-600 mb-4",children:"Failed to Initialize Application"}),a.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-4 mb-4",children:a.jsx("p",{className:"text-sm text-red-800",children:n.message})}),a.jsx("p",{className:"text-gray-600",children:"Please check your network connection and Azure Key Vault configuration, then try refreshing the page."})]})}):a.jsx(S$,{client:pX,children:a.jsx(e7,{children:a.jsxs(Z3,{children:[a.jsx(JF,{}),a.jsx(N5,{}),a.jsx(wU,{children:a.jsxs(fU,{children:[a.jsx(Mn,{path:"/",element:a.jsx(VG,{})}),a.jsx(Mn,{path:"/matches",element:a.jsx(HG,{})}),a.jsx(Mn,{path:"/matches/:id",element:a.jsx(YQ,{})}),a.jsx(Mn,{path:"/leaderboard",element:a.jsx(XQ,{})}),a.jsx(Mn,{path:"/matches/:id/leaderboard",element:a.jsx(nY,{})}),a.jsx(Mn,{path:"/register",element:a.jsx(fY,{})}),a.jsx(Mn,{path:"/profile",element:a.jsx(pY,{})}),a.jsx(Mn,{path:"/notifications",element:a.jsx(yY,{})}),a.jsx(Mn,{path:"/admin",element:a.jsx(YY,{})}),a.jsx(Mn,{path:"/admin/initialize-database",element:a.jsx(fX,{})}),a.jsx(Mn,{path:"/admin/refresh-database",element:a.jsx(mX,{})}),a.jsx(Mn,{path:"/teams",element:a.jsx(XY,{})}),a.jsx(Mn,{path:"/example-match",element:a.jsx(ZY,{})}),a.jsx(Mn,{path:"*",element:a.jsx(FG,{})})]})})]})})})};$C(document.getElementById("root")).render(a.jsx(gX,{}));
